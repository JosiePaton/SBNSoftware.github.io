---
csrf-param: authenticity_token
csrf-token: MATcIM7znDeronTXzCkbX1Tg/UorGk3NiqxjQcl6CVeli6thNMNmhYAccmVDQ615sXivHrZkO+hvEnCbjM+1gg==
description: Redmine
keywords: issue,bug,tracker
lang: en
title: SPEC TDC - ICARUS operations - Fermilab Redmine
viewport: width=device-width, initial-scale=1, maximum-scale=1,
  user-scalable=no
---

::: {#wrapper}
::: {.flyout-menu .js-flyout-menu}
::: {.flyout-menu__search}
âš²
:::

::: {.flyout-menu__avatar .flyout-menu__avatar--no-avatar}
[mengel](/redmine/users/3){.user .active}
:::

### Project

[]{.js-project-menu}

### General

[]{.js-general-menu} []{.js-sidebar .flyout-menu__sidebar}

### Profile

[]{.js-profile-menu}
:::

::: {#wrapper2}
::: {#wrapper3}
::: {#top-menu}
::: {#account}
-   [My account](/redmine/my/account){.my-account}
-   [Sign out](/redmine/logout){.logout}
:::

::: {#loggedas}
Logged in as [mengel](/redmine/users/3){.user .active}
:::

-   [Home](/redmine/){.home}
-   [My page](/redmine/my/page){.my-page}
-   [Projects](/redmine/projects){.projects}
-   [Administration](/redmine/admin){.administration}
-   [Help](https://www.redmine.org/guide){.help}
:::

::: {#header}
[](#){.mobile-toggle-button .js-flyout-menu-toggle-button}

::: {#quick-search}
[Search](/redmine/projects/icarus-operations/search):

::: {#project-jump .drdn}
[ICARUS operations]{.drdn-trigger}

::: {.drdn-content}
::: {.quick-search}
:::

::: {.drdn-items .projects .selection}
[[MISER]{style="padding-left:0px;"}](/redmine/projects/miser?jump=wiki "MISER")[[Footprints
Forwarder]{style="padding-left:0px;"}](/redmine/projects/footprints-forwarder?jump=wiki "Footprints Forwarder")[[Offsite
Account
Request]{style="padding-left:0px;"}](/redmine/projects/offsite-acct-req?jump=wiki "Offsite Account Request")[[Service-NOW
SOAP]{style="padding-left:0px;"}](/redmine/projects/servicenow-soap?jump=wiki "Service-NOW SOAP")[[art]{style="padding-left:0px;"}](/redmine/projects/art?jump=wiki "art")[[art_root_io]{style="padding-left:16px;"}](/redmine/projects/art_root_io?jump=wiki "art_root_io")[[Spack
Planning]{style="padding-left:0px;"}](/redmine/projects/spack-planning?jump=wiki "Spack Planning")[[Compute
Services
Tools]{style="padding-left:0px;"}](/redmine/projects/scd-cst?jump=wiki "Compute Services Tools")[[FIFE]{style="padding-left:0px;"}](/redmine/projects/fife?jump=wiki "FIFE")[[HEPCloud
Decision
Engine]{style="padding-left:0px;"}](/redmine/projects/decisionengine?jump=wiki "HEPCloud Decision Engine")[[IFront]{style="padding-left:0px;"}](/redmine/projects/ifront?jump=wiki "IFront")[[JobSub]{style="padding-left:0px;"}](/redmine/projects/jobsub?jump=wiki "JobSub")[[LAr-Continuous-Integration]{style="padding-left:0px;"}](/redmine/projects/lar-ci?jump=wiki "LAr-Continuous-Integration")[[uBooNE
code]{style="padding-left:0px;"}](/redmine/projects/uboonecode?jump=wiki "uBooNE code")[[CC1pi]{style="padding-left:16px;"}](/redmine/projects/cc1pi?jump=wiki "CC1pi")[[UBooNE
alg]{style="padding-left:16px;"}](/redmine/projects/uboonealg?jump=wiki "UBooNE alg")[[uBAna]{style="padding-left:16px;"}](/redmine/projects/ubana?jump=wiki "uBAna")[[uBCRT]{style="padding-left:16px;"}](/redmine/projects/ubcrt?jump=wiki "uBCRT")[[uBCV]{style="padding-left:16px;"}](/redmine/projects/ubcv?jump=wiki "uBCV")[[uBCore]{style="padding-left:16px;"}](/redmine/projects/ubcore?jump=wiki "uBCore")[[uBEvt]{style="padding-left:16px;"}](/redmine/projects/ubevt?jump=wiki "uBEvt")[[uBLite]{style="padding-left:16px;"}](/redmine/projects/ublite?jump=wiki "uBLite")[[uBObj]{style="padding-left:16px;"}](/redmine/projects/ubobj?jump=wiki "uBObj")[[uBRaw]{style="padding-left:16px;"}](/redmine/projects/ubraw?jump=wiki "uBRaw")[[uBReco]{style="padding-left:16px;"}](/redmine/projects/ubreco?jump=wiki "uBReco")[[uBSim]{style="padding-left:16px;"}](/redmine/projects/ubsim?jump=wiki "uBSim")[[uBXSec]{style="padding-left:16px;"}](/redmine/projects/ubxsec?jump=wiki "uBXSec")[[Continuous
Integration
(CI)]{style="padding-left:0px;"}](/redmine/projects/ci?jump=wiki "Continuous Integration (CI)")[[art_ci]{style="padding-left:16px;"}](/redmine/projects/art_ci?jump=wiki "art_ci")[[genie_ci]{style="padding-left:16px;"}](/redmine/projects/genie_ci?jump=wiki "genie_ci")[[glideinwms_ci]{style="padding-left:16px;"}](/redmine/projects/glideinwms_ci?jump=wiki "glideinwms_ci")[[lar_ci]{style="padding-left:16px;"}](/redmine/projects/lar_ci?jump=wiki "lar_ci")[[minerva_ci]{style="padding-left:16px;"}](/redmine/projects/minerva_ci?jump=wiki "minerva_ci")[[nova_ci]{style="padding-left:16px;"}](/redmine/projects/nova_ci?jump=wiki "nova_ci")[[CVDB]{style="padding-left:0px;"}](/redmine/projects/cvdb?jump=wiki "CVDB")[[Data
Analysis as a Service
Musings]{style="padding-left:0px;"}](/redmine/projects/daaas_musings?jump=wiki "Data Analysis as a Service Musings")[[DCAFI]{style="padding-left:0px;"}](/redmine/projects/dcafi?jump=wiki "DCAFI")[[ProtoDUNE
Data
Management]{style="padding-left:0px;"}](/redmine/projects/protodune-data-management?jump=wiki "ProtoDUNE Data Management")[[Fermi
Tape
Tools]{style="padding-left:0px;"}](/redmine/projects/ftt?jump=wiki "Fermi Tape Tools")[[Fermi
Software
Distribution]{style="padding-left:0px;"}](/redmine/projects/fermi-soft-distrib?jump=wiki "Fermi Software Distribution")[[upd]{style="padding-left:16px;"}](/redmine/projects/upd?jump=wiki "upd")[[ups]{style="padding-left:16px;"}](/redmine/projects/ups?jump=wiki "ups")[[Fermi
Redmine]{style="padding-left:0px;"}](/redmine/projects/fermi-redmine?jump=wiki "Fermi Redmine")[[Projects
for Monitoring Redmine
Health]{style="padding-left:16px;"}](/redmine/projects/test-p1?jump=wiki "Projects for Monitoring Redmine Health")[[test-git]{style="padding-left:32px;"}](/redmine/projects/test-git?jump=wiki "test-git")[[test-svn]{style="padding-left:32px;"}](/redmine/projects/test-svn?jump=wiki "test-svn")[[redmine-lib]{style="padding-left:16px;"}](/redmine/projects/redmine-lib?jump=wiki "redmine-lib")[[Jira2Snow]{style="padding-left:0px;"}](/redmine/projects/jira2snow?jump=wiki "Jira2Snow")[[Fifemon]{style="padding-left:0px;"}](/redmine/projects/fifemon?jump=wiki "Fifemon")[[LBNF
Beam
Simulation]{style="padding-left:0px;"}](/redmine/projects/lbne-beamsim?jump=wiki "LBNF Beam Simulation")[[maaws]{style="padding-left:0px;"}](/redmine/projects/maaws?jump=wiki "maaws")[[mediawiki2textile]{style="padding-left:0px;"}](/redmine/projects/mediawiki2textile?jump=wiki "mediawiki2textile")[[MeetingMaker
to
Exchange]{style="padding-left:0px;"}](/redmine/projects/mm-to-ex?jump=wiki "MeetingMaker to Exchange")[[MINERvA]{style="padding-left:0px;"}](/redmine/projects/minerva?jump=wiki "MINERvA")[[MINERvA
Software]{style="padding-left:16px;"}](/redmine/projects/minerva-sw?jump=wiki "MINERvA Software")[[MINERvA
Software
Infrastructure]{style="padding-left:16px;"}](/redmine/projects/mnvsoftinfra?jump=wiki "MINERvA Software Infrastructure")[[PlotUtils
Management]{style="padding-left:16px;"}](/redmine/projects/plotutils-management?jump=wiki "PlotUtils Management")[[Muon
g-2]{style="padding-left:0px;"}](/redmine/projects/g-2?jump=wiki "Muon g-2")[[g-2
TWiki
Conversion]{style="padding-left:16px;"}](/redmine/projects/gm2twikiconv?jump=wiki "g-2 TWiki Conversion")[[gm2aux]{style="padding-left:16px;"}](/redmine/projects/gm2aux?jump=wiki "gm2aux")[[gm2viz]{style="padding-left:16px;"}](/redmine/projects/gm2viz?jump=wiki "gm2viz")[[NOvA-SAM]{style="padding-left:0px;"}](/redmine/projects/nova_sam?jump=wiki "NOvA-SAM")[[NOvA]{style="padding-left:0px;"}](/redmine/projects/nova?jump=wiki "NOvA")[[CHEP
2015
Papers]{style="padding-left:0px;"}](/redmine/projects/nova_chep2015_papers?jump=wiki "CHEP 2015 Papers")[[Production
Operations Management Service
(POMS)]{style="padding-left:0px;"}](/redmine/projects/prod_mgmt_db?jump=wiki "Production Operations Management Service (POMS)")[[Recocert
Framework]{style="padding-left:0px;"}](/redmine/projects/recocert-framework?jump=wiki "Recocert Framework")[[Scientific
Data
Management]{style="padding-left:0px;"}](/redmine/projects/scientific-data-management?jump=wiki "Scientific Data Management")[[REX]{style="padding-left:16px;"}](/redmine/projects/rex?jump=wiki "REX")[[IF
Data Handling Client Tools
(ifdhc)]{style="padding-left:32px;"}](/redmine/projects/ifdhc?jump=wiki "IF Data Handling Client Tools (ifdhc)")[[CPN]{style="padding-left:48px;"}](/redmine/projects/ifdhcpn?jump=wiki "CPN")[[fife_utils]{style="padding-left:48px;"}](/redmine/projects/fife_utils?jump=wiki "fife_utils")[[FIFE
Utils
Demo]{style="padding-left:64px;"}](/redmine/projects/fife-utils-demo?jump=wiki "FIFE Utils Demo")[[IFDH
Art
interface]{style="padding-left:48px;"}](/redmine/projects/ifdh-art?jump=wiki "IFDH Art interface")[[NuConDB-client]{style="padding-left:48px;"}](/redmine/projects/nucondb?jump=wiki "NuConDB-client")[[numsg]{style="padding-left:48px;"}](/redmine/projects/numsg?jump=wiki "numsg")[[REX-Cert-db]{style="padding-left:32px;"}](/redmine/projects/rex-cert-db?jump=wiki "REX-Cert-db")[[REXINT]{style="padding-left:32px;"}](/redmine/projects/rexint?jump=wiki "REXINT")[[SAM]{style="padding-left:16px;"}](/redmine/projects/sam?jump=wiki "SAM")[[SAM-MAIN]{style="padding-left:32px;"}](/redmine/projects/sam-main?jump=wiki "SAM-MAIN")[[Miscellaneous
SAM tools and
scripts]{style="padding-left:48px;"}](/redmine/projects/sam-misc?jump=wiki "Miscellaneous SAM tools and scripts")[[NOVA
SAM
Cookbook]{style="padding-left:48px;"}](/redmine/projects/nova-sam-cookbook?jump=wiki "NOVA SAM Cookbook")[[Fermi
File Transfer
Service]{style="padding-left:48px;"}](/redmine/projects/filetransferservice?jump=wiki "Fermi File Transfer Service")[[SAM
build
util]{style="padding-left:48px;"}](/redmine/projects/sam-util?jump=wiki "SAM build util")[[SAM
C++
servers]{style="padding-left:48px;"}](/redmine/projects/sam-cpp-servers?jump=wiki "SAM C++ servers")[[sam_idl_cpplib]{style="padding-left:64px;"}](/redmine/projects/sam-idl-cpplib?jump=wiki "sam_idl_cpplib")[[sam_lib]{style="padding-left:64px;"}](/redmine/projects/sam-lib?jump=wiki "sam_lib")[[SAM
CORBA DB
server]{style="padding-left:48px;"}](/redmine/projects/sam-python-servers?jump=wiki "SAM CORBA DB server")[[SAM
dataset definition
editor]{style="padding-left:64px;"}](/redmine/projects/sam-def-editor?jump=wiki "SAM dataset definition editor")[[SAM
python
client]{style="padding-left:64px;"}](/redmine/projects/sam-python-client?jump=wiki "SAM python client")[[sam_common_pylib]{style="padding-left:64px;"}](/redmine/projects/sam-common-pylib?jump=wiki "sam_common_pylib")[[sam_idl_pylib]{style="padding-left:64px;"}](/redmine/projects/sam-idl-pylib?jump=wiki "sam_idl_pylib")[[SAM
Dataset
Replicator]{style="padding-left:48px;"}](/redmine/projects/sam_data_replicator?jump=wiki "SAM Dataset Replicator")[[SAM
DDL]{style="padding-left:48px;"}](/redmine/projects/sam-ddl?jump=wiki "SAM DDL")[[SAM
Metrics]{style="padding-left:48px;"}](/redmine/projects/sam-metrics?jump=wiki "SAM Metrics")[[SAM
Oracle
Database]{style="padding-left:48px;"}](/redmine/projects/sam-oracle-db?jump=wiki "SAM Oracle Database")[[SAM
Web
client]{style="padding-left:48px;"}](/redmine/projects/sam-web-client?jump=wiki "SAM Web client")[[SAM
Web
Registry]{style="padding-left:48px;"}](/redmine/projects/sam-web-registry?jump=wiki "SAM Web Registry")[[SAM
Web
services]{style="padding-left:48px;"}](/redmine/projects/sam-web?jump=wiki "SAM Web services")[[Sam_cp
replacement]{style="padding-left:48px;"}](/redmine/projects/sam-cp?jump=wiki "Sam_cp replacement")[[SAM
CORBA
IDL]{style="padding-left:48px;"}](/redmine/projects/sam-idl?jump=wiki "SAM CORBA IDL")[[SAM
station]{style="padding-left:48px;"}](/redmine/projects/sam-station?jump=wiki "SAM station")[[SAM
station
monitor]{style="padding-left:48px;"}](/redmine/projects/sam-station-monitor?jump=wiki "SAM station monitor")[[sam_protobuf]{style="padding-left:48px;"}](/redmine/projects/sam-protobuf?jump=wiki "sam_protobuf")[[XSL
Master
Config]{style="padding-left:48px;"}](/redmine/projects/xsl-master-config?jump=wiki "XSL Master Config")[[Simons
Foundation Data
Management]{style="padding-left:16px;"}](/redmine/projects/simons-dm?jump=wiki "Simons Foundation Data Management")[[Simons-internal]{style="padding-left:32px;"}](/redmine/projects/simons-internal?jump=wiki "Simons-internal")[[LibWDA]{style="padding-left:0px;"}](/redmine/projects/libwda?jump=wiki "LibWDA")[[Scientist
Survey
(Ruby)]{style="padding-left:0px;"}](/redmine/projects/scientist-survey-rub?jump=wiki "Scientist Survey (Ruby)")[[Tester
]{style="padding-left:0px;"}](/redmine/projects/tester?jump=wiki "Tester ")[[Distributed
Computing
Support]{style="padding-left:0px;"}](/redmine/projects/discompsupp?jump=wiki "Distributed Computing Support")[[project-py]{style="padding-left:0px;"}](/redmine/projects/project-py?jump=wiki "project-py")[[Spack
Infrastructure]{style="padding-left:0px;"}](/redmine/projects/spack-infrastructure?jump=wiki "Spack Infrastructure")
:::

::: {.drdn-items .all-projects .selection}
[All Projects](/redmine/projects?jump=wiki)
:::
:::
:::
:::

# [[ICARUS](/redmine/projects/icarus?jump=wiki){.root}[ Â» ]{.separator}]{.breadcrumbs}[ICARUS operations]{.current-project}

::: {#main-menu .tabs}
-   [+](#){#new-object .new-object}
    -   [New
        issue](/redmine/projects/icarus-operations/issues/new){.new-issue-sub}
    -   [New
        category](/redmine/projects/icarus-operations/issue_categories/new){.new-issue-category}
    -   [New
        version](/redmine/projects/icarus-operations/versions/new){.new-version}
    -   [Log
        time](/redmine/projects/icarus-operations/time_entries/new){.new-timelog}
    -   [Add
        news](/redmine/projects/icarus-operations/news/new){.new-news}
    -   [New
        document](/redmine/projects/icarus-operations/documents/new){.new-document}
    -   [New wiki
        page](/redmine/projects/icarus-operations/wiki/new){.new-wiki-page}
    -   [New
        file](/redmine/projects/icarus-operations/files/new){.new-file}
-   [Overview](/redmine/projects/icarus-operations){.overview}
-   [Activity](/redmine/projects/icarus-operations/activity){.activity}
-   [Issues](/redmine/projects/icarus-operations/issues){.issues}
-   [Spent
    time](/redmine/projects/icarus-operations/time_entries){.time-entries}
-   [Gantt](/redmine/projects/icarus-operations/issues/gantt){.gantt}
-   [Calendar](/redmine/projects/icarus-operations/issues/calendar){.calendar}
-   [News](/redmine/projects/icarus-operations/news){.news}
-   [Documents](/redmine/projects/icarus-operations/documents){.documents}
-   [Wiki](/redmine/projects/icarus-operations/wiki){.wiki .selected}
-   [Files](/redmine/projects/icarus-operations/files){.files}
-   [Repository](/redmine/projects/icarus-operations/repository){.repository}
-   [Settings](/redmine/projects/icarus-operations/settings){.settings}

::: {.tabs-buttons style="display:none;"}
:::
:::
:::

::: {#main}
::: {#sidebar}
### Wiki

-   [Start page](/redmine/projects/icarus-operations/wiki)
-   [Index by title](/redmine/projects/icarus-operations/wiki/index)
-   [Index by date](/redmine/projects/icarus-operations/wiki/date_index)
:::

::: {#content}
::: {.contextual}
[New wiki page](/redmine/projects/icarus-operations/wiki/new){.icon
.icon-add}
[Edit](/redmine/projects/icarus-operations/wiki/SPEC_TDC/edit){.icon
.icon-edit}
[Watch](/redmine/watchers/watch?object_id=29757&object_type=wiki_page){.wiki_page-29757-watcher
.icon .icon-fav-off}
[Lock](/redmine/projects/icarus-operations/wiki/SPEC_TDC/protect?protected=1){.icon
.icon-lock}
[Rename](/redmine/projects/icarus-operations/wiki/SPEC_TDC/rename){.icon
.icon-move}
[Delete](/redmine/projects/icarus-operations/wiki/SPEC_TDC){.icon
.icon-del}
[History](/redmine/projects/icarus-operations/wiki/SPEC_TDC/history){.icon
.icon-history}
:::

[White Rabbit system
Wiki](/redmine/projects/icarus-operations/wiki/White_Rabbit_system_Wiki)
Â»

::: {.wiki .wiki-page}
[]{#SPEC-TDCh1-SPEC-TDC}

# SPEC TDC h1. SPEC TDC[Â¶](#SPEC-TDCh1-SPEC-TDC){.wiki-anchor}

The SPEC TDC card is mounted on a FMC card in the bach of
sbnd-daq24.fnal.gov

See the FMC TDC User\'s Manual for details on gettin/compiling TDC
software and testing\
( \~sbnddaq/Documents/fmc-tdc.pdf )

a\) get the TDC sotware from the CERN ohwr.org repository

    git clone git://ohwr.org/fmc-projects/fmc-tdc/fmc-tdc-sw.git
       cd fmc-tdc-sw
       git submodule update --init    (to get all dependencies, ZIO and fmc-bus )

a1) download the gateware binary files from the latest release

<http://www.ohwr.org/projects/fmc-tdc-1ns-5cha-gw/wiki/Spec_tdc_release_7_0>

wr_spec_tdc_17012017_rc2.bin

NOTE: unfortunately this file DID NOT WORK\
so we contacted the CERN experts and they sent us the latest gateware
file

~~rw-r\--r-~~ 1 torretta sbnd 1486616 Mar 8 09:15
wr_spec_tdc_08032017.bin

AND THIS IS THE ONE THAT NEEDS TO BE LOADED INTO THE KERNEL

    2) this   .bin file needs to be copied to /lib/firmware/fmc

~~bash-4.2\$ ls -l /lib/firmware/fmc\
total 7340\
lrwxrwxrwx 1 root root 28 Feb 21 12:20 spec-fmc-tdc.bin -\>
wr_spec_tdc_17012017_rc2.bin\
-rw-r\--r-~~ 1 root root 1484404 Feb 20 15:27 spec-init.bin\
lrwxrwxrwx 1 root root 25 Feb 20 17:23 wr_nic_dio.bin ~~\>
wr_nic_dio.bin-2014-02-14\
-rw-r\--r-~~ 1 root root 1484960 Feb 20 17:22 wr_nic_dio.bin-2014-02-14\
lrwxrwxrwx 1 root root 29 Feb 20 17:23 wr_nic_dio-wrc.bin ~~\>
wr_nic_dio-wrc.bin-2014-02-14\
-rw-r\--r-~~ 1 root root 78060 Feb 20 17:22
wr_nic_dio-wrc.bin-2014-02-14\
~~rw-r\--r-~~ 1 torretta sbnd 1486616 Mar 8 09:15
wr_spec_tdc_08032017.bin\
~~rw-r\--r-~~ 1 root root 1486064 Jan 24 12:20
wr_spec_tdc_17012017_rc2.bin\
~~rw-r\--r-~~ 1 root root 1485788 Jan 11 12:51
wr_spec_tdc_release_6\_0.bin\
-bash-4.2\$

b\) compile/make TDC code\
cd \~fmc-tdc-sw\
ksu\
make prereq_install\
make install

c\) load kernels

    ksu
       modprobe spec
       modprobe -v fmc-tdc gateware=fmc/wr_spec_tdc_08032017.bin

d\) dmesg (to check that there are no errors):

\[163615.673603\] spec 0000:0c:00.0: remove\
\[163647.533101\] zio-core had been loaded\
\[163656.700449\] spec 0000:0c:00.0: probe for device 000c:0000\
\[163656.701543\] spec 0000:0c:00.0: got file \"fmc/spec-init.bin\",
1484404 (0x16a674) bytes\
\[163656.893050\] spec 0000:0c:00.0: FPGA programming successful\
\[163657.241446\] spec 0000:0c:00.0: mezzanine 0\
\[163657.241452\] Manufacturer: CERN\
\[163657.241453\] Product name: FmcTdc1ns5cha\
\[163709.941293\] in ft_init\
\[163709.941314\] successful ft_zio_register\
\[163709.941323\] called ft_probe\
\[163709.941328\] spec 0000:0c:00.0: Gateware ()\
\[163709.941331\] spec 0000:0c:00.0: reprogramming with
fmc/wr_spec_tdc_08032017.bin\
\[ spec 0000:0c:00.0: FPGA programming successful\
\[163710.134276\] fmc_tdc FmcTdc1ns5cha-0c00: Gateware successfully
loaded\
\[163710.134278\] fmc_tdc FmcTdc1ns5cha-0c00: Un-resetting FMCs\...\
\[163710.139824\] fmc_tdc FmcTdc1ns5cha-0c00: Base addrs: core 0x42000,
irq 0x43000, 1wire 0x41000, buffer/DMA 0x45000\
\[163710.139829\] fmc_tdc FmcTdc1ns5cha-0c00: calib:
zero_offset^[0](#fn0)^ = 0 ps\
\[163710.139831\] fmc_tdc FmcTdc1ns5cha-0c00: calib:
zero_offset^[1](#fn1)^ = 86 ps\
\[163710.139833\] fmc_tdc FmcTdc1ns5cha-0c00: calib:
zero_offset^[2](#fn2)^ = 481 ps\
\[163710.139834\] fmc_tdc FmcTdc1ns5cha-0c00: calib:
zero_offset^[3](#fn3)^ = 449 ps\
\[163710.139836\] fmc_tdc FmcTdc1ns5cha-0c00: calib:
zero_offset^[4](#fn4)^ = 329 ps\
\[163710.139838\] fmc_tdc FmcTdc1ns5cha-0c00: calib: vcxo_default_tune
45175\
\[163710.139840\] fmc_tdc FmcTdc1ns5cha-0c00: calib: wr offset = 291305
ps\
\[163710.139842\] fmc_tdc FmcTdc1ns5cha-0c00: ft_acam_init: initializing
ACAM TDC\...\
\[163710.140246\] fmc_tdc FmcTdc1ns5cha-0c00: ft_acam_init: ACAM
initialization OK.\
\[163710.146098\] fmc_tdc FmcTdc1ns5cha-0c00: ft_onewire_init: Found
DS18xx sensor:\
\[163710.146099\] 28:86:33:12:06:00:00:62\
\[163710.907964\] fmc_tdc FmcTdc1ns5cha-0c00: ft_read_temp: Temperature
0x302 (12 bits: 48.125)\
\[163710.910020\] fmc_tdc FmcTdc1ns5cha-0c00: Setting TAI time to 0:0\
\[163710.910919\] tdc-1n5c tdc-1n5c-0c00: device loaded\
\[163710.910924\] spec 0000:0c:00.0: Found VIC @ 0x30000\
\[163710.911016\] successful ft_driver_register\
NOW WE CAN TRY RUNNING SOME SIMPLE CODE provided in the
\~fmc-tdc/sw/tools directory

e\) cd \~fmc-tdc-sw/tools

\[root\@sbnd-daq24 tools\]\# ./fmc-tdc-list\
Found 1 board(s):\
0c00, /dev/zio/tdc-1n5c-0c00, /sys/bus/zio/devices/tdc-1n5c-0c00\
fmctdc_exit: device /dev/zio/tdc-1n5c-0c00 was still open\
\[root\@sbnd-daq24 tools\]\#

\[root\@sbnd-daq24 tools\]\#\
\[root\@sbnd-daq24 tools\]\# ./fmc-tdc-temperature 0c00\
48.2 deg C\
\[root\@sbnd-daq24 tools\]\#

TO INITIALIZE THE CONNECTION TO THE WR YOu need to run the
\~fm-tdc-sw/spec-sw/spec-vusrt.sh code

d\) run the spec-vuart.sh code

    need to find out the WR-Periph-UART and its offset :

\[root\@sbnd-daq24 tools\]\# cat
/sys/kernel/debug/FmcTdc1ns5cha-0c00/dump_sdb\
FMC: 0000:0c:00.0 (SPEC), slot 0, device FmcTdc1ns5cha-0c00\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:00000603 WB-SPEC.CSR (00020000-0002001f)\
0000ce42:00000013 WB-VIC-Int.Control (00030000-000300ff)\
00000651:eef0b198 WB4-Bridge-GSI (bridge: 00040000)\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:00000602 WB-Onewire.Control (00041000-00041007)\
0000ce42:00000604 WB-TDC-Core-Config (00042000-000420ff)\
0000ce42:00000605 WB-FMC-TDC.EIC (00043000-0004300f)\
0000ce42:00000606 WB-I2C.Control (00044000-0004401f)\
0000ce42:00000622 WB-TDC-TsFIFO (00045000-000450ff)\
0000ce42:00000622 WB-TDC-TsFIFO (00045100-000451ff)\
0000ce42:00000622 WB-TDC-TsFIFO (00045200-000452ff)\
0000ce42:00000622 WB-TDC-TsFIFO (00045300-000453ff)\
0000ce42:00000622 WB-TDC-TsFIFO (00045400-000454ff)\
00000651:eef0b198 WB4-Bridge-GSI (bridge: 00080000)\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:66cfeb52 WB4-BlockRAM (00080000-00095fff)\
00000651:eef0b198 WB4-Bridge-GSI (bridge: 000a0000)\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:ab28633a WR-Mini-NIC (000a0000-000a00ff)\
0000ce42:650c2d4f WR-Endpoint (000a0100-000a01ff)\
0000ce42:65158dc0 WR-Soft-PLL (000a0200-000a02ff)\
0000ce42:de0d8ced WR-PPS-Generator (000a0300-000a03ff)\
0000ce42:ff07fc47 WR-Periph-Syscon (000a0400-000a04ff)\
0000ce42:e2d13d04 WR-Periph-UART (000a0500-000a05ff)\
0000ce42:779c5443 WR-Periph-1Wire (000a0600-000a06ff)\
0000ce42:779c5445 WR-Periph-AuxWB (000a0700-000a07ff)\
Synthesis repository: <http://svn.ohwr.org/fmc-tdc>\
Bitstream \'wr_spec_tdc\' synthesized 20150522 by twlostow (ISE version
147), commit 57aca088aefb\
\[root\@sbnd-daq24 tools\]\#\
LOOK at the line:\
0000ce42:e2d13d04 WR-Periph-UART (000a0500-000a05ff)

    the UART offset for the card is a0500

    f) cd ~fmc-tdc-sw/spec-sw/tools

./spec-vuart -u 0xa0500

Instructions in case of reboot of the PC with the TDC (daq24)

cd \~torretta/fmc-tdc-sw/tools

ksu

rmmod spec

rmmod fmc

modprobe spec

modprobe fmc-tdc gateware=fmc/wr_spec_tdc_08032017.bin

    dmesg  (add here dmesg next time)

To reboot type (as root):\
shutdown -r now
:::

Files (0)

::: {style="display: none;"}
::: {#wiki_add_attachment}
::: {.box}
[ [ ]{.attachments_fields} [ (Maximum size: 400 MB) ]{.add_attachment
style=""} ]{.attachments_form}
:::
:::
:::

Also available in:
[PDF](/redmine/projects/icarus-operations/wiki/SPEC_TDC.pdf){.pdf}
[HTML](/redmine/projects/icarus-operations/wiki/SPEC_TDC.html){.html}
[TXT](/redmine/projects/icarus-operations/wiki/SPEC_TDC.txt){.txt}

::: {style="clear:both;"}
:::
:::
:::
:::

::: {#ajax-indicator style="display:none;"}
Loading\...
:::

::: {#ajax-modal style="display:none;"}
:::

::: {#footer}
::: {.bgl}
::: {.bgr}
Powered by [Redmine](https://www.redmine.org/) Â© 2006-2019 Jean-Philippe
Lang
:::
:::
:::
:::
:::
