<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>icarusalg/icarusalg/Geometry/gdml/make_gdml.pl Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b5459d5962ee0861ec242f248e1b9138.html">icarusalg</a></li><li class="navelem"><a class="el" href="dir_0a161542ac6c38d5393338f90ee74641.html">icarusalg</a></li><li class="navelem"><a class="el" href="dir_5663869bacb38a5d2fb5ff1f4ae6f4c4.html">Geometry</a></li><li class="navelem"><a class="el" href="dir_27cc9b630e7d96ee4b0ab31a79816775.html">gdml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">make_gdml.pl</div>  </div>
</div><!--header-->
<div class="contents">
<a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#!/usr/bin/perl</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># Heavily revised Jan-2010 &lt;seligman@nevis.columbia.edu&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># Build a description of the detectors from gdml fragments</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor"># Use the command line arguments to give us the list of file fragments</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># that we&#39;ll zip together.  The man page for &#39;GetOptions&#39; can be read</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># with: perldoc Getopt::Long</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;use Getopt::Long;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ae4e3080662baa638a55da9ea380d24dd">GetOptions</a>( <span class="stringliteral">&quot;input|i:s&quot;</span> =&gt; \$input,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;            <span class="stringliteral">&quot;help|h&quot;</span> =&gt; \$help,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            <span class="stringliteral">&quot;output|o:s&quot;</span> =&gt; \$output);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a17f4477f7b28cdd0466b28d9447397bb">   17</a></span>&#160;<span class="keywordflow">if</span> ( <a class="code" href="find__global__symbol_8sh.html#a3a387acccfc92fdf604b2123af7ae574">defined</a> $help )</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">    # If the user requested help, print the usage notes and exit.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor"></span>    <a class="code" href="doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>();</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#aec5572c12d6e84edba88b5603733c27b">   24</a></span>&#160;<span class="keywordflow">if</span> ( ! <a class="code" href="find__global__symbol_8sh.html#a3a387acccfc92fdf604b2123af7ae574">defined</a> $input )</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">    # If the user has not used &quot;-i&quot;, then just take the first</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # non-option argument.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( $#ARGV &gt; -1 )</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        $input = $ARGV[0];</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">if</span> ( ! -<a class="code" href="condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> $input )</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;Input file $input not found\n&quot;</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <a class="code" href="doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">        # Read from STDIN</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor"></span>        $input = <span class="stringliteral">&quot;-&quot;</span>; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keywordflow">else</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a0544c3fe466e421738dae463968b70ba">   45</a></span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">    # The &quot;-i&quot; option was provided; check that the input file exists.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( ! -<a class="code" href="condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> $input )</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;Input file $input not found or cannot be read\n&quot;</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <a class="code" href="doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordflow">if</span> ( ! <a class="code" href="find__global__symbol_8sh.html#a3a387acccfc92fdf604b2123af7ae574">defined</a> $output )</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    $output = <span class="stringliteral">&quot;-&quot;</span>; # <a class="code" href="namespaceutil.html#ab81157b17422732381feb626f9be3379">write</a> to STDOUT </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"># Read the list of file fragments from an XML-formatted file. </span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># (Type &quot;perldoc XML::LibXML&quot; for how to use this package.)</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;use XML::LibXML;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"># Create an XML parser.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a147a766daa03d52576c7345fea31c945">   65</a></span>&#160;<span class="preprocessor"></span><a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a147a766daa03d52576c7345fea31c945">$parser</a> = <span class="keyword">new</span> XML::LibXML;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor"># Read the XML file. The entire contents are slurped into a DOM</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># structure.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a46127a794280dd592812c25b62af34b0">   69</a></span>&#160;<span class="preprocessor"></span><a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a46127a794280dd592812c25b62af34b0">$dom</a> = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a147a766daa03d52576c7345fea31c945">$parser</a>-&gt;parse_file($input);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor"># Note that @defFiles and @gdmlFiles are both arrays of &quot;nodes&quot;.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a08eb7343965ed7c0164df27a117688cb">   72</a></span>&#160;<span class="preprocessor"></span>@<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a08eb7343965ed7c0164df27a117688cb">defFiles</a> = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a46127a794280dd592812c25b62af34b0">$dom</a>-&gt;findnodes(<span class="stringliteral">&#39;/config/constantfiles/filename&#39;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ac9a41077e51ffdb71fecfff81f7b0334">   73</a></span>&#160;@<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ac9a41077e51ffdb71fecfff81f7b0334">gdmlFiles</a> = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a46127a794280dd592812c25b62af34b0">$dom</a>-&gt;findnodes(<span class="stringliteral">&#39;/config/gdmlfiles/filename&#39;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"># Keep track of how many constants we read in.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">   76</a></span>&#160;<span class="preprocessor"></span><a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a> = -1;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor"># Developer note: If I were slicker, I&#39;d also use XML::LibXML to read</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># in these GDML fragments. However, the files would have to be edited</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># to be strict XML, and that&#39;s more effort than it&#39;s worth. The script</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># generate_gdml.pl writes strict XML documents, but there&#39;s no</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># guarantee that this program will be used just with those</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># files.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># Build the table of variable replacements</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor"># For each node that represents a file of constants... </span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">   90</a></span>&#160;<span class="preprocessor"></span><span class="keywordflow">foreach</span> <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">$filename</a> (@<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a08eb7343965ed7c0164df27a117688cb">defFiles</a>)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    $CONSTANTS = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">$filename</a>-&gt;to_literal;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a>(CONSTANTS) or die(<span class="stringliteral">&quot;Could not open file $CONSTANTS&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">    # For each line in the file...</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">foreach</span> <a class="code" href="fix__log__debug__art211_8pl.html#aa2e1340729c72d116d2866d2bd5c756b">$line</a> (&lt;CONSTANTS&gt;) </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">        # Find the name and value as defined in a &lt;constant&gt; block; e.g.:</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        #   &lt;constant name=&quot;kInch&quot;      value=&quot;2.54&quot; /&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        # will be parsed as $name=&quot;kInch&quot; and value = &quot;2.54&quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">        # If the line begins with &quot;&lt;constant&quot;... </span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> ( <a class="code" href="fix__log__debug__art211_8pl.html#aa2e1340729c72d116d2866d2bd5c756b">$line</a> =~ /^\<a class="code" href="file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a>*\&lt;constant / )</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">            # (See &quot;perldoc perlfaq6&quot; for the definition of a non-greedy search.)</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor"></span><span class="preprocessor">            # Do a &quot;non-greedy&quot; search to get the text assigned to &#39;name&#39;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor"></span>            <a class="code" href="fix__log__debug__art211_8pl.html#aa2e1340729c72d116d2866d2bd5c756b">$line</a> =~ /<a class="code" href="sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>=<span class="stringliteral">&quot;(.*?)&quot;</span>/;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            $name = $1;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">            # Do a &quot;non-greedy&quot; search to get the text assigned to &#39;value&#39;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor"></span>            <a class="code" href="fix__log__debug__art211_8pl.html#aa2e1340729c72d116d2866d2bd5c756b">$line</a> =~ /<a class="code" href="pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>=<span class="stringliteral">&quot;(.*?)&quot;</span>/;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            $value = $1;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">            # Append to the list of constants.  Put parenthesis around</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor"></span><span class="preprocessor">            # the value, to avoid potential problems with arithmetic.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor"></span>            ++<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            $name[<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a>] = $name;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            $value[<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a>] = <span class="stringliteral">&quot;($value)&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">            # print &quot;$numberConstants: $name = $value[$numberConstants]\n&quot;; # debug</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor"></span>        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a0fe11031f1265411c06f6f1ca14b496f">close</a>(CONSTANTS);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor"># The main GDML keywords, used in tags. The order here is important:</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># No matter what order these blocks are in the sub-files, this is the</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># order in which they must be written in the final GDML output.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor"># If I were being super-slick, I&#39;d use the features of LibXML to read</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># each of these GDML sub-files, then fiddle with the elements using</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># XML manipulation routines. However, it&#39;s much simpler to treat them</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># as big globs of text.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a55bd10e3116510cf80c41fe641064494">  133</a></span>&#160;@<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a55bd10e3116510cf80c41fe641064494">keywords</a> = <a class="code" href="SubmitCommand_8pl.html#a38e7809177a9ff904de76c10104eb034">qw</a>( define materials <a class="code" href="namespacegen__crt__frags.html#a52dea5c96fc259177ff849c8749d7205">solids</a> <a class="code" href="namespacegen__crt__frags.html#a4dbbacd1c26f0638c06c76208c19b6f7">structure</a> );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor"># For each node that&#39;s a file of GDML statements...</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor"></span><span class="keywordflow">foreach</span> <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">$filename</a> ( @<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ac9a41077e51ffdb71fecfff81f7b0334">gdmlFiles</a> )</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">    # Open the file.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor"></span>    $FILE = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">$filename</a>-&gt;to_literal;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a>(FILE) or die(&quot;Could not <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a> <a class="code" href="file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $FILE <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#a566ec0b645c019fdab1b56a230a4b24d">for</a> read.&quot;);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="preprocessor"># Read the entire file into an array.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor"></span>    @<a class="code" href="file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> = &lt;FILE&gt;;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a0fe11031f1265411c06f6f1ca14b496f">close</a>(FILE);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">    # Slurp the array into a single variable.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor"></span>    $file = join(<span class="stringliteral">&quot;&quot;</span>,@file);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">foreach</span> <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a> ( @<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a55bd10e3116510cf80c41fe641064494">keywords</a> )</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">        # Search the file for a keyword block. For example, if</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        # $keyword were &quot;blorg&quot;, the following would search for</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        # &lt;blorg&gt;some text&lt;/blorg&gt; and snip it out of $file.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">while</span> ( $file =~ <a class="code" href="file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a>/(.*)\&lt;<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>\&gt;(.*?)\&lt;\/<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>\&gt;(.*)/\1\3/<a class="code" href="file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a> )</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">            # Following the above example, this would append &quot;some</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor"></span><span class="preprocessor">            # text&quot; to $keyhash{blorg}</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            $keyhash{<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>} = $keyhash{<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>} . $2;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor"># Write the final GDML file.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a1bfee291f3a36550719fb8589ffd882c">  167</a></span>&#160;<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a1bfee291f3a36550719fb8589ffd882c">$OUTPUT</a> = <span class="stringliteral">&quot;&gt;&quot;</span> . $output;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a>(OUTPUT) or die(&quot;Could not <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a> $output <a class="code" href="generate__icarus__geometry__splitwire_8pl.html#a566ec0b645c019fdab1b56a230a4b24d">for</a> writing&quot;);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor"># The preliminary material for the GDML file. This defines the GDML</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># schema and namespaces.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> OUTPUT &lt;&lt;EOF;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;&lt;?<a class="code" href="runPID_8fcl.html#a77f6b5690bb4eb62327e41e704dd651a">xml</a> <a class="code" href="namespacetriggeredEventList.html#ab29c978583198dfa6be058c898db0939">version</a>=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;&lt;<a class="code" href="namespacegen__crt__frags.html#a33004fbc472ded300bba0381e82e3fea">gdml</a> xmlns:<a class="code" href="namespacegen__crt__frags.html#a33004fbc472ded300bba0381e82e3fea">gdml</a>=<span class="stringliteral">&quot;http://cern.ch/2001/Schemas/GDML&quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      xmlns:xsi=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      xsi:noNamespaceSchemaLocation=<span class="stringliteral">&quot;GDMLSchema/gdml.xsd&quot;</span>&gt;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;EOF</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor"># Print to OUTPUT all the GDML sections, with each set of tags</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># unified, in the appropriate order.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">  183</a></span>&#160;<span class="keywordflow">foreach</span> <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a> ( @<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a55bd10e3116510cf80c41fe641064494">keywords</a> )</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> OUTPUT <span class="stringliteral">&quot;&lt;$keyword&gt;&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">    # Substitute any constants in the GDML with their numeric</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # equivalents. </span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">    # In strict GDML, this should not be necessary; according to the</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # specification, you should be able to define a constant and use</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # it in subsequent GDML statements. If you use the standard GDML</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # parser, this not a problem. ROOT, however, uses its own parser,</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # and (as of ROOT 5.16) it could not handle variables in GDML</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # expressions. So here we side-step the problem by performing our</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # own substitutions.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">    # Step through this list of constants in reverse order, to resolve</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # any dependencies.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">for</span> ( <a class="code" href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a> = <a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a>; <a class="code" href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a> &gt;= 0; --<a class="code" href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a> ) </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        $keyhash{<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>} =~<a class="code" href="file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f"> s</a>/$name[<a class="code" href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a>]/$value[<a class="code" href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a>]/<a class="code" href="decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">    # Print the edited section. </span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor"></span>    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> OUTPUT $keyhash{<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a>};</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> OUTPUT <span class="stringliteral">&quot;&lt;/$keyword&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor"># The final section of a GDML file is the &lt;setup&gt;&lt;/setup&gt; section. At</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># present, we don&#39;t define alternate setups in the same GDML file, so</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># these lines are constant.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> OUTPUT &lt;&lt;EOF;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;&lt;<a class="code" href="build-dunepdsprce_8sh.html#ae11d1f43a963b1f3c34636fa5ea634f1">setup</a> <a class="code" href="sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>=<span class="stringliteral">&quot;Default&quot;</span> version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  &lt;world ref=<span class="stringliteral">&quot;volWorld&quot;</span> /&gt;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;&lt;/<a class="code" href="build-dunepdsprce_8sh.html#ae11d1f43a963b1f3c34636fa5ea634f1">setup</a>&gt;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;&lt;/<a class="code" href="namespacegen__crt__frags.html#a33004fbc472ded300bba0381e82e3fea">gdml</a>&gt;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;EOF</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<a class="code" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a0fe11031f1265411c06f6f1ca14b496f">close</a>(OUTPUT);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a21b800c5843ac5c3e27d587b67234546">  228</a></span>&#160;<a class="code" href="namespaceevd.html#a88ebe7d3b0fe5a0525e0c916648db2ed">sub</a> <a class="code" href="doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a>()</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;Usage: $0 [-h|--help] [-i|--input &lt;xml-fragments-file&gt;] [-o|--output &lt;output-file&gt;]\n&quot;</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;       -i/--input can be omitted; if no input file, defaults to STDIN\n&quot;</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;       if -o is omitted, output goes to STDOUT\n&quot;</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a> <span class="stringliteral">&quot;       -h prints this message, then quits\n&quot;</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a3a65c080b3996f36c9ce71ea5e690585"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a3a65c080b3996f36c9ce71ea5e690585">$numberConstants</a></div><div class="ttdeci">$numberConstants</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00076">make_gdml.pl:76</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a55bd10e3116510cf80c41fe641064494"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a55bd10e3116510cf80c41fe641064494">keywords</a></div><div class="ttdeci">keywords</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00133">make_gdml.pl:133</a></div></div>
<div class="ttc" id="build-dunepdsprce_8sh_html_ae11d1f43a963b1f3c34636fa5ea634f1"><div class="ttname"><a href="build-dunepdsprce_8sh.html#ae11d1f43a963b1f3c34636fa5ea634f1">setup</a></div><div class="ttdeci">then source grid fermiapp products dune setup_dune_fermiapp sh exit else echo No setup file found exit fi setup</div><div class="ttdef"><b>Definition:</b> <a href="build-dunepdsprce_8sh_source.html#l00075">build-dunepdsprce.sh:75</a></div></div>
<div class="ttc" id="SubmitCommand_8pl_html_a38e7809177a9ff904de76c10104eb034"><div class="ttname"><a href="SubmitCommand_8pl.html#a38e7809177a9ff904de76c10104eb034">qw</a></div><div class="ttdeci">use File::Basename qw(fileparse)</div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a602a1d6ffb4c9ca08612db941b43d708"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a602a1d6ffb4c9ca08612db941b43d708">$filename</a></div><div class="ttdeci">foreach $filename(@defFiles)</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00090">make_gdml.pl:90</a></div></div>
<div class="ttc" id="runPID_8fcl_html_a77f6b5690bb4eb62327e41e704dd651a"><div class="ttname"><a href="runPID_8fcl.html#a77f6b5690bb4eb62327e41e704dd651a">xml</a></div><div class="ttdeci">process_name can override from command line with o or output proton mvapid_weights muon_all_BDT weights xml</div><div class="ttdef"><b>Definition:</b> <a href="runPID_8fcl_source.html#l00028">runPID.fcl:28</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_accc237606badc0385cb717703091fb61"><div class="ttname"><a href="generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a></div><div class="ttdeci">exit</div><div class="ttdef"><b>Definition:</b> <a href="generate__icarus__geometry__splitwire_8pl_source.html#l00430">generate_icarus_geometry_splitwire.pl:430</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a33004fbc472ded300bba0381e82e3fea"><div class="ttname"><a href="namespacegen__crt__frags.html#a33004fbc472ded300bba0381e82e3fea">gen_crt_frags.gdml</a></div><div class="ttdeci">tuple gdml</div><div class="ttdef"><b>Definition:</b> <a href="gen__crt__frags_8py_source.html#l00180">gen_crt_frags.py:180</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a46127a794280dd592812c25b62af34b0"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a46127a794280dd592812c25b62af34b0">$dom</a></div><div class="ttdeci">$dom</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00069">make_gdml.pl:69</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a79854d43ae87cec96a59d17fc4141bf0"><div class="ttname"><a href="file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a></div><div class="ttdeci">* file</div><div class="ttdef"><b>Definition:</b> <a href="file__to__url_8sh_source.html#l00069">file_to_url.sh:69</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_ae4e3080662baa638a55da9ea380d24dd"><div class="ttname"><a href="generate__icarus__geometry__splitwire_8pl.html#ae4e3080662baa638a55da9ea380d24dd">GetOptions</a></div><div class="ttdeci">GetOptions(&quot;help|h&quot;=&gt;\$help,&quot;suffix|s:s&quot;=&gt;\$suffix,&quot;output|o:s&quot;=&gt;\$output,&quot;concrete|c:s&quot;=&gt;\$thickness_over,&quot;wires|w:s&quot;=&gt;\$wires,&quot;vetocrt|v:s&quot;=&gt;\$crt)</div></div>
<div class="ttc" id="update__sources_8sh_html_a9d5114a203443f620e1c5755709c1860"><div class="ttname"><a href="update__sources_8sh.html#a9d5114a203443f620e1c5755709c1860">print</a></div><div class="ttdeci">do one_file $F done echo for F in find $TOP name CMakeLists txt print</div><div class="ttdef"><b>Definition:</b> <a href="update__sources_8sh_source.html#l00094">update_sources.sh:94</a></div></div>
<div class="ttc" id="namespaceutil_html_ab81157b17422732381feb626f9be3379"><div class="ttname"><a href="namespaceutil.html#ab81157b17422732381feb626f9be3379">util.write</a></div><div class="ttdeci">def write</div><div class="ttdef"><b>Definition:</b> <a href="util_8py_source.html#l00023">util.py:23</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a147a766daa03d52576c7345fea31c945"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a147a766daa03d52576c7345fea31c945">$parser</a></div><div class="ttdeci">$parser</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00065">make_gdml.pl:65</a></div></div>
<div class="ttc" id="doGit_8sh_html_a5684f219761d78b4f98e7b2869dd1726"><div class="ttname"><a href="doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a></div><div class="ttdeci">usage</div><div class="ttdef"><b>Definition:</b> <a href="doGit_8sh_source.html#l00021">doGit.sh:21</a></div></div>
<div class="ttc" id="fix__log__debug__art211_8pl_html_aa2e1340729c72d116d2866d2bd5c756b"><div class="ttname"><a href="fix__log__debug__art211_8pl.html#aa2e1340729c72d116d2866d2bd5c756b">$line</a></div><div class="ttdeci">my $line</div><div class="ttdef"><b>Definition:</b> <a href="fix__log__debug__art211_8pl_source.html#l00018">fix_log_debug_art211.pl:18</a></div></div>
<div class="ttc" id="namespacetriggeredEventList_html_ab29c978583198dfa6be058c898db0939"><div class="ttname"><a href="namespacetriggeredEventList.html#ab29c978583198dfa6be058c898db0939">triggeredEventList.version</a></div><div class="ttdeci">string version</div><div class="ttdef"><b>Definition:</b> <a href="triggeredEventList_8py_source.html#l00333">triggeredEventList.py:333</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_a566ec0b645c019fdab1b56a230a4b24d"><div class="ttname"><a href="generate__icarus__geometry__splitwire_8pl.html#a566ec0b645c019fdab1b56a230a4b24d">for</a></div><div class="ttdeci">for($it=0;$it&lt; $RaceTrack_number;$it++)</div><div class="ttdef"><b>Definition:</b> <a href="generate__icarus__geometry__splitwire_8pl_source.html#l01671">generate_icarus_geometry_splitwire.pl:1671</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a4dbbacd1c26f0638c06c76208c19b6f7"><div class="ttname"><a href="namespacegen__crt__frags.html#a4dbbacd1c26f0638c06c76208c19b6f7">gen_crt_frags.structure</a></div><div class="ttdeci">tuple structure</div><div class="ttdef"><b>Definition:</b> <a href="gen__crt__frags_8py_source.html#l00183">gen_crt_frags.py:183</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a52dea5c96fc259177ff849c8749d7205"><div class="ttname"><a href="namespacegen__crt__frags.html#a52dea5c96fc259177ff849c8749d7205">gen_crt_frags.solids</a></div><div class="ttdeci">tuple solids</div><div class="ttdef"><b>Definition:</b> <a href="gen__crt__frags_8py_source.html#l00182">gen_crt_frags.py:182</a></div></div>
<div class="ttc" id="find__global__symbol_8sh_html_a3a387acccfc92fdf604b2123af7ae574"><div class="ttname"><a href="find__global__symbol_8sh.html#a3a387acccfc92fdf604b2123af7ae574">defined</a></div><div class="ttdeci">then echo echo For and will not be changed by echo further linking echo echo B echo The symbol is in the uninitialized data multiple common symbols may appear with the echo same name If the symbol is defined the common echo symbols are treated as undefined references For more echo details on common see the discussion of warn common echo in *Note Linker see the discussion of warn common echo in *Note Linker such as a global int variable echo as opposed to a large global array echo echo I echo The symbol is an indirect reference to another symbol This echo is a GNU extension to the a out object file format which is echo rarely used echo echo N echo The symbol is a debugging symbol echo echo R echo The symbol is in a read only data section echo echo S echo The symbol is in an uninitialized data section for small echo objects echo echo T echo The symbol is in the the normal defined echo symbol is used with no error When a weak undefined symbol echo is linked and the symbol is not defined</div><div class="ttdef"><b>Definition:</b> <a href="find__global__symbol_8sh_source.html#l00107">find_global_symbol.sh:107</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a096ad3d3698082826189c839d7a6e46f"><div class="ttname"><a href="file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a></div><div class="ttdeci">then echo File list $list not found else cat $list while read file do echo $file sed s</div><div class="ttdef"><b>Definition:</b> <a href="file__to__url_8sh_source.html#l00060">file_to_url.sh:60</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a08eb7343965ed7c0164df27a117688cb"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a08eb7343965ed7c0164df27a117688cb">defFiles</a></div><div class="ttdeci">defFiles</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00072">make_gdml.pl:72</a></div></div>
<div class="ttc" id="TrainMVA_8sh_html_a2a733e1d898da76a70fd4fa6a52fd103"><div class="ttname"><a href="TrainMVA_8sh.html#a2a733e1d898da76a70fd4fa6a52fd103">$i</a></div><div class="ttdeci">do echo $i</div><div class="ttdef"><b>Definition:</b> <a href="TrainMVA_8sh_source.html#l00030">TrainMVA.sh:30</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_ada992225d05ddeee5841e562aea0ed20"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ada992225d05ddeee5841e562aea0ed20">$keyword</a></div><div class="ttdeci">print OUTPUT&lt;&lt; EOF;&lt;?xml version=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;&lt; gdmlxmlns:gdml=&quot;http:xmlns:xsi=&quot;http:xsi:noNamespaceSchemaLocation=&quot;GDMLSchema/gdml.xsd&quot;&gt; EOF foreach $keyword(@keywords)</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00183">make_gdml.pl:183</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a1bfee291f3a36550719fb8589ffd882c"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a1bfee291f3a36550719fb8589ffd882c">$OUTPUT</a></div><div class="ttdeci">$OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00167">make_gdml.pl:167</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a19dd16849ed641adb2aff777fdc4bd8b"><div class="ttname"><a href="sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a></div><div class="ttdeci">then echo fcl name</div><div class="ttdef"><b>Definition:</b> <a href="sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00220">sbndpoms_genfclwithrunnumber_maker.sh:220</a></div></div>
<div class="ttc" id="pmtsimulation__icarus_8fcl_html_a9fc569190f32b40862f18ac3c03a8e49"><div class="ttname"><a href="pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a></div><div class="ttdeci">temporary value</div><div class="ttdef"><b>Definition:</b> <a href="pmtsimulation__icarus_8fcl_source.html#l00158">pmtsimulation_icarus.fcl:158</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_ac9a41077e51ffdb71fecfff81f7b0334"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#ac9a41077e51ffdb71fecfff81f7b0334">gdmlFiles</a></div><div class="ttdeci">gdmlFiles</div><div class="ttdef"><b>Definition:</b> <a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_source.html#l00073">make_gdml.pl:73</a></div></div>
<div class="ttc" id="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl_html_a0fe11031f1265411c06f6f1ca14b496f"><div class="ttname"><a href="icarusalg_2icarusalg_2Geometry_2gdml_2make__gdml_8pl.html#a0fe11031f1265411c06f6f1ca14b496f">close</a></div><div class="ttdeci">print OUTPUT&lt;&lt; EOF;&lt; setup name=&quot;Default&quot;version=&quot;1.0&quot;&gt;&lt; worldref=&quot;volWorld&quot;/&gt;&lt;/setup &gt;&lt;/gdml &gt; EOF close(OUTPUT)</div></div>
<div class="ttc" id="condor__lar__pubs_8sh_html_aace24c54f354f24f1dec3b4fd3a15d10"><div class="ttname"><a href="condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a></div><div class="ttdeci">esac echo uname r</div><div class="ttdef"><b>Definition:</b> <a href="condor__lar__pubs_8sh_source.html#l00698">condor_lar_pubs.sh:698</a></div></div>
<div class="ttc" id="namespaceevd_html_a88ebe7d3b0fe5a0525e0c916648db2ed"><div class="ttname"><a href="namespaceevd.html#a88ebe7d3b0fe5a0525e0c916648db2ed">evd::sub</a></div><div class="ttdeci">std::string sub(const std::string &amp;a, const std::string &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="TruthText_8cxx_source.html#l00100">TruthText.cxx:100</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_ad43d431a9cc55b21e490598d9739b29b"><div class="ttname"><a href="generate__icarus__geometry__splitwire_8pl.html#ad43d431a9cc55b21e490598d9739b29b">open</a></div><div class="ttdeci">open(RACETRACK) or die(&quot;Could not open file $RACETRACK for writing&quot;)</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
