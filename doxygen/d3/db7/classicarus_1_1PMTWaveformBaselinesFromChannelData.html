<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>icarus::PMTWaveformBaselinesFromChannelData Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../da/d4d/namespaceicarus.html">icarus</a></li><li class="navelem"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html">PMTWaveformBaselinesFromChannelData</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d8/d44/classicarus_1_1PMTWaveformBaselinesFromChannelData-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">icarus::PMTWaveformBaselinesFromChannelData Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Extracts a baseline from PMT waveforms.  
 <a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for icarus::PMTWaveformBaselinesFromChannelData:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.png" usemap="#icarus::PMTWaveformBaselinesFromChannelData_map" alt=""/>
  <map id="icarus::PMTWaveformBaselinesFromChannelData_map" name="icarus::PMTWaveformBaselinesFromChannelData_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d47/structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t.html">BaselineInfo_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record of baseline information to be written.  <a href="../../d4/d47/structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1BaselineInfo__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db7/structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config.html">Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae121a6f618d3c44703861b2b0b257a6c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ae121a6f618d3c44703861b2b0b257a6c">Parameters</a> = art::SharedProducer::Table&lt; <a class="el" href="../../d8/db7/structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config.html">Config</a> &gt;</td></tr>
<tr class="separator:ae121a6f618d3c44703861b2b0b257a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a29952fe370386ab20a67f6e076bf32c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a29952fe370386ab20a67f6e076bf32c7">PMTWaveformBaselinesFromChannelData</a> (<a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ae121a6f618d3c44703861b2b0b257a6c">Parameters</a> const &amp;config, art::ProcessingFrame const &amp;)</td></tr>
<tr class="separator:a29952fe370386ab20a67f6e076bf32c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd21543772d5908a37c9c198aff18f03"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#abd21543772d5908a37c9c198aff18f03">beginJob</a> (art::ProcessingFrame const &amp;frame) override</td></tr>
<tr class="memdesc:abd21543772d5908a37c9c198aff18f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the plots to be filled.  <a href="#abd21543772d5908a37c9c198aff18f03">More...</a><br/></td></tr>
<tr class="separator:abd21543772d5908a37c9c198aff18f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbea144be466f83c20b62f481bba99b7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#acbea144be466f83c20b62f481bba99b7">beginRun</a> (art::Run &amp;run, art::ProcessingFrame const &amp;) override</td></tr>
<tr class="memdesc:acbea144be466f83c20b62f481bba99b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads needed PMT configuration.  <a href="#acbea144be466f83c20b62f481bba99b7">More...</a><br/></td></tr>
<tr class="separator:acbea144be466f83c20b62f481bba99b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0e222e2e7c21bce4b993e10c53b372"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#afe0e222e2e7c21bce4b993e10c53b372">produce</a> (art::Event &amp;event, art::ProcessingFrame const &amp;) override</td></tr>
<tr class="memdesc:afe0e222e2e7c21bce4b993e10c53b372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the data products.  <a href="#afe0e222e2e7c21bce4b993e10c53b372">More...</a><br/></td></tr>
<tr class="separator:afe0e222e2e7c21bce4b993e10c53b372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4e0c12ebb5a347d3ae5ea1b6962eb5cc">endJob</a> (art::ProcessingFrame const &amp;frame) override</td></tr>
<tr class="memdesc:a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove empty plots.  <a href="#a4e0c12ebb5a347d3ae5ea1b6962eb5cc">More...</a><br/></td></tr>
<tr class="separator:a4e0c12ebb5a347d3ae5ea1b6962eb5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8d432fd6883570554f0b7dae7f887794"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a8d432fd6883570554f0b7dae7f887794">removeWaveformsAround</a> (std::vector&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> const * &gt; &amp;waveforms, double time) const </td></tr>
<tr class="memdesc:a8d432fd6883570554f0b7dae7f887794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes <code>waveforms</code> containing <code>time</code>, retuning how many were removed.  <a href="#a8d432fd6883570554f0b7dae7f887794">More...</a><br/></td></tr>
<tr class="separator:a8d432fd6883570554f0b7dae7f887794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82824a2d7671937f6a79bc5dbfa5e71"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ab82824a2d7671937f6a79bc5dbfa5e71">getPretriggerBuffer</a> (<a class="el" href="../../d4/d46/structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a> const &amp;<a class="el" href="../../df/d54/stage0__icarus__light__only_8fcl.html#a5ade640d42c1fc0318deccb7ed693a97">PMTconfig</a>) const </td></tr>
<tr class="memdesc:ab82824a2d7671937f6a79bc5dbfa5e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the smallest pre-trigger buffer size available among all boards.  <a href="#ab82824a2d7671937f6a79bc5dbfa5e71">More...</a><br/></td></tr>
<tr class="separator:ab82824a2d7671937f6a79bc5dbfa5e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb6af4fcef8139ead7b50e247282f4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5cb6af4fcef8139ead7b50e247282f4c">setupPlots</a> (art::ProcessingFrame const &amp;frame)</td></tr>
<tr class="memdesc:a5cb6af4fcef8139ead7b50e247282f4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates all the plots to be filled by the module.  <a href="#a5cb6af4fcef8139ead7b50e247282f4c">More...</a><br/></td></tr>
<tr class="separator:a5cb6af4fcef8139ead7b50e247282f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa14dca729f85756094aef0040855bed8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa14dca729f85756094aef0040855bed8">buildBaselineGraphs</a> (art::ProcessingFrame const &amp;frame)</td></tr>
<tr class="memdesc:aa14dca729f85756094aef0040855bed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the empty plots.  <a href="#aa14dca729f85756094aef0040855bed8">More...</a><br/></td></tr>
<tr class="separator:aa14dca729f85756094aef0040855bed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a250f646459524d5925b3417d581ff630"><td class="memItemLeft" align="right" valign="top">static std::vector<br class="typebreak"/>
&lt; std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> const * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a250f646459524d5925b3417d581ff630">groupByChannel</a> (std::vector&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> &gt; const &amp;waveforms)</td></tr>
<tr class="separator:a250f646459524d5925b3417d581ff630"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa1137e92f43e3ce1ef096466758f6576"><td class="memItemLeft" align="right" valign="top">art::InputTag const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a></td></tr>
<tr class="memdesc:aa1137e92f43e3ce1ef096466758f6576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input optical waveform tag.  <a href="#aa1137e92f43e3ce1ef096466758f6576">More...</a><br/></td></tr>
<tr class="separator:aa1137e92f43e3ce1ef096466758f6576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cb238e77d78c5af3389dedc9f13e2d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a27cb238e77d78c5af3389dedc9f13e2d">fExcludeSpillTimeIfMoreThan</a></td></tr>
<tr class="memdesc:a27cb238e77d78c5af3389dedc9f13e2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum number of waveforms when excluding trigger one is allowed.  <a href="#a27cb238e77d78c5af3389dedc9f13e2d">More...</a><br/></td></tr>
<tr class="separator:a27cb238e77d78c5af3389dedc9f13e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0e89784bdce184032575646eaf6b40"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a></td></tr>
<tr class="memdesc:a3e0e89784bdce184032575646eaf6b40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples in the pre-trigger buffer.  <a href="#a3e0e89784bdce184032575646eaf6b40">More...</a><br/></td></tr>
<tr class="separator:a3e0e89784bdce184032575646eaf6b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05216685e146d9ee28ef0b183db509a8"><td class="memItemLeft" align="right" valign="top">std::optional&lt; art::InputTag &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a></td></tr>
<tr class="memdesc:a05216685e146d9ee28ef0b183db509a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tag for PMT configuration data product.  <a href="#a05216685e146d9ee28ef0b183db509a8">More...</a><br/></td></tr>
<tr class="separator:a05216685e146d9ee28ef0b183db509a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7d91d983aa05a15bd861b6246860282"><td class="memItemLeft" align="right" valign="top">float const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac7d91d983aa05a15bd861b6246860282">fSampleFraction</a></td></tr>
<tr class="memdesc:ac7d91d983aa05a15bd861b6246860282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fraction of pretrigger buffer to use.  <a href="#ac7d91d983aa05a15bd861b6246860282">More...</a><br/></td></tr>
<tr class="separator:ac7d91d983aa05a15bd861b6246860282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab68518eab3b21f6f5b962b398a955b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html">opdet::SharedWaveformBaseline::Params_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a></td></tr>
<tr class="memdesc:a1ab68518eab3b21f6f5b962b398a955b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters for the baseline algorithm.  <a href="#a1ab68518eab3b21f6f5b962b398a955b">More...</a><br/></td></tr>
<tr class="separator:a1ab68518eab3b21f6f5b962b398a955b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8481c2b7fc38ded9ebf9ead93eebb69"><td class="memItemLeft" align="right" valign="top">bool const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a></td></tr>
<tr class="memdesc:af8481c2b7fc38ded9ebf9ead93eebb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to produce plots.  <a href="#af8481c2b7fc38ded9ebf9ead93eebb69">More...</a><br/></td></tr>
<tr class="separator:af8481c2b7fc38ded9ebf9ead93eebb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6702288d7eb27ed174a9672341a26963"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">fBaselineTimeAverage</a> { 0.0 }</td></tr>
<tr class="memdesc:a6702288d7eb27ed174a9672341a26963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Width of baseline time profile binning [s].  <a href="#a6702288d7eb27ed174a9672341a26963">More...</a><br/></td></tr>
<tr class="separator:a6702288d7eb27ed174a9672341a26963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db195dfaafb91682a35656145abb74a"><td class="memItemLeft" align="right" valign="top">std::string const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a></td></tr>
<tr class="memdesc:a5db195dfaafb91682a35656145abb74a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Category name for the console output stream.  <a href="#a5db195dfaafb91682a35656145abb74a">More...</a><br/></td></tr>
<tr class="separator:a5db195dfaafb91682a35656145abb74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e1f639a6ce9ebcfc7435293dda6536"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d1a/namespaceutil_1_1quantities_1_1intervals.html#a439758e928a1b5231e459628ae43fe98">util::quantities::intervals::nanoseconds</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a12e1f639a6ce9ebcfc7435293dda6536">fOpticalTick</a></td></tr>
<tr class="memdesc:a12e1f639a6ce9ebcfc7435293dda6536"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration of a PMT digitizer tick.  <a href="#a12e1f639a6ce9ebcfc7435293dda6536">More...</a><br/></td></tr>
<tr class="separator:a12e1f639a6ce9ebcfc7435293dda6536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a78d706692ee440f9ae611e051820eb"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a9a78d706692ee440f9ae611e051820eb">fNPlotChannels</a> = 0U</td></tr>
<tr class="memdesc:a9a78d706692ee440f9ae611e051820eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of plotted channels.  <a href="#a9a78d706692ee440f9ae611e051820eb">More...</a><br/></td></tr>
<tr class="separator:a9a78d706692ee440f9ae611e051820eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c17db7b59c01fb930d3322f87bd790a"><td class="memItemLeft" align="right" valign="top">TH2 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">fHBaselines</a> = nullptr</td></tr>
<tr class="memdesc:a4c17db7b59c01fb930d3322f87bd790a"><td class="mdescLeft">&#160;</td><td class="mdescRight">All baselines, per channel.  <a href="#a4c17db7b59c01fb930d3322f87bd790a">More...</a><br/></td></tr>
<tr class="separator:a4c17db7b59c01fb930d3322f87bd790a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector<br class="typebreak"/>
&lt; std::pair&lt; double, double &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a></td></tr>
<tr class="memdesc:ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each channel, all event times and their baselines.  <a href="#ac86ee049a7780f1d4ed3a0ec6e94e5ef">More...</a><br/></td></tr>
<tr class="separator:ac86ee049a7780f1d4ed3a0ec6e94e5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Extracts a baseline from PMT waveforms. </p>
<p>This module produces a baseline data product for each optical detector waveform. The algorithm extracts a baseline per channel per event, considering all the waveforms from one channel together, under the assumptions that:</p>
<ol type="1">
<li>the baseline is not going to change during the few milliseconds of readout</li>
<li>the beginning of the waveform is on its baseline level</li>
</ol>
<h1>The algorithm </h1>
<p>The core of the algorithm is described in its own class, <code><a class="el" href="../../dd/d01/classopdet_1_1SharedWaveformBaseline.html" title="Extracts a common baseline from waveforms. ">opdet::SharedWaveformBaseline</a></code>.</p>
<p>On each event independently, the waveforms are grouped by channel. For each waveform, <code><a class="el" href="../../dd/d01/classopdet_1_1SharedWaveformBaseline.html" title="Extracts a common baseline from waveforms. ">opdet::SharedWaveformBaseline</a></code> considers their first part for baseline calculation. The number of samples of that part is specified as a fraction of the pre-trigger buffer. The pre-trigger buffer includes the samples that were collected before the physics activity that causes the data acquisition happened, and as such is expected to be almost completely free of physics signal and to be made of just electronics noise. The size of this prebuffer is determined in data by the readout configuration, which can be accessed by specifying the parameter <code>PMTconfigurationTag</code>, and in simulation by a digitization module parameter, which can be replicated here by the parameter <code>PretriggerBufferSize</code>. The fraction of such buffer used for the baseline estimation is also specified by a configuration parameter (<code>PretriggerBufferFractionForBaseline</code>). Depending on the value of the configuration parameter <code>ExcludeSpillTimeIfMoreThan</code>, the one waveform that covers the trigger time may be excluded and not used; the rationale is that there is a conspicuous number of events triggered by the late light of a cosmic ray happening before the beam spill, in which case the activity may contaminate the pre-trigger buffer and could bias the estimation of the baseline.</p>
<p>The result of the <code><a class="el" href="../../dd/d01/classopdet_1_1SharedWaveformBaseline.html" title="Extracts a common baseline from waveforms. ">opdet::SharedWaveformBaseline</a></code> is currently used directly as the baseline for all the waveforms on the channel on that event.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000001">Todo:</a></b></dt><dd>Add run-level information and checks.</dd></dl>
<h1>Output data products </h1>
<ul>
<li>a data product of type <code>std::vector&lt;<a class="el" href="../../de/dce/structicarus_1_1WaveformBaseline.html" title="Class containing a waveform baseline value. ">icarus::WaveformBaseline</a>&gt;</code>, with one baseline per input waveform; the baselines are guaranteed to be in the same order as the waveforms in the input collection;</li>
<li>a data product of type <code>std::vector&lt;<a class="el" href="../../d6/d52/structicarus_1_1WaveformRMS.html" title="Class containing a waveform baseline RMS value. ">icarus::WaveformRMS</a>&gt;</code>, with one baseline RMS per input waveform; the baselines are guaranteed to be in the same order as the waveforms in the input collection;</li>
<li>two <em>art</em> associations, with one baseline and one RMS per input optical waveform; normally this is not needed as long as the original PMT waveform data product is available; the type of the associations are <code>art::Assns&lt;<a class="el" href="../../de/dce/structicarus_1_1WaveformBaseline.html" title="Class containing a waveform baseline value. ">icarus::WaveformBaseline</a>, <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a>&gt;</code> and <code>art::Assns&lt;<a class="el" href="../../d6/d52/structicarus_1_1WaveformRMS.html" title="Class containing a waveform baseline RMS value. ">icarus::WaveformRMS</a>, <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a>&gt;</code>.</li>
</ul>
<h2>Output plots </h2>
<ul>
<li><code>Baselines</code>: baseline distribution, per channel; average baseline [ADC] per event per channel; all waveforms on the same channels in a single event contribute to the average, and channels with no waveforms in an event do not contribute an entry for that event.</li>
</ul>
<h1>Input data products </h1>
<ul>
<li><code>std::vector&lt;<a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a>&gt;</code>: a single waveform for each recorded optical detector activity; the activity belongs to a single channel, but there may be multiple waveforms on the same channel.</li>
</ul>
<h2>Service requirements </h2>
<ul>
<li><code>DetectorClocksService</code> for the determination of the optical tick duration and the trigger time (if the exclusion of waveform with trigger is enabled).</li>
<li><code>TFileService</code> and <code>Geometry</code> if <code>PlotBaselines</code> is enabled.</li>
</ul>
<h1>Configuration parameters </h1>
<p>A terse description of the parameters is printed by running <code>lar --print-description <a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html" title="Extracts a baseline from PMT waveforms. ">PMTWaveformBaselinesFromChannelData</a></code>.</p>
<ul>
<li><code>OpticalWaveforms</code> (input tag, mandatory): the data product containing all optical detector waveforms;</li>
<li><code>PretriggerBufferSize</code> (positive integer, optional): the number of samples collected by the PMT readout before the PMT signal. This number is used as base for the size of the initial part of the waveform to be used in baseline calculation. This and <code>PMTconfigurationTag</code> parameters are exclusive. This one is expected to be preferred for simulated samples.</li>
<li><code>PMTconfigurationTag</code> (input tag): the (run) data product containing the PMT readout configuration. This is extracted from the run configuration for data events. The pre-trigger buffer size is read from this data product, and used as base for the size of the initial part of the waveform to be used in baseline calculation. This and <code>PretriggerBufferSize</code> parameters are exclusive. This one is expected to be preferred for data samples.</li>
<li><code>PretriggerBufferFractionForBaseline</code> (real, default: <code>0.5</code>): the fraction of the pre-trigger buffer (see <code>PretriggerBufferSize</code> and <code>PMTconfigurationTag</code> parameters) to be used to extract the baseline.</li>
<li><code>ExcludeSpillTimeIfMoreThan</code> (integer, default: disable): the minimum number of PMT waveforms on a single channel of a single event, in order for the exclusion of the waveform containing the global trigger to be enabled. By default (huge number) the feature is disabled.</li>
<li><code>AlgoParams</code> (table): configuration of the core algorithm extracting the baseline from a set of waveforms on the same channel. The configuration is as follows:<ul>
<li><code>AcceptedSampleRangeRMS</code> (real): for a waveform to be considered for the baseline, the values of the samples must stay within a certain range, which is defined as this number of RMS away in either directions from a central value that is a rougher estimation of the baseline.</li>
<li><code>ExcessSampleLimit</code> (integer): for a waveform to be considered for the baseline, there must be less than this number of samples in a row that are outside of the range defined by <code>AcceptedSampleRangeRMS</code> parameter.</li>
</ul>
</li>
<li><code>PlotBaselines</code> (flag, default: <code>true</code>): whether to produce distributions of the extracted baselines.</li>
<li><code>BaselineTimeAverage</code> (real number, default: <code>600.0</code>): binning of the baseline profile vs. time, in seconds. Requires <code>PlotBaselines</code> to be set.</li>
<li><code>OutputCategory</code> (string, default: <code>"PMTWaveformBaselinesFromChannelData"</code>): label for the category of messages in the console output; this is the label that can be used for filtering messages via MessageFacility service configuration. </li>
</ul>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00206">206</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ae121a6f618d3c44703861b2b0b257a6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ae121a6f618d3c44703861b2b0b257a6c">icarus::PMTWaveformBaselinesFromChannelData::Parameters</a> =  art::SharedProducer::Table&lt;<a class="el" href="../../d8/db7/structicarus_1_1PMTWaveformBaselinesFromChannelData_1_1Config.html">Config</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00297">297</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a29952fe370386ab20a67f6e076bf32c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::PMTWaveformBaselinesFromChannelData::PMTWaveformBaselinesFromChannelData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ae121a6f618d3c44703861b2b0b257a6c">Parameters</a> const &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00462">462</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  : art::SharedProducer(config)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// configuration</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a>(config().<a class="code" href="../../d3/d70/triggersim__singlewindow__icarus__data_8fcl.html#adb1cd4ff0e63b76acd41af381bcc739d">OpticalWaveforms</a>())</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a27cb238e77d78c5af3389dedc9f13e2d">fExcludeSpillTimeIfMoreThan</a>(config().ExcludeSpillTimeIfMoreThan())</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a>(config().PretriggerBufferSize().value_or(0U))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a>(config().PMTconfigurationTag())</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac7d91d983aa05a15bd861b6246860282">fSampleFraction</a>(config().PretriggerBufferFractionForBaseline())</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a>(config().AlgoParams())</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a>(config().PlotBaselines())</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">fBaselineTimeAverage</a>(config().BaselineTimeAverage())</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a>(config().OutputCategory())</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// service caching</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  , <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a12e1f639a6ce9ebcfc7435293dda6536">fOpticalTick</a>(</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../de/d0f/classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        { frame.serviceHandle&lt;<a class="code" href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a>&gt;()-&gt;DataForJob() }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        .OpticalClockPeriod()</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    )</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// algorithms</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a>)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">//     serialize&lt;art::InEvent&gt;(art::TFileService::resource_name()); // TODO isn&#39;t art supposed to provide this method?</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      serializeExternal&lt;art::InEvent&gt;(std::string{ <span class="stringliteral">&quot;TFileService&quot;</span> });</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    async&lt;art::InEvent&gt;();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// optional configuration parameters</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a>.has_value() == (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a> != 0)) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">throw</span> art::Exception(art::errors::Configuration)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Exactly one between parameters &#39;&quot;</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      &lt;&lt; config().PMTconfigurationTag.name() &lt;&lt; <span class="stringliteral">&quot;&#39; and &#39;&quot;</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      &lt;&lt; config().PretriggerBufferFractionForBaseline.name()</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&#39; (with a positive value) must be specified!\n&quot;</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// configuration report</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    mf::LogInfo log{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> };</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;Using the standard (median) algorithm, waveform by waveform, on &#39;&quot;</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      &lt;&lt; <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a>.encode() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// declaration of input</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  consumes&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a>) consumes&lt;sbn::PMTconfiguration&gt;(*fPMTconfigTag);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// declaration of output</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  produces&lt;std::vector&lt;icarus::WaveformBaseline&gt;&gt;();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  produces&lt;std::vector&lt;icarus::WaveformRMS&gt;&gt;();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  produces&lt;art::Assns&lt;icarus::WaveformBaseline, raw::OpDetWaveform&gt;&gt;();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  produces&lt;art::Assns&lt;icarus::WaveformRMS, raw::OpDetWaveform&gt;&gt;();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::PMTWaveformBaselinesFromChannelData()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ac7d91d983aa05a15bd861b6246860282"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac7d91d983aa05a15bd861b6246860282">icarus::PMTWaveformBaselinesFromChannelData::fSampleFraction</a></div><div class="ttdeci">float const fSampleFraction</div><div class="ttdoc">Fraction of pretrigger buffer to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00342">PMTWaveformBaselinesFromChannelData_module.cc:342</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_aa1137e92f43e3ce1ef096466758f6576"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">icarus::PMTWaveformBaselinesFromChannelData::fOpDetWaveformTag</a></div><div class="ttdeci">art::InputTag const fOpDetWaveformTag</div><div class="ttdoc">Input optical waveform tag. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00331">PMTWaveformBaselinesFromChannelData_module.cc:331</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a1ab68518eab3b21f6f5b962b398a955b"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">icarus::PMTWaveformBaselinesFromChannelData::fAlgoParams</a></div><div class="ttdeci">opdet::SharedWaveformBaseline::Params_t fAlgoParams</div><div class="ttdoc">Parameters for the baseline algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00346">PMTWaveformBaselinesFromChannelData_module.cc:346</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_af8481c2b7fc38ded9ebf9ead93eebb69"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">icarus::PMTWaveformBaselinesFromChannelData::fPlotBaselines</a></div><div class="ttdeci">bool const fPlotBaselines</div><div class="ttdoc">Whether to produce plots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00348">PMTWaveformBaselinesFromChannelData_module.cc:348</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a12e1f639a6ce9ebcfc7435293dda6536"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a12e1f639a6ce9ebcfc7435293dda6536">icarus::PMTWaveformBaselinesFromChannelData::fOpticalTick</a></div><div class="ttdeci">util::quantities::intervals::nanoseconds fOpticalTick</div><div class="ttdoc">Duration of a PMT digitizer tick. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00361">PMTWaveformBaselinesFromChannelData_module.cc:361</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a5db195dfaafb91682a35656145abb74a"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">icarus::PMTWaveformBaselinesFromChannelData::fLogCategory</a></div><div class="ttdeci">std::string const fLogCategory</div><div class="ttdoc">Category name for the console output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00353">PMTWaveformBaselinesFromChannelData_module.cc:353</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a05216685e146d9ee28ef0b183db509a8"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">icarus::PMTWaveformBaselinesFromChannelData::fPMTconfigTag</a></div><div class="ttdeci">std::optional&lt; art::InputTag &gt; fPMTconfigTag</div><div class="ttdoc">Tag for PMT configuration data product. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00340">PMTWaveformBaselinesFromChannelData_module.cc:340</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorClocksService_html"><div class="ttname"><a href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/DetectorClocksService_8h_source.html#l00021">DetectorClocksService.h:21</a></div></div>
<div class="ttc" id="triggersim__singlewindow__icarus__data_8fcl_html_adb1cd4ff0e63b76acd41af381bcc739d"><div class="ttname"><a href="../../d3/d70/triggersim__singlewindow__icarus__data_8fcl.html#adb1cd4ff0e63b76acd41af381bcc739d">OpticalWaveforms</a></div><div class="ttdeci">physics producers discrimopdaq OpticalWaveforms</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d70/triggersim__singlewindow__icarus__data_8fcl_source.html#l00112">triggersim_singlewindow_icarus_data.fcl:112</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorTimings_html"><div class="ttname"><a href="../../de/d0f/classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a></div><div class="ttdoc">A class exposing an upgraded interface of detinfo::DetectorClocksData. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd2/DetectorTimings_8h_source.html#l00249">DetectorTimings.h:249</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a6702288d7eb27ed174a9672341a26963"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">icarus::PMTWaveformBaselinesFromChannelData::fBaselineTimeAverage</a></div><div class="ttdeci">double const fBaselineTimeAverage</div><div class="ttdoc">Width of baseline time profile binning [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00351">PMTWaveformBaselinesFromChannelData_module.cc:351</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a27cb238e77d78c5af3389dedc9f13e2d"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a27cb238e77d78c5af3389dedc9f13e2d">icarus::PMTWaveformBaselinesFromChannelData::fExcludeSpillTimeIfMoreThan</a></div><div class="ttdeci">unsigned int fExcludeSpillTimeIfMoreThan</div><div class="ttdoc">Minimum number of waveforms when excluding trigger one is allowed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00334">PMTWaveformBaselinesFromChannelData_module.cc:334</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a3e0e89784bdce184032575646eaf6b40"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">icarus::PMTWaveformBaselinesFromChannelData::fPretriggerSamples</a></div><div class="ttdeci">unsigned int fPretriggerSamples</div><div class="ttdoc">Samples in the pre-trigger buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00337">PMTWaveformBaselinesFromChannelData_module.cc:337</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abd21543772d5908a37c9c198aff18f03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::beginJob </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the plots to be filled. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00529">529</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;{</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// set up the plots, if needed</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a>) <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5cb6af4fcef8139ead7b50e247282f4c">setupPlots</a>(frame);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::beginJob()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_af8481c2b7fc38ded9ebf9ead93eebb69"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">icarus::PMTWaveformBaselinesFromChannelData::fPlotBaselines</a></div><div class="ttdeci">bool const fPlotBaselines</div><div class="ttdoc">Whether to produce plots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00348">PMTWaveformBaselinesFromChannelData_module.cc:348</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a5cb6af4fcef8139ead7b50e247282f4c"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5cb6af4fcef8139ead7b50e247282f4c">icarus::PMTWaveformBaselinesFromChannelData::setupPlots</a></div><div class="ttdeci">void setupPlots(art::ProcessingFrame const &amp;frame)</div><div class="ttdoc">Creates all the plots to be filled by the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00708">PMTWaveformBaselinesFromChannelData_module.cc:708</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acbea144be466f83c20b62f481bba99b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::beginRun </td>
          <td>(</td>
          <td class="paramtype">art::Run &amp;&#160;</td>
          <td class="paramname"><em>run</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads needed PMT configuration. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00542">542</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a>) { <span class="comment">// update the pretrigger samples number</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a> = <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ab82824a2d7671937f6a79bc5dbfa5e71">getPretriggerBuffer</a></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      (run.getProduct&lt;<a class="code" href="../../d4/d46/structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a>&gt;(*<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">fPMTconfigTag</a>));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  assert(<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a> &gt; 0U);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a>.<a class="code" href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html#ae87308b55de29df7d2c011a39608a921">nSample</a> = std::max(</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    1U,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    static_cast&lt;unsigned int&gt;(std::round(<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac7d91d983aa05a15bd861b6246860282">fSampleFraction</a> * <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">fPretriggerSamples</a>))</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// not clear whether this is debug or info level</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    mf::LogInfo log{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> };</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    log &lt;&lt; run.id() &lt;&lt; <span class="stringliteral">&quot;: baseline algorithm configuration:\n&quot;</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a>.<a class="code" href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html#a12e2a98603de95da09b6fae678c635a4">dump</a>(log, <span class="stringliteral">&quot; - &quot;</span>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::beginRun()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ac7d91d983aa05a15bd861b6246860282"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac7d91d983aa05a15bd861b6246860282">icarus::PMTWaveformBaselinesFromChannelData::fSampleFraction</a></div><div class="ttdeci">float const fSampleFraction</div><div class="ttdoc">Fraction of pretrigger buffer to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00342">PMTWaveformBaselinesFromChannelData_module.cc:342</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ab82824a2d7671937f6a79bc5dbfa5e71"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ab82824a2d7671937f6a79bc5dbfa5e71">icarus::PMTWaveformBaselinesFromChannelData::getPretriggerBuffer</a></div><div class="ttdeci">unsigned int getPretriggerBuffer(sbn::PMTconfiguration const &amp;PMTconfig) const </div><div class="ttdoc">Returns the smallest pre-trigger buffer size available among all boards. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00734">PMTWaveformBaselinesFromChannelData_module.cc:734</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1Params__t_html_ae87308b55de29df7d2c011a39608a921"><div class="ttname"><a href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html#ae87308b55de29df7d2c011a39608a921">opdet::SharedWaveformBaseline::Params_t::nSample</a></div><div class="ttdeci">std::size_t nSample</div><div class="ttdoc">Number of samples to use from each waveform. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00058">SharedWaveformBaseline.h:58</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a1ab68518eab3b21f6f5b962b398a955b"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">icarus::PMTWaveformBaselinesFromChannelData::fAlgoParams</a></div><div class="ttdeci">opdet::SharedWaveformBaseline::Params_t fAlgoParams</div><div class="ttdoc">Parameters for the baseline algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00346">PMTWaveformBaselinesFromChannelData_module.cc:346</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a5db195dfaafb91682a35656145abb74a"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">icarus::PMTWaveformBaselinesFromChannelData::fLogCategory</a></div><div class="ttdeci">std::string const fLogCategory</div><div class="ttdoc">Category name for the console output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00353">PMTWaveformBaselinesFromChannelData_module.cc:353</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a05216685e146d9ee28ef0b183db509a8"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a05216685e146d9ee28ef0b183db509a8">icarus::PMTWaveformBaselinesFromChannelData::fPMTconfigTag</a></div><div class="ttdeci">std::optional&lt; art::InputTag &gt; fPMTconfigTag</div><div class="ttdoc">Tag for PMT configuration data product. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00340">PMTWaveformBaselinesFromChannelData_module.cc:340</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1Params__t_html_a12e2a98603de95da09b6fae678c635a4"><div class="ttname"><a href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html#a12e2a98603de95da09b6fae678c635a4">opdet::SharedWaveformBaseline::Params_t::dump</a></div><div class="ttdeci">void dump(Stream &amp;out, std::string const &amp;indent, std::string const &amp;firstIndent) const </div><div class="ttdoc">Dumps this configuration into the output stream out. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00133">SharedWaveformBaseline.h:133</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a3e0e89784bdce184032575646eaf6b40"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a3e0e89784bdce184032575646eaf6b40">icarus::PMTWaveformBaselinesFromChannelData::fPretriggerSamples</a></div><div class="ttdeci">unsigned int fPretriggerSamples</div><div class="ttdoc">Samples in the pre-trigger buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00337">PMTWaveformBaselinesFromChannelData_module.cc:337</a></div></div>
<div class="ttc" id="structsbn_1_1PMTconfiguration_html"><div class="ttname"><a href="../../d4/d46/structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a></div><div class="ttdoc">Class containing configuration for PMT readout. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9b/PMTconfiguration_8h_source.html#l00045">PMTconfiguration.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa14dca729f85756094aef0040855bed8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::buildBaselineGraphs </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the empty plots. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00799">799</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;{</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a> = *(frame.serviceHandle&lt;art::TFileService&gt;());</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  art::TFileDirectory graphDir = <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a>.mkdir(<span class="stringliteral">&quot;graphs&quot;</span>, <span class="stringliteral">&quot;Baseline vs. time&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  art::TFileDirectory profileDir</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    = <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a>.mkdir(<span class="stringliteral">&quot;profiles&quot;</span>, <span class="stringliteral">&quot;Baseline profiles vs. time&quot;</span>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> channel: <a class="code" href="../../d6/d72/namespaceutil.html#a9462a726cd010ab8ada5eead879a4b9f">util::counter</a>(<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a>.size())) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keyword">auto</span>&amp; timeAndBaselines = <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a>[channel];</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (timeAndBaselines.empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="comment">// sort by time (entries with the same time would be sorted by baseline,</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// but that does not really happen nor it mattered if it happened)</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    std::sort(timeAndBaselines.begin(), timeAndBaselines.end());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// graph, one point per event</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keyword">auto</span>* <span class="keyword">const</span> graph = graphDir.makeAndRegister&lt;TGraph&gt;(</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="stringliteral">&quot;BaselineCh&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channel),</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="stringliteral">&quot;PMT channel #&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channel) + <span class="stringliteral">&quot;: baseline vs. run time&quot;</span>,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      timeAndBaselines.size()</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    assert(graph-&gt;GetXaxis());</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    assert(graph-&gt;GetYaxis());</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    graph-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;event time&quot;</span>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    graph-&gt;GetYaxis()-&gt;SetTitle(<span class="stringliteral">&quot;baseline  [ ADC ]&quot;</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// profile, one point every 10 minutes (or best offer)</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> startTime = timeAndBaselines.front().first;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> totalTime = timeAndBaselines.back().first - startTime;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> nBins = std::max(1U,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      static_cast&lt;unsigned int&gt;(std::ceil(totalTime / <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">fBaselineTimeAverage</a>))</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> endTime = startTime + nBins * <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">fBaselineTimeAverage</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keyword">auto</span>* <span class="keyword">const</span> profile = profileDir.make&lt;TProfile&gt;(</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      (<span class="stringliteral">&quot;BaselineCh&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channel) + <span class="stringliteral">&quot;profile&quot;</span>).c_str(),</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      (<span class="stringliteral">&quot;PMT channel #&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channel) + <span class="stringliteral">&quot;: baseline vs. run time&quot;</span>)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        .c_str(),</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      nBins, startTime, endTime</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    assert(profile-&gt;GetXaxis());</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    assert(profile-&gt;GetYaxis());</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    profile-&gt;GetXaxis()-&gt;SetTitle(</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      (<span class="stringliteral">&quot;event time  [ / &quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(fBaselineTimeAverage) + <span class="stringliteral">&quot; s ]&quot;</span>)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      .c_str()</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      );</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    profile-&gt;GetYaxis()-&gt;SetTitle(<span class="stringliteral">&quot;average baseline  [ ADC ]&quot;</span>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ i, data ]: <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a>(timeAndBaselines)) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span> [ time, <a class="code" href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a> ] = data;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      graph-&gt;SetPoint(i, time, <a class="code" href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      profile-&gt;Fill(time, <a class="code" href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    } <span class="comment">// for</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  } <span class="comment">// for</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::buildBaselineGraphs()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ac86ee049a7780f1d4ed3a0ec6e94e5ef"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">icarus::PMTWaveformBaselinesFromChannelData::fBaselinesVsTime</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::pair&lt; double, double &gt; &gt; &gt; fBaselinesVsTime</div><div class="ttdoc">For each channel, all event times and their baselines. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00380">PMTWaveformBaselinesFromChannelData_module.cc:380</a></div></div>
<div class="ttc" id="namespaceutil_html_af0615b7538ff948ea65d5206a23c84f2"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a></div><div class="ttdeci">auto enumerate(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper tracking the number of iteration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/enumerate_8h_source.html#l00069">enumerate.h:69</a></div></div>
<div class="ttc" id="namespaceutil_html_a9462a726cd010ab8ada5eead879a4b9f"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#a9462a726cd010ab8ada5eead879a4b9f">util::counter</a></div><div class="ttdeci">auto counter(T begin, T end)</div><div class="ttdoc">Returns an object to iterate values from begin to end in a range-for loop. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da2/counter_8h_source.html#l00285">counter.h:285</a></div></div>
<div class="ttc" id="OnlineDecoder_8fcl_html_ac3bc64ff22523df5f35d8f928ec038cd"><div class="ttname"><a href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a></div><div class="ttdeci">BEGIN_PROLOG baseline</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d82/OnlineDecoder_8fcl_source.html#l00014">OnlineDecoder.fcl:14</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00115">WindowPattern.h:115</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a6702288d7eb27ed174a9672341a26963"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a6702288d7eb27ed174a9672341a26963">icarus::PMTWaveformBaselinesFromChannelData::fBaselineTimeAverage</a></div><div class="ttdeci">double const fBaselineTimeAverage</div><div class="ttdoc">Width of baseline time profile binning [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00351">PMTWaveformBaselinesFromChannelData_module.cc:351</a></div></div>
<div class="ttc" id="NuVertexChargeTree__module_8cc_html_aa8ae0901ab0cec47d6c9bf9c22af764f"><div class="ttname"><a href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a></div><div class="ttdeci">art::ServiceHandle&lt; art::TFileService &gt; tfs</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d33/NuVertexChargeTree__module_8cc_source.html#l00254">NuVertexChargeTree_module.cc:254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e0c12ebb5a347d3ae5ea1b6962eb5cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::endJob </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove empty plots. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00698">698</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;{</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">fPlotBaselines</a>) <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa14dca729f85756094aef0040855bed8">buildBaselineGraphs</a>(frame);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::endJob()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_af8481c2b7fc38ded9ebf9ead93eebb69"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#af8481c2b7fc38ded9ebf9ead93eebb69">icarus::PMTWaveformBaselinesFromChannelData::fPlotBaselines</a></div><div class="ttdeci">bool const fPlotBaselines</div><div class="ttdoc">Whether to produce plots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00348">PMTWaveformBaselinesFromChannelData_module.cc:348</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_aa14dca729f85756094aef0040855bed8"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa14dca729f85756094aef0040855bed8">icarus::PMTWaveformBaselinesFromChannelData::buildBaselineGraphs</a></div><div class="ttdeci">void buildBaselineGraphs(art::ProcessingFrame const &amp;frame)</div><div class="ttdoc">Removes the empty plots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00799">PMTWaveformBaselinesFromChannelData_module.cc:799</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab82824a2d7671937f6a79bc5dbfa5e71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::getPretriggerBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d46/structsbn_1_1PMTconfiguration.html">sbn::PMTconfiguration</a> const &amp;&#160;</td>
          <td class="paramname"><em>PMTconfig</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the smallest pre-trigger buffer size available among all boards. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00734">734</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html">lar::util::MinMaxCollector&lt;unsigned int&gt;</a> prebuffer;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../df/d9c/structsbn_1_1V1730Configuration.html">sbn::V1730Configuration</a> <span class="keyword">const</span>&amp; board: <a class="code" href="../../df/d54/stage0__icarus__light__only_8fcl.html#a5ade640d42c1fc0318deccb7ed693a97">PMTconfig</a>.boards)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#a4bd535414721807dcfcd5a16ba4192ed">add</a>(board.<a class="code" href="../../df/d9c/structsbn_1_1V1730Configuration.html#a4756951bd578e6e500ecbccd3d4b2dbe">preTriggerTicks</a>());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (!prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#a44f7ca8891b8e1b06d4689da8e4059b9">has_data</a>()) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">throw</span> art::Exception{ art::errors::Unknown }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;No boards found in the PMT configuration!\n&quot;</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#abbc00759d8e95c67d4172fb3f35bb3ee">max</a>() &gt; prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#afdf142fee09b735fdfcad939a3ca5758">min</a>()) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">throw</span> art::Exception{ art::errors::Unknown }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Found different pre-trigger readout buffer sizes between &quot;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      &lt;&lt; prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#afdf142fee09b735fdfcad939a3ca5758">min</a>() &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#abbc00759d8e95c67d4172fb3f35bb3ee">max</a>() &lt;&lt; <span class="stringliteral">&quot; ticks.\n&quot;</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">return</span> prebuffer.<a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#afdf142fee09b735fdfcad939a3ca5758">min</a>();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::getPretriggerBuffer()</span></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html_abbc00759d8e95c67d4172fb3f35bb3ee"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#abbc00759d8e95c67d4172fb3f35bb3ee">lar::util::MinMaxCollector::max</a></div><div class="ttdeci">Data_t max() const </div><div class="ttdoc">Returns the accumulated maximum, or a very small number if no values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l00810">StatCollector.h:810</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html_a44f7ca8891b8e1b06d4689da8e4059b9"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#a44f7ca8891b8e1b06d4689da8e4059b9">lar::util::MinMaxCollector::has_data</a></div><div class="ttdeci">bool has_data() const </div><div class="ttdoc">Returns whether at least one datum has been added. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l00804">StatCollector.h:804</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html_a4bd535414721807dcfcd5a16ba4192ed"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#a4bd535414721807dcfcd5a16ba4192ed">lar::util::MinMaxCollector::add</a></div><div class="ttdeci">This_t &amp; add(Data_t value)</div><div class="ttdoc">Include a single value in the statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l01090">StatCollector.h:1090</a></div></div>
<div class="ttc" id="structsbn_1_1V1730Configuration_html_a4756951bd578e6e500ecbccd3d4b2dbe"><div class="ttname"><a href="../../df/d9c/structsbn_1_1V1730Configuration.html#a4756951bd578e6e500ecbccd3d4b2dbe">sbn::V1730Configuration::preTriggerTicks</a></div><div class="ttdeci">unsigned int preTriggerTicks() const </div><div class="ttdoc">Ticks in the waveform before the trigger. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/V1730Configuration_8h_source.html#l00189">V1730Configuration.h:189</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html">lar::util::MinMaxCollector</a></div><div class="ttdoc">Keeps track of the minimum and maximum value we observed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l00748">StatCollector.h:748</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html_afdf142fee09b735fdfcad939a3ca5758"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html#afdf142fee09b735fdfcad939a3ca5758">lar::util::MinMaxCollector::min</a></div><div class="ttdeci">Data_t min() const </div><div class="ttdoc">Returns the accumulated minimum, or a very large number if no values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l00807">StatCollector.h:807</a></div></div>
<div class="ttc" id="stage0__icarus__light__only_8fcl_html_a5ade640d42c1fc0318deccb7ed693a97"><div class="ttname"><a href="../../df/d54/stage0__icarus__light__only_8fcl.html#a5ade640d42c1fc0318deccb7ed693a97">PMTconfig</a></div><div class="ttdeci">process_name PMTconfig</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d54/stage0__icarus__light__only_8fcl_source.html#l00060">stage0_icarus_light_only.fcl:60</a></div></div>
<div class="ttc" id="structsbn_1_1V1730Configuration_html"><div class="ttname"><a href="../../df/d9c/structsbn_1_1V1730Configuration.html">sbn::V1730Configuration</a></div><div class="ttdoc">Class containing configuration for a V1730 board. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d54/V1730Configuration_8h_source.html#l00045">V1730Configuration.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a250f646459524d5925b3417d581ff630"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> const * &gt; &gt; icarus::PMTWaveformBaselinesFromChannelData::groupByChannel </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> &gt; const &amp;&#160;</td>
          <td class="paramname"><em>waveforms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a common baseline for all the specified <code>waveforms</code>. Returns a vector of waveforms per channel (which is the index). </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00755">755</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  std::vector&lt;std::vector&lt;raw::OpDetWaveform const*&gt;&gt; groups;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  VectorExpander groupForChannel { groups };</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> <span class="keyword">const</span>&amp; waveform: waveforms) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    groupForChannel(waveform.ChannelNumber()).push_back(&amp;waveform);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">return</span> groups;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::groupByChannel()</span></div>
<div class="ttc" id="classraw_1_1OpDetWaveform_html"><div class="ttname"><a href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h_source.html#l00025">lardataobj/lardataobj/RawData/OpDetWaveform.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe0e222e2e7c21bce4b993e10c53b372"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::produce </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the data products. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00568">568</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="../../de/d0f/classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a> <span class="keyword">const</span> <a class="code" href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc.html#ac977879c6351c98d7eb034f13e4758a6">detTimings</a>{</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    frame.serviceHandle&lt;<a class="code" href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a> <span class="keyword">const</span>&gt;()-&gt;DataFor(event)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    };</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="../../dc/d8b/namespacedetinfo_1_1timescales.html#abd0daf821f464d7aec05b35a43053145">detinfo::timescales::electronics_time</a> <span class="keyword">const</span> triggerTime</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;     = <a class="code" href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc.html#ac977879c6351c98d7eb034f13e4758a6">detTimings</a>.TriggerTime();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  mf::LogDebug{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    &lt;&lt; <span class="keyword">event</span>.id() &lt;&lt; <span class="stringliteral">&quot; trigger time: &quot;</span> &lt;&lt; triggerTime;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// fetch input</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; waveformHandle</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    = <span class="keyword">event</span>.getValidHandle&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">fOpDetWaveformTag</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; waveforms = *waveformHandle;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// compute all the baselines (and plot them)</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <a class="code" href="../../dd/d01/classopdet_1_1SharedWaveformBaseline.html">opdet::SharedWaveformBaseline</a> <span class="keyword">const</span> sharedWaveformBaselineAlgo</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    { <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">fAlgoParams</a>, <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> };</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordtype">double</span> <span class="keyword">const</span> eventTime = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<span class="keyword">event</span>.time().timeHigh())</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    + static_cast&lt;double&gt;(event.time().timeHigh()) * 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-9;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  std::vector&lt;BaselineInfo_t&gt; channelBaselines;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  VectorExpander baselineForChannel { channelBaselines };</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keyword">auto</span> waveformsByChannel = <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a250f646459524d5925b3417d581ff630">groupByChannel</a>(waveforms);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ channel, waveforms ]: <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a>(waveformsByChannel))</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (waveforms.empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    mf::LogTrace{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Processing &quot;</span> &lt;&lt; waveforms.size() &lt;&lt; <span class="stringliteral">&quot; waveforms for channel &quot;</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      &lt;&lt; channel;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// remove global trigger waveform</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (waveforms.size() &gt;= <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a27cb238e77d78c5af3389dedc9f13e2d">fExcludeSpillTimeIfMoreThan</a>) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> nExcluded</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        = <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a8d432fd6883570554f0b7dae7f887794">removeWaveformsAround</a>(waveforms, triggerTime.value());</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (nExcluded &gt; 0U) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        mf::LogTrace{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Removed &quot;</span> &lt;&lt; nExcluded &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; (waveforms.size() + nExcluded)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; waveforms at trigger time &quot;</span> &lt;&lt; triggerTime;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    } <span class="comment">// if many waveforms</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// extract baseline</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html">opdet::SharedWaveformBaseline::BaselineInfo_t</a> <span class="keyword">const</span> <a class="code" href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      = sharedWaveformBaselineAlgo(waveforms);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    mf::LogTrace{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">fLogCategory</a> }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Channel &quot;</span> &lt;&lt; channel &lt;&lt; <span class="stringliteral">&quot;: baseline &quot;</span> &lt;&lt; baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a6e78bfbe3d2b3bf330b50c4f33769fcc">baseline</a></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; ADC# from &quot;</span> &lt;&lt; baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a59fa3e2422a5ded37aec5aefed89ff32">nSamples</a> &lt;&lt; <span class="stringliteral">&quot; samples in &quot;</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      &lt;&lt; baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#af4461688f13f92a662e4609f6c83aa35">nWaveforms</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; waveforms.size()</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; waveforms; found RMS=&quot;</span> &lt;&lt; baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#aa30846aa573a89accdc90d0ed9800a93">RMS</a> &lt;&lt; <span class="stringliteral">&quot; ADC#&quot;</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> chIndex = <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(channel);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    baselineForChannel(chIndex) = { baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a6e78bfbe3d2b3bf330b50c4f33769fcc">baseline</a>, baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#aa30846aa573a89accdc90d0ed9800a93">RMS</a> };</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">fHBaselines</a>) <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">fHBaselines</a>-&gt;Fill(<span class="keywordtype">double</span>(channel), baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a6e78bfbe3d2b3bf330b50c4f33769fcc">baseline</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> (chIndex &lt; <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a>.size())</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a>[chIndex].emplace_back(eventTime, baseline.<a class="code" href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a6e78bfbe3d2b3bf330b50c4f33769fcc">baseline</a>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  } <span class="comment">// for grouped waveforms</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// assign baselines to waveforms</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  std::vector&lt;icarus::WaveformBaseline&gt; baselines;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  baselines.reserve(waveforms.size());</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  art::Assns&lt;icarus::WaveformBaseline, raw::OpDetWaveform&gt; baselineToWaveforms;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  art::PtrMaker&lt;icarus::WaveformBaseline&gt; <span class="keyword">const</span> makeBaselinePtr(event);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  std::vector&lt;icarus::WaveformRMS&gt; RMSs;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  RMSs.reserve(waveforms.size());</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  art::Assns&lt;icarus::WaveformRMS, raw::OpDetWaveform&gt; RMStoWaveforms;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  art::PtrMaker&lt;icarus::WaveformRMS&gt; <span class="keyword">const</span> makeRMSPtr(event);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ iWaveform, waveform ]: <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a>(waveforms)) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    BaselineInfo_t baselineInfo</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      = channelBaselines[<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(waveform.ChannelNumber())];</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    art::Ptr&lt;raw::OpDetWaveform&gt; <span class="keyword">const</span> waveformPtr{ waveformHandle, iWaveform };</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    baselines.push_back(baselineInfo.baseline);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    RMSs.push_back(baselineInfo.RMS);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    baselineToWaveforms.addSingle(makeBaselinePtr(iWaveform), waveformPtr);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    RMStoWaveforms.addSingle(makeRMSPtr(iWaveform), waveformPtr);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  } <span class="comment">// for</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// output</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keyword">event</span>.put(</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    std::make_unique&lt;std::vector&lt;icarus::WaveformBaseline&gt;&gt;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      (std::move(baselines))</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    );</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keyword">event</span>.put</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    (std::make_unique&lt;std::vector&lt;icarus::WaveformRMS&gt;&gt;(std::move(RMSs)));</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">event</span>.put(</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    std::make_unique&lt;art::Assns&lt;icarus::WaveformBaseline, raw::OpDetWaveform&gt;&gt;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      (std::move(baselineToWaveforms))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">event</span>.put(</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    std::make_unique&lt;art::Assns&lt;icarus::WaveformRMS, raw::OpDetWaveform&gt;&gt;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      (std::move(RMStoWaveforms))</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::produce()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_aa1137e92f43e3ce1ef096466758f6576"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#aa1137e92f43e3ce1ef096466758f6576">icarus::PMTWaveformBaselinesFromChannelData::fOpDetWaveformTag</a></div><div class="ttdeci">art::InputTag const fOpDetWaveformTag</div><div class="ttdoc">Input optical waveform tag. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00331">PMTWaveformBaselinesFromChannelData_module.cc:331</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ac86ee049a7780f1d4ed3a0ec6e94e5ef"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">icarus::PMTWaveformBaselinesFromChannelData::fBaselinesVsTime</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::pair&lt; double, double &gt; &gt; &gt; fBaselinesVsTime</div><div class="ttdoc">For each channel, all event times and their baselines. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00380">PMTWaveformBaselinesFromChannelData_module.cc:380</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t_html_aa30846aa573a89accdc90d0ed9800a93"><div class="ttname"><a href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#aa30846aa573a89accdc90d0ed9800a93">opdet::SharedWaveformBaseline::BaselineInfo_t::RMS</a></div><div class="ttdeci">double RMS</div><div class="ttdoc">The RMS found during the extraction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00088">SharedWaveformBaseline.h:88</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a250f646459524d5925b3417d581ff630"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a250f646459524d5925b3417d581ff630">icarus::PMTWaveformBaselinesFromChannelData::groupByChannel</a></div><div class="ttdeci">static std::vector&lt; std::vector&lt; raw::OpDetWaveform const * &gt; &gt; groupByChannel(std::vector&lt; raw::OpDetWaveform &gt; const &amp;waveforms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00755">PMTWaveformBaselinesFromChannelData_module.cc:755</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a1ab68518eab3b21f6f5b962b398a955b"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a1ab68518eab3b21f6f5b962b398a955b">icarus::PMTWaveformBaselinesFromChannelData::fAlgoParams</a></div><div class="ttdeci">opdet::SharedWaveformBaseline::Params_t fAlgoParams</div><div class="ttdoc">Parameters for the baseline algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00346">PMTWaveformBaselinesFromChannelData_module.cc:346</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t_html_a59fa3e2422a5ded37aec5aefed89ff32"><div class="ttname"><a href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a59fa3e2422a5ded37aec5aefed89ff32">opdet::SharedWaveformBaseline::BaselineInfo_t::nSamples</a></div><div class="ttdeci">unsigned int nSamples</div><div class="ttdoc">Number of samples used for the extraction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00094">SharedWaveformBaseline.h:94</a></div></div>
<div class="ttc" id="namespaceutil_html_af0615b7538ff948ea65d5206a23c84f2"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a></div><div class="ttdeci">auto enumerate(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper tracking the number of iteration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/enumerate_8h_source.html#l00069">enumerate.h:69</a></div></div>
<div class="ttc" id="classopdet_1_1SharedWaveformBaseline_html"><div class="ttname"><a href="../../dd/d01/classopdet_1_1SharedWaveformBaseline.html">opdet::SharedWaveformBaseline</a></div><div class="ttdoc">Extracts a common baseline from waveforms. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00052">SharedWaveformBaseline.h:52</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a5db195dfaafb91682a35656145abb74a"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a5db195dfaafb91682a35656145abb74a">icarus::PMTWaveformBaselinesFromChannelData::fLogCategory</a></div><div class="ttdeci">std::string const fLogCategory</div><div class="ttdoc">Category name for the console output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00353">PMTWaveformBaselinesFromChannelData_module.cc:353</a></div></div>
<div class="ttc" id="OnlineDecoder_8fcl_html_ac3bc64ff22523df5f35d8f928ec038cd"><div class="ttname"><a href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a></div><div class="ttdeci">BEGIN_PROLOG baseline</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d82/OnlineDecoder_8fcl_source.html#l00014">OnlineDecoder.fcl:14</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t_html"><div class="ttname"><a href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html">opdet::SharedWaveformBaseline::BaselineInfo_t</a></div><div class="ttdoc">Type for algorithm result. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00079">SharedWaveformBaseline.h:79</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorClocksService_html"><div class="ttname"><a href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/DetectorClocksService_8h_source.html#l00021">DetectorClocksService.h:21</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorTimings_html"><div class="ttname"><a href="../../de/d0f/classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a></div><div class="ttdoc">A class exposing an upgraded interface of detinfo::DetectorClocksData. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd2/DetectorTimings_8h_source.html#l00249">DetectorTimings.h:249</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t_html_af4461688f13f92a662e4609f6c83aa35"><div class="ttname"><a href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#af4461688f13f92a662e4609f6c83aa35">opdet::SharedWaveformBaseline::BaselineInfo_t::nWaveforms</a></div><div class="ttdeci">unsigned int nWaveforms</div><div class="ttdoc">Number of waveforms used for the extraction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00091">SharedWaveformBaseline.h:91</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a27cb238e77d78c5af3389dedc9f13e2d"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a27cb238e77d78c5af3389dedc9f13e2d">icarus::PMTWaveformBaselinesFromChannelData::fExcludeSpillTimeIfMoreThan</a></div><div class="ttdeci">unsigned int fExcludeSpillTimeIfMoreThan</div><div class="ttdoc">Minimum number of waveforms when excluding trigger one is allowed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00334">PMTWaveformBaselinesFromChannelData_module.cc:334</a></div></div>
<div class="ttc" id="ExtractEnergyDepositionSummary__module_8cc_html_ac977879c6351c98d7eb034f13e4758a6"><div class="ttname"><a href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc.html#ac977879c6351c98d7eb034f13e4758a6">detTimings</a></div><div class="ttdeci">fDetProps &amp;fDetProps fDetProps &amp;fDetProps detTimings</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc_source.html#l00301">ExtractEnergyDepositionSummary_module.cc:301</a></div></div>
<div class="ttc" id="structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t_html_a6e78bfbe3d2b3bf330b50c4f33769fcc"><div class="ttname"><a href="../../d9/d3c/structopdet_1_1SharedWaveformBaseline_1_1BaselineInfo__t.html#a6e78bfbe3d2b3bf330b50c4f33769fcc">opdet::SharedWaveformBaseline::BaselineInfo_t::baseline</a></div><div class="ttdeci">double baseline</div><div class="ttdoc">Value of the baseline [ADC#]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/SharedWaveformBaseline_8h_source.html#l00085">SharedWaveformBaseline.h:85</a></div></div>
<div class="ttc" id="namespacedetinfo_1_1timescales_html_abd0daf821f464d7aec05b35a43053145"><div class="ttname"><a href="../../dc/d8b/namespacedetinfo_1_1timescales.html#abd0daf821f464d7aec05b35a43053145">detinfo::timescales::electronics_time</a></div><div class="ttdeci">timescale_traits&lt; ElectronicsTimeCategory &gt;::time_point_t electronics_time</div><div class="ttdoc">A point in time on the electronics time scale. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/daf/DetectorTimingTypes_8h_source.html#l00309">DetectorTimingTypes.h:309</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a4c17db7b59c01fb930d3322f87bd790a"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">icarus::PMTWaveformBaselinesFromChannelData::fHBaselines</a></div><div class="ttdeci">TH2 * fHBaselines</div><div class="ttdoc">All baselines, per channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00377">PMTWaveformBaselinesFromChannelData_module.cc:377</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a8d432fd6883570554f0b7dae7f887794"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a8d432fd6883570554f0b7dae7f887794">icarus::PMTWaveformBaselinesFromChannelData::removeWaveformsAround</a></div><div class="ttdeci">unsigned int removeWaveformsAround(std::vector&lt; raw::OpDetWaveform const * &gt; &amp;waveforms, double time) const </div><div class="ttdoc">Removes waveforms containing time, retuning how many were removed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00771">PMTWaveformBaselinesFromChannelData_module.cc:771</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d432fd6883570554f0b7dae7f887794"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::removeWaveformsAround </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> const * &gt; &amp;&#160;</td>
          <td class="paramname"><em>waveforms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes <code>waveforms</code> containing <code>time</code>, retuning how many were removed. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00771">771</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;{</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// tick duration in the same unit as the electronics time scale times</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// (that is microseconds, actually)</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordtype">double</span> <span class="keyword">const</span> tickDuration</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    = detinfo::timescales::electronics_time::interval_t{ <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a12e1f639a6ce9ebcfc7435293dda6536">fOpticalTick</a> }.value();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span> hasTriggerTime</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    = [tickDuration,time](<a class="code" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> <span class="keyword">const</span>* waveform)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordtype">double</span> <span class="keyword">const</span> relTime = time - waveform-&gt;TimeStamp();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">return</span> (relTime &gt;= 0.0) &amp;&amp; (relTime &lt; (waveform-&gt;size() * tickDuration));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    };</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span> iLast</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    = std::remove_if(waveforms.begin(), waveforms.end(), hasTriggerTime);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> nRemoved = <a class="code" href="../../da/d4d/namespaceicarus.html#a6ad3253842c1a0803df7cd600b60c35f">std::distance</a>(iLast, waveforms.end());</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  waveforms.erase(iLast, waveforms.end());</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">return</span> nRemoved;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::removeWaveformsAround()</span></div>
<div class="ttc" id="classraw_1_1OpDetWaveform_html"><div class="ttname"><a href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h_source.html#l00025">lardataobj/lardataobj/RawData/OpDetWaveform.h:25</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a12e1f639a6ce9ebcfc7435293dda6536"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a12e1f639a6ce9ebcfc7435293dda6536">icarus::PMTWaveformBaselinesFromChannelData::fOpticalTick</a></div><div class="ttdeci">util::quantities::intervals::nanoseconds fOpticalTick</div><div class="ttdoc">Duration of a PMT digitizer tick. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00361">PMTWaveformBaselinesFromChannelData_module.cc:361</a></div></div>
<div class="ttc" id="namespaceicarus_html_a6ad3253842c1a0803df7cd600b60c35f"><div class="ttname"><a href="../../da/d4d/namespaceicarus.html#a6ad3253842c1a0803df7cd600b60c35f">icarus::distance</a></div><div class="ttdeci">double distance(geo::Point_t const &amp;point, CathodeDesc_t const &amp;cathode)</div><div class="ttdoc">Returns the distance of a point from the cathode. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd1/CathodeCrossingUtils_8cxx_source.html#l00035">CathodeCrossingUtils.cxx:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5cb6af4fcef8139ead7b50e247282f4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::PMTWaveformBaselinesFromChannelData::setupPlots </td>
          <td>(</td>
          <td class="paramtype">art::ProcessingFrame const &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates all the plots to be filled by the module. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00708">708</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a> = *(frame.serviceHandle&lt;art::TFileService&gt;());</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; geom = *(frame.serviceHandle&lt;<a class="code" href="../../d8/df3/classgeo_1_1Geometry.html">geo::Geometry</a>&gt;()-&gt;provider());</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a9a78d706692ee440f9ae611e051820eb">fNPlotChannels</a> = geom.NOpChannels();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">fHBaselines</a> = <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a>.make&lt;TH2F&gt;(</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="stringliteral">&quot;Baselines&quot;</span>,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="stringliteral">&quot;PMT baseline;channel;baseline per channel [ / 8 ADC ]&quot;</span>,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a9a78d706692ee440f9ae611e051820eb">fNPlotChannels</a>, 0.0, double(fNPlotChannels),</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    256, 13312.0, 15360.0</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// these are graphs, and it is more convenient to carry around their data</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// in a vector than carrying around the graphs themselves;</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// `buildBaselineGraphs()` will turn that data into graph at end of the job;</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// here we just declare which channels we are going to plot.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">fBaselinesVsTime</a>.resize(fNPlotChannels);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;} <span class="comment">// icarus::PMTWaveformBaselinesFromChannelData::setupPlots()</span></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_ac86ee049a7780f1d4ed3a0ec6e94e5ef"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#ac86ee049a7780f1d4ed3a0ec6e94e5ef">icarus::PMTWaveformBaselinesFromChannelData::fBaselinesVsTime</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::pair&lt; double, double &gt; &gt; &gt; fBaselinesVsTime</div><div class="ttdoc">For each channel, all event times and their baselines. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00380">PMTWaveformBaselinesFromChannelData_module.cc:380</a></div></div>
<div class="ttc" id="classgeo_1_1Geometry_html"><div class="ttname"><a href="../../d8/df3/classgeo_1_1Geometry.html">geo::Geometry</a></div><div class="ttdoc">The geometry of one entire detector, as served by art. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8b/Geometry_8h_source.html#l00181">Geometry.h:181</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a9a78d706692ee440f9ae611e051820eb"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a9a78d706692ee440f9ae611e051820eb">icarus::PMTWaveformBaselinesFromChannelData::fNPlotChannels</a></div><div class="ttdeci">std::size_t fNPlotChannels</div><div class="ttdoc">Number of plotted channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00376">PMTWaveformBaselinesFromChannelData_module.cc:376</a></div></div>
<div class="ttc" id="NuVertexChargeTree__module_8cc_html_aa8ae0901ab0cec47d6c9bf9c22af764f"><div class="ttname"><a href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a></div><div class="ttdeci">art::ServiceHandle&lt; art::TFileService &gt; tfs</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d33/NuVertexChargeTree__module_8cc_source.html#l00254">NuVertexChargeTree_module.cc:254</a></div></div>
<div class="ttc" id="classicarus_1_1PMTWaveformBaselinesFromChannelData_html_a4c17db7b59c01fb930d3322f87bd790a"><div class="ttname"><a href="../../d3/db7/classicarus_1_1PMTWaveformBaselinesFromChannelData.html#a4c17db7b59c01fb930d3322f87bd790a">icarus::PMTWaveformBaselinesFromChannelData::fHBaselines</a></div><div class="ttdeci">TH2 * fHBaselines</div><div class="ttdoc">All baselines, per channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00377">PMTWaveformBaselinesFromChannelData_module.cc:377</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1ab68518eab3b21f6f5b962b398a955b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d91/structopdet_1_1SharedWaveformBaseline_1_1Params__t.html">opdet::SharedWaveformBaseline::Params_t</a> icarus::PMTWaveformBaselinesFromChannelData::fAlgoParams</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameters for the baseline algorithm. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00346">346</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ac86ee049a7780f1d4ed3a0ec6e94e5ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;std::pair&lt;double, double&gt; &gt; &gt; icarus::PMTWaveformBaselinesFromChannelData::fBaselinesVsTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each channel, all event times and their baselines. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00380">380</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6702288d7eb27ed174a9672341a26963"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const icarus::PMTWaveformBaselinesFromChannelData::fBaselineTimeAverage { 0.0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Width of baseline time profile binning [s]. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00351">351</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a27cb238e77d78c5af3389dedc9f13e2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::fExcludeSpillTimeIfMoreThan</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum number of waveforms when excluding trigger one is allowed. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00334">334</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4c17db7b59c01fb930d3322f87bd790a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TH2* icarus::PMTWaveformBaselinesFromChannelData::fHBaselines = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All baselines, per channel. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00377">377</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a5db195dfaafb91682a35656145abb74a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string const icarus::PMTWaveformBaselinesFromChannelData::fLogCategory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Category name for the console output stream. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00353">353</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9a78d706692ee440f9ae611e051820eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t icarus::PMTWaveformBaselinesFromChannelData::fNPlotChannels = 0U</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of plotted channels. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00376">376</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aa1137e92f43e3ce1ef096466758f6576"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">art::InputTag const icarus::PMTWaveformBaselinesFromChannelData::fOpDetWaveformTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Input optical waveform tag. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00331">331</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a12e1f639a6ce9ebcfc7435293dda6536"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d1a/namespaceutil_1_1quantities_1_1intervals.html#a439758e928a1b5231e459628ae43fe98">util::quantities::intervals::nanoseconds</a> icarus::PMTWaveformBaselinesFromChannelData::fOpticalTick</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duration of a PMT digitizer tick. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00361">361</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="af8481c2b7fc38ded9ebf9ead93eebb69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool const icarus::PMTWaveformBaselinesFromChannelData::fPlotBaselines</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to produce plots. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00348">348</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a05216685e146d9ee28ef0b183db509a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;art::InputTag&gt; icarus::PMTWaveformBaselinesFromChannelData::fPMTconfigTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tag for PMT configuration data product. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00340">340</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a3e0e89784bdce184032575646eaf6b40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::PMTWaveformBaselinesFromChannelData::fPretriggerSamples</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Samples in the pre-trigger buffer. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00337">337</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ac7d91d983aa05a15bd861b6246860282"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float const icarus::PMTWaveformBaselinesFromChannelData::fSampleFraction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fraction of pretrigger buffer to use. </p>

<p>Definition at line <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html#l00342">342</a> of file <a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../d4/d9f/PMTWaveformBaselinesFromChannelData__module_8cc_source.html">PMTWaveformBaselinesFromChannelData_module.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
