<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ICARUSgeometryChecker.py Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_6b76ded0815b7a573c93ed1a5559af09.html">icarusalg</a></li><li class="navelem"><a class="el" href="../../dir_df9e692a4e0bb00922614fdcfc892dd4.html">icarusalg</a></li><li class="navelem"><a class="el" href="../../dir_809a46d1382c52190e377f42618230a8.html">Geometry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ICARUSgeometryChecker.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/d1f/ICARUSgeometryChecker_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html">    1</a></span>&#160;<span class="comment">#!/usr/bin/env python</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># Changes:</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"># 20200521 (petrillo@slac.stanford.edu) [v2.0]</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">#   updated to Python 3</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># 20200707 (petrillo@slac.stanford.edu) [v2.1]</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">#   added wire plane depth alignment tests</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#adb3af66a7545e738b89b0089960fe935">   10</a></span>&#160;__doc__ = <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="stringliteral">Performs simple checks on ICARUS geometry.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a394453e857b121ad29de219bfa2589a3">   13</a></span>&#160;__version__ = <span class="stringliteral">&quot;%(prog)s 2.1&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> itertools</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> logging</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"># ##############################################################################</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html">   20</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html">NestedIteration</a>:</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html">   21</a></span>&#160;  <span class="keyword">class </span><a class="code" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html">BadIterator</a>:</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html#a8ba40bc6fb59c8bb016e3448f76d3d7c">   22</a></span>&#160;    <span class="keyword">def </span><a class="code" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html#a8ba40bc6fb59c8bb016e3448f76d3d7c">__iter__</a>(self): <span class="keywordflow">return</span> self</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html#ad70fd5b1938816c7e2eebdcb6a7d922b">   23</a></span>&#160;    <span class="keyword">def</span> next(self): <span class="keywordflow">raise</span> StopIteration</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="comment"># class BadIterator</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    </div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#aa3599b9f0b6f5a4c8b4fb3082ee7aedd">   26</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#aa3599b9f0b6f5a4c8b4fb3082ee7aedd">__init__</a>(self, iterable):</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a234a430aa1dc952b580f45f4bf3a19d0">   27</a></span>&#160;    self.<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a234a430aa1dc952b580f45f4bf3a19d0">outerIter</a> = iter(iterable)</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#ae5c71b4d6db308aa790f113753c87259">   28</a></span>&#160;    self.<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#ae5c71b4d6db308aa790f113753c87259">innerIter</a> = <a class="code" href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html">NestedIteration.BadIterator</a>()</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment"># __init__()</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a18cf468b8a85f032d409f8f605a86f5f">   31</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a18cf468b8a85f032d409f8f605a86f5f">__iter__</a>(self): <span class="keywordflow">return</span> self</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a04babf26aa0d7f4662e6fa28a6b10160">   33</a></span>&#160;  <span class="keyword">def</span> next(self):</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keywordflow">try</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a04babf26aa0d7f4662e6fa28a6b10160">next</a>(self.<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#ae5c71b4d6db308aa790f113753c87259">innerIter</a>)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="keywordflow">except</span> StopIteration: <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      self.<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#ae5c71b4d6db308aa790f113753c87259">innerIter</a> = iter(<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a04babf26aa0d7f4662e6fa28a6b10160">next</a>(self.<a class="code" href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a234a430aa1dc952b580f45f4bf3a19d0">outerIter</a>)) <span class="comment"># let StopIteration through</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment"># while</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment"># next()</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"># class NestedIteration</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"># ##############################################################################</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#af5d632e37d4038e71ce334cdeaea7af4">   45</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#af5d632e37d4038e71ce334cdeaea7af4">GeoPairToString</a>(pair):</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot; - &quot;</span>.join(map(<span class="keyword">lambda</span> obj: str(obj.ID()), pair))</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ab2f037b03b3fcc5d161bd55bf6767b33">   48</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ab2f037b03b3fcc5d161bd55bf6767b33">BoxToString</a>(box): <span class="keywordflow">return</span> <span class="stringliteral">&quot;%s -- %s&quot;</span> % (box.Min(), box.Max())</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a2e641c792d13732deea3f563b5905afb">   52</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a2e641c792d13732deea3f563b5905afb">boxID</a>(box, default):</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">try</span>: <span class="keywordflow">return</span> box.ID()</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">except</span> AttributeError: <span class="keywordflow">return</span> default</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"># boxID()</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5b09a6e0972211f2c2b909c3ef393115">   59</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5b09a6e0972211f2c2b909c3ef393115">CheckGeoObjOverlaps</a>(objs, objName = None, extractBox = None):</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;Returns a list of pairs of overlapping objects (empty if no overlap).&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span> objName <span class="keywordflow">is</span> <span class="keywordtype">None</span>: objName = objs.__class__.__name__</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  overlaps = []</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">for</span> (iObj1, obj1), (iObj2, obj2) <span class="keywordflow">in</span> itertools.combinations(<a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">enumerate</a>(objs), 2):</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    box1 = obj1 <span class="keywordflow">if</span> extractBox <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> extractBox(obj1)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    box2 = obj2 <span class="keywordflow">if</span> extractBox <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> extractBox(obj2)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> box2.Overlaps(box1): <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    logging.error(<span class="stringliteral">&quot;%s %s (%s to %s) and %s (%s to %s) overlap!&quot;</span>, objName,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;     <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a2e641c792d13732deea3f563b5905afb">boxID</a>(box1, iObj1), box1.Min(), box1.Max(),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;     <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a2e641c792d13732deea3f563b5905afb">boxID</a>(box2, iObj2), box2.Min(), box2.Max(),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;     )</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    overlaps.append( ( obj1, obj2, ) )</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment"># for boxes</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> overlaps</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"># CheckGeoObjOverlaps()</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5f86f0f9d4385e1e9ccfed56cdf4f4f7">   78</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5f86f0f9d4385e1e9ccfed56cdf4f4f7">checkPlaneAlignment</a>(planes, tolerance = 0.1):</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;Check alignment in y and z position of planes on the same x.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">  Returns triples (distance, first plane, second plane) for each misaligned</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">  pair of planes.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">assert</span> tolerance &gt;= 0.0</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  PlanesByX = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ae482db27a186b5a35bf225d0b108dc3d">groupPlanesByX</a>(planes, sortBy = <span class="stringliteral">&#39;z&#39;</span>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  inconsistentPlanes = {}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">for</span> planesOnX <span class="keywordflow">in</span> PlanesByX:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> len(planesOnX) &lt; 2: <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    planeIter = iter(planesOnX)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    refPlane = next(planeIter)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span> nextPlane <span class="keywordflow">in</span> planeIter:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      refBox = refPlane.BoundingBox()</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      nextBox = nextPlane.BoundingBox()</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment"># 1. check plane alignment on z direction</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      distance = nextBox.MinZ() - refBox.MaxZ()</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(distance) &gt; tolerance:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        logging.error(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         <span class="stringliteral">&quot;Planes on x=%s are misaligned along z: ( %g -- %g ) (%s) vs. ( %g -- %g ) (%s)&quot;</span>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refBox.MinZ(), refBox.MaxZ(), refPlane.ID(),</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         nextBox.MinZ(), nextBox.MaxZ(), nextPlane.ID(),</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         )</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;zalign&#39;</span>, []) \</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         .append( ( distance, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment"># if misaligned on z</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment"># 2. check plane alignment on y direction</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      topDistance = nextBox.MaxY() - refBox.MaxY()</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(topDistance) &gt; tolerance:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        logging.error(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;         <span class="stringliteral">&quot;Planes on x=%s are misaligned along y: ( %g -- %g ) (%s) vs. ( %g -- %g ) (%s)&quot;</span>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refBox.MinY(), refBox.MaxY(), refPlane.ID(),</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         nextBox.MinY(), nextBox.MaxY(), nextPlane.ID(),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;         )</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;topYalign&#39;</span>, []) \</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         .append( ( topDistance, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment"># if misaligned on top y</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      bottomDistance = nextBox.MinY() - refBox.MinY()</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(bottomDistance) &gt; tolerance:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;bottomYalign&#39;</span>, []) \</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;         .append( ( bottomDistance, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="comment"># if misaligned on bottom y</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> <span class="stringliteral">&#39;topYalign&#39;</span> <span class="keywordflow">in</span> inconsistentPlanes <span class="keywordflow">or</span> <span class="stringliteral">&#39;bottomYalign&#39;</span> <span class="keywordflow">in</span> inconsistentPlanes:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        logging.error(</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;         <span class="stringliteral">&quot;Planes on x=%s are misaligned along y: ( %g -- %g ) (%s) vs. ( %g -- %g ) (%s)&quot;</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refBox.MinY(), refBox.MaxY(), refPlane.ID(),</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;         nextBox.MinY(), nextBox.MaxY(), nextPlane.ID(),</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;         )</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment"># if misaligned on bottom y</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="comment"># 3. check wire view</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> refPlane.View() != nextPlane.View():</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        logging.error(<span class="stringliteral">&quot;Plane %s is on view &#39;%s&#39;, %s is on view &#39;%s&#39;.&quot;</span>,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         refPlane.ID(), ROOT.geo.PlaneGeo.ViewName(refPlane.View()),</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;         nextPlane.ID(), ROOT.geo.PlaneGeo.ViewName(nextPlane.View()),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         )</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;view&#39;</span>, []) \</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         .append( ( refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="comment"># if views do not match</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="comment"># 4. check wire orientation</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> 1.0 - refPlane.GetIncreasingWireDirection().Dot(nextPlane.GetIncreasingWireDirection()) &gt; tolerance:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        logging.error(<span class="stringliteral">&quot;Plane %s measures direction %s, %s measures %s.&quot;</span>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         refPlane.ID(), refPlane.GetIncreasingWireDirection(),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         nextPlane.ID(), nextPlane.GetIncreasingWireDirection(),</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         )</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;direction&#39;</span>, []) \</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         .append( ( refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment"># if views do not match</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment"># 5. check wire extremes alignment along y and z</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="comment"># </span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="comment"># This check is different than the previous one in that it uses the actual</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="comment"># coverage of wires rather than the wire plane box boundaries.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="comment">#</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      refWireMinY = min(</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        min(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> refPlane.IterateWires()</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        )</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      refWireMaxY = max(</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        max(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> refPlane.IterateWires()</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        )</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      refWireMaxZ = max(</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        max(wire.GetStart().Z(), wire.GetEnd().Z())</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> refPlane.IterateWires()</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        )</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      nextWireMinY = min(</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        min(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> nextPlane.IterateWires()</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        )</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      nextWireMaxY = max(</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        max(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> nextPlane.IterateWires()</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        )</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      nextWireMinZ = min(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        min(wire.GetStart().Z(), wire.GetEnd().Z())</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> nextPlane.IterateWires()</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        )</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(nextWireMinZ - refWireMaxZ) &gt; tolerance:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        logging.error(</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          <span class="stringliteral">&quot;Wires of planes on x=%s are misaligned along z: %s ends at %g cm, %s restarts at %g cm&quot;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refPlane.ID(), refWireMaxZ, nextPlane.ID(), nextWireMinZ, </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          )</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;wireZalign&#39;</span>, []) \</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;         .append( ( nextWireMinZ - refWireMaxZ, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment"># if misaligned on z</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(nextWireMaxY - refWireMaxY) &gt; tolerance:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        logging.error(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;          <span class="stringliteral">&quot;Wires of planes on x=%s are misaligned along y: %s tops at %g cm, %s at %g cm&quot;</span>,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refPlane.ID(), refWireMaxY, nextPlane.ID(), nextWireMaxY, </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          )</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;wireTopYalign&#39;</span>, []) \</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         .append( ( nextWireMaxY - refWireMaxY, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment"># if misaligned on top y</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(nextWireMinY - refWireMinY) &gt; tolerance:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        logging.error(</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="stringliteral">&quot;Wires of planes on x=%s are misaligned along y: %s floors at %g cm, %s at %g cm&quot;</span>,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          refPlane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), refPlane.ID(), refWireMinY, nextPlane.ID(), nextWireMinY, </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          )</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        inconsistentPlanes.setdefault(<span class="stringliteral">&#39;wireBottomYalign&#39;</span>, []) \</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         .append( ( nextWireMinY - refWireMinY, refPlane, nextPlane, ) )</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="comment"># if misaligned on top y</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      refPlane = nextPlane</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment"># for all following planes on the same x</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment"># for groups of planes along the same x</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">return</span> inconsistentPlanes</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"># checkPlaneAlignment()</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a8041de3f5297c0316a81b43c5d6b1a2e">  225</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a8041de3f5297c0316a81b43c5d6b1a2e">wireEndBorders</a>(end, borderCoords, tolerance):</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;Returns the borders touched by the specified wire end.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment"># this is overdoing, since the check only cares whether any border is touched</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  borders = set()</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">for</span> side <span class="keywordflow">in</span> ( <span class="stringliteral">&#39;top&#39;</span>, <span class="stringliteral">&#39;bottom&#39;</span>, ):</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(end.Y() - borderCoords[side]) &lt;= tolerance: borders.add(side)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keyword">assert</span> (<span class="stringliteral">&#39;top&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> borders) <span class="keywordflow">or</span> (<span class="stringliteral">&#39;bottom&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> borders)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">for</span> side <span class="keywordflow">in</span> ( <span class="stringliteral">&#39;upstream&#39;</span>, <span class="stringliteral">&#39;downstream&#39;</span>, ):</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(end.Z() - borderCoords[side]) &lt;= tolerance: borders.add(side)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">assert</span> (<span class="stringliteral">&#39;upstream&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> borders) <span class="keywordflow">or</span> (<span class="stringliteral">&#39;downstream&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> borders)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> borders</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"># wireEndBorders()</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a9fb44db05b1e188f8f17c2187574f94c">  245</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a9fb44db05b1e188f8f17c2187574f94c">checkWireEndingsInPlane</a>(plane, tolerance = 0.01):</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;Wires which do not end on any border of the plane are returned.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">  The border is determined by the wires themselves rather than the plane box,</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">  which could in principle extend further (but not less).</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">  A dictionary is returned with key the ID of the wire not ending on a border,</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">  and a list of end labels (&#39;start&#39;, &#39;end&#39;) listing which end did not.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">assert</span> tolerance &gt;= 0.0</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment"># 1. determine the boundaries (brute force, brute programming)</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  borderCoords = {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="stringliteral">&#39;bottom&#39;</span>: min(</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      min(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> plane.IterateWires()</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      ),</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="stringliteral">&#39;top&#39;</span>: max(</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      max(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> plane.IterateWires()</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      ),</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="stringliteral">&#39;upstream&#39;</span>: min(</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      min(wire.GetStart().Z(), wire.GetEnd().Z())</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> plane.IterateWires()</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      ),</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="stringliteral">&#39;downstream&#39;</span>: max(</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      max(wire.GetStart().Z(), wire.GetEnd().Z())</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> plane.IterateWires()</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      ),</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  } <span class="comment"># borderCoords</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  shorterWires = dict()</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">for</span> iWire, wire <span class="keywordflow">in</span> <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">enumerate</a>(plane.IterateWires()):</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    wireID = ROOT.geo.WireID(plane.ID(), iWire)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment"># 1. check the start</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    start = wire.GetStart()</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    borders = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a8041de3f5297c0316a81b43c5d6b1a2e">wireEndBorders</a>(start, borderCoords, tolerance)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment"># there should be at least one border touched by each wire end</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> len(borders) == 0:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      logging.error(</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;       <span class="stringliteral">&quot;Wire %s \&quot;start\&quot; at %s cm does not touch any plane border (%s)&quot;</span>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;       wireID, start, <span class="stringliteral">&quot;, &quot;</span>.join(<span class="stringliteral">&quot;%s: %g&quot;</span> % item <span class="keywordflow">for</span> item <span class="keywordflow">in</span> borderCoords.items()),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;       )</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      shorterWires.setdefault(wireID, []).append(<span class="stringliteral">&#39;start&#39;</span>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment"># if error</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment"># 2. check the end</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    end = wire.GetEnd()</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    borders = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a8041de3f5297c0316a81b43c5d6b1a2e">wireEndBorders</a>(end, borderCoords, tolerance)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment"># there should be at least one border touched by each wire end</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> len(borders) == 0:</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      logging.error(</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;       <span class="stringliteral">&quot;Wire %s \&quot;end\&quot; at %s cm does not touch any plane border (%s)&quot;</span>,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;       wireID, end, <span class="stringliteral">&quot;, &quot;</span>.join(<span class="stringliteral">&quot;%s: %g&quot;</span> % item <span class="keywordflow">for</span> item <span class="keywordflow">in</span> borderCoords.items()),</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;       )</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      shorterWires.setdefault(wireID, []).append(<span class="stringliteral">&#39;end&#39;</span>)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment"># if error</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment"># for</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">return</span> shorterWires</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"># checkWireEndingsInPlane()</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#aac1e7013e8bf83e123ecbaae50fa828d">  321</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#aac1e7013e8bf83e123ecbaae50fa828d">checkPlaneWireAlignment</a>(planeA, planeB, tolerance = 0.01):</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral">  Wires in the plane A are verified to have a continuation in plane B as another</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="stringliteral">  wire. Only wires that reach the side (extreme z coordinate) are tested.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="stringliteral">  Wires are assumed to have to go top to bottom on y direction.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="stringliteral">  The list of misaligned wires is returned in the 5-uple form:</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="stringliteral">      </span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="stringliteral">      ( shift, left wire ID, left wire, right wire ID, right wire )</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="stringliteral">      </span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="stringliteral">  if the wire on the left plane was matched to one on the right plane, and</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="stringliteral">      </span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral">      ( None, left wire ID, left wire, None, None )</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">      </span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">  if the wire on the left plane was not matched to any wire on the right plane.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment"># throughout this code, left refers to lower _z_, right to higher _z_</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  misalignedWires = []</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment"># define a left and a right plane</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> planeA.GetCenter().Z() &lt; planeB.GetCenter().Z():</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    leftPlane, rightPlane = planeA, planeB</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    leftPlane, rightPlane = planeB, planeA</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="comment"># wire pitch should be the same for the two planes</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  rightWirePitch = rightPlane.WirePitch()</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keyword">assert</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(rightWirePitch - leftPlane.WirePitch()) &lt; tolerance</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment"># 1. determine the sides</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  leftMinY = min(</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   min(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> leftPlane.IterateWires()</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   )</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  leftMaxY = max(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   max(wire.GetStart().Y(), wire.GetEnd().Y())</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> leftPlane.IterateWires()</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   )</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  leftMaxZ = max(</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   max(wire.GetStart().Z(), wire.GetEnd().Z())</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">for</span> wire <span class="keywordflow">in</span> leftPlane.IterateWires()</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   )</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment"># RminZ = min( min(wire.GetStart().Z(), wire.GetEnd().Z()) for wire in rightPlane.IterateWires() )</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment"># 2. for each wire in left plane ending close to right side, pick and test</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">#    the matching wire of the right plane</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  leftEndPos = <span class="keyword">lambda</span> wire: \</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   wire.GetStart() <span class="keywordflow">if</span> wire.GetStart().Z() &gt; wire.GetEnd().Z() <span class="keywordflow">else</span> wire.GetEnd()</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  rightStartPos = <span class="keyword">lambda</span> wire: \</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   wire.GetStart() <span class="keywordflow">if</span> wire.GetStart().Z() &lt; wire.GetEnd().Z() <span class="keywordflow">else</span> wire.GetEnd()</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  stats = <a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html">StatCollector</a>()</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  wireNoDiff = <span class="keywordtype">None</span> <span class="comment"># offset in wire number only between matching wires</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">for</span> leftWireNo, leftWire <span class="keywordflow">in</span> <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">enumerate</a>(leftPlane.IterateWires()):</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    leftEnd = leftEndPos(leftWire)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment"># 2.1. if the wire does not end on the right edge, move on;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">#      if the wire ends on a corner, also move on</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment"># </span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(leftEnd.Z() - leftMaxZ) &gt; 0.01: <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(leftEnd.Y() - leftMaxY) &lt; 0.01 <span class="keywordflow">or</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(leftEnd.Y() - leftMinY) &lt; 0.01:</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment"># 2.2. find the closest wire on the left </span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    leftWireID = ROOT.geo.WireID(leftPlane.ID(), leftWireNo)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      rightWireID = rightPlane.NearestWireID(leftEnd)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">#except ( TypeError, ROOT.geo.InvalidWireError ) as e:</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> e:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      rightWireID = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">except</span> ROOT.geo.InvalidWireError <span class="keyword">as</span> e:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment"># this branch is a placeholder, since Python 3 is not able to catch</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="comment"># ROOT.geo.InvalidWireError (and if one is thrown, a TypeError will raise)</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      logging.error(</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;       <span class="stringliteral">&quot;No wire on %s is close enough to %s (closest is %s, but would have been %s)&quot;</span>, </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;       rightPlane.ID(), leftWireID,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;       (e.suggestedWireID() <span class="keywordflow">if</span> e.hasSuggestedWire() <span class="keywordflow">else</span> <span class="stringliteral">&quot;unknown&quot;</span>),</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;       (e.badWireID() <span class="keywordflow">if</span> e.hasBadWire() <span class="keywordflow">else</span> <span class="stringliteral">&quot;unknown&quot;</span>),</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;       )</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      rightWireID = e.badWireID() <span class="keywordflow">if</span> e.hasBadWire() <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      rightWireID.markInvalid()</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      misalignedWires.append( ( <span class="keywordtype">None</span>, leftWireID, leftWire, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, ) )</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment"># try ... except no wire matched</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> rightWireID:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      msg = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">if</span> rightWireID <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        msg += <span class="stringliteral">&quot;No wire on {} is close enough to {}&quot;</span> \</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;         .format(rightPlane.ID(), leftWireID)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">else</span>: <span class="comment"># just invalid</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        msg += <span class="stringliteral">&quot;No wire on {} is close enough to {} (would have been {})&quot;</span> \</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         .format(rightPlane.ID(), leftWireID, rightWireID)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="comment"># if ... else</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      wireCoord = rightPlane.WireCoordinate(leftEnd)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      msg += <span class="stringliteral">&quot;; closest would have been {} W: {}&quot;</span> \</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;       .format(rightPlane.ID(), wireCoord)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      nearestWireID = ROOT.geo.WireID(rightPlane.ID(), int(0.5 + wireCoord)) \</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       <span class="keywordflow">if</span> 0.5 + wireCoord &gt;= 0.0 <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      nearestWire = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">if</span> nearestWireID <span class="keywordflow">and</span> rightPlane.HasWire(nearestWireID):</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        nearestWire = rightPlane.Wire(nearestWireID) </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">if</span> nearestWire:</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        msg += <span class="stringliteral">&quot;; actual {} ends at: {}&quot;</span> \</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;         .format(nearestWireID, rightStartPos(nearestWire))</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      logging.error(msg)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      misalignedWires.append( ( <span class="keywordtype">None</span>, leftWireID, leftWire, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, ) )</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    rightWire = rightPlane.Wire(rightWireID)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment"># 2.3. check the projected distance of that wire from this one</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    shift = leftWire.DistanceFrom(rightWire)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    stats.add(shift)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment"># 2.4. compare wire orientation</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    leftWire.Direction().Dot(rightWire.Direction())</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> 1.0 - leftWire.Direction().Dot(rightWire.Direction()) &gt; tolerance:</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      logging.error(</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;       <span class="stringliteral">&quot;Wire %s has direction %s, the matched %s has %s&quot;</span>,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;       leftWireID, leftWire.Direction(),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;       rightWireID, rightWire.Direction(),</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;       )</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment"># if too far</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment"># 2.5. check that wires touch</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    d = (leftEndPos(leftWire) - rightStartPos(rightWire)).Mag()</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> d &gt; tolerance:</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      logging.debug(</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="stringliteral">&quot;Distance of wire %s (%s) from the matched wire %s (%s): %g&quot;</span>,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        leftWireID, leftEndPos(leftWire),</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        rightWireID, rightStartPos(rightWire),</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        d</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment"># find which is the wire physically closest to leftWire</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      closestWireID, d_min = rightWireID, d</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      testWireID = rightWireID</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">while</span> testWireID.Wire &gt; 0:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        testWireID.Wire -= 1</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        testWire = rightPlane.Wire(testWireID)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        test_d = (leftEndPos(leftWire) - rightStartPos(testWire)).Mag()</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        logging.debug(<span class="stringliteral">&quot;Distance from %s (%s): %g&quot;</span>, testWireID, rightStartPos(testWire), test_d)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> test_d &gt;= d_min: <span class="keywordflow">break</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        closestWireID, d_min = testWireID, test_d</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment"># while</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      testWireID = rightWireID</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      LastWireNo = rightPlane.Nwires() - 1</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">while</span> testWireID.Wire &lt; LastWireNo:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        testWireID.Wire += 1</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        testWire = rightPlane.Wire(testWireID)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        test_d = (leftEndPos(leftWire) - rightStartPos(testWire)).Mag()</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        logging.debug(<span class="stringliteral">&quot;Distance from %s (%s): %g&quot;</span>, testWireID, rightStartPos(testWire), test_d)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> test_d &gt;= d_min: <span class="keywordflow">break</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        closestWireID, d_min = testWireID, test_d</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment"># while</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      logging.error(</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;       <span class="stringliteral">&quot;Wire %s ends at %s, the matched wire %s starts at %s, %g cm away.&quot;</span>,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;       leftWireID, leftEndPos(leftWire),</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;       rightWireID, rightStartPos(rightWire),</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;       d</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;       )</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> closestWireID != rightWireID:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        logging.error(</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <span class="stringliteral">&quot; =&gt; the closest wire is actually %s starting at %s, %g cm away&quot;</span>,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         closestWireID, rightPlane.Wire(closestWireID), d_min</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         )</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment"># if</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      misalignedWires.append( ( d_min, leftWireID, leftWire, rightWireID, rightWire ) )</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment"># if too far</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment"># for wires in the left plane</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> stats.entries() &gt; 0:</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    logging.debug(<span class="stringliteral">&quot;Shift for %d wires between %s and %s: %g +/- %g cm&quot;</span>,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;     stats.entries(), leftPlane.ID(), rightPlane.ID(),</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;     stats.average(), stats.RMS(),</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;     )</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    logging.debug(<span class="stringliteral">&quot;No  wire shift statistics collected.&quot;</span>)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">return</span> misalignedWires</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"># checkPlaneWireAlignment()</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a45177e4511f6f1e07c63c8ae879c5a09">  528</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a45177e4511f6f1e07c63c8ae879c5a09">checkWireAlignment</a>(planes, tolerance = 0.1):</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="stringliteral">&quot;&quot;&quot;Check alignment in z position of planes on the same x.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">  Returns triples (distance, first plane, second plane) for each misaligned</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">  pair of planes.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keyword">assert</span> tolerance &gt;= 0.0</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  PlanesByX = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ae482db27a186b5a35bf225d0b108dc3d">groupPlanesByX</a>(planes, sortBy = <span class="stringliteral">&#39;z&#39;</span>)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  misalignedWires = [] <span class="comment"># grouped by extended plane</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">for</span> planesOnX <span class="keywordflow">in</span> PlanesByX:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> len(planesOnX) &lt; 2: <span class="keywordflow">continue</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    misalignedWiresOnPlane = []</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    planeIter = iter(planesOnX)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    leftPlane = next(planeIter)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">for</span> rightPlane <span class="keywordflow">in</span> planeIter:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      misalignedWiresOnPair \</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;       = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#aac1e7013e8bf83e123ecbaae50fa828d">checkPlaneWireAlignment</a>(leftPlane, rightPlane, tolerance=tolerance)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span> misalignedWiresOnPair:</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        misalignedWiresOnPlane.extend(misalignedWiresOnPair)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      leftPlane = rightPlane</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment"># for all following planes on the same x</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> misalignedWiresOnPlane: misalignedWires.append(misalignedWiresOnPlane)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment"># for groups of planes along the same x</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">return</span> misalignedWires</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"># checkWireAlignment()</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html">  556</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html">SimpleProximityClusterer</a>:</div>
<div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a04a064ad057c33e0abb4e074b66eec25">  557</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a04a064ad057c33e0abb4e074b66eec25">__init__</a>(self, keyFunc = None, tolerance = None):</div>
<div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4bf85987b00696f31dc84a49386115cb">  558</a></span>&#160;    self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4bf85987b00696f31dc84a49386115cb">keyFunc</a> = (<span class="keyword">lambda</span> obj: obj) <span class="keywordflow">if</span> keyFunc <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> keyFunc</div>
<div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#abe7db78fb876893692f1b303172938a6">  559</a></span>&#160;    self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#abe7db78fb876893692f1b303172938a6">tolerance</a> = tolerance</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment"># __init__()</span></div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4d10762a5b4546f56309bd0295238022">  561</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4d10762a5b4546f56309bd0295238022">__call__</a>(self, objects):</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    groups = []</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    refKey = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> obj <span class="keywordflow">in</span> objects:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      key = self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4bf85987b00696f31dc84a49386115cb">keyFunc</a>(obj)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      withPrevious = refKey <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a1f8e58e5dea59c532787a0091851a68c">_compareKeys</a>(key, refKey)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">if</span> <span class="keywordflow">not</span> withPrevious:</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        refKey = key</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        groups.append(<a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>())</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      groups[-1].append(obj)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment"># for objects</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> groups</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment"># __call__()</span></div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a1f8e58e5dea59c532787a0091851a68c">  574</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a1f8e58e5dea59c532787a0091851a68c">_compareKeys</a>(self, a, b):</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(b - a) &lt; self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#abe7db78fb876893692f1b303172938a6">tolerance</a>) <span class="keywordflow">if</span> self.<a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#abe7db78fb876893692f1b303172938a6">tolerance</a> <span class="keywordflow">else</span> (a == b)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  @staticmethod</div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#aca7a616862df664bfb33da97fc4e3117">  577</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#aca7a616862df664bfb33da97fc4e3117">cluster</a>(objs, keyFunc = None, tolerance = None):</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html">SimpleProximityClusterer</a>(keyFunc=keyFunc, tolerance=tolerance)(objs)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"># class SimpleProximityClusterer</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  </div>
<div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ae482db27a186b5a35bf225d0b108dc3d">  582</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#ae482db27a186b5a35bf225d0b108dc3d">groupPlanesByX</a>(planes, tolerance = 0.1, sortBy = None):</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  xPos = <span class="keyword">lambda</span> plane: plane.GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>()</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  cluster = <a class="code" href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html">SimpleProximityClusterer</a>(xPos, tolerance) <span class="comment"># 1 mm</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  groupedByX = <a class="code" href="../../de/d1b/namespacecluster.html">cluster</a>(sorted(planes, key=xPos))</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> sortBy:</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span>   sortBy.lower() == <span class="stringliteral">&#39;x&#39;</span>:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      sortKey = xPos</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">elif</span> sortBy.lower() == <span class="stringliteral">&#39;y&#39;</span>:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      sortKey = <span class="keyword">lambda</span> plane: plane.GetCenter().Y()</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">elif</span> sortBy.lower() == <span class="stringliteral">&#39;z&#39;</span>:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      sortKey = <span class="keyword">lambda</span> plane: plane.GetCenter().Z()</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;Unsupported sorting requested: &#39;%s&#39;&quot;</span> % sortBy)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span> planes <span class="keywordflow">in</span> groupedByX: planes.sort(key=sortKey)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment"># if sorting</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">return</span> groupedByX</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"># groupPlanesByX()</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html">  602</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html">AccumulateExtrema</a>:</div>
<div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ab32d367c0aa173e6db41e2079227c3c1">  603</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ab32d367c0aa173e6db41e2079227c3c1">__init__</a>(self): self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a04c95b7237dcd7b94a6ff255e9df1d81">reset</a>()</div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a04c95b7237dcd7b94a6ff255e9df1d81">  604</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a04c95b7237dcd7b94a6ff255e9df1d81">reset</a>(self):</div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">  605</a></span>&#160;    self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">min_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a9f0f5b38a73f08128152f1a61f2524fb">  606</a></span>&#160;    self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a9f0f5b38a73f08128152f1a61f2524fb">max_</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a530ec29794c28aec07d6b4c3babfd6a8">  607</a></span>&#160;    self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a530ec29794c28aec07d6b4c3babfd6a8">n</a> = 0</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment"># reset()</span></div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a0dde5d62472a37ec4bb5da5c4018eedf">  609</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a0dde5d62472a37ec4bb5da5c4018eedf">add</a>(self, value):</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">min_</a> &gt; value <span class="keywordflow">or</span> self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">min_</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>: self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">min_</a> = value</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a9f0f5b38a73f08128152f1a61f2524fb">max_</a> &lt; value: self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a9f0f5b38a73f08128152f1a61f2524fb">max_</a> = value <span class="comment"># None &lt; any number</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment"># add()</span></div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a4a3e5b9ec0f4187f398f7f24d0e5c3ff">  613</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a4a3e5b9ec0f4187f398f7f24d0e5c3ff">min</a>(self): <span class="keywordflow">return</span> self.min_</div>
<div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a5b200302d45b9c907b911851e1b2139e">  614</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a5b200302d45b9c907b911851e1b2139e">max</a>(self): <span class="keywordflow">return</span> self.max_</div>
<div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a8302dcff4b0a122b2eb3c29511a3fbfe">  615</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a8302dcff4b0a122b2eb3c29511a3fbfe">minmax</a>(self): <span class="keywordflow">return</span> self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a4a3e5b9ec0f4187f398f7f24d0e5c3ff">min</a>(), self.<a class="code" href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a5b200302d45b9c907b911851e1b2139e">max</a>()</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"># class AccumulateExtrema</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html">  620</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html">StatCollector</a>:</div>
<div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a9ee88bd704621b7c93158dfd3a6a3312">  621</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a9ee88bd704621b7c93158dfd3a6a3312">__init__</a>(self): self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#abb50ce87a5ba4b90ed74b668c9348247">reset</a>()</div>
<div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#abb50ce87a5ba4b90ed74b668c9348247">  622</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#abb50ce87a5ba4b90ed74b668c9348247">reset</a>(self):</div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6daacd7e51ad93fc30cfed5f124bb1e4">  623</a></span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6daacd7e51ad93fc30cfed5f124bb1e4">n</a> = 0</div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">  624</a></span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> = 0.0</div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a96257ada35e2a9aef16f1101d951e8a0">  625</a></span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a96257ada35e2a9aef16f1101d951e8a0">wx</a> = 0.0</div>
<div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6c2c46617b2d16268d0d09848409d7ac">  626</a></span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6c2c46617b2d16268d0d09848409d7ac">wx2</a> = 0.0</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment"># reset()</span></div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#add0638e667d70a16356df27e81ffbad0">  628</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#add0638e667d70a16356df27e81ffbad0">add</a>(self, value, weight = 1.0):</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6daacd7e51ad93fc30cfed5f124bb1e4">n</a> += 1</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> += weight</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a96257ada35e2a9aef16f1101d951e8a0">wx</a> += weight * value</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6c2c46617b2d16268d0d09848409d7ac">wx2</a> += weight * value**2</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment"># add()</span></div>
<div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4b8dd65009f343c4813123e8cf4b1b33">  634</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4b8dd65009f343c4813123e8cf4b1b33">entries</a>(self): <span class="keywordflow">return</span> self.n</div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#af28d7ad107157395ccbe470ec936b6fe">  635</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#af28d7ad107157395ccbe470ec936b6fe">weightSum</a>(self): <span class="keywordflow">return</span> self.w</div>
<div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a8183606311bd33271b4447d2120e4854">  636</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a8183606311bd33271b4447d2120e4854">sum</a>(self): <span class="keywordflow">return</span> self.wx</div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4eb85007389b42ccdf0a525080bfaa56">  637</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4eb85007389b42ccdf0a525080bfaa56">sumSq</a>(self): <span class="keywordflow">return</span> self.wx2</div>
<div class="line"><a name="l00638"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6a9aa3d1347afd7b7d2fce112f3d4e48">  638</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6a9aa3d1347afd7b7d2fce112f3d4e48">average</a>(self): <span class="keywordflow">return</span> self.wx / self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">if</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4acbb157c81e8adcca75386834f7ce2a">  639</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4acbb157c81e8adcca75386834f7ce2a">averageSq</a>(self): <span class="keywordflow">return</span> self.wx2 / self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">if</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#ab04474e6366187bbef04fa86c24ea098">  640</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#ab04474e6366187bbef04fa86c24ea098">variance</a>(self):</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4acbb157c81e8adcca75386834f7ce2a">averageSq</a>() - self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6a9aa3d1347afd7b7d2fce112f3d4e48">average</a>()**2 <span class="keywordflow">if</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a181884881e334f98325bff0d13f8bbc8">  642</a></span>&#160;  <span class="keyword">def </span><a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a181884881e334f98325bff0d13f8bbc8">RMS</a>(self): <span class="keywordflow">return</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#ab04474e6366187bbef04fa86c24ea098">variance</a>() ** 0.5 <span class="keywordflow">if</span> self.<a class="code" href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">w</a> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"># class StatCollector</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"># ##############################################################################</span></div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a79a8689b93a383c2580e34300b47073e">  647</a></span>&#160;<span class="keyword">def </span><a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a79a8689b93a383c2580e34300b47073e">performGeometryChecks</a>(argv):</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keyword">import</span> argparse</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  Parser = argparse.ArgumentParser(description=__doc__)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  Parser.set_defaults()</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  Parser.add_argument(<span class="stringliteral">&quot;config&quot;</span>, help=<span class="stringliteral">&quot;configuration file [FHiCL]&quot;</span>)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  Parser.add_argument(<span class="stringliteral">&quot;--servicetable&quot;</span>, <span class="stringliteral">&quot;-T&quot;</span>, default=<span class="stringliteral">&#39;services&#39;</span>,</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   help=<span class="stringliteral">&quot;name of the FHiCL table where all services are configured [&#39;%(default)s&#39;]&quot;</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   )</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Parser.add_argument(<span class="stringliteral">&quot;--debug&quot;</span>, <span class="stringliteral">&quot;-d&quot;</span>, action=<span class="stringliteral">&quot;count&quot;</span>, default=0,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   help=<span class="stringliteral">&quot;be more verbose&quot;</span>)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  Parser.add_argument(<span class="stringliteral">&quot;--version&quot;</span>, <span class="stringliteral">&quot;-V&quot;</span>, action=<span class="stringliteral">&quot;version&quot;</span>, version=__version__)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">#argGroup = Parser.add_argument_group(title=&quot;Numerical output format&quot;)</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">#argGroup.add_argument(&quot;--integer&quot;, &quot;-d&quot;, &quot;-i&quot;, action=&quot;store_false&quot;,</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">#dest=&quot;bFloat&quot;, help=&quot;sets the sum of integral numbers&quot;)</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  args = Parser.parse_args(args=argv[1:])</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment"># `logging.DEBUG` is the standard debugging level; </span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment"># `logging.DEBUG + 1` (args.debug = 0) is a bit less verbose, but still well</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">#    within `logging.INFO` level</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  logging.basicConfig(level=logging.DEBUG - (args.debug - 1))</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keyword">from</span> ICARUSservices <span class="keyword">import</span> ServiceManager</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keyword">import</span> cppUtils</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keyword">import</span> ROOT</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keyword">import</span> ROOTutils</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment"># this is for a bug present in LArSoft v08_52_00 (and many other versions);</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment"># the header where exception geo::InvalidWireError is defined is not included.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  cppUtils.SourceCode.loadHeaderFromUPS(<span class="stringliteral">&quot;larcorealg/Geometry/Exceptions.h&quot;</span>)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keyword">global</span> ROOT</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  ServiceManager.setConfiguration(args.config, args.servicetable)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  geom = <a class="code" href="../../dc/d08/namespaceICARUSservices.html#a1c0afd83f5f9a93b9b089fbfdb1cdb70">ServiceManager</a>(<span class="stringliteral">&#39;Geometry&#39;</span>)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  FailureSummary = []</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  Cryostats = <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>(geom.IterateCryostats())</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  TPCs = <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>(geom.IterateTPCs())</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  Planes = <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>(geom.IteratePlanes())</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment"># cryostat overlap</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  overlappingCryostats = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5b09a6e0972211f2c2b909c3ef393115">CheckGeoObjOverlaps</a>(Cryostats, <span class="stringliteral">&quot;cryostat&quot;</span>)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">if</span> overlappingCryostats:</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    msg = <span class="stringliteral">&quot;%s cryostat overlaps detected: %s.&quot;</span> % (</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;     len(overlappingCryostats),</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;     <span class="stringliteral">&quot;, &quot;</span>.join(map(GeoPairToString, overlappingCryostats)),</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;     )</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    logging.error(msg)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    FailureSummary.append(msg)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">else</span>: logging.info(<span class="stringliteral">&quot;No cryostat overlap detected.&quot;</span>)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment"># TPC overlaps</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  overlappingTPCs = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5b09a6e0972211f2c2b909c3ef393115">CheckGeoObjOverlaps</a>(TPCs, <span class="stringliteral">&quot;TPC&quot;</span>)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> overlappingTPCs:</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    msg = <span class="stringliteral">&quot;%s TPC overlaps detected: %s.&quot;</span> % (</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;     len(overlappingTPCs), <span class="stringliteral">&quot;, &quot;</span>.join(map(GeoPairToString, overlappingTPCs)),</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;     )</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    logging.error(msg)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    FailureSummary.append(msg)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">else</span>: logging.info(<span class="stringliteral">&quot;No TPC overlap detected.&quot;</span>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment"># TPC active volume overlaps</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  overlappingActiveVolTPCs = CheckGeoObjOverlaps \</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    (TPCs, <span class="stringliteral">&quot;active TPC volume&quot;</span>, extractBox=ROOT.geo.TPCGeo.ActiveBoundingBox)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> overlappingActiveVolTPCs:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    msg = <span class="stringliteral">&quot;%s TPC active volume overlaps detected: %s.&quot;</span> % (</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;     len(overlappingActiveVolTPCs),</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;     <span class="stringliteral">&quot;, &quot;</span>.join(map(GeoPairToString, overlappingActiveVolTPCs)),</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;     )</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    logging.error(msg)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    FailureSummary.append(msg)</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">else</span>: logging.info(<span class="stringliteral">&quot;No TPC active volume overlap detected.&quot;</span>)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment"># plane box overlaps</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  overlappingPlanes = CheckGeoObjOverlaps \</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   (Planes, <span class="stringliteral">&quot;wire planes&quot;</span>, extractBox=ROOT.geo.PlaneGeo.BoundingBox)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">if</span> overlappingPlanes:</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire plane overlaps detected: %s.&quot;</span>,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;     len(overlappingPlanes),</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;     <span class="stringliteral">&quot;, &quot;</span>.join(map(GeoPairToString, overlappingPlanes))</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;     )</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      (<span class="stringliteral">&quot;%s wire plane overlaps detected.&quot;</span> % len(overlappingPlanes))</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">else</span>: logging.info(<span class="stringliteral">&quot;No wire plane overlap detected.&quot;</span>)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment"># check plane alignment</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  inconsistentPlanes = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5f86f0f9d4385e1e9ccfed56cdf4f4f7">checkPlaneAlignment</a>(Planes, tolerance=0.0001) <span class="comment"># 1 um (!!)</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;zalign&#39;</span>]</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    logging.info(<span class="stringliteral">&quot;All %d planes are correctly aligned along z.&quot;</span>, len(Planes))</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire planes present misalignment on z: %s&quot;</span>,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      ),</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      )</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      (<span class="stringliteral">&quot;%s wire planes present misalignment: &quot;</span> % len(misalignedPlanes))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;topYalign&#39;</span>]</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    logging.info(<span class="stringliteral">&quot;Top of all %d planes is correctly aligned.&quot;</span>, len(Planes))</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire planes present misalignment of top side: %s&quot;</span>,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      ),</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      )</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      (<span class="stringliteral">&quot;%s wire planes present misalignment on top side&quot;</span> % len(planesWithIssues))</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;bottomYalign&#39;</span>]</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    logging.info(<span class="stringliteral">&quot;Bottom of all %d planes is correctly aligned.&quot;</span>, len(Planes))</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire planes present misalignment of bottom side: %s&quot;</span>,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      ),</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      )</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      (<span class="stringliteral">&quot;%s wire planes present misalignment on bottom side&quot;</span> % len(planesWithIssues))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;wireZalign&#39;</span>]</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    logging.info(</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;     <span class="stringliteral">&quot;Inter-plane areas covered by wires on all %d planes are correctly aligned.&quot;</span>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;     len(Planes)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;     )</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    logging.error(<span class="stringliteral">&quot;%s planes have wires inconsistently covering the touching side: %s&quot;</span>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      ),</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      )</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    FailureSummary.append(</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;     <span class="stringliteral">&quot;%s planes present inconsistent wire coverage on touching side&quot;</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;     % len(planesWithIssues)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;     )</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;wireBottomYalign&#39;</span>]</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    logging.info(</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;     <span class="stringliteral">&quot;Bottom of areas covered by wires on all %d planes is correctly aligned.&quot;</span>,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;     len(Planes)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;     )</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    logging.error(<span class="stringliteral">&quot;%s planes have wires inconsistently covering bottom side: %s&quot;</span>,</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      ),</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      )</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    FailureSummary.append(</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;     <span class="stringliteral">&quot;%s planes present inconsistent wire coverage on bottom side: &quot;</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;     % len(misalignedPlanes)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;     )</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;wireTopYalign&#39;</span>]</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    logging.info(</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;     <span class="stringliteral">&quot;Top of areas covered by wires on all %d planes is correctly aligned.&quot;</span>,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;     len(Planes)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;     )</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    logging.error(<span class="stringliteral">&quot;%s planes have wires inconsistently covering top side: %s&quot;</span>,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="stringliteral">&quot;%s vs. %s (%g mm)&quot;</span> % (planeA.ID(), planeB.ID(), distance)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">for</span> distance, planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      ),</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      )</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    FailureSummary.append(</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;     <span class="stringliteral">&quot;%s planes present inconsistent wire coverage on top side: &quot;</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;     % len(misalignedPlanes)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;     )</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;view&#39;</span>]</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    logging.info(<span class="stringliteral">&quot;All %d planes have matching views.&quot;</span>, len(Planes))</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire planes present direction inconsistencies:&quot;</span>,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="stringliteral">&quot;%s vs. %s&quot;</span> % (planeA.ID(), planeB.ID())</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">for</span> planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      ),</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      )</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    FailureSummary.append(</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;     <span class="stringliteral">&quot;%s wire planes present direction inconsistencies.&quot;</span> % len(planesWithIssues)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;     )</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">try</span>: planesWithIssues = inconsistentPlanes[<span class="stringliteral">&#39;direction&#39;</span>]</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    logging.info(<span class="stringliteral">&quot;All %d planes have consistent directions.&quot;</span>, len(Planes))</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    logging.error(<span class="stringliteral">&quot;%s wire planes present view inconsistencies:&quot;</span>,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      len(planesWithIssues), <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="stringliteral">&quot;%s vs. %s&quot;</span> % (planeA.ID(), planeB.ID())</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">for</span> planeA, planeB <span class="keywordflow">in</span> planesWithIssues</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      ),</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      )</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    FailureSummary.append(</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;     <span class="stringliteral">&quot;%s wire planes present view inconsistencies.&quot;</span> % len(planesWithIssues)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;     )</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment"># check wire alignment</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">#</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  shorterWires = {}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">for</span> plane <span class="keywordflow">in</span> Planes:</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    shorterWires.update(<a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a9fb44db05b1e188f8f17c2187574f94c">checkWireEndingsInPlane</a>(plane, tolerance=0.01))</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> shorterWires:</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    logging.error(<span class="stringliteral">&quot;Wires not ending on plane frame found (%d):&quot;</span>,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      len(shorterWires),</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      )</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">for</span> wireID, ends <span class="keywordflow">in</span> shorterWires.items():</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      logging.error(<span class="stringliteral">&quot;  %s: %s&quot;</span>, wireID, <span class="stringliteral">&quot;, &quot;</span>.join(ends))</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      (<span class="stringliteral">&quot;%d wires do not end on plane frame&quot;</span> % len(shorterWires))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment"># if error</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  misalignedWires = <a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a45177e4511f6f1e07c63c8ae879c5a09">checkWireAlignment</a>(Planes, tolerance=0.0001) <span class="comment"># 1 um required</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">if</span> misalignedWires:</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    logging.error(<span class="stringliteral">&quot;Misaligned wires found on %d extended planes:&quot;</span>,</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      len(misalignedWires),</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      )</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">for</span> misalignedWiresOnPlane <span class="keywordflow">in</span> misalignedWires:</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      logging.error(<span class="stringliteral">&quot;  %d on wires on plane around x=%g cm:&quot;</span>,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;       len(misalignedWiresOnPlane),</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;       misalignedWiresOnPlane[0][2].GetCenter().<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>()</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;       )</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">for</span> shift, wireLid, wireL, wireRid, wireR <span class="keywordflow">in</span> misalignedWiresOnPlane:</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">if</span> shift <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          logging.error(<span class="stringliteral">&quot;    %s did not match any wire&quot;</span>, wireLid)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          logging.error(<span class="stringliteral">&quot;    %s and %s are misaligned by %g um&quot;</span>,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;           wireLid, wireRid, shift * 1.0e4,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;           )</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="comment"># for all misaligned wire pairs</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment"># for</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    FailureSummary.append \</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      (<span class="stringliteral">&quot;misaligned wires found on %d extended planes&quot;</span> % len(misalignedWires))</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    logging.info(<span class="stringliteral">&quot;No misaligned wires detected.&quot;</span>)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> FailureSummary:</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    logging.info(<span class="stringliteral">&quot;%d failure categories detected:\n - %s&quot;</span>,</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;     len(FailureSummary), <span class="stringliteral">&quot;\n - &quot;</span>.join(FailureSummary),</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;     )</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment"># if failures</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">return</span> 1 <span class="keywordflow">if</span> FailureSummary <span class="keywordflow">else</span> 0</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment"># performGeometryChecks()</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"># ##############################################################################</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keyword">import</span> sys</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  sys.exit(<a class="code" href="../../d3/d82/namespaceICARUSgeometryChecker.html#a79a8689b93a383c2580e34300b47073e">performGeometryChecks</a>(sys.argv))</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment"># main</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment"># ##############################################################################</span></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_add0638e667d70a16356df27e81ffbad0"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#add0638e667d70a16356df27e81ffbad0">ICARUSgeometryChecker.StatCollector.add</a></div><div class="ttdeci">def add</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00628">ICARUSgeometryChecker.py:628</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_ad6507cbe36e140db8754c7f477908efd"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ad6507cbe36e140db8754c7f477908efd">ICARUSgeometryChecker.AccumulateExtrema.min_</a></div><div class="ttdeci">min_</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00605">ICARUSgeometryChecker.py:605</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_abe7db78fb876893692f1b303172938a6"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#abe7db78fb876893692f1b303172938a6">ICARUSgeometryChecker.SimpleProximityClusterer.tolerance</a></div><div class="ttdeci">tolerance</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00559">ICARUSgeometryChecker.py:559</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html">ICARUSgeometryChecker.NestedIteration</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00020">ICARUSgeometryChecker.py:20</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a5b09a6e0972211f2c2b909c3ef393115"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5b09a6e0972211f2c2b909c3ef393115">ICARUSgeometryChecker.CheckGeoObjOverlaps</a></div><div class="ttdeci">def CheckGeoObjOverlaps</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00059">ICARUSgeometryChecker.py:59</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html_ae5c71b4d6db308aa790f113753c87259"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#ae5c71b4d6db308aa790f113753c87259">ICARUSgeometryChecker.NestedIteration.innerIter</a></div><div class="ttdeci">innerIter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00028">ICARUSgeometryChecker.py:28</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator_html"><div class="ttname"><a href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html">ICARUSgeometryChecker.NestedIteration.BadIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00021">ICARUSgeometryChecker.py:21</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a79a8689b93a383c2580e34300b47073e"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a79a8689b93a383c2580e34300b47073e">ICARUSgeometryChecker.performGeometryChecks</a></div><div class="ttdeci">def performGeometryChecks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00647">ICARUSgeometryChecker.py:647</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html_a234a430aa1dc952b580f45f4bf3a19d0"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a234a430aa1dc952b580f45f4bf3a19d0">ICARUSgeometryChecker.NestedIteration.outerIter</a></div><div class="ttdeci">outerIter</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00027">ICARUSgeometryChecker.py:27</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a5b200302d45b9c907b911851e1b2139e"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a5b200302d45b9c907b911851e1b2139e">ICARUSgeometryChecker.AccumulateExtrema.max</a></div><div class="ttdeci">def max</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00614">ICARUSgeometryChecker.py:614</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_af28d7ad107157395ccbe470ec936b6fe"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#af28d7ad107157395ccbe470ec936b6fe">ICARUSgeometryChecker.StatCollector.weightSum</a></div><div class="ttdeci">def weightSum</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00635">ICARUSgeometryChecker.py:635</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a6c2c46617b2d16268d0d09848409d7ac"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6c2c46617b2d16268d0d09848409d7ac">ICARUSgeometryChecker.StatCollector.wx2</a></div><div class="ttdeci">wx2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00626">ICARUSgeometryChecker.py:626</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_ab32d367c0aa173e6db41e2079227c3c1"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#ab32d367c0aa173e6db41e2079227c3c1">ICARUSgeometryChecker.AccumulateExtrema.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00603">ICARUSgeometryChecker.py:603</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a9f0f5b38a73f08128152f1a61f2524fb"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a9f0f5b38a73f08128152f1a61f2524fb">ICARUSgeometryChecker.AccumulateExtrema.max_</a></div><div class="ttdeci">max_</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00606">ICARUSgeometryChecker.py:606</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_abb50ce87a5ba4b90ed74b668c9348247"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#abb50ce87a5ba4b90ed74b668c9348247">ICARUSgeometryChecker.StatCollector.reset</a></div><div class="ttdeci">def reset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00622">ICARUSgeometryChecker.py:622</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a9fb44db05b1e188f8f17c2187574f94c"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a9fb44db05b1e188f8f17c2187574f94c">ICARUSgeometryChecker.checkWireEndingsInPlane</a></div><div class="ttdeci">def checkWireEndingsInPlane</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00245">ICARUSgeometryChecker.py:245</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a6a9aa3d1347afd7b7d2fce112f3d4e48"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6a9aa3d1347afd7b7d2fce112f3d4e48">ICARUSgeometryChecker.StatCollector.average</a></div><div class="ttdeci">def average</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00638">ICARUSgeometryChecker.py:638</a></div></div>
<div class="ttc" id="namespacecluster_html"><div class="ttname"><a href="../../de/d1b/namespacecluster.html">cluster</a></div><div class="ttdoc">Cluster finding and building. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2d/SmallClusterFilter__module_8cc_source.html#l00034">SmallClusterFilter_module.cc:34</a></div></div>
<div class="ttc" id="find__global__symbol_8sh_html_ae2fcd9af85e9525dadab1ac2cb45a22d"><div class="ttname"><a href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a></div><div class="ttdeci">then echo echo For and will not be changed by echo further linking echo echo B echo The symbol is in the uninitialized data multiple common symbols may appear with the echo same name If the symbol is defined the common echo symbols are treated as undefined references For more echo details on common see the discussion of warn common echo in *Note Linker see the discussion of warn common echo in *Note Linker such as a global int variable echo as opposed to a large global array echo echo I echo The symbol is an indirect reference to another symbol This echo is a GNU extension to the a out object file format which is echo rarely used echo echo N echo The symbol is a debugging symbol echo echo R echo The symbol is in a read only data section echo echo S echo The symbol is in an uninitialized data section for small echo objects echo echo T echo The symbol is in the the normal defined echo symbol is used with no error When a weak undefined symbol echo is linked and the symbol is not the value of the echo weak symbol becomes zero with no error echo echo W echo The symbol is a weak symbol that has not been specifically echo tagged as a weak object symbol When a weak defined symbol echo is linked with a normal defined the normal defined echo symbol is used with no error When a weak undefined symbol echo is linked and the symbol is not the value of the echo weak symbol becomes zero with no error echo echo echo The symbol is a stabs symbol in an a out object file In echo this the next values printed are the stabs other echo the stabs desc and the stab type Stabs symbols are echo used to hold debugging information For more echo see *Note or object file format specific echo echo For Mac OS X</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/find__global__symbol_8sh_source.html#l00107">find_global_symbol.sh:107</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a530ec29794c28aec07d6b4c3babfd6a8"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a530ec29794c28aec07d6b4c3babfd6a8">ICARUSgeometryChecker.AccumulateExtrema.n</a></div><div class="ttdeci">n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00607">ICARUSgeometryChecker.py:607</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a8302dcff4b0a122b2eb3c29511a3fbfe"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a8302dcff4b0a122b2eb3c29511a3fbfe">ICARUSgeometryChecker.AccumulateExtrema.minmax</a></div><div class="ttdeci">def minmax</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00615">ICARUSgeometryChecker.py:615</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a8041de3f5297c0316a81b43c5d6b1a2e"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a8041de3f5297c0316a81b43c5d6b1a2e">ICARUSgeometryChecker.wireEndBorders</a></div><div class="ttdeci">def wireEndBorders</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00225">ICARUSgeometryChecker.py:225</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a2e641c792d13732deea3f563b5905afb"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a2e641c792d13732deea3f563b5905afb">ICARUSgeometryChecker.boxID</a></div><div class="ttdeci">def boxID</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00052">ICARUSgeometryChecker.py:52</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a0dde5d62472a37ec4bb5da5c4018eedf"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a0dde5d62472a37ec4bb5da5c4018eedf">ICARUSgeometryChecker.AccumulateExtrema.add</a></div><div class="ttdeci">def add</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00609">ICARUSgeometryChecker.py:609</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_a04a064ad057c33e0abb4e074b66eec25"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a04a064ad057c33e0abb4e074b66eec25">ICARUSgeometryChecker.SimpleProximityClusterer.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00557">ICARUSgeometryChecker.py:557</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_a1f8e58e5dea59c532787a0091851a68c"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a1f8e58e5dea59c532787a0091851a68c">ICARUSgeometryChecker.SimpleProximityClusterer._compareKeys</a></div><div class="ttdeci">def _compareKeys</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00574">ICARUSgeometryChecker.py:574</a></div></div>
<div class="ttc" id="namespaceutil_html_af0615b7538ff948ea65d5206a23c84f2"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a></div><div class="ttdeci">auto enumerate(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper tracking the number of iteration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/enumerate_8h_source.html#l00069">enumerate.h:69</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html">ICARUSgeometryChecker.SimpleProximityClusterer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00556">ICARUSgeometryChecker.py:556</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a6daacd7e51ad93fc30cfed5f124bb1e4"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a6daacd7e51ad93fc30cfed5f124bb1e4">ICARUSgeometryChecker.StatCollector.n</a></div><div class="ttdeci">n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00623">ICARUSgeometryChecker.py:623</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html_aa3599b9f0b6f5a4c8b4fb3082ee7aedd"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#aa3599b9f0b6f5a4c8b4fb3082ee7aedd">ICARUSgeometryChecker.NestedIteration.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00026">ICARUSgeometryChecker.py:26</a></div></div>
<div class="ttc" id="sparse__vector__test_8cc_html_a39f16bf854ba527dee7eba5bbbd93f3f"><div class="ttname"><a href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a></div><div class="ttdeci">T abs(T value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d59/sparse__vector__test_8cc_source.html#l00030">sparse_vector_test.cc:30</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a04c95b7237dcd7b94a6ff255e9df1d81"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a04c95b7237dcd7b94a6ff255e9df1d81">ICARUSgeometryChecker.AccumulateExtrema.reset</a></div><div class="ttdeci">def reset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00604">ICARUSgeometryChecker.py:604</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_af5d632e37d4038e71ce334cdeaea7af4"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#af5d632e37d4038e71ce334cdeaea7af4">ICARUSgeometryChecker.GeoPairToString</a></div><div class="ttdeci">def GeoPairToString</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00045">ICARUSgeometryChecker.py:45</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html_a4a3e5b9ec0f4187f398f7f24d0e5c3ff"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html#a4a3e5b9ec0f4187f398f7f24d0e5c3ff">ICARUSgeometryChecker.AccumulateExtrema.min</a></div><div class="ttdeci">def min</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00613">ICARUSgeometryChecker.py:613</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a96257ada35e2a9aef16f1101d951e8a0"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a96257ada35e2a9aef16f1101d951e8a0">ICARUSgeometryChecker.StatCollector.wx</a></div><div class="ttdeci">wx</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00625">ICARUSgeometryChecker.py:625</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_a4d10762a5b4546f56309bd0295238022"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4d10762a5b4546f56309bd0295238022">ICARUSgeometryChecker.SimpleProximityClusterer.__call__</a></div><div class="ttdeci">def __call__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00561">ICARUSgeometryChecker.py:561</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator_html_a8ba40bc6fb59c8bb016e3448f76d3d7c"><div class="ttname"><a href="../../dc/d46/classICARUSgeometryChecker_1_1NestedIteration_1_1BadIterator.html#a8ba40bc6fb59c8bb016e3448f76d3d7c">ICARUSgeometryChecker.NestedIteration.BadIterator.__iter__</a></div><div class="ttdeci">def __iter__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00022">ICARUSgeometryChecker.py:22</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a4b8dd65009f343c4813123e8cf4b1b33"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4b8dd65009f343c4813123e8cf4b1b33">ICARUSgeometryChecker.StatCollector.entries</a></div><div class="ttdeci">def entries</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00634">ICARUSgeometryChecker.py:634</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_aca7a616862df664bfb33da97fc4e3117"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#aca7a616862df664bfb33da97fc4e3117">ICARUSgeometryChecker.SimpleProximityClusterer.cluster</a></div><div class="ttdeci">def cluster</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00577">ICARUSgeometryChecker.py:577</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a181884881e334f98325bff0d13f8bbc8"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a181884881e334f98325bff0d13f8bbc8">ICARUSgeometryChecker.StatCollector.RMS</a></div><div class="ttdeci">def RMS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00642">ICARUSgeometryChecker.py:642</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html_a04babf26aa0d7f4662e6fa28a6b10160"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a04babf26aa0d7f4662e6fa28a6b10160">ICARUSgeometryChecker.NestedIteration.next</a></div><div class="ttdeci">def next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00033">ICARUSgeometryChecker.py:33</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a8183606311bd33271b4447d2120e4854"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a8183606311bd33271b4447d2120e4854">ICARUSgeometryChecker.StatCollector.sum</a></div><div class="ttdeci">def sum</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00636">ICARUSgeometryChecker.py:636</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html">ICARUSgeometryChecker.StatCollector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00620">ICARUSgeometryChecker.py:620</a></div></div>
<div class="ttc" id="namespaceICARUSservices_html_a1c0afd83f5f9a93b9b089fbfdb1cdb70"><div class="ttname"><a href="../../dc/d08/namespaceICARUSservices.html#a1c0afd83f5f9a93b9b089fbfdb1cdb70">ICARUSservices.ServiceManager</a></div><div class="ttdeci">tuple ServiceManager</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d23/ICARUSservices_8py_source.html#l00101">ICARUSservices.py:101</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a4eb85007389b42ccdf0a525080bfaa56"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4eb85007389b42ccdf0a525080bfaa56">ICARUSgeometryChecker.StatCollector.sumSq</a></div><div class="ttdeci">def sumSq</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00637">ICARUSgeometryChecker.py:637</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1SimpleProximityClusterer_html_a4bf85987b00696f31dc84a49386115cb"><div class="ttname"><a href="../../d1/d30/classICARUSgeometryChecker_1_1SimpleProximityClusterer.html#a4bf85987b00696f31dc84a49386115cb">ICARUSgeometryChecker.SimpleProximityClusterer.keyFunc</a></div><div class="ttdeci">keyFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00558">ICARUSgeometryChecker.py:558</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_aac1e7013e8bf83e123ecbaae50fa828d"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#aac1e7013e8bf83e123ecbaae50fa828d">ICARUSgeometryChecker.checkPlaneWireAlignment</a></div><div class="ttdeci">def checkPlaneWireAlignment</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00321">ICARUSgeometryChecker.py:321</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1NestedIteration_html_a18cf468b8a85f032d409f8f605a86f5f"><div class="ttname"><a href="../../d1/d74/classICARUSgeometryChecker_1_1NestedIteration.html#a18cf468b8a85f032d409f8f605a86f5f">ICARUSgeometryChecker.NestedIteration.__iter__</a></div><div class="ttdeci">def __iter__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00031">ICARUSgeometryChecker.py:31</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a45177e4511f6f1e07c63c8ae879c5a09"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a45177e4511f6f1e07c63c8ae879c5a09">ICARUSgeometryChecker.checkWireAlignment</a></div><div class="ttdeci">def checkWireAlignment</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00528">ICARUSgeometryChecker.py:528</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a9ee88bd704621b7c93158dfd3a6a3312"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a9ee88bd704621b7c93158dfd3a6a3312">ICARUSgeometryChecker.StatCollector.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00621">ICARUSgeometryChecker.py:621</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a4acbb157c81e8adcca75386834f7ce2a"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a4acbb157c81e8adcca75386834f7ce2a">ICARUSgeometryChecker.StatCollector.averageSq</a></div><div class="ttdeci">def averageSq</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00639">ICARUSgeometryChecker.py:639</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1AccumulateExtrema_html"><div class="ttname"><a href="../../da/d4b/classICARUSgeometryChecker_1_1AccumulateExtrema.html">ICARUSgeometryChecker.AccumulateExtrema</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00602">ICARUSgeometryChecker.py:602</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_ae482db27a186b5a35bf225d0b108dc3d"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#ae482db27a186b5a35bf225d0b108dc3d">ICARUSgeometryChecker.groupPlanesByX</a></div><div class="ttdeci">def groupPlanesByX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00582">ICARUSgeometryChecker.py:582</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_a3b7e17417f2426a62c93a418d8bd9555"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#a3b7e17417f2426a62c93a418d8bd9555">ICARUSgeometryChecker.StatCollector.w</a></div><div class="ttdeci">w</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00624">ICARUSgeometryChecker.py:624</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_ab2f037b03b3fcc5d161bd55bf6767b33"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#ab2f037b03b3fcc5d161bd55bf6767b33">ICARUSgeometryChecker.BoxToString</a></div><div class="ttdeci">def BoxToString</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00048">ICARUSgeometryChecker.py:48</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a66bd5563ea501595a0740b7c7635ba48"><div class="ttname"><a href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a></div><div class="ttdeci">list</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dea/file__to__url_8sh_source.html#l00028">file_to_url.sh:28</a></div></div>
<div class="ttc" id="classICARUSgeometryChecker_1_1StatCollector_html_ab04474e6366187bbef04fa86c24ea098"><div class="ttname"><a href="../../de/d3f/classICARUSgeometryChecker_1_1StatCollector.html#ab04474e6366187bbef04fa86c24ea098">ICARUSgeometryChecker.StatCollector.variance</a></div><div class="ttdeci">def variance</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00640">ICARUSgeometryChecker.py:640</a></div></div>
<div class="ttc" id="namespaceICARUSgeometryChecker_html_a5f86f0f9d4385e1e9ccfed56cdf4f4f7"><div class="ttname"><a href="../../d3/d82/namespaceICARUSgeometryChecker.html#a5f86f0f9d4385e1e9ccfed56cdf4f4f7">ICARUSgeometryChecker.checkPlaneAlignment</a></div><div class="ttdeci">def checkPlaneAlignment</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1f/ICARUSgeometryChecker_8py_source.html#l00078">ICARUSgeometryChecker.py:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
