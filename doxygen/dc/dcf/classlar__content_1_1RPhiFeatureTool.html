<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>lar_content::RPhiFeatureTool Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../db/de7/namespacelar__content.html">lar_content</a></li><li class="navelem"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html">RPhiFeatureTool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d8/d7f/classlar__content_1_1RPhiFeatureTool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lar_content::RPhiFeatureTool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html" title="RPhiFeatureTool class. ">RPhiFeatureTool</a> class.  
 <a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lar_content::RPhiFeatureTool:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.png" usemap="#lar_content::RPhiFeatureTool_map" alt=""/>
  <map id="lar_content::RPhiFeatureTool_map" name="lar_content::RPhiFeatureTool_map">
<area href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html" title="MvaFeatureTool class template. " alt="lar_content::MvaFeatureTool&lt; Ts &gt;" shape="rect" coords="0,56,211,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel estimate class.  <a href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2b5f014aa8ec91d42cd9bbbfe5c18c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ab2b5f014aa8ec91d42cd9bbbfe5c18c9">RPhiFeatureTool</a> ()</td></tr>
<tr class="memdesc:ab2b5f014aa8ec91d42cd9bbbfe5c18c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#ab2b5f014aa8ec91d42cd9bbbfe5c18c9">More...</a><br/></td></tr>
<tr class="separator:ab2b5f014aa8ec91d42cd9bbbfe5c18c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64828d838355ea8d4be9224747730d47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a64828d838355ea8d4be9224747730d47">Run</a> (<a class="el" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a33cd1e27565c8646ce7ac82d9ed92a25">LArMvaHelper::MvaFeatureVector</a> &amp;featureVector, const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html">VertexSelectionBaseAlgorithm</a> *const pAlgorithm, const pandora::Vertex *const pVertex, const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a0642772978e3483871e3e67bc1a4d8c2">VertexSelectionBaseAlgorithm::SlidingFitDataListMap</a> &amp;, const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a119a0b3528a94e41bdfcfb34bd4094c6">VertexSelectionBaseAlgorithm::ClusterListMap</a> &amp;, const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a17054dbc231a199c866dbacde041afb1">VertexSelectionBaseAlgorithm::KDTreeMap</a> &amp;kdTreeMap, const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a91f15028cf5402b4b28fc8c94d143258">VertexSelectionBaseAlgorithm::ShowerClusterListMap</a> &amp;, const float beamDeweightingScore, float &amp;bestFastScore)</td></tr>
<tr class="memdesc:a64828d838355ea8d4be9224747730d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the tool.  <a href="#a64828d838355ea8d4be9224747730d47">More...</a><br/></td></tr>
<tr class="separator:a64828d838355ea8d4be9224747730d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlar__content_1_1MvaFeatureTool"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlar__content_1_1MvaFeatureTool')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html">lar_content::MvaFeatureTool&lt; Ts &gt;</a></td></tr>
<tr class="memitem:ade7a8abd960a8174480712ebdcb795e9 inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html#ade7a8abd960a8174480712ebdcb795e9">MvaFeatureTool</a> ()=<a class="el" href="../../de/d36/crtt0matchingalg__sbnd_8fcl.html#a6c2384a9e3f7a8c21ae6f762a8ee0ece">default</a></td></tr>
<tr class="memdesc:ade7a8abd960a8174480712ebdcb795e9 inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#ade7a8abd960a8174480712ebdcb795e9">More...</a><br/></td></tr>
<tr class="separator:ade7a8abd960a8174480712ebdcb795e9 inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada01a1f926e0595a8e04a041ab973aee inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html#ada01a1f926e0595a8e04a041ab973aee">Run</a> (<a class="el" href="../../d8/dda/classlar__content_1_1MvaTypes.html#abafd219a727aec1dd1148fb4f588b034">MvaTypes::MvaFeatureVector</a> &amp;featureVector, Ts...args)=0</td></tr>
<tr class="memdesc:ada01a1f926e0595a8e04a041ab973aee inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the algorithm tool.  <a href="#ada01a1f926e0595a8e04a041ab973aee">More...</a><br/></td></tr>
<tr class="separator:ada01a1f926e0595a8e04a041ab973aee inherit pub_methods_classlar__content_1_1MvaFeatureTool"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a122234be2a5cfb3d507f8e2b5fe200fa"><td class="memItemLeft" align="right" valign="top">pandora::StatusCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a122234be2a5cfb3d507f8e2b5fe200fa">ReadSettings</a> (const pandora::TiXmlHandle xmlHandle)</td></tr>
<tr class="separator:a122234be2a5cfb3d507f8e2b5fe200fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c8d270f7c7fc35b76461c10f5f3193"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a82c8d270f7c7fc35b76461c10f5f3193">GetFastScore</a> (const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateU, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateV, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateW) const </td></tr>
<tr class="memdesc:a82c8d270f7c7fc35b76461c10f5f3193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the score for a trio of kernel estimations, using fast histogram approach.  <a href="#a82c8d270f7c7fc35b76461c10f5f3193">More...</a><br/></td></tr>
<tr class="separator:a82c8d270f7c7fc35b76461c10f5f3193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b49dfb03db82ba8a89c7ec14e17df5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae5b49dfb03db82ba8a89c7ec14e17df5">GetMidwayScore</a> (const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateU, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateV, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateW) const </td></tr>
<tr class="memdesc:ae5b49dfb03db82ba8a89c7ec14e17df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the score for a trio of kernel estimations, using kernel density estimation but with reduced (binned) sampling.  <a href="#ae5b49dfb03db82ba8a89c7ec14e17df5">More...</a><br/></td></tr>
<tr class="separator:ae5b49dfb03db82ba8a89c7ec14e17df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cc4a5bf785c9cb86f9d1d4bb2d40c09"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a2cc4a5bf785c9cb86f9d1d4bb2d40c09">GetFullScore</a> (const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateU, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateV, const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimateW) const </td></tr>
<tr class="memdesc:a2cc4a5bf785c9cb86f9d1d4bb2d40c09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the score for a trio of kernel estimations, using kernel density estimation and full hit-by-hit sampling.  <a href="#a2cc4a5bf785c9cb86f9d1d4bb2d40c09">More...</a><br/></td></tr>
<tr class="separator:a2cc4a5bf785c9cb86f9d1d4bb2d40c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e982a906b3fa18f70806f772e7e089"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a98e982a906b3fa18f70806f772e7e089">FillKernelEstimate</a> (const pandora::Vertex *const pVertex, const pandora::HitType hitType, <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a5f863776e0ceec130d8cc584c6d85898">VertexSelectionBaseAlgorithm::HitKDTree2D</a> &amp;kdTree, <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;kernelEstimate) const </td></tr>
<tr class="memdesc:a98e982a906b3fa18f70806f772e7e089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use hits in clusters (in the provided kd tree) to fill a provided kernel estimate with hit-vertex relationship information.  <a href="#a98e982a906b3fa18f70806f772e7e089">More...</a><br/></td></tr>
<tr class="separator:a98e982a906b3fa18f70806f772e7e089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642bb5d32d938c409250b602d3586762"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a642bb5d32d938c409250b602d3586762">AcceptVertexLocation</a> (const pandora::Vertex *const pVertex, const pandora::VertexList &amp;selectedVertexList) const </td></tr>
<tr class="memdesc:a642bb5d32d938c409250b602d3586762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to accept a candidate vertex, based on its spatial position in relation to other selected candidates.  <a href="#a642bb5d32d938c409250b602d3586762">More...</a><br/></td></tr>
<tr class="separator:a642bb5d32d938c409250b602d3586762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d3486f098787131eb722c8dd976f1bb"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a0d3486f098787131eb722c8dd976f1bb">atan2Fast</a> (const float <a class="el" href="../../d1/d01/singles_8fcl.html#ad222ca63c3622e98913907e4c7245cd6">y</a>, const float <a class="el" href="../../d1/d01/singles_8fcl.html#aa2441c6f4af6ae1d48f43c716144deac">x</a>) const </td></tr>
<tr class="memdesc:a0d3486f098787131eb722c8dd976f1bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fast estimate of std::atan2 function. Rather coarse (max |error| &gt; 0.01) but should suffice for this use-case.  <a href="#a0d3486f098787131eb722c8dd976f1bb">More...</a><br/></td></tr>
<tr class="separator:a0d3486f098787131eb722c8dd976f1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a89c07342a7a57426fd570de068266b4c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">m_fastScoreCheck</a></td></tr>
<tr class="memdesc:a89c07342a7a57426fd570de068266b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to use the fast histogram based score to selectively avoid calling full or midway scores.  <a href="#a89c07342a7a57426fd570de068266b4c">More...</a><br/></td></tr>
<tr class="separator:a89c07342a7a57426fd570de068266b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1792be220a04b6363b24d6bb3fca156d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">m_fastScoreOnly</a></td></tr>
<tr class="memdesc:a1792be220a04b6363b24d6bb3fca156d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to use the fast histogram based score only.  <a href="#a1792be220a04b6363b24d6bb3fca156d">More...</a><br/></td></tr>
<tr class="separator:a1792be220a04b6363b24d6bb3fca156d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10051a6b301d3b9f07b8ebe4552be60a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">m_fullScore</a></td></tr>
<tr class="memdesc:a10051a6b301d3b9f07b8ebe4552be60a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to use the full kernel density estimation score, as opposed to the midway score.  <a href="#a10051a6b301d3b9f07b8ebe4552be60a">More...</a><br/></td></tr>
<tr class="separator:a10051a6b301d3b9f07b8ebe4552be60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab7baaebdea11cd74347cf5927f4773"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a></td></tr>
<tr class="memdesc:a8ab7baaebdea11cd74347cf5927f4773"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Gaussian width to use for kernel estimation.  <a href="#a8ab7baaebdea11cd74347cf5927f4773">More...</a><br/></td></tr>
<tr class="separator:a8ab7baaebdea11cd74347cf5927f4773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a0f86460ca96fd977a3a9aa31a29da4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">m_kappa</a></td></tr>
<tr class="memdesc:a8a0f86460ca96fd977a3a9aa31a29da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hit-deweighting offset, of form: weight = 1 / sqrt(distance + kappa), units cm.  <a href="#a8a0f86460ca96fd977a3a9aa31a29da4">More...</a><br/></td></tr>
<tr class="separator:a8a0f86460ca96fd977a3a9aa31a29da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3655f252e57213f2ee5fd762884f8a3e"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">m_maxHitVertexDisplacement1D</a></td></tr>
<tr class="memdesc:a3655f252e57213f2ee5fd762884f8a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max hit-vertex displacement in <em>any one dimension</em> for contribution to kernel estimation.  <a href="#a3655f252e57213f2ee5fd762884f8a3e">More...</a><br/></td></tr>
<tr class="separator:a3655f252e57213f2ee5fd762884f8a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28ac1b5a4391baf2e6f37a78ff4ffb2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">m_minFastScoreFraction</a></td></tr>
<tr class="memdesc:ae28ac1b5a4391baf2e6f37a78ff4ffb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fast score must be at least this fraction of best fast score to calculate full score.  <a href="#ae28ac1b5a4391baf2e6f37a78ff4ffb2">More...</a><br/></td></tr>
<tr class="separator:ae28ac1b5a4391baf2e6f37a78ff4ffb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a688226881e2b96392e4a0ed935cdb1"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a></td></tr>
<tr class="memdesc:a9a688226881e2b96392e4a0ed935cdb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bins to use for fast score histograms.  <a href="#a9a688226881e2b96392e4a0ed935cdb1">More...</a><br/></td></tr>
<tr class="separator:a9a688226881e2b96392e4a0ed935cdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f8d4ee96fcab1f50a99ad8b62d8809c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a></td></tr>
<tr class="memdesc:a3f8d4ee96fcab1f50a99ad8b62d8809c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Min value for fast score histograms.  <a href="#a3f8d4ee96fcab1f50a99ad8b62d8809c">More...</a><br/></td></tr>
<tr class="separator:a3f8d4ee96fcab1f50a99ad8b62d8809c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676e28c40d4bd1f10ef885a75a0f1c49"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a></td></tr>
<tr class="memdesc:a676e28c40d4bd1f10ef885a75a0f1c49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max value for fast score histograms.  <a href="#a676e28c40d4bd1f10ef885a75a0f1c49">More...</a><br/></td></tr>
<tr class="separator:a676e28c40d4bd1f10ef885a75a0f1c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a137cb97f2660b539030a3aff4da32f92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">m_enableFolding</a></td></tr>
<tr class="memdesc:a137cb97f2660b539030a3aff4da32f92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to enable folding of -pi -&gt; +pi phi distribution into 0 -&gt; +pi region only.  <a href="#a137cb97f2660b539030a3aff4da32f92">More...</a><br/></td></tr>
<tr class="separator:a137cb97f2660b539030a3aff4da32f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classlar__content_1_1MvaFeatureTool"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classlar__content_1_1MvaFeatureTool')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html">lar_content::MvaFeatureTool&lt; Ts &gt;</a></td></tr>
<tr class="memitem:a1f0b998f4b8b422ec16749e9c4e9b485 inherit pub_types_classlar__content_1_1MvaFeatureTool"><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html">MvaFeatureTool</a>&lt; Ts...&gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d3b/classlar__content_1_1MvaFeatureTool.html#a1f0b998f4b8b422ec16749e9c4e9b485">FeatureToolVector</a></td></tr>
<tr class="separator:a1f0b998f4b8b422ec16749e9c4e9b485 inherit pub_types_classlar__content_1_1MvaFeatureTool"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html" title="RPhiFeatureTool class. ">RPhiFeatureTool</a> class. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00021">21</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab2b5f014aa8ec91d42cd9bbbfe5c18c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lar_content::RPhiFeatureTool::RPhiFeatureTool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00021">21</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                 :</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">m_fastScoreCheck</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">m_fastScoreOnly</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">m_fullScore</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a>(0.048f),</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">m_kappa</a>(0.42f),</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">m_maxHitVertexDisplacement1D</a>(100.f),</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">m_minFastScoreFraction</a>(0.8f),</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>(200),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>(-1.1f * M_PI),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>(+1.1f * M_PI),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">m_enableFolding</a>(<span class="keyword">true</span>)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a89c07342a7a57426fd570de068266b4c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">lar_content::RPhiFeatureTool::m_fastScoreCheck</a></div><div class="ttdeci">bool m_fastScoreCheck</div><div class="ttdoc">Whether to use the fast histogram based score to selectively avoid calling full or midway scores...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00165">RPhiFeatureTool.h:165</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a9a688226881e2b96392e4a0ed935cdb1"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">lar_content::RPhiFeatureTool::m_fastHistogramNPhiBins</a></div><div class="ttdeci">unsigned int m_fastHistogramNPhiBins</div><div class="ttdoc">Number of bins to use for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00174">RPhiFeatureTool.h:174</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3f8d4ee96fcab1f50a99ad8b62d8809c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">lar_content::RPhiFeatureTool::m_fastHistogramPhiMin</a></div><div class="ttdeci">float m_fastHistogramPhiMin</div><div class="ttdoc">Min value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00175">RPhiFeatureTool.h:175</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8a0f86460ca96fd977a3a9aa31a29da4"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">lar_content::RPhiFeatureTool::m_kappa</a></div><div class="ttdeci">float m_kappa</div><div class="ttdoc">Hit-deweighting offset, of form: weight = 1 / sqrt(distance + kappa), units cm. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00170">RPhiFeatureTool.h:170</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a1792be220a04b6363b24d6bb3fca156d"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">lar_content::RPhiFeatureTool::m_fastScoreOnly</a></div><div class="ttdeci">bool m_fastScoreOnly</div><div class="ttdoc">Whether to use the fast histogram based score only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00166">RPhiFeatureTool.h:166</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_ae28ac1b5a4391baf2e6f37a78ff4ffb2"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">lar_content::RPhiFeatureTool::m_minFastScoreFraction</a></div><div class="ttdeci">float m_minFastScoreFraction</div><div class="ttdoc">Fast score must be at least this fraction of best fast score to calculate full score. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00173">RPhiFeatureTool.h:173</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3655f252e57213f2ee5fd762884f8a3e"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">lar_content::RPhiFeatureTool::m_maxHitVertexDisplacement1D</a></div><div class="ttdeci">float m_maxHitVertexDisplacement1D</div><div class="ttdoc">Max hit-vertex displacement in any one dimension for contribution to kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00171">RPhiFeatureTool.h:171</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a676e28c40d4bd1f10ef885a75a0f1c49"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">lar_content::RPhiFeatureTool::m_fastHistogramPhiMax</a></div><div class="ttdeci">float m_fastHistogramPhiMax</div><div class="ttdoc">Max value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00176">RPhiFeatureTool.h:176</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a10051a6b301d3b9f07b8ebe4552be60a"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">lar_content::RPhiFeatureTool::m_fullScore</a></div><div class="ttdeci">bool m_fullScore</div><div class="ttdoc">Whether to use the full kernel density estimation score, as opposed to the midway score...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00167">RPhiFeatureTool.h:167</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8ab7baaebdea11cd74347cf5927f4773"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">lar_content::RPhiFeatureTool::m_kernelEstimateSigma</a></div><div class="ttdeci">float m_kernelEstimateSigma</div><div class="ttdoc">The Gaussian width to use for kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00169">RPhiFeatureTool.h:169</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a137cb97f2660b539030a3aff4da32f92"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">lar_content::RPhiFeatureTool::m_enableFolding</a></div><div class="ttdeci">bool m_enableFolding</div><div class="ttdoc">Whether to enable folding of -pi -&amp;gt; +pi phi distribution into 0 -&amp;gt; +pi region only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00178">RPhiFeatureTool.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a642bb5d32d938c409250b602d3586762"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::RPhiFeatureTool::AcceptVertexLocation </td>
          <td>(</td>
          <td class="paramtype">const pandora::Vertex *const&#160;</td>
          <td class="paramname"><em>pVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::VertexList &amp;&#160;</td>
          <td class="paramname"><em>selectedVertexList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to accept a candidate vertex, based on its spatial position in relation to other selected candidates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pVertex</td><td>the address of the vertex </td></tr>
    <tr><td class="paramname">selectedVertexList</td><td>the selected vertex list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

</div>
</div>
<a class="anchor" id="a0d3486f098787131eb722c8dd976f1bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::atan2Fast </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fast estimate of std::atan2 function. Rather coarse (max |error| &gt; 0.01) but should suffice for this use-case. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">y</td><td>the y coordinate </td></tr>
    <tr><td class="paramname">x</td><td>the x coordinate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>estimate of std::atan2 </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00198">198</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> ONE_QTR_PI(0.25f * M_PI);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> THR_QTR_PI(0.75f * M_PI);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> abs_y(<a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">std::max</a>(std::fabs(<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a>), std::numeric_limits&lt;float&gt;::epsilon()));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> abs_x(std::fabs(<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a>));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a>((<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> &lt; 0.f) ? (<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> + abs_y) / (abs_y + abs_x) : (abs_x - abs_y) / (abs_x + abs_y));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#abfae2e504dfa44c403614b6cd601f99e">angle</a>(((<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> &lt; 0.f) ? THR_QTR_PI : ONE_QTR_PI) + (0.1963f * <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> * <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> - 0.9817f) * <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a> &lt; 0.f) ? -<a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#abfae2e504dfa44c403614b6cd601f99e">angle</a> : <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#abfae2e504dfa44c403614b6cd601f99e">angle</a>); <span class="comment">// negate if in quad III or IV</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a6673f03521899f7844189bcfd8ee5941"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a></div><div class="ttdeci">process_name opflash particleana ie x</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00090">run_opflash_electron.fcl:90</a></div></div>
<div class="ttc" id="pmttriggerproducer_8fcl_html_a527d89be40c3c20ca8162df059180fd9"><div class="ttname"><a href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a></div><div class="ttdeci">BEGIN_PROLOG pmt_uncoated ideal single PE test page of manual option are OR or AND window for pmt trigger time start window for pmt trigger time end etc then what events all hists are saved for max</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/pmttriggerproducer_8fcl_source.html#l00023">pmttriggerproducer.fcl:23</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a1e5aaaf25e8609a835e8c7c6fda71456"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a></div><div class="ttdeci">process_name opflash particleana ie ie y</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00091">run_opflash_electron.fcl:91</a></div></div>
<div class="ttc" id="trackfinderalgorithms_8fcl_html_abfae2e504dfa44c403614b6cd601f99e"><div class="ttname"><a href="../../d2/dbd/trackfinderalgorithms_8fcl.html#abfae2e504dfa44c403614b6cd601f99e">angle</a></div><div class="ttdeci">finds tracks best matching by angle</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/trackfinderalgorithms_8fcl_source.html#l00064">trackfinderalgorithms.fcl:64</a></div></div>
<div class="ttc" id="condor__lar__pubs_8sh_html_aace24c54f354f24f1dec3b4fd3a15d10"><div class="ttname"><a href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a></div><div class="ttdeci">esac echo uname r</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/condor__lar__pubs_8sh_source.html#l00698">condor_lar_pubs.sh:698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a98e982a906b3fa18f70806f772e7e089"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::RPhiFeatureTool::FillKernelEstimate </td>
          <td>(</td>
          <td class="paramtype">const pandora::Vertex *const&#160;</td>
          <td class="paramname"><em>pVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::HitType&#160;</td>
          <td class="paramname"><em>hitType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a5f863776e0ceec130d8cc584c6d85898">VertexSelectionBaseAlgorithm::HitKDTree2D</a> &amp;&#160;</td>
          <td class="paramname"><em>kdTree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use hits in clusters (in the provided kd tree) to fill a provided kernel estimate with hit-vertex relationship information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pVertex</td><td>the address of the vertex </td></tr>
    <tr><td class="paramname">hitType</td><td>the relevant hit type </td></tr>
    <tr><td class="paramname">kdTree</td><td>the relevant kd tree </td></tr>
    <tr><td class="paramname">kernelEstimate</td><td>to receive the populated kernel estimate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00166">166</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">const</span> CartesianVector vertexPosition2D(<a class="code" href="../../df/df1/classlar__content_1_1LArGeometryHelper.html#aac2f570fbffeb35fd9dd76f838ad5878">LArGeometryHelper::ProjectPosition</a>(this-&gt;GetPandora(), pVertex-&gt;GetPosition(), hitType));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../db/de7/namespacelar__content.html#a5af28a2f6df6cb7728ed26b75ca4d220">KDTreeBox</a> searchRegionHits = <a class="code" href="../../db/de7/namespacelar__content.html#aed106edce4a8d4837d5f3bcdd4faded5">build_2d_kd_search_region</a>(vertexPosition2D, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">m_maxHitVertexDisplacement1D</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">m_maxHitVertexDisplacement1D</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a3599ac2ddbe3953dcdbdb9aef24849a1">VertexSelectionBaseAlgorithm::HitKDNode2DList</a> found;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    kdTree.search(searchRegionHits, found);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a> : found)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keyword">const</span> CartesianVector displacement(<a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a>.data-&gt;GetPositionVector() - vertexPosition2D);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> magnitude(displacement.GetMagnitude());</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (magnitude &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordtype">float</span> phi(this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a0d3486f098787131eb722c8dd976f1bb">atan2Fast</a>(displacement.GetZ(), displacement.GetX()));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordtype">float</span> weight(1.f / (std::sqrt(magnitude + std::fabs(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">m_kappa</a>))));</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">m_enableFolding</a> &amp;&amp; (phi &lt; 0.f))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            phi += M_PI;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            weight *= -1.f;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        kernelEstimate.AddContribution(phi, weight);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArGeometryHelper_html_aac2f570fbffeb35fd9dd76f838ad5878"><div class="ttname"><a href="../../df/df1/classlar__content_1_1LArGeometryHelper.html#aac2f570fbffeb35fd9dd76f838ad5878">lar_content::LArGeometryHelper::ProjectPosition</a></div><div class="ttdeci">static pandora::CartesianVector ProjectPosition(const pandora::Pandora &amp;pandora, const pandora::CartesianVector &amp;position3D, const pandora::HitType view)</div><div class="ttdoc">Project 3D position into a given 2D view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/LArGeometryHelper_8cc_source.html#l00323">LArGeometryHelper.cc:323</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8a0f86460ca96fd977a3a9aa31a29da4"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">lar_content::RPhiFeatureTool::m_kappa</a></div><div class="ttdeci">float m_kappa</div><div class="ttdoc">Hit-deweighting offset, of form: weight = 1 / sqrt(distance + kappa), units cm. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00170">RPhiFeatureTool.h:170</a></div></div>
<div class="ttc" id="cheaterreco_8fcl_html_abf2e819dbf4c327e098bebd4b2dc0597"><div class="ttname"><a href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a></div><div class="ttdeci">process_name hit</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/cheaterreco_8fcl_source.html#l00051">cheaterreco.fcl:51</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a0d3486f098787131eb722c8dd976f1bb"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a0d3486f098787131eb722c8dd976f1bb">lar_content::RPhiFeatureTool::atan2Fast</a></div><div class="ttdeci">float atan2Fast(const float y, const float x) const </div><div class="ttdoc">Fast estimate of std::atan2 function. Rather coarse (max |error| &amp;gt; 0.01) but should suffice for this ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00198">RPhiFeatureTool.cc:198</a></div></div>
<div class="ttc" id="classlar__content_1_1VertexSelectionBaseAlgorithm_html_a3599ac2ddbe3953dcdbdb9aef24849a1"><div class="ttname"><a href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a3599ac2ddbe3953dcdbdb9aef24849a1">lar_content::VertexSelectionBaseAlgorithm::HitKDNode2DList</a></div><div class="ttdeci">std::vector&lt; HitKDNode2D &gt; HitKDNode2DList</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d37/VertexSelectionBaseAlgorithm_8h_source.html#l00224">VertexSelectionBaseAlgorithm.h:224</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3655f252e57213f2ee5fd762884f8a3e"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">lar_content::RPhiFeatureTool::m_maxHitVertexDisplacement1D</a></div><div class="ttdeci">float m_maxHitVertexDisplacement1D</div><div class="ttdoc">Max hit-vertex displacement in any one dimension for contribution to kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00171">RPhiFeatureTool.h:171</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a137cb97f2660b539030a3aff4da32f92"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">lar_content::RPhiFeatureTool::m_enableFolding</a></div><div class="ttdeci">bool m_enableFolding</div><div class="ttdoc">Whether to enable folding of -pi -&amp;gt; +pi phi distribution into 0 -&amp;gt; +pi region only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00178">RPhiFeatureTool.h:178</a></div></div>
<div class="ttc" id="namespacelar__content_html_aed106edce4a8d4837d5f3bcdd4faded5"><div class="ttname"><a href="../../db/de7/namespacelar__content.html#aed106edce4a8d4837d5f3bcdd4faded5">lar_content::build_2d_kd_search_region</a></div><div class="ttdeci">KDTreeBox build_2d_kd_search_region(const pandora::CaloHit *const point, const float x_span, const float z_span)</div><div class="ttdoc">build_2d_kd_search_region </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df7/KDTreeLinkerToolsT_8cc_source.html#l00021">KDTreeLinkerToolsT.cc:21</a></div></div>
<div class="ttc" id="namespacelar__content_html_a5af28a2f6df6cb7728ed26b75ca4d220"><div class="ttname"><a href="../../db/de7/namespacelar__content.html#a5af28a2f6df6cb7728ed26b75ca4d220">lar_content::KDTreeBox</a></div><div class="ttdeci">KDTreeBoxT&lt; 2 &gt; KDTreeBox</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd6/KDTreeLinkerToolsT_8h_source.html#l00056">KDTreeLinkerToolsT.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82c8d270f7c7fc35b76461c10f5f3193"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::GetFastScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateU</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateW</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the score for a trio of kernel estimations, using fast histogram approach. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kernelEstimateU</td><td>the kernel estimate for the u view </td></tr>
    <tr><td class="paramname">kernelEstimateV</td><td>the kernel estimate for the v view </td></tr>
    <tr><td class="paramname">kernelEstimateW</td><td>the kernel estimate for the w view</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the fast score </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00082">82</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    Histogram histogramU(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    Histogram histogramV(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    Histogram histogramW(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateU.GetContributionList())</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        histogramU.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateV.GetContributionList())</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        histogramV.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateW.GetContributionList())</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        histogramW.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Is the below correct?</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    histogramU.Scale(1.f / histogramU.GetCumulativeSum());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    histogramV.Scale(1.f / histogramV.GetCumulativeSum());</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    histogramW.Scale(1.f / histogramW.GetCumulativeSum());</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// ATTN Need to renormalise histograms if ever want to directly compare fast and full scores</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">float</span> figureOfMerit(0.f);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> xBin = 0; xBin &lt; histogramU.GetNBinsX(); ++xBin)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> binContentU(histogramU.GetBinContent(xBin));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> binContentV(histogramV.GetBinContent(xBin));</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> binContentW(histogramW.GetBinContent(xBin));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        figureOfMerit += binContentU * binContentU + binContentV * binContentV + binContentW * binContentW;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> figureOfMerit;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a9a688226881e2b96392e4a0ed935cdb1"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">lar_content::RPhiFeatureTool::m_fastHistogramNPhiBins</a></div><div class="ttdeci">unsigned int m_fastHistogramNPhiBins</div><div class="ttdoc">Number of bins to use for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00174">RPhiFeatureTool.h:174</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3f8d4ee96fcab1f50a99ad8b62d8809c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">lar_content::RPhiFeatureTool::m_fastHistogramPhiMin</a></div><div class="ttdeci">float m_fastHistogramPhiMin</div><div class="ttdoc">Min value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00175">RPhiFeatureTool.h:175</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a676e28c40d4bd1f10ef885a75a0f1c49"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">lar_content::RPhiFeatureTool::m_fastHistogramPhiMax</a></div><div class="ttdeci">float m_fastHistogramPhiMax</div><div class="ttdoc">Max value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00176">RPhiFeatureTool.h:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2cc4a5bf785c9cb86f9d1d4bb2d40c09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::GetFullScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateU</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateW</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the score for a trio of kernel estimations, using kernel density estimation and full hit-by-hit sampling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kernelEstimateU</td><td>the kernel estimate for the u view </td></tr>
    <tr><td class="paramname">kernelEstimateV</td><td>the kernel estimate for the v view </td></tr>
    <tr><td class="paramname">kernelEstimateW</td><td>the kernel estimate for the w view</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the full score </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00148">148</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">float</span> figureOfMerit(0.f);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateU.GetContributionList())</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        figureOfMerit += contribution.second * kernelEstimateU.Sample(contribution.first);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateV.GetContributionList())</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        figureOfMerit += contribution.second * kernelEstimateV.Sample(contribution.first);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateW.GetContributionList())</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        figureOfMerit += contribution.second * kernelEstimateW.Sample(contribution.first);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> figureOfMerit;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5b49dfb03db82ba8a89c7ec14e17df5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::GetMidwayScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateU</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6b/classlar__content_1_1RPhiFeatureTool_1_1KernelEstimate.html">KernelEstimate</a> &amp;&#160;</td>
          <td class="paramname"><em>kernelEstimateW</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the score for a trio of kernel estimations, using kernel density estimation but with reduced (binned) sampling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kernelEstimateU</td><td>the kernel estimate for the u view </td></tr>
    <tr><td class="paramname">kernelEstimateV</td><td>the kernel estimate for the v view </td></tr>
    <tr><td class="paramname">kernelEstimateW</td><td>the kernel estimate for the w view</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the midway score </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00118">118</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    Histogram histogramU(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    Histogram histogramV(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    Histogram histogramW(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateU.GetContributionList())</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        histogramU.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateV.GetContributionList())</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        histogramV.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> KernelEstimate::ContributionList::value_type &amp;contribution : kernelEstimateW.GetContributionList())</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        histogramW.Fill(contribution.first, contribution.second);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">float</span> figureOfMerit(0.f);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> xBin = 0; xBin &lt; histogramU.GetNBinsX(); ++xBin)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> binCenter(histogramU.GetXLow() + (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(xBin) + 0.5f) * histogramU.GetXBinWidth());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        figureOfMerit += histogramU.GetBinContent(xBin) * kernelEstimateU.Sample(binCenter);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        figureOfMerit += histogramV.GetBinContent(xBin) * kernelEstimateV.Sample(binCenter);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        figureOfMerit += histogramW.GetBinContent(xBin) * kernelEstimateW.Sample(binCenter);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> figureOfMerit;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a9a688226881e2b96392e4a0ed935cdb1"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">lar_content::RPhiFeatureTool::m_fastHistogramNPhiBins</a></div><div class="ttdeci">unsigned int m_fastHistogramNPhiBins</div><div class="ttdoc">Number of bins to use for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00174">RPhiFeatureTool.h:174</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3f8d4ee96fcab1f50a99ad8b62d8809c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">lar_content::RPhiFeatureTool::m_fastHistogramPhiMin</a></div><div class="ttdeci">float m_fastHistogramPhiMin</div><div class="ttdoc">Min value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00175">RPhiFeatureTool.h:175</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a676e28c40d4bd1f10ef885a75a0f1c49"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">lar_content::RPhiFeatureTool::m_fastHistogramPhiMax</a></div><div class="ttdeci">float m_fastHistogramPhiMax</div><div class="ttdoc">Max value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00176">RPhiFeatureTool.h:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a122234be2a5cfb3d507f8e2b5fe200fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode lar_content::RPhiFeatureTool::ReadSettings </td>
          <td>(</td>
          <td class="paramtype">const pandora::TiXmlHandle&#160;</td>
          <td class="paramname"><em>xmlHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00243">243</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FastScoreCheck&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">m_fastScoreCheck</a>));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FastScoreOnly&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">m_fastScoreOnly</a>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FullScore&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">m_fullScore</a>));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;KernelEstimateSigma&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a>));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;Kappa&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">m_kappa</a>));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaxHitVertexDisplacement1D&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">m_maxHitVertexDisplacement1D</a>));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinFastScoreFraction&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">m_minFastScoreFraction</a>));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FastHistogramNPhiBins&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">m_fastHistogramNPhiBins</a>));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FastHistogramPhiMin&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">m_fastHistogramPhiMin</a>));</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FastHistogramPhiMax&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">m_fastHistogramPhiMax</a>));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;EnableFolding&quot;</span>, <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">m_enableFolding</a>));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a89c07342a7a57426fd570de068266b4c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">lar_content::RPhiFeatureTool::m_fastScoreCheck</a></div><div class="ttdeci">bool m_fastScoreCheck</div><div class="ttdoc">Whether to use the fast histogram based score to selectively avoid calling full or midway scores...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00165">RPhiFeatureTool.h:165</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a9a688226881e2b96392e4a0ed935cdb1"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a9a688226881e2b96392e4a0ed935cdb1">lar_content::RPhiFeatureTool::m_fastHistogramNPhiBins</a></div><div class="ttdeci">unsigned int m_fastHistogramNPhiBins</div><div class="ttdoc">Number of bins to use for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00174">RPhiFeatureTool.h:174</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3f8d4ee96fcab1f50a99ad8b62d8809c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3f8d4ee96fcab1f50a99ad8b62d8809c">lar_content::RPhiFeatureTool::m_fastHistogramPhiMin</a></div><div class="ttdeci">float m_fastHistogramPhiMin</div><div class="ttdoc">Min value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00175">RPhiFeatureTool.h:175</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8a0f86460ca96fd977a3a9aa31a29da4"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8a0f86460ca96fd977a3a9aa31a29da4">lar_content::RPhiFeatureTool::m_kappa</a></div><div class="ttdeci">float m_kappa</div><div class="ttdoc">Hit-deweighting offset, of form: weight = 1 / sqrt(distance + kappa), units cm. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00170">RPhiFeatureTool.h:170</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a1792be220a04b6363b24d6bb3fca156d"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">lar_content::RPhiFeatureTool::m_fastScoreOnly</a></div><div class="ttdeci">bool m_fastScoreOnly</div><div class="ttdoc">Whether to use the fast histogram based score only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00166">RPhiFeatureTool.h:166</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_ae28ac1b5a4391baf2e6f37a78ff4ffb2"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">lar_content::RPhiFeatureTool::m_minFastScoreFraction</a></div><div class="ttdeci">float m_minFastScoreFraction</div><div class="ttdoc">Fast score must be at least this fraction of best fast score to calculate full score. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00173">RPhiFeatureTool.h:173</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a3655f252e57213f2ee5fd762884f8a3e"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a3655f252e57213f2ee5fd762884f8a3e">lar_content::RPhiFeatureTool::m_maxHitVertexDisplacement1D</a></div><div class="ttdeci">float m_maxHitVertexDisplacement1D</div><div class="ttdoc">Max hit-vertex displacement in any one dimension for contribution to kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00171">RPhiFeatureTool.h:171</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a676e28c40d4bd1f10ef885a75a0f1c49"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a676e28c40d4bd1f10ef885a75a0f1c49">lar_content::RPhiFeatureTool::m_fastHistogramPhiMax</a></div><div class="ttdeci">float m_fastHistogramPhiMax</div><div class="ttdoc">Max value for fast score histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00176">RPhiFeatureTool.h:176</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a10051a6b301d3b9f07b8ebe4552be60a"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">lar_content::RPhiFeatureTool::m_fullScore</a></div><div class="ttdeci">bool m_fullScore</div><div class="ttdoc">Whether to use the full kernel density estimation score, as opposed to the midway score...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00167">RPhiFeatureTool.h:167</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8ab7baaebdea11cd74347cf5927f4773"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">lar_content::RPhiFeatureTool::m_kernelEstimateSigma</a></div><div class="ttdeci">float m_kernelEstimateSigma</div><div class="ttdoc">The Gaussian width to use for kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00169">RPhiFeatureTool.h:169</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a137cb97f2660b539030a3aff4da32f92"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a137cb97f2660b539030a3aff4da32f92">lar_content::RPhiFeatureTool::m_enableFolding</a></div><div class="ttdeci">bool m_enableFolding</div><div class="ttdoc">Whether to enable folding of -pi -&amp;gt; +pi phi distribution into 0 -&amp;gt; +pi region only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00178">RPhiFeatureTool.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64828d838355ea8d4be9224747730d47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::RPhiFeatureTool::Run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a33cd1e27565c8646ce7ac82d9ed92a25">LArMvaHelper::MvaFeatureVector</a> &amp;&#160;</td>
          <td class="paramname"><em>featureVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html">VertexSelectionBaseAlgorithm</a> *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::Vertex *const&#160;</td>
          <td class="paramname"><em>pVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a0642772978e3483871e3e67bc1a4d8c2">VertexSelectionBaseAlgorithm::SlidingFitDataListMap</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a119a0b3528a94e41bdfcfb34bd4094c6">VertexSelectionBaseAlgorithm::ClusterListMap</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a17054dbc231a199c866dbacde041afb1">VertexSelectionBaseAlgorithm::KDTreeMap</a> &amp;&#160;</td>
          <td class="paramname"><em>kdTreeMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d1e/classlar__content_1_1VertexSelectionBaseAlgorithm.html#a91f15028cf5402b4b28fc8c94d143258">VertexSelectionBaseAlgorithm::ShowerClusterListMap</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>beamDeweightingScore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;&#160;</td>
          <td class="paramname"><em>bestFastScore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the tool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the calling algorithm </td></tr>
    <tr><td class="paramname">pVertex</td><td>address of the vertex </td></tr>
    <tr><td class="paramname">kdTreeMap</td><td>map of the hit kd trees </td></tr>
    <tr><td class="paramname">beamDeweightingScore</td><td>the beam deweighting score for this vertex </td></tr>
    <tr><td class="paramname">bestFastScore</td><td>the best fast score</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the r/phi feature </dd></dl>

<p>Definition at line <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00038">38</a> of file <a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (PandoraContentApi::GetSettings(*pAlgorithm)-&gt;ShouldDisplayAlgorithmInfo())</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;----&gt; Running Algorithm Tool: &quot;</span> &lt;&lt; this-&gt;GetInstanceName() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; this-&gt;GetType() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    KernelEstimate kernelEstimateU(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    KernelEstimate kernelEstimateV(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    KernelEstimate kernelEstimateW(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">m_kernelEstimateSigma</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a98e982a906b3fa18f70806f772e7e089">FillKernelEstimate</a>(pVertex, TPC_VIEW_U, kdTreeMap.at(TPC_VIEW_U), kernelEstimateU);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a98e982a906b3fa18f70806f772e7e089">FillKernelEstimate</a>(pVertex, TPC_VIEW_V, kdTreeMap.at(TPC_VIEW_V), kernelEstimateV);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a98e982a906b3fa18f70806f772e7e089">FillKernelEstimate</a>(pVertex, TPC_VIEW_W, kdTreeMap.at(TPC_VIEW_W), kernelEstimateW);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> expBeamDeweightingScore = <a class="code" href="../../d6/d11/namespacemake__calib__df.html#ada2bd95dba6a990f1012b56dacc20b0e">std::exp</a>(beamDeweightingScore);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">m_fastScoreCheck</a> || <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">m_fastScoreOnly</a>)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> fastScore(this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a82c8d270f7c7fc35b76461c10f5f3193">GetFastScore</a>(kernelEstimateU, kernelEstimateV, kernelEstimateW));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">m_fastScoreOnly</a>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            featureVector.push_back(fastScore);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (expBeamDeweightingScore * fastScore &lt; <a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">m_minFastScoreFraction</a> * bestFastScore)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            featureVector.push_back(0.);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span> (expBeamDeweightingScore * fastScore &gt; bestFastScore)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            bestFastScore = expBeamDeweightingScore * fastScore;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    featureVector.push_back(<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">m_fullScore</a> ? this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a2cc4a5bf785c9cb86f9d1d4bb2d40c09">GetFullScore</a>(kernelEstimateU, kernelEstimateV, kernelEstimateW)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                        : this-&gt;<a class="code" href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae5b49dfb03db82ba8a89c7ec14e17df5">GetMidwayScore</a>(kernelEstimateU, kernelEstimateV, kernelEstimateW));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a89c07342a7a57426fd570de068266b4c"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a89c07342a7a57426fd570de068266b4c">lar_content::RPhiFeatureTool::m_fastScoreCheck</a></div><div class="ttdeci">bool m_fastScoreCheck</div><div class="ttdoc">Whether to use the fast histogram based score to selectively avoid calling full or midway scores...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00165">RPhiFeatureTool.h:165</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a1792be220a04b6363b24d6bb3fca156d"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a1792be220a04b6363b24d6bb3fca156d">lar_content::RPhiFeatureTool::m_fastScoreOnly</a></div><div class="ttdeci">bool m_fastScoreOnly</div><div class="ttdoc">Whether to use the fast histogram based score only. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00166">RPhiFeatureTool.h:166</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_ae28ac1b5a4391baf2e6f37a78ff4ffb2"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae28ac1b5a4391baf2e6f37a78ff4ffb2">lar_content::RPhiFeatureTool::m_minFastScoreFraction</a></div><div class="ttdeci">float m_minFastScoreFraction</div><div class="ttdoc">Fast score must be at least this fraction of best fast score to calculate full score. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00173">RPhiFeatureTool.h:173</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a82c8d270f7c7fc35b76461c10f5f3193"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a82c8d270f7c7fc35b76461c10f5f3193">lar_content::RPhiFeatureTool::GetFastScore</a></div><div class="ttdeci">float GetFastScore(const KernelEstimate &amp;kernelEstimateU, const KernelEstimate &amp;kernelEstimateV, const KernelEstimate &amp;kernelEstimateW) const </div><div class="ttdoc">Get the score for a trio of kernel estimations, using fast histogram approach. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00082">RPhiFeatureTool.cc:82</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a2cc4a5bf785c9cb86f9d1d4bb2d40c09"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a2cc4a5bf785c9cb86f9d1d4bb2d40c09">lar_content::RPhiFeatureTool::GetFullScore</a></div><div class="ttdeci">float GetFullScore(const KernelEstimate &amp;kernelEstimateU, const KernelEstimate &amp;kernelEstimateV, const KernelEstimate &amp;kernelEstimateW) const </div><div class="ttdoc">Get the score for a trio of kernel estimations, using kernel density estimation and full hit-by-hit s...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00148">RPhiFeatureTool.cc:148</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a10051a6b301d3b9f07b8ebe4552be60a"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a10051a6b301d3b9f07b8ebe4552be60a">lar_content::RPhiFeatureTool::m_fullScore</a></div><div class="ttdeci">bool m_fullScore</div><div class="ttdoc">Whether to use the full kernel density estimation score, as opposed to the midway score...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00167">RPhiFeatureTool.h:167</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a8ab7baaebdea11cd74347cf5927f4773"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a8ab7baaebdea11cd74347cf5927f4773">lar_content::RPhiFeatureTool::m_kernelEstimateSigma</a></div><div class="ttdeci">float m_kernelEstimateSigma</div><div class="ttdoc">The Gaussian width to use for kernel estimation. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d55/RPhiFeatureTool_8h_source.html#l00169">RPhiFeatureTool.h:169</a></div></div>
<div class="ttc" id="namespacemake__calib__df_html_ada2bd95dba6a990f1012b56dacc20b0e"><div class="ttname"><a href="../../d6/d11/namespacemake__calib__df.html#ada2bd95dba6a990f1012b56dacc20b0e">make_calib_df.exp</a></div><div class="ttdeci">def exp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0e/make__calib__df_8py_source.html#l00043">make_calib_df.py:43</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_ae5b49dfb03db82ba8a89c7ec14e17df5"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#ae5b49dfb03db82ba8a89c7ec14e17df5">lar_content::RPhiFeatureTool::GetMidwayScore</a></div><div class="ttdeci">float GetMidwayScore(const KernelEstimate &amp;kernelEstimateU, const KernelEstimate &amp;kernelEstimateV, const KernelEstimate &amp;kernelEstimateW) const </div><div class="ttdoc">Get the score for a trio of kernel estimations, using kernel density estimation but with reduced (bin...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00118">RPhiFeatureTool.cc:118</a></div></div>
<div class="ttc" id="classlar__content_1_1RPhiFeatureTool_html_a98e982a906b3fa18f70806f772e7e089"><div class="ttname"><a href="../../dc/dcf/classlar__content_1_1RPhiFeatureTool.html#a98e982a906b3fa18f70806f772e7e089">lar_content::RPhiFeatureTool::FillKernelEstimate</a></div><div class="ttdeci">void FillKernelEstimate(const pandora::Vertex *const pVertex, const pandora::HitType hitType, VertexSelectionBaseAlgorithm::HitKDTree2D &amp;kdTree, KernelEstimate &amp;kernelEstimate) const </div><div class="ttdoc">Use hits in clusters (in the provided kd tree) to fill a provided kernel estimate with hit-vertex rel...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/RPhiFeatureTool_8cc_source.html#l00166">RPhiFeatureTool.cc:166</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a137cb97f2660b539030a3aff4da32f92"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::RPhiFeatureTool::m_enableFolding</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to enable folding of -pi -&gt; +pi phi distribution into 0 -&gt; +pi region only. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00178">178</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9a688226881e2b96392e4a0ed935cdb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lar_content::RPhiFeatureTool::m_fastHistogramNPhiBins</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of bins to use for fast score histograms. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00174">174</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a676e28c40d4bd1f10ef885a75a0f1c49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_fastHistogramPhiMax</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Max value for fast score histograms. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00176">176</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3f8d4ee96fcab1f50a99ad8b62d8809c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_fastHistogramPhiMin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Min value for fast score histograms. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00175">175</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a89c07342a7a57426fd570de068266b4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::RPhiFeatureTool::m_fastScoreCheck</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to use the fast histogram based score to selectively avoid calling full or midway scores. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00165">165</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1792be220a04b6363b24d6bb3fca156d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::RPhiFeatureTool::m_fastScoreOnly</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to use the fast histogram based score only. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00166">166</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a10051a6b301d3b9f07b8ebe4552be60a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::RPhiFeatureTool::m_fullScore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to use the full kernel density estimation score, as opposed to the midway score. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00167">167</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8a0f86460ca96fd977a3a9aa31a29da4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_kappa</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hit-deweighting offset, of form: weight = 1 / sqrt(distance + kappa), units cm. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00170">170</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ab7baaebdea11cd74347cf5927f4773"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_kernelEstimateSigma</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Gaussian width to use for kernel estimation. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00169">169</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3655f252e57213f2ee5fd762884f8a3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_maxHitVertexDisplacement1D</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Max hit-vertex displacement in <em>any one dimension</em> for contribution to kernel estimation. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00171">171</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae28ac1b5a4391baf2e6f37a78ff4ffb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::RPhiFeatureTool::m_minFastScoreFraction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fast score must be at least this fraction of best fast score to calculate full score. </p>

<p>Definition at line <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html#l00173">173</a> of file <a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../de/d55/RPhiFeatureTool_8h_source.html">RPhiFeatureTool.h</a></li>
<li><a class="el" href="../../d0/d37/RPhiFeatureTool_8cc_source.html">RPhiFeatureTool.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
