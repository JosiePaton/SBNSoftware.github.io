<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ICARUSOpHitFinder_module.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_04d670c4adcb884258431ddc1ce2763c.html">icaruscode</a></li><li class="navelem"><a class="el" href="../../dir_94314c0f385d81f04de3b3bdb34c1673.html">icaruscode</a></li><li class="navelem"><a class="el" href="../../dir_c03f57aeab4998d455c0a24e3e31d83b.html">PMT</a></li><li class="navelem"><a class="el" href="../../dir_c280bfca3090641532bb92c3a67fbe19.html">OpReco</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ICARUSOpHitFinder_module.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/d35/ICARUSOpHitFinder__module_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * @file   icaruscode/PMT/ICARUSOpHitFinder_module.cc</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * @brief  LArSoft module for PMT hit finding.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * @date   May 6, 2022</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * @author Gianluca Petrillo (petrillo@slac.stanford.edu)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Offers `opdet::ICARUSOpHitFinder` (see in its documentation why).</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// ICARUS libraries</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddd/PedAlgoFixed_8h.html">icaruscode/PMT/OpReco/Algorithms/PedAlgoFixed.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dfe/OpRecoFactoryStuff_8h.html">icaruscode/PMT/OpReco/Algorithms/OpRecoFactoryStuff.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d91/WaveformRMS_8h.html">icaruscode/PMT/Data/WaveformRMS.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d85/WaveformBaseline_8h.html">sbnobj/ICARUS/PMT/Data/WaveformBaseline.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// LArSoft libraries</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d48/AlgoCFD_8h.html">larana/OpticalDetector/OpHitFinder/AlgoCFD.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d41/AlgoFixedWindow_8h.html">larana/OpticalDetector/OpHitFinder/AlgoFixedWindow.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d96/AlgoSiPM_8h.html">larana/OpticalDetector/OpHitFinder/AlgoSiPM.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/da0/AlgoSlidingWindow_8h.html">larana/OpticalDetector/OpHitFinder/AlgoSlidingWindow.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d0b/AlgoThreshold_8h.html">larana/OpticalDetector/OpHitFinder/AlgoThreshold.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d63/OpHitAlg_8h.html">larana/OpticalDetector/OpHitFinder/OpHitAlg.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d33/PMTPulseRecoBase_8h.html">larana/OpticalDetector/OpHitFinder/PMTPulseRecoBase.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dda/PedAlgoEdges_8h.html">larana/OpticalDetector/OpHitFinder/PedAlgoEdges.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d06/PedAlgoRollingMean_8h.html">larana/OpticalDetector/OpHitFinder/PedAlgoRollingMean.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d8e/PedAlgoUB_8h.html">larana/OpticalDetector/OpHitFinder/PedAlgoUB.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/df7/PulseRecoManager_8h.html">larana/OpticalDetector/OpHitFinder/PulseRecoManager.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/OpHitFinder_2OpticalRecoTypes_8h.html">larana/OpticalDetector/OpHitFinder/OpticalRecoTypes.h</a>&quot;</span> <span class="comment">// pmtana::Waveform_t</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d8b/Geometry_8h.html">larcore/Geometry/Geometry.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dba/DetectorClocksService_8h.html">lardata/DetectorInfoServices/DetectorClocksService.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d5b/DetectorClocksData_8h.html">lardataalg/DetectorInfo/DetectorClocksData.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dad/OpHit_8h.html">lardataobj/RecoBase/OpHit.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h.html">lardataobj/RawData/OpDetWaveform.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/da6/BeamGateInfo_8h.html">lardataobj/Simulation/BeamGateInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d94/IPhotonCalibrator_8h.html">larreco/Calibrator/IPhotonCalibrator.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d73/IPhotonCalibratorService_8h.html">larreco/Calibrator/IPhotonCalibratorService.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d2c/PhotonCalibratorStandard_8h.html">larreco/Calibrator/PhotonCalibratorStandard.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// framework libraries</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/ReplicatedProducer.h&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/ProcessingFrame.h&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/ModuleMacros.h&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Event.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Handle.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;canvas/Utilities/Exception.h&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;messagefacility/MessageLogger/MessageLogger.h&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/types/Sequence.h&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/types/OptionalAtom.h&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/types/Atom.h&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/types/DelegatedParameter.h&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/ParameterSet.h&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// C++ standard libraries</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span> <span class="comment">// std::copy_if(), std::binary_search()</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;variant&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span> <span class="comment">// std::unique_ptr</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span> <span class="comment">// std::mem_fn()</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span> <span class="comment">// std::move()</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">using</span> <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// Types of _art_ interface.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> ArtTraits</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    = <a class="code" href="../../de/d17/structopdet_1_1factory_1_1FWInterfaceTraits.html">opdet::factory::FWInterfaceTraits&lt;art::Event, art::ConsumesCollector&gt;</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// ===========================================================================</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// BEGIN ===  DECLARE NEW ALGORITHMS HERE</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// ===========================================================================</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// optical hit algorithm factory</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="../../df/de3/classopdet_1_1factory_1_1AlgorithmFactory.html">opdet::factory::AlgorithmFactory&lt;pmtana::PMTPulseRecoBase&gt;</a> <span class="keyword">const</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  HitAlgoFactory {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="stringliteral">&quot;Name&quot;</span> <span class="comment">// find the name of the algorithm under &quot;Name&quot; in its configuration</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    , <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl&lt;pmtana::AlgoThreshold    &gt;</a>{<span class="stringliteral">&quot;Threshold&quot;</span>    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    , <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl&lt;pmtana::AlgoSiPM         &gt;</a>{<span class="stringliteral">&quot;SiPM&quot;</span>         }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    , <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl&lt;pmtana::AlgoSlidingWindow&gt;</a>{<span class="stringliteral">&quot;SlidingWindow&quot;</span>}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    , <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl&lt;pmtana::AlgoFixedWindow  &gt;</a>{<span class="stringliteral">&quot;FixedWindow&quot;</span>  }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    , <a class="code" href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl&lt;pmtana::AlgoCFD          &gt;</a>{<span class="stringliteral">&quot;CFD&quot;</span>          }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    };</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// pedestal algorithm factory</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Algo&gt;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">using</span> FWIFPedAlgo</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    = <a class="code" href="../../d3/d6c/classopdet_1_1factory_1_1FWInterfaced.html">opdet::factory::FWInterfaced&lt;Algo, pmtana::PMTPedestalBase, ArtTraits&gt;</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="../../df/de3/classopdet_1_1factory_1_1AlgorithmFactory.html">opdet::factory::AlgorithmFactory</a></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    &lt;<a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html">opdet::factory::FWInterfacedIF&lt;pmtana::PMTPedestalBase, ArtTraits&gt;</a>&gt; <span class="keyword">const</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  PedAlgoFactory {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="stringliteral">&quot;Name&quot;</span> <span class="comment">// find the name of the algorithm under &quot;Name&quot; in its configuration</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    , Decl&lt;FWIFPedAlgo&lt;pmtana::PedAlgoEdges      &gt;&gt;{<span class="stringliteral">&quot;Edges&quot;</span>      }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    , Decl&lt;FWIFPedAlgo&lt;pmtana::PedAlgoRollingMean&gt;&gt;{<span class="stringliteral">&quot;RollingMean&quot;</span>}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    , Decl&lt;FWIFPedAlgo&lt;pmtana::PedAlgoUB         &gt;&gt;{<span class="stringliteral">&quot;UB&quot;</span>         }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    , Decl&lt;FWIFPedAlgo&lt;pmtana::PedAlgoFixed      &gt;&gt;{<span class="stringliteral">&quot;Fixed&quot;</span>      }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    };</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// ===========================================================================</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// END =====  DECLARE NEW ALGORITHMS HERE</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// ===========================================================================</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;} <span class="comment">// local namespace</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">namespace </span>opdet { <span class="keyword">class </span>ICARUSOpHitFinder; }<span class="comment"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> * @class opdet::ICARUSOpHitFinder</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> * @brief Extracts PMT activity as optical hits (`recob::OpHit`).</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * This module runs hit-finding algorithms, and is tailored to allow for an</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> * update of the hit finding parameters event by event.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> * Motivation</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * -----------</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * This module is a branch of the standard LArSoft `opdet::OpHitFinder` by</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * Gleb Sinev, Ben Jones and others.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * That module itself is an interface to the hit finding mini-framework also</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * in `larana`, authored by Kazuhiro Terao.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> * That framework independently analyzes each waveform and performs hit finding</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * using general timing and geometry information (from `detinfo::DetectorClocks`</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> * and `geo::GeometryCore` service providers), a threshold parameter and</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * configurable algorithms for baseline evaluation, hit finding and calibration.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * It is believed that the baseline of ICARUS PMT is remarkably stable in the</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * short time, and it is conceivable to use a single steady value for many</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * waveforms on each channel. Unfortunately the existing module is not suitable</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> * for a baseline that may change event by event or in time: the mini-framework</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> * does not explicitly allow this, and the module is not equipped with the</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"> * necessary workarounds.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> * This module is a replica of LArSoft&#39;s, with the additional workarounds needed</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> * to allow for a baseline learnt from an external source and changing event by</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"> * event.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> * Configuration parameters</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> * -------------------------</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> * The configuration parameters are intentionally left the same as in</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * `opdet::OpHitFinder`, with a few exceptions and additions where needed.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * * `InputModule` (input tag): data product with the optical waveforms to</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> *   analyze.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> * * `GenModule` (input tag, mandatory): data product with the beam gate (either</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *   generated or from trigger information).</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> * * `UseStartTime` (flag, default: `false`): store the start time in the hit</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> *   instead of the peak time.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> * * `ChannelMasks` (list of channel numbers, default: empty): skip waveforms</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> *   on the channels specified in this list.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> * * `HitAlgoPset` (table, mandatory): configuration of the hit finding</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> *   algorithm; its content depends on the algorithm itself, but the following</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"> *   elements are nonetheless mandatory:</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"> *     * `Name` (text): algorithm name; the supported algorithms are hard-coded</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> *       by name.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * * `PedAlgoPset` (table, mandatory): configuration of the pedestal</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> *   algorithm; its content depends on the algorithm itself, but the following</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> *   elements are nonetheless mandatory:</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> *     * `Name` (text): algorithm name; the supported algorithms are hard-coded</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> *       by name.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> *     </span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * * `HitThreshold` (real): hit threshold [ADC counts]</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * * `UseCalibrator` (flag, default: `false`): if set, use the calibration</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> *   service configured in the job; otherwise, use the simpler calibration</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> *   configured in this module (see the following parameters).</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> * * `AreaToPE` (flag): whether the conversion factor goes from hit area (total</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"> *   ADC) or from amplitude (ADC), to photoelectrons.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"> * * `SPEArea` (real): area or amplitude (depending on `AreaToPE`) of the</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"> *   response signal to a single photoelectron.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> * * `SPEShift` (real, default: `0`)</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> * Noticeable differences with LArSoft&#39;s `opdet::OpHitFinder` configuration:</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> * * multiple input collections are not supported, so the `InputModule` is a</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> *   complete input tag and no list of instance names can be specified.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * Multithreading</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> * ---------------</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> * In order to support the algorithms that require an event-specific</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> * configuration, the module is not shared. While the algorithms could be</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> * written to keep track of different event configurations, at the time the</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> * algorithms are executed on a waveform they have no mean to know which event</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * the waveforms belong to. Rather than writing complex workarounds on this</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * problem, the module is replicated so that there are multiple algorithms</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> * (and multiple managers) but each of them sees an event at a time, in a way</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> * that the module (replica) can predict.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html">  202</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html">opdet::ICARUSOpHitFinder</a>: <span class="keyword">public</span> art::ReplicatedProducer {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html">  205</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html">Config</a> {</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">  206</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a> = <a class="code" href="../../df/d20/geometry__icarus_8fcl.html#a7cd432ab9c92d3d70fdf422ed970e9d3">fhicl::Name</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">  207</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a> = fhicl::Comment;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a70d95e45fc5f8d644fbf1334ff22e2a1">  209</a></span>&#160;    fhicl::Atom&lt;art::InputTag&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a70d95e45fc5f8d644fbf1334ff22e2a1">InputModule</a> {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;InputModule&quot;</span> },</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Data product with the optical waveforms to process&quot;</span> }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      };</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9ac2cac068708fee34b918a8430b6005">  214</a></span>&#160;    fhicl::OptionalAtom&lt;art::InputTag&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9ac2cac068708fee34b918a8430b6005">GenModule</a> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;GenModule&quot;</span> },</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Data product with the beam gates&quot;</span> }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      };</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    </div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a94085972b8b11317d200c22086bcb686">  219</a></span>&#160;    fhicl::Sequence&lt;raw::Channel_t&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a94085972b8b11317d200c22086bcb686">ChannelMasks</a> {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;ChannelMasks&quot;</span> },</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;List of channels to skip [none by default]&quot;</span> },</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      std::vector&lt;raw::Channel_t&gt;{}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      };</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    </div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#adec79f89de6239c025a018fb11060683">  225</a></span>&#160;    fhicl::Atom&lt;float&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#adec79f89de6239c025a018fb11060683">HitThreshold</a> {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;HitThreshold&quot;</span> },</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Hit reconstruction threshold [ADC#]&quot;</span> }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      };</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a710077a7a6d75cac14735aa4df7c5b34">  230</a></span>&#160;    fhicl::Atom&lt;bool&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a710077a7a6d75cac14735aa4df7c5b34">UseStartTime</a> {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;UseStartTime&quot;</span> },</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Store the start time instead of the peak time&quot;</span> },</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keyword">false</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      };</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4257f23a18bcfd068c1dd7a4c2a5b848">  236</a></span>&#160;    fhicl::DelegatedParameter <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4257f23a18bcfd068c1dd7a4c2a5b848">HitAlgoPset</a> {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;HitAlgoPset&quot;</span> },</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="stringliteral">&quot;parameters of the hit finding algorithm.&quot;</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="stringliteral">&quot; The parameters must include the algorithm \&quot;Name\&quot;, one of: &quot;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        + HitAlgoFactory.names(<span class="stringliteral">&quot;, &quot;</span>) + <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      };</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ae7c44029bf40f54d45b54e158c2c2dfd">  245</a></span>&#160;    fhicl::DelegatedParameter <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ae7c44029bf40f54d45b54e158c2c2dfd">PedAlgoPset</a> {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;PedAlgoPset&quot;</span> },</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="stringliteral">&quot;parameters of the pedestal extraction algorithm.&quot;</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="stringliteral">&quot; The parameters must include the algorithm \&quot;Name\&quot;, one of: &quot;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        + PedAlgoFactory.names(<span class="stringliteral">&quot;, &quot;</span>) + <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      };</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    </div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">  254</a></span>&#160;    fhicl::Atom&lt;bool&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">UseCalibrator</a> {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;UseCalibrator&quot;</span> },</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Use the photon calibration service configured in the job&quot;</span> },</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keyword">false</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      };</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    </div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a3045da886f93f004978f7d2929223b4f">  260</a></span>&#160;    fhicl::Atom&lt;bool&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a3045da886f93f004978f7d2929223b4f">AreaToPE</a> {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;AreaToPE&quot;</span> },</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;Whether the `SPEArea` parameter refers to area or amplitude&quot;</span> },</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      [<span class="keyword">this</span>](){ <span class="keywordflow">return</span> !<a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">UseCalibrator</a>(); }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      };</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    </div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9f5b9741fcd2f0ac239f4b0740f98690">  266</a></span>&#160;    fhicl::Atom&lt;float&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9f5b9741fcd2f0ac239f4b0740f98690">SPEArea</a> {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;SPEArea&quot;</span> },</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;area or amplitude of PMT response to single photoelectron&quot;</span> },</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      [<span class="keyword">this</span>](){ <span class="keywordflow">return</span> !<a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">UseCalibrator</a>(); }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      };</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    </div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a748884c01a1eb5de6899cb1d4f567b46">  272</a></span>&#160;    fhicl::Atom&lt;float&gt; <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a748884c01a1eb5de6899cb1d4f567b46">SPEShift</a> {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">Name</a>{ <span class="stringliteral">&quot;SPEShift&quot;</span> },</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">Comment</a>{ <span class="stringliteral">&quot;shift on the single photoelectron response&quot;</span> },</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      [<span class="keyword">this</span>](){ <span class="keywordflow">return</span> !<a class="code" href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">UseCalibrator</a>(); }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      };</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }; <span class="comment">// Config</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  </div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a6014165460aa2c9b267898eb3b9daa16">  280</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a6014165460aa2c9b267898eb3b9daa16">Parameters</a> = art::ReplicatedProducer::Table&lt;Config&gt;;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#af0d40a108823ce9ae5e5633d0fe0c9aa">ICARUSOpHitFinder</a></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    (<a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a6014165460aa2c9b267898eb3b9daa16">Parameters</a> <span class="keyword">const</span>&amp; config, art::ProcessingFrame <span class="keyword">const</span>&amp; frame);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ad19ea4ebaed8d9b94323dcf80482af3e">produce</a>(art::Event&amp;, art::ProcessingFrame <span class="keyword">const</span>&amp;) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// --- BEGIN -- Configuration parameters -------------------------------------</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a55e076307db02c6f5c813cc4dc490bcb">  290</a></span>&#160;  art::InputTag <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a55e076307db02c6f5c813cc4dc490bcb">fWaveformTags</a>; <span class="comment">///&lt; Input PMT waveform data product tags.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a88069eb9d947020d6c6240c14107bbf1">  291</a></span>&#160;<span class="comment"></span>  art::InputTag <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a88069eb9d947020d6c6240c14107bbf1">fBeamGateTag</a>; <span class="comment">///&lt; Data product with beam gates.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span><span class="comment">  /// Sorted list of channels to skip.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#afcfe6a19a649306dc22e2e34746a34f1">  293</a></span>&#160;<span class="comment"></span>  std::vector&lt;unsigned int&gt; <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#afcfe6a19a649306dc22e2e34746a34f1">fChannelMasks</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a0bf6778941de250f1df94d097b48f8b9">  294</a></span>&#160;  <span class="keywordtype">float</span> <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a0bf6778941de250f1df94d097b48f8b9">fHitThreshold</a>; <span class="comment">///&lt; Hit finding threshold.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a34da50580061ca542c3f61dd84d1c137">  295</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a34da50580061ca542c3f61dd84d1c137">fUseStartTime</a>; <span class="comment">///&lt; Whether to store start instead of peak time.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span>  <span class="comment">// --- END ---- Configuration parameters -------------------------------------</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// --- BEGIN -- Cached service values ----------------------------------------</span><span class="comment"></span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">  /// Storage for our own calibration algorithm, if any.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a63fa2cd9893db953b26414f475248d7c">  300</a></span>&#160;<span class="comment"></span>  std::unique_ptr&lt;calib::IPhotonCalibrator&gt; <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a63fa2cd9893db953b26414f475248d7c">fMyCalib</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  </div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#aac269148086124735f277f0945c01dee">  302</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#aac269148086124735f277f0945c01dee">fMaxOpChannel</a>; <span class="comment">///&lt; Number of channels in the detector.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"></span>  <span class="comment"></span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">  /// The calibration algorithm to be used (not owned).</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ada0b83edf82332e9f3403a76d12e4b3a">  305</a></span>&#160;<span class="comment"></span>  <a class="code" href="../../d1/d52/classcalib_1_1IPhotonCalibrator.html">calib::IPhotonCalibrator</a> <span class="keyword">const</span>* <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ada0b83edf82332e9f3403a76d12e4b3a">fCalib</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// --- END ---- Cached service values ----------------------------------------</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// --- BEGIN -- Algorithms ---------------------------------------------------</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keyword">using</span> <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html">FWInterfacedPedAlgo</a></div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a579a35fe7d26c9c24160407df23423ee">  312</a></span>&#160;    = <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html">opdet::factory::FWInterfacedIF&lt;pmtana::PMTPedestalBase, ArtTraits&gt;</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  </div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#acc9b3ffda32afe9b5eb852f25b43fbc6">  314</a></span>&#160;  <a class="code" href="../../d0/d94/classpmtana_1_1PulseRecoManager.html">pmtana::PulseRecoManager</a> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#acc9b3ffda32afe9b5eb852f25b43fbc6">fPulseRecoMgr</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a723b30a8d346e7ed28c7bb07f4fa0b3a">  315</a></span>&#160;  std::unique_ptr&lt;pmtana::PMTPulseRecoBase&gt; <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a723b30a8d346e7ed28c7bb07f4fa0b3a">fThreshAlg</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a8a66102cf302d8e8cea298ee5a5a39ee">  316</a></span>&#160;  std::unique_ptr&lt;FWInterfacedPedAlgo&gt; <span class="keyword">const</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a8a66102cf302d8e8cea298ee5a5a39ee">fPedAlg</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// --- END ---- Algorithms ---------------------------------------------------</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">  /// Optionally reads the beam gates from `fBeamGateTag`, empty if none.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span>  std::vector&lt;sim::BeamGateInfo const*&gt; <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a425f20a6d7daa3a101c0dda9c29904c9">fetchBeamGates</a></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    (art::Event <span class="keyword">const</span>&amp; event) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">  /// Returns a vector with copies of only the waveforms not in masked channels.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span>  std::vector&lt;raw::OpDetWaveform&gt; <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a05536a1dc45e74f9877a1a3c86bf8175">selectWaveforms</a></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    (std::vector&lt;raw::OpDetWaveform&gt; <span class="keyword">const</span>&amp; waveforms) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}; <span class="comment">// opdet::ICARUSOpHitFinder</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">// ---  Implementation</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">// ---  specializations</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span><span class="comment"></span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// Framework interface to `pmtana::PedAlgoFixed`.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html">  339</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/d6c/classopdet_1_1factory_1_1FWInterfaced.html">opdet::factory::FWInterfaced</a></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  &lt;pmtana::PedAlgoFixed, <a class="code" href="../../df/d77/classpmtana_1_1PMTPedestalBase.html">pmtana::PMTPedestalBase</a>, ArtTraits&gt;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  : <span class="keyword">public</span> <a class="code" href="../../d1/d14/classopdet_1_1factory_1_1FWInterfacedBase.html">opdet::factory::FWInterfacedBase</a></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      &lt;pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits&gt;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">using</span> <a class="code" href="../../d1/d14/classopdet_1_1factory_1_1FWInterfacedBase.html">IFBase_t</a> = <a class="code" href="../../d1/d14/classopdet_1_1factory_1_1FWInterfacedBase.html">opdet::factory::FWInterfacedBase</a></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a45459c3b28a8b0eed359f558ae2a6dae">  345</a></span>&#160;    &lt;<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html">pmtana::PedAlgoFixed</a>, <a class="code" href="../../df/d77/classpmtana_1_1PMTPedestalBase.html">pmtana::PMTPedestalBase</a>, ArtTraits&gt;;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#aaa555b8703a99e6dae86892ac241d75d">  348</a></span>&#160;  <a class="code" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#aaa555b8703a99e6dae86892ac241d75d">FWInterfaced</a>(fhicl::ParameterSet <span class="keyword">const</span>&amp; pset): <a class="code" href="../../d1/d14/classopdet_1_1factory_1_1FWInterfacedBase.html">IFBase_t</a>{ pset } {}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">  /// Declares the consumables.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a4d44ba2609037d14b93e64febef2e544">  354</a></span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a4d44ba2609037d14b93e64febef2e544">doInitialize</a>(<span class="keyword">typename</span> <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#a5facc25a64b0ec6d62bee2ff6283c6d2">IFBase_t::Module_t</a>&amp; <a class="code" href="../../d8/ddf/namespacegen__crt__frags.html#a8a7031dcf48a6b53d77817d6099103f3">module</a>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html">pmtana::PedAlgoFixed</a> <span class="keyword">const</span>&amp; <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#a07b9ef5336245d24cb5fe32aefa2d6c4">algo</a> = *(IFBase_t::getAlgo());</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      module.template consumes&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#abb7e1761d7162fae723d2551667f409c">waveformSourceName</a>() });</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      module.template consumes&lt;std::vector&lt;icarus::WaveformBaseline&gt;&gt;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a81abff0a446b73e837edc4928a0203d4">pedestalSourceName</a>() });</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      module.template consumes&lt;std::vector&lt;icarus::WaveformRMS&gt;&gt;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a829814a9520f912d683ad5616775dd8e">pedestalRMSName</a>() });</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">  /// Reads and reports to the algorithm the pedestals for this event.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#af4f97dc69dfbd8355bf4429e87a4e97c">  366</a></span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#af4f97dc69dfbd8355bf4429e87a4e97c">doBeginEvent</a>(<span class="keyword">typename</span> <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#ac6353afe40121a3beaf718971df9f8c3">IFBase_t::Event_t</a> <span class="keyword">const</span>&amp; event)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html">pmtana::PedAlgoFixed</a>&amp; <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#a07b9ef5336245d24cb5fe32aefa2d6c4">algo</a> = *(IFBase_t::getAlgo());</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="comment">// collect the data</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; waveforms</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         = <span class="keyword">event</span>.template getProduct&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;         (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#abb7e1761d7162fae723d2551667f409c">waveformSourceName</a>() });</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; pedSrc</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         = <span class="keyword">event</span>.template getProduct&lt;std::vector&lt;icarus::WaveformBaseline&gt;&gt;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a81abff0a446b73e837edc4928a0203d4">pedestalSourceName</a>() });</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; rmsSrc</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         = <span class="keyword">event</span>.template getProduct&lt;std::vector&lt;icarus::WaveformRMS&gt;&gt;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         (art::InputTag{ algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a829814a9520f912d683ad5616775dd8e">pedestalRMSName</a>() });</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      assert(waveforms.size() == pedSrc.size());</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      assert(waveforms.size() == rmsSrc.size());</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="comment">// translate and store</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="comment">// event number as ID:</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="../../d0/ddc/structpmtana_1_1PedAlgoFixed_1_1InputSet__t.html">pmtana::PedAlgoFixed::InputSet_t</a> inputSet { <span class="keyword">event</span>.event() };</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      inputSet.<a class="code" href="../../d0/ddc/structpmtana_1_1PedAlgoFixed_1_1InputSet__t.html#a1d5119214e43f1ddddc5db874be1477d">waveforms</a>.reserve(waveforms.size());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">std::transform</a>(</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        waveforms.begin(), waveforms.end(), back_inserter(inputSet.waveforms),</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        [](<span class="keyword">auto</span>&amp; obj){ <span class="keywordflow">return</span> &amp;obj; }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      inputSet.pedestals.reserve(pedSrc.size());</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">std::transform</a>(</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        pedSrc.begin(), pedSrc.end(), back_inserter(inputSet.pedestals),</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        std::mem_fn(&amp;<a class="code" href="../../de/dce/structicarus_1_1WaveformBaseline.html#a3b1e8472d23c57193e752a21050c0b74">icarus::WaveformBaseline::baseline</a>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      inputSet.RMSs.reserve(rmsSrc.size());</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <a class="code" href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">std::transform</a>(</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        rmsSrc.begin(), rmsSrc.end(), back_inserter(inputSet.RMSs),</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        std::mem_fn(&amp;<a class="code" href="../../d6/d52/structicarus_1_1WaveformRMS.html#a503f1f86566f9398c1bc8f832dccd869">icarus::WaveformRMS::RMS</a>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      algo.<a class="code" href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#aa518ee422c4f89dc375af517826cff78">setParameters</a>(std::move(inputSet));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    } <span class="comment">// doBeginEvent()</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">  /// Clear the event information (just &quot;safety&quot;).</span></div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a19a750deb97d029da59f05e95cbcfa6b">  415</a></span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a19a750deb97d029da59f05e95cbcfa6b">doEndEvent</a>(<span class="keyword">typename</span> <a class="code" href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#ac6353afe40121a3beaf718971df9f8c3">IFBase_t::Event_t</a> <span class="keyword">const</span>&amp;)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    { IFBase_t::getAlgo()-&gt;clearParameters(); }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}; <span class="comment">// FWInterfaced&lt;pmtana::PedAlgoFixed, pmtana::PMTPedestalBase&gt;</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">  /// Sorts in place and returns a vector.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  std::vector&lt;T&gt;&amp; sortVector(std::vector&lt;T&gt;&amp; v)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    { std::sort(v.begin(), v.end()); <span class="keywordflow">return</span> v; }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /// Sorts and returns a copy of the vector.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  std::vector&lt;T&gt; sortedVector(std::vector&lt;T&gt; v)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    { sortVector(v); <span class="keywordflow">return</span> v; }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">   * @brief A &quot;smart&quot; pointer that may or may not own its data.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">   * @tparam T type of the data to point to</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">   * </span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">   * This pointer can be used when depending on a run-time condition a data set</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">   * may come from an immutable, owning source (like `art::Event`) or from a</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">   * local processing (e.g. a selection of the above).</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">   * </span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">   * If initialized with a pointer to the data, this pointer will refer to it</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">   * without owning; if initialized with a r-value (reference) to data, the data</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">   * is stolen and owned from now on.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keyword">class </span>MaybeOwnerPtr {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keyword">public</span>:</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keyword">using</span> element_type = T;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">using</span> pointer = T*;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment"></span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">    /// Points to the given pointer without owning it.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"></span>    MaybeOwnerPtr(pointer ptr) noexcept: fStorage{ ptr } {}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment"></span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">    /// Steals the data and owns it.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"></span>    MaybeOwnerPtr(element_type&amp;&amp; data): fStorage{ std::move(data) } {}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    pointer <span class="keyword">get</span>() <span class="keyword">const</span> { <span class="keywordflow">return</span> std::visit(PointerGetter{}, fStorage); }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    pointer operator-&gt;()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keyword">auto</span>&amp; <a class="code" href="../../df/d68/QuadExpr_8h.html#a4e0b31e1a226b2de4ae0bfb0b20e13ba">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *(<span class="keyword">get</span>()); }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keyword">private</span>:</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keyword">struct </span>PointerGetter {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      pointer operator() (pointer ptr) <span class="keyword">const</span> noexcept { <span class="keywordflow">return</span> ptr; }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      pointer operator() (element_type&amp; item) <span class="keyword">const</span> noexcept { <span class="keywordflow">return</span> &amp;item; }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }; <span class="comment">// PointerGetter</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keyword">using</span> store_t = std::variant&lt;element_type, pointer&gt;;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    store_t fStorage; <span class="comment">///&lt; Contains the data or pointer to it.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span>    </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }; <span class="comment">// MaybeOwnerPtr</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;} <span class="comment">// local namespace</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#af0d40a108823ce9ae5e5633d0fe0c9aa">opdet::ICARUSOpHitFinder::ICARUSOpHitFinder</a></div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#af0d40a108823ce9ae5e5633d0fe0c9aa">  484</a></span>&#160;  (<a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a6014165460aa2c9b267898eb3b9daa16">Parameters</a> <span class="keyword">const</span>&amp; params, art::ProcessingFrame <span class="keyword">const</span>&amp; frame)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  : art::ReplicatedProducer{ params, frame }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// configuration</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  , fWaveformTags{ params().InputModule() }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  , fBeamGateTag{ params().GenModule().value_or(art::InputTag{}) }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  , fChannelMasks{ sortedVector(params().ChannelMasks()) }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  , fHitThreshold{ params().HitThreshold() }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  , fUseStartTime{ params().UseStartTime() }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// caches</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  , fMaxOpChannel{ frame.serviceHandle&lt;<a class="code" href="../../d8/df3/classgeo_1_1Geometry.html">geo::Geometry</a>&gt;()-&gt;MaxOpChannel() }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// algorithms</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  , fPulseRecoMgr{}</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  , fThreshAlg</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    { HitAlgoFactory.create(params().HitAlgoPset.get&lt;fhicl::ParameterSet&gt;()) }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  , fPedAlg</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    { PedAlgoFactory.create(params().PedAlgoPset.get&lt;fhicl::ParameterSet&gt;()) }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// declaration of input</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  consumes&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(fWaveformTags);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> (!fBeamGateTag.empty())</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    mayConsume&lt;std::vector&lt;sim::BeamGateInfo&gt;&gt;(fBeamGateTag);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// calibration initialization</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">if</span> (params().UseCalibrator()) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    fCalib = frame.serviceHandle&lt;<a class="code" href="../../db/d13/classcalib_1_1IPhotonCalibratorService.html">calib::IPhotonCalibratorService</a>&gt;()-&gt;provider();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    fMyCalib = std::make_unique&lt;calib::PhotonCalibratorStandard&gt;(</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        params().AreaToPE()</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      , params().SPEArea()</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      , params().SPEShift()</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      );</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    fCalib = fMyCalib.get();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  } <span class="comment">// if ... else</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// register the algorithms in the manager</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  fPulseRecoMgr.AddRecoAlgo(fThreshAlg.get());</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  fPulseRecoMgr.SetDefaultPedAlgo(&amp;(fPedAlg-&gt;algo()));</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// framework hooks to the algorithms</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (!fChannelMasks.empty() &amp;&amp; (fPedAlg-&gt;algo().Name() == <span class="stringliteral">&quot;Fixed&quot;</span>)) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">/* TODO</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">     * The reason why this is not working is complicate.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">     * The interface of ophit mini-framework is quite minimal and tight,</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">     * it accepts only `std::vector&lt;short&gt;` input and nothing more.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">     * The whole reason of this module is to overcome that limitation;</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">     * since there is no channel information, we have to guess which channel</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">     * this is the data of, and the way we do it is by address of the data;</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">     * `raw::OpDetWaveform` derives from `std::vector&lt;short&gt;`, so when we use</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">     * the original data product, the waveform data `std::vector&lt;short&gt;` is</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">     * actually the same object and we can compare with the address of the data</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">     * product, which we have because of the framework hooks here introduced;</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">     * but if the `ChannelMasks` is not empty, we are forced to copy the</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">     * original data in a new location (excluding the masked channels) and the</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">     * new data has a different address. In principle we could still try to</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">     * look for which `raw::OpDetWaveform` data product has the same content as</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">     * the `std::vector&lt;short&gt;` we were given, which may be a bit tedious</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">     * (thousand of vector comparisons to do, although all except the target one</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">     * will be short because the noise pattern are different).</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">throw</span> art::Exception{ art::errors::Configuration }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Pedestal algorithm \&quot;Fixed\&quot; will not work&quot;</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="stringliteral">&quot; since a channel mask list is specified.\n&quot;</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  fPedAlg-&gt;initialize(<a class="code" href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc.html#a2647d2644614853a4f2da8287c4a1a88">consumesCollector</a>());</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// declare output products</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  produces&lt;std::vector&lt;recob::OpHit&gt;&gt;();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;} <span class="comment">// opdet::ICARUSOpHitFinder::ICARUSOpHitFinder()</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ad19ea4ebaed8d9b94323dcf80482af3e">opdet::ICARUSOpHitFinder::produce</a></div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ad19ea4ebaed8d9b94323dcf80482af3e">  567</a></span>&#160;  (art::Event&amp; event, art::ProcessingFrame <span class="keyword">const</span>&amp; frame)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;{</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// read and select the waveforms</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; allWaveforms</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    = <span class="keyword">event</span>.getProduct&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(fWaveformTags);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// this pointer owns the waveforms only if they come from `selectWaveforms()`</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">//   MaybeOwnerPtr&lt;std::vector&lt;raw::OpDetWaveform&gt; const&gt; waveforms</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//     = fChannelMasks.empty()? &amp;allWaveforms: selectWaveforms(allWaveforms);</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keyword">using</span> WaveformsPtr_t = MaybeOwnerPtr&lt;std::vector&lt;raw::OpDetWaveform&gt; <span class="keyword">const</span>&gt;;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  WaveformsPtr_t waveforms = fChannelMasks.empty()</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    ? WaveformsPtr_t{ &amp;allWaveforms }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    : WaveformsPtr_t{ selectWaveforms(allWaveforms) }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    ;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (fChannelMasks.empty() &amp;&amp; (&amp;allWaveforms != &amp;*waveforms)) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// if this happens, contact the author</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">throw</span> art::Exception{ art::errors::LogicError }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Bug in MaybeOwnerPtr!\n&quot;</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  assert(fChannelMasks.empty() || (&amp;allWaveforms == &amp;*waveforms));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// run the algorithm</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// framework hooks to the algorithms</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  fPedAlg-&gt;beginEvent(event);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  std::vector&lt;sim::BeamGateInfo const*&gt; <span class="keyword">const</span> beamGateArray</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    = fetchBeamGates(event);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; geom = *(frame.serviceHandle&lt;<a class="code" href="../../d8/df3/classgeo_1_1Geometry.html">geo::Geometry</a>&gt;()-&gt;provider());</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span> clockData</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    = frame.serviceHandle&lt;<a class="code" href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a> <span class="keyword">const</span>&gt;()</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      -&gt;DataFor(event)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    ;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  std::vector&lt;recob::OpHit&gt; opHits;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="../../dc/d8a/namespaceopdet.html#ae782e2bdd12030193f989f2e9ec2c108">RunHitFinder</a>(</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    *waveforms, opHits,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    fPulseRecoMgr, *fThreshAlg,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    geom,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    fHitThreshold,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    clockData,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    *fCalib,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    fUseStartTime</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    );</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  mf::LogInfo{ <span class="stringliteral">&quot;ICARUSOpHitFinder&quot;</span> }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Found &quot;</span> &lt;&lt; opHits.size() &lt;&lt; <span class="stringliteral">&quot; hits from &quot;</span> &lt;&lt; waveforms-&gt;size()</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; waveforms.&quot;</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// framework hooks to the algorithms</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  fPedAlg-&gt;endEvent(event);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// store results into the event</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keyword">event</span>.put(std::make_unique&lt;std::vector&lt;recob::OpHit&gt;&gt;(std::move(opHits)));</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;} <span class="comment">// opdet::ICARUSOpHitFinder::produce()</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;std::vector&lt;sim::BeamGateInfo const*&gt; <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a425f20a6d7daa3a101c0dda9c29904c9">opdet::ICARUSOpHitFinder::fetchBeamGates</a></div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a425f20a6d7daa3a101c0dda9c29904c9">  637</a></span>&#160;  (art::Event <span class="keyword">const</span>&amp; event) <span class="keyword">const</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  std::vector&lt;const sim::BeamGateInfo*&gt; beamGateArray;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (fBeamGateTag.empty()) <span class="keywordflow">return</span> beamGateArray;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keyword">event</span>.getView(fBeamGateTag, beamGateArray);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">catch</span> (art::Exception <span class="keyword">const</span>&amp; <a class="code" href="../../da/d2d/namespaceevd.html#a911fe581afad27a720ee200bd61362a6">err</a>) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (err.categoryCode() != art::errors::ProductNotFound) <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">return</span> beamGateArray;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;} <span class="comment">// opdet::ICARUSOpHitFinder::fetchBeamGates()</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;std::vector&lt;raw::OpDetWaveform&gt; <a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a05536a1dc45e74f9877a1a3c86bf8175">opdet::ICARUSOpHitFinder::selectWaveforms</a></div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a05536a1dc45e74f9877a1a3c86bf8175">  653</a></span>&#160;  (std::vector&lt;raw::OpDetWaveform&gt; <span class="keyword">const</span>&amp; waveforms) <span class="keyword">const</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  std::vector&lt;raw::OpDetWaveform&gt; selected;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span> isNotMasked = [<span class="keyword">this</span>](<a class="code" href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a> <span class="keyword">const</span>&amp; waveform)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">return</span> !std::binary_search</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        (fChannelMasks.begin(), fChannelMasks.end(), waveform.ChannelNumber());</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    };</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  std::copy_if</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    (waveforms.begin(), waveforms.end(), back_inserter(selected), isNotMasked);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">return</span> selected;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;} <span class="comment">// selectWaveforms()</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;DEFINE_ART_MODULE(<a class="code" href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html">opdet::ICARUSOpHitFinder</a>)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfacedIF_html_a07b9ef5336245d24cb5fe32aefa2d6c4"><div class="ttname"><a href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#a07b9ef5336245d24cb5fe32aefa2d6c4">opdet::factory::FWInterfacedIF::algo</a></div><div class="ttdeci">Algo_t &amp; algo() const </div><div class="ttdoc">Access to the algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00369">OpRecoFactoryStuff.h:369</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_aac269148086124735f277f0945c01dee"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#aac269148086124735f277f0945c01dee">opdet::ICARUSOpHitFinder::fMaxOpChannel</a></div><div class="ttdeci">unsigned int const fMaxOpChannel</div><div class="ttdoc">Number of channels in the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00302">ICARUSOpHitFinder_module.cc:302</a></div></div>
<div class="ttc" id="structopdet_1_1factory_1_1Decl_html"><div class="ttname"><a href="../../db/da3/structopdet_1_1factory_1_1Decl.html">opdet::factory::Decl</a></div><div class="ttdoc">Token to register an algorithm, used in AlgorithmFactory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00073">OpRecoFactoryStuff.h:73</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a34da50580061ca542c3f61dd84d1c137"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a34da50580061ca542c3f61dd84d1c137">opdet::ICARUSOpHitFinder::fUseStartTime</a></div><div class="ttdeci">bool const fUseStartTime</div><div class="ttdoc">Whether to store start instead of peak time. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00295">ICARUSOpHitFinder_module.cc:295</a></div></div>
<div class="ttc" id="classpmtana_1_1PedAlgoFixed_html_aa518ee422c4f89dc375af517826cff78"><div class="ttname"><a href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#aa518ee422c4f89dc375af517826cff78">pmtana::PedAlgoFixed::setParameters</a></div><div class="ttdeci">void setParameters(InputSet_t inputSet)</div><div class="ttdoc">Records the current pedestals and RMS per channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd9/PedAlgoFixed_8cxx_source.html#l00050">PedAlgoFixed.cxx:50</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html">opdet::ICARUSOpHitFinder</a></div><div class="ttdoc">Extracts PMT activity as optical hits (recob::OpHit). </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00202">ICARUSOpHitFinder_module.cc:202</a></div></div>
<div class="ttc" id="PhotonCalibratorStandard_8h_html"><div class="ttname"><a href="../../db/d2c/PhotonCalibratorStandard_8h.html">PhotonCalibratorStandard.h</a></div></div>
<div class="ttc" id="structopdet_1_1factory_1_1FWInterfaceTraits_html"><div class="ttname"><a href="../../de/d17/structopdet_1_1factory_1_1FWInterfaceTraits.html">opdet::factory::FWInterfaceTraits</a></div><div class="ttdoc">Template type for the third parameter of FWInterfacedIF objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00089">OpRecoFactoryStuff.h:89</a></div></div>
<div class="ttc" id="classcalib_1_1IPhotonCalibrator_html"><div class="ttname"><a href="../../d1/d52/classcalib_1_1IPhotonCalibrator.html">calib::IPhotonCalibrator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d94/IPhotonCalibrator_8h_source.html#l00021">IPhotonCalibrator.h:21</a></div></div>
<div class="ttc" id="namespaceicarus_1_1waveform__operations_1_1details_html_ae295d3f6cb2f9181dccdf0e3492d44e0"><div class="ttname"><a href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">icarus::waveform_operations::details::transform</a></div><div class="ttdeci">static constexpr Sample_t transform(Sample_t sample)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/WaveformOperations_8h_source.html#l00145">WaveformOperations.h:145</a></div></div>
<div class="ttc" id="classraw_1_1OpDetWaveform_html"><div class="ttname"><a href="../../d0/d29/classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h_source.html#l00025">lardataobj/lardataobj/RawData/OpDetWaveform.h:25</a></div></div>
<div class="ttc" id="WaveformRMS_8h_html"><div class="ttname"><a href="../../dc/d91/WaveformRMS_8h.html">WaveformRMS.h</a></div><div class="ttdoc">A baseline RMS for a waveform. </div></div>
<div class="ttc" id="namespaceevd_html_a911fe581afad27a720ee200bd61362a6"><div class="ttname"><a href="../../da/d2d/namespaceevd.html#a911fe581afad27a720ee200bd61362a6">evd::err</a></div><div class="ttdeci">EResult err(const char *call)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2a/WebEVDServer_8cxx_source.html#l00140">WebEVDServer.cxx:140</a></div></div>
<div class="ttc" id="classpmtana_1_1PedAlgoFixed_html"><div class="ttname"><a href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html">pmtana::PedAlgoFixed</a></div><div class="ttdoc">Pedestal &amp;quot;algorithm&amp;quot; reading the pedestals from somewhere else. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00064">PedAlgoFixed.h:64</a></div></div>
<div class="ttc" id="structicarus_1_1WaveformRMS_html_a503f1f86566f9398c1bc8f832dccd869"><div class="ttname"><a href="../../d6/d52/structicarus_1_1WaveformRMS.html#a503f1f86566f9398c1bc8f832dccd869">icarus::WaveformRMS::RMS</a></div><div class="ttdeci">BaselineRMS_t RMS() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d91/WaveformRMS_8h_source.html#l00079">WaveformRMS.h:79</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_acc9b3ffda32afe9b5eb852f25b43fbc6"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#acc9b3ffda32afe9b5eb852f25b43fbc6">opdet::ICARUSOpHitFinder::fPulseRecoMgr</a></div><div class="ttdeci">pmtana::PulseRecoManager fPulseRecoMgr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00314">ICARUSOpHitFinder_module.cc:314</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a9ac2cac068708fee34b918a8430b6005"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9ac2cac068708fee34b918a8430b6005">opdet::ICARUSOpHitFinder::Config::GenModule</a></div><div class="ttdeci">fhicl::OptionalAtom&lt; art::InputTag &gt; GenModule</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00214">ICARUSOpHitFinder_module.cc:214</a></div></div>
<div class="ttc" id="IPhotonCalibratorService_8h_html"><div class="ttname"><a href="../../dc/d73/IPhotonCalibratorService_8h.html">IPhotonCalibratorService.h</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a63fa2cd9893db953b26414f475248d7c"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a63fa2cd9893db953b26414f475248d7c">opdet::ICARUSOpHitFinder::fMyCalib</a></div><div class="ttdeci">std::unique_ptr&lt; calib::IPhotonCalibrator &gt; fMyCalib</div><div class="ttdoc">Storage for our own calibration algorithm, if any. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00300">ICARUSOpHitFinder_module.cc:300</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4_html_a19a750deb97d029da59f05e95cbcfa6b"><div class="ttname"><a href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a19a750deb97d029da59f05e95cbcfa6b">opdet::factory::FWInterfaced&lt; pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits &gt;::doEndEvent</a></div><div class="ttdeci">virtual void doEndEvent(typename IFBase_t::Event_t const &amp;)</div><div class="ttdoc">Clear the event information (just &amp;quot;safety&amp;quot;). </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00415">ICARUSOpHitFinder_module.cc:415</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4_html_a4d44ba2609037d14b93e64febef2e544"><div class="ttname"><a href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#a4d44ba2609037d14b93e64febef2e544">opdet::factory::FWInterfaced&lt; pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits &gt;::doInitialize</a></div><div class="ttdeci">virtual void doInitialize(typename IFBase_t::Module_t &amp;module)</div><div class="ttdoc">Declares the consumables. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00354">ICARUSOpHitFinder_module.cc:354</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_ada0b83edf82332e9f3403a76d12e4b3a"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ada0b83edf82332e9f3403a76d12e4b3a">opdet::ICARUSOpHitFinder::fCalib</a></div><div class="ttdeci">calib::IPhotonCalibrator const * fCalib</div><div class="ttdoc">The calibration algorithm to be used (not owned). </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00305">ICARUSOpHitFinder_module.cc:305</a></div></div>
<div class="ttc" id="OpHitAlg_8h_html"><div class="ttname"><a href="../../df/d63/OpHitAlg_8h.html">OpHitAlg.h</a></div></div>
<div class="ttc" id="classpmtana_1_1PMTPedestalBase_html"><div class="ttname"><a href="../../df/d77/classpmtana_1_1PMTPedestalBase.html">pmtana::PMTPedestalBase</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dee/PMTPedestalBase_8h_source.html#l00028">PMTPedestalBase.h:28</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a70d95e45fc5f8d644fbf1334ff22e2a1"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a70d95e45fc5f8d644fbf1334ff22e2a1">opdet::ICARUSOpHitFinder::Config::InputModule</a></div><div class="ttdeci">fhicl::Atom&lt; art::InputTag &gt; InputModule</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00209">ICARUSOpHitFinder_module.cc:209</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfacedIF_html_a5facc25a64b0ec6d62bee2ff6283c6d2"><div class="ttname"><a href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#a5facc25a64b0ec6d62bee2ff6283c6d2">opdet::factory::FWInterfacedIF&lt; pmtana::PMTPedestalBase, ArtTraits &gt;::Module_t</a></div><div class="ttdeci">typename ArtTraits::Module_t Module_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00364">OpRecoFactoryStuff.h:364</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a94085972b8b11317d200c22086bcb686"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a94085972b8b11317d200c22086bcb686">opdet::ICARUSOpHitFinder::Config::ChannelMasks</a></div><div class="ttdeci">fhicl::Sequence&lt; raw::Channel_t &gt; ChannelMasks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00219">ICARUSOpHitFinder_module.cc:219</a></div></div>
<div class="ttc" id="OpRecoFactoryStuff_8h_html"><div class="ttname"><a href="../../d1/dfe/OpRecoFactoryStuff_8h.html">OpRecoFactoryStuff.h</a></div><div class="ttdoc">Utility and boilerplate for optical algorithms. </div></div>
<div class="ttc" id="IPhotonCalibrator_8h_html"><div class="ttname"><a href="../../de/d94/IPhotonCalibrator_8h.html">IPhotonCalibrator.h</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4_html_aaa555b8703a99e6dae86892ac241d75d"><div class="ttname"><a href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#aaa555b8703a99e6dae86892ac241d75d">opdet::factory::FWInterfaced&lt; pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits &gt;::FWInterfaced</a></div><div class="ttdeci">FWInterfaced(fhicl::ParameterSet const &amp;pset)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00348">ICARUSOpHitFinder_module.cc:348</a></div></div>
<div class="ttc" id="PedAlgoFixed_8h_html"><div class="ttname"><a href="../../d4/ddd/PedAlgoFixed_8h.html">PedAlgoFixed.h</a></div><div class="ttdoc">Pedestal &amp;quot;algorithm&amp;quot; reading the pedestals from somewhere else. </div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfaced_html"><div class="ttname"><a href="../../d3/d6c/classopdet_1_1factory_1_1FWInterfaced.html">opdet::factory::FWInterfaced</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00103">OpRecoFactoryStuff.h:103</a></div></div>
<div class="ttc" id="structpmtana_1_1PedAlgoFixed_1_1InputSet__t_html_a1d5119214e43f1ddddc5db874be1477d"><div class="ttname"><a href="../../d0/ddc/structpmtana_1_1PedAlgoFixed_1_1InputSet__t.html#a1d5119214e43f1ddddc5db874be1477d">pmtana::PedAlgoFixed::InputSet_t::waveforms</a></div><div class="ttdeci">std::vector&lt; pmtana::Waveform_t const * &gt; waveforms</div><div class="ttdoc">All the waveforms that are going to process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00073">PedAlgoFixed.h:73</a></div></div>
<div class="ttc" id="PedAlgoRollingMean_8h_html"><div class="ttname"><a href="../../dd/d06/PedAlgoRollingMean_8h.html">PedAlgoRollingMean.h</a></div><div class="ttdoc">Class definition file of PedAlgoRollingMean. </div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html">opdet::ICARUSOpHitFinder::Config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00205">ICARUSOpHitFinder_module.cc:205</a></div></div>
<div class="ttc" id="AlgoCFD_8h_html"><div class="ttname"><a href="../../da/d48/AlgoCFD_8h.html">AlgoCFD.h</a></div><div class="ttdoc">Class definition file of AlgoCFD. </div></div>
<div class="ttc" id="PedAlgoUB_8h_html"><div class="ttname"><a href="../../de/d8e/PedAlgoUB_8h.html">PedAlgoUB.h</a></div><div class="ttdoc">Class definition file of PedAlgoUB. </div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a6014165460aa2c9b267898eb3b9daa16"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a6014165460aa2c9b267898eb3b9daa16">opdet::ICARUSOpHitFinder::Parameters</a></div><div class="ttdeci">art::ReplicatedProducer::Table&lt; Config &gt; Parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00280">ICARUSOpHitFinder_module.cc:280</a></div></div>
<div class="ttc" id="geometry__icarus_8fcl_html_a7cd432ab9c92d3d70fdf422ed970e9d3"><div class="ttname"><a href="../../df/d20/geometry__icarus_8fcl.html#a7cd432ab9c92d3d70fdf422ed970e9d3">Name</a></div><div class="ttdeci">BEGIN_PROLOG vertical distance to the surface Name</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d20/geometry__icarus_8fcl_source.html#l00082">geometry_icarus.fcl:82</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a0bf6778941de250f1df94d097b48f8b9"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a0bf6778941de250f1df94d097b48f8b9">opdet::ICARUSOpHitFinder::fHitThreshold</a></div><div class="ttdeci">float const fHitThreshold</div><div class="ttdoc">Hit finding threshold. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00294">ICARUSOpHitFinder_module.cc:294</a></div></div>
<div class="ttc" id="classgeo_1_1Geometry_html"><div class="ttname"><a href="../../d8/df3/classgeo_1_1Geometry.html">geo::Geometry</a></div><div class="ttdoc">The geometry of one entire detector, as served by art. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8b/Geometry_8h_source.html#l00181">Geometry.h:181</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a4355e8675d61593f6e478cbc4dbe52ba"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4355e8675d61593f6e478cbc4dbe52ba">opdet::ICARUSOpHitFinder::Config::UseCalibrator</a></div><div class="ttdeci">fhicl::Atom&lt; bool &gt; UseCalibrator</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00254">ICARUSOpHitFinder_module.cc:254</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfacedIF_html"><div class="ttname"><a href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html">opdet::factory::FWInterfacedIF&lt; pmtana::PMTPedestalBase, ArtTraits &gt;</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfacedIF_html_ac6353afe40121a3beaf718971df9f8c3"><div class="ttname"><a href="../../de/d9b/classopdet_1_1factory_1_1FWInterfacedIF.html#ac6353afe40121a3beaf718971df9f8c3">opdet::factory::FWInterfacedIF&lt; pmtana::PMTPedestalBase, ArtTraits &gt;::Event_t</a></div><div class="ttdeci">typename ArtTraits::Event_t Event_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00363">OpRecoFactoryStuff.h:363</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_af0d40a108823ce9ae5e5633d0fe0c9aa"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#af0d40a108823ce9ae5e5633d0fe0c9aa">opdet::ICARUSOpHitFinder::ICARUSOpHitFinder</a></div><div class="ttdeci">ICARUSOpHitFinder(Parameters const &amp;config, art::ProcessingFrame const &amp;frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00484">ICARUSOpHitFinder_module.cc:484</a></div></div>
<div class="ttc" id="classpmtana_1_1PedAlgoFixed_html_a81abff0a446b73e837edc4928a0203d4"><div class="ttname"><a href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a81abff0a446b73e837edc4928a0203d4">pmtana::PedAlgoFixed::pedestalSourceName</a></div><div class="ttdeci">std::string const &amp; pedestalSourceName() const </div><div class="ttdoc">Returns the name of the configured pedestal source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00119">PedAlgoFixed.h:119</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a88069eb9d947020d6c6240c14107bbf1"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a88069eb9d947020d6c6240c14107bbf1">opdet::ICARUSOpHitFinder::fBeamGateTag</a></div><div class="ttdeci">art::InputTag const fBeamGateTag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00291">ICARUSOpHitFinder_module.cc:291</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_adec79f89de6239c025a018fb11060683"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#adec79f89de6239c025a018fb11060683">opdet::ICARUSOpHitFinder::Config::HitThreshold</a></div><div class="ttdeci">fhicl::Atom&lt; float &gt; HitThreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00225">ICARUSOpHitFinder_module.cc:225</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1AlgorithmFactory_html"><div class="ttname"><a href="../../df/de3/classopdet_1_1factory_1_1AlgorithmFactory.html">opdet::factory::AlgorithmFactory</a></div><div class="ttdoc">An algorithm factory class. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00079">OpRecoFactoryStuff.h:79</a></div></div>
<div class="ttc" id="AlgoFixedWindow_8h_html"><div class="ttname"><a href="../../df/d41/AlgoFixedWindow_8h.html">AlgoFixedWindow.h</a></div><div class="ttdoc">Class definition file of AlgoFixedWindow. </div></div>
<div class="ttc" id="classpmtana_1_1PedAlgoFixed_html_abb7e1761d7162fae723d2551667f409c"><div class="ttname"><a href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#abb7e1761d7162fae723d2551667f409c">pmtana::PedAlgoFixed::waveformSourceName</a></div><div class="ttdeci">std::string const &amp; waveformSourceName() const </div><div class="ttdoc">Returns the name of the configured waveform source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00116">PedAlgoFixed.h:116</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorClocksService_html"><div class="ttname"><a href="../../da/d8d/classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/DetectorClocksService_8h_source.html#l00021">DetectorClocksService.h:21</a></div></div>
<div class="ttc" id="BeamGateInfo_8h_html"><div class="ttname"><a href="../../d6/da6/BeamGateInfo_8h.html">BeamGateInfo.h</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a3045da886f93f004978f7d2929223b4f"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a3045da886f93f004978f7d2929223b4f">opdet::ICARUSOpHitFinder::Config::AreaToPE</a></div><div class="ttdeci">fhicl::Atom&lt; bool &gt; AreaToPE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00260">ICARUSOpHitFinder_module.cc:260</a></div></div>
<div class="ttc" id="lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h_html"><div class="ttname"><a href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h.html">OpDetWaveform.h</a></div></div>
<div class="ttc" id="namespaceopdet_html_ae782e2bdd12030193f989f2e9ec2c108"><div class="ttname"><a href="../../dc/d8a/namespaceopdet.html#ae782e2bdd12030193f989f2e9ec2c108">opdet::RunHitFinder</a></div><div class="ttdeci">void RunHitFinder(std::vector&lt; raw::OpDetWaveform &gt; const &amp;opDetWaveformVector, std::vector&lt; recob::OpHit &gt; &amp;hitVector, pmtana::PulseRecoManager const &amp;pulseRecoMgr, pmtana::PMTPulseRecoBase const &amp;threshAlg, geo::GeometryCore const &amp;geometry, float hitThreshold, detinfo::DetectorClocksData const &amp;clocksData, calib::IPhotonCalibrator const &amp;calibrator, bool use_start_time)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d77/OpHitAlg_8cxx_source.html#l00030">OpHitAlg.cxx:30</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_ae7c44029bf40f54d45b54e158c2c2dfd"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ae7c44029bf40f54d45b54e158c2c2dfd">opdet::ICARUSOpHitFinder::Config::PedAlgoPset</a></div><div class="ttdeci">fhicl::DelegatedParameter PedAlgoPset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00245">ICARUSOpHitFinder_module.cc:245</a></div></div>
<div class="ttc" id="AlgoSlidingWindow_8h_html"><div class="ttname"><a href="../../db/da0/AlgoSlidingWindow_8h.html">AlgoSlidingWindow.h</a></div><div class="ttdoc">Class definition file of AlgoSlidingWindow. </div></div>
<div class="ttc" id="classcalib_1_1IPhotonCalibratorService_html"><div class="ttname"><a href="../../db/d13/classcalib_1_1IPhotonCalibratorService.html">calib::IPhotonCalibratorService</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d73/IPhotonCalibratorService_8h_source.html#l00017">IPhotonCalibratorService.h:17</a></div></div>
<div class="ttc" id="AlgoThreshold_8h_html"><div class="ttname"><a href="../../d4/d0b/AlgoThreshold_8h.html">AlgoThreshold.h</a></div><div class="ttdoc">Class definition file of AlgoThreshold. </div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfacedBase_html"><div class="ttname"><a href="../../d1/d14/classopdet_1_1factory_1_1FWInterfacedBase.html">opdet::factory::FWInterfacedBase</a></div><div class="ttdoc">Base class for specialization. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfe/OpRecoFactoryStuff_8h_source.html#l00099">OpRecoFactoryStuff.h:99</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_ad19ea4ebaed8d9b94323dcf80482af3e"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#ad19ea4ebaed8d9b94323dcf80482af3e">opdet::ICARUSOpHitFinder::produce</a></div><div class="ttdeci">virtual void produce(art::Event &amp;, art::ProcessingFrame const &amp;) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00567">ICARUSOpHitFinder_module.cc:567</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_afcfe6a19a649306dc22e2e34746a34f1"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#afcfe6a19a649306dc22e2e34746a34f1">opdet::ICARUSOpHitFinder::fChannelMasks</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; const fChannelMasks</div><div class="ttdoc">Sorted list of channels to skip. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00293">ICARUSOpHitFinder_module.cc:293</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a425f20a6d7daa3a101c0dda9c29904c9"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a425f20a6d7daa3a101c0dda9c29904c9">opdet::ICARUSOpHitFinder::fetchBeamGates</a></div><div class="ttdeci">std::vector&lt; sim::BeamGateInfo const * &gt; fetchBeamGates(art::Event const &amp;event) const </div><div class="ttdoc">Optionally reads the beam gates from fBeamGateTag, empty if none. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00637">ICARUSOpHitFinder_module.cc:637</a></div></div>
<div class="ttc" id="AlgoSiPM_8h_html"><div class="ttname"><a href="../../d3/d96/AlgoSiPM_8h.html">AlgoSiPM.h</a></div></div>
<div class="ttc" id="DetectorClocksService_8h_html"><div class="ttname"><a href="../../d3/dba/DetectorClocksService_8h.html">DetectorClocksService.h</a></div></div>
<div class="ttc" id="classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4_html_af4f97dc69dfbd8355bf4429e87a4e97c"><div class="ttname"><a href="../../d3/d29/classopdet_1_1factory_1_1FWInterfaced_3_01pmtana_1_1PedAlgoFixed_00_01pmtana_1_1PMTPedestalBase_00_01ArtTraits_01_4.html#af4f97dc69dfbd8355bf4429e87a4e97c">opdet::factory::FWInterfaced&lt; pmtana::PedAlgoFixed, pmtana::PMTPedestalBase, ArtTraits &gt;::doBeginEvent</a></div><div class="ttdeci">virtual void doBeginEvent(typename IFBase_t::Event_t const &amp;event)</div><div class="ttdoc">Reads and reports to the algorithm the pedestals for this event. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00366">ICARUSOpHitFinder_module.cc:366</a></div></div>
<div class="ttc" id="OpHitFinder_2OpticalRecoTypes_8h_html"><div class="ttname"><a href="../../db/dce/OpHitFinder_2OpticalRecoTypes_8h.html">OpticalRecoTypes.h</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a55e076307db02c6f5c813cc4dc490bcb"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a55e076307db02c6f5c813cc4dc490bcb">opdet::ICARUSOpHitFinder::fWaveformTags</a></div><div class="ttdeci">art::InputTag const fWaveformTags</div><div class="ttdoc">Input PMT waveform data product tags. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00290">ICARUSOpHitFinder_module.cc:290</a></div></div>
<div class="ttc" id="structpmtana_1_1PedAlgoFixed_1_1InputSet__t_html"><div class="ttname"><a href="../../d0/ddc/structpmtana_1_1PedAlgoFixed_1_1InputSet__t.html">pmtana::PedAlgoFixed::InputSet_t</a></div><div class="ttdoc">Input information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00069">PedAlgoFixed.h:69</a></div></div>
<div class="ttc" id="PMTPulseRecoBase_8h_html"><div class="ttname"><a href="../../d6/d33/PMTPulseRecoBase_8h.html">PMTPulseRecoBase.h</a></div><div class="ttdoc">Class definition file of PMTPulseRecoBase. </div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a73ec0cb48fd5d4e8b782d3f3c9eb0dfa"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a73ec0cb48fd5d4e8b782d3f3c9eb0dfa">opdet::ICARUSOpHitFinder::Config::Comment</a></div><div class="ttdeci">fhicl::Comment Comment</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00207">ICARUSOpHitFinder_module.cc:207</a></div></div>
<div class="ttc" id="classpmtana_1_1PulseRecoManager_html"><div class="ttname"><a href="../../d0/d94/classpmtana_1_1PulseRecoManager.html">pmtana::PulseRecoManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df7/PulseRecoManager_8h_source.html#l00034">PulseRecoManager.h:34</a></div></div>
<div class="ttc" id="PedAlgoEdges_8h_html"><div class="ttname"><a href="../../db/dda/PedAlgoEdges_8h.html">PedAlgoEdges.h</a></div><div class="ttdoc">Class definition file of PedAlgoEdges. </div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a05536a1dc45e74f9877a1a3c86bf8175"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a05536a1dc45e74f9877a1a3c86bf8175">opdet::ICARUSOpHitFinder::selectWaveforms</a></div><div class="ttdeci">std::vector&lt; raw::OpDetWaveform &gt; selectWaveforms(std::vector&lt; raw::OpDetWaveform &gt; const &amp;waveforms) const </div><div class="ttdoc">Returns a vector with copies of only the waveforms not in masked channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00653">ICARUSOpHitFinder_module.cc:653</a></div></div>
<div class="ttc" id="OpHit_8h_html"><div class="ttname"><a href="../../d3/dad/OpHit_8h.html">OpHit.h</a></div></div>
<div class="ttc" id="classpmtana_1_1PedAlgoFixed_html_a829814a9520f912d683ad5616775dd8e"><div class="ttname"><a href="../../dd/d45/classpmtana_1_1PedAlgoFixed.html#a829814a9520f912d683ad5616775dd8e">pmtana::PedAlgoFixed::pedestalRMSName</a></div><div class="ttdeci">std::string const &amp; pedestalRMSName() const </div><div class="ttdoc">Returns the name of the configured RMS source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddd/PedAlgoFixed_8h_source.html#l00122">PedAlgoFixed.h:122</a></div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a723b30a8d346e7ed28c7bb07f4fa0b3a"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a723b30a8d346e7ed28c7bb07f4fa0b3a">opdet::ICARUSOpHitFinder::fThreshAlg</a></div><div class="ttdeci">std::unique_ptr&lt; pmtana::PMTPulseRecoBase &gt; const fThreshAlg</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00315">ICARUSOpHitFinder_module.cc:315</a></div></div>
<div class="ttc" id="QuadExpr_8h_html_a4e0b31e1a226b2de4ae0bfb0b20e13ba"><div class="ttname"><a href="../../df/d68/QuadExpr_8h.html#a4e0b31e1a226b2de4ae0bfb0b20e13ba">operator*</a></div><div class="ttdeci">QuadExpr operator*(double v, const QuadExpr &amp;e)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d68/QuadExpr_8h_source.html#l00039">QuadExpr.h:39</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a4257f23a18bcfd068c1dd7a4c2a5b848"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a4257f23a18bcfd068c1dd7a4c2a5b848">opdet::ICARUSOpHitFinder::Config::HitAlgoPset</a></div><div class="ttdeci">fhicl::DelegatedParameter HitAlgoPset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00236">ICARUSOpHitFinder_module.cc:236</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a8a7031dcf48a6b53d77817d6099103f3"><div class="ttname"><a href="../../d8/ddf/namespacegen__crt__frags.html#a8a7031dcf48a6b53d77817d6099103f3">gen_crt_frags.module</a></div><div class="ttdeci">def module</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8c/gen__crt__frags_8py_source.html#l00363">gen_crt_frags.py:363</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_ad4a46ec40be2c911d8c7515647de8d7f"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#ad4a46ec40be2c911d8c7515647de8d7f">opdet::ICARUSOpHitFinder::Config::Name</a></div><div class="ttdeci">fhicl::Name Name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00206">ICARUSOpHitFinder_module.cc:206</a></div></div>
<div class="ttc" id="WaveformBaseline_8h_html"><div class="ttname"><a href="../../dd/d85/WaveformBaseline_8h.html">WaveformBaseline.h</a></div></div>
<div class="ttc" id="Geometry_8h_html"><div class="ttname"><a href="../../d3/d8b/Geometry_8h.html">Geometry.h</a></div><div class="ttdoc">art framework interface to geometry description </div></div>
<div class="ttc" id="classopdet_1_1ICARUSOpHitFinder_html_a8a66102cf302d8e8cea298ee5a5a39ee"><div class="ttname"><a href="../../dc/df0/classopdet_1_1ICARUSOpHitFinder.html#a8a66102cf302d8e8cea298ee5a5a39ee">opdet::ICARUSOpHitFinder::fPedAlg</a></div><div class="ttdeci">std::unique_ptr&lt; FWInterfacedPedAlgo &gt; const fPedAlg</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00316">ICARUSOpHitFinder_module.cc:316</a></div></div>
<div class="ttc" id="DetectorClocksData_8h_html"><div class="ttname"><a href="../../d0/d5b/DetectorClocksData_8h.html">DetectorClocksData.h</a></div></div>
<div class="ttc" id="ExtractEnergyDepositionSummary__module_8cc_html_a2647d2644614853a4f2da8287c4a1a88"><div class="ttname"><a href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc.html#a2647d2644614853a4f2da8287c4a1a88">consumesCollector</a></div><div class="ttdeci">fDetProps &amp;fDetProps fDetProps &amp;fDetProps consumesCollector())</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d11/ExtractEnergyDepositionSummary__module_8cc_source.html#l00304">ExtractEnergyDepositionSummary_module.cc:304</a></div></div>
<div class="ttc" id="structicarus_1_1WaveformBaseline_html_a3b1e8472d23c57193e752a21050c0b74"><div class="ttname"><a href="../../de/dce/structicarus_1_1WaveformBaseline.html#a3b1e8472d23c57193e752a21050c0b74">icarus::WaveformBaseline::baseline</a></div><div class="ttdeci">Baseline_t baseline() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d85/WaveformBaseline_8h_source.html#l00112">WaveformBaseline.h:112</a></div></div>
<div class="ttc" id="PulseRecoManager_8h_html"><div class="ttname"><a href="../../d3/df7/PulseRecoManager_8h.html">PulseRecoManager.h</a></div><div class="ttdoc">Class definition file of PulseRecoManager. </div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a9f5b9741fcd2f0ac239f4b0740f98690"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a9f5b9741fcd2f0ac239f4b0740f98690">opdet::ICARUSOpHitFinder::Config::SPEArea</a></div><div class="ttdeci">fhicl::Atom&lt; float &gt; SPEArea</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00266">ICARUSOpHitFinder_module.cc:266</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a710077a7a6d75cac14735aa4df7c5b34"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a710077a7a6d75cac14735aa4df7c5b34">opdet::ICARUSOpHitFinder::Config::UseStartTime</a></div><div class="ttdeci">fhicl::Atom&lt; bool &gt; UseStartTime</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00230">ICARUSOpHitFinder_module.cc:230</a></div></div>
<div class="ttc" id="structopdet_1_1ICARUSOpHitFinder_1_1Config_html_a748884c01a1eb5de6899cb1d4f567b46"><div class="ttname"><a href="../../df/da8/structopdet_1_1ICARUSOpHitFinder_1_1Config.html#a748884c01a1eb5de6899cb1d4f567b46">opdet::ICARUSOpHitFinder::Config::SPEShift</a></div><div class="ttdeci">fhicl::Atom&lt; float &gt; SPEShift</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d35/ICARUSOpHitFinder__module_8cc_source.html#l00272">ICARUSOpHitFinder_module.cc:272</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
