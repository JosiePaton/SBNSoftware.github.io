<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>icarus::trigger::DiscriminatePMTwaveforms Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceicarus.html">icarus</a></li><li class="navelem"><a class="el" href="namespaceicarus_1_1trigger.html">trigger</a></li><li class="navelem"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">icarus::trigger::DiscriminatePMTwaveforms Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Produces discriminated optical waveforms.  
 <a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for icarus::trigger::DiscriminatePMTwaveforms:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.png" usemap="#icarus::trigger::DiscriminatePMTwaveforms_map" alt=""/>
  <map id="icarus::trigger::DiscriminatePMTwaveforms_map" name="icarus::trigger::DiscriminatePMTwaveforms_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structicarus_1_1trigger_1_1DiscriminatePMTwaveforms_1_1Config.html">Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4221bf523ef0d92cd9f730812be74b02"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a4221bf523ef0d92cd9f730812be74b02">TriggerGateData_t</a> = <a class="el" href="classicarus_1_1trigger_1_1OpticalTriggerGate.html#a2b9986e0e920b11a5dfdc5a963f2a1c2">icarus::trigger::OpticalTriggerGate::GateData_t</a></td></tr>
<tr class="memdesc:a4221bf523ef0d92cd9f730812be74b02"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of data produced for a single channel.  <a href="#a4221bf523ef0d92cd9f730812be74b02">More...</a><br/></td></tr>
<tr class="separator:a4221bf523ef0d92cd9f730812be74b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0144e3652654c8f81533f0fa621f814c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a0144e3652654c8f81533f0fa621f814c">Parameters</a> = art::EDProducer::Table&lt; <a class="el" href="structicarus_1_1trigger_1_1DiscriminatePMTwaveforms_1_1Config.html">Config</a> &gt;</td></tr>
<tr class="separator:a0144e3652654c8f81533f0fa621f814c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9ed912bc7c2472b0280acb4cf68914e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#ac9ed912bc7c2472b0280acb4cf68914e">DiscriminatePMTwaveforms</a> (<a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a0144e3652654c8f81533f0fa621f814c">Parameters</a> const &amp;config)</td></tr>
<tr class="separator:ac9ed912bc7c2472b0280acb4cf68914e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f3087daaa78aa10b396217df1e036a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a36f3087daaa78aa10b396217df1e036a">DiscriminatePMTwaveforms</a> (<a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> const &amp;)=delete</td></tr>
<tr class="separator:a36f3087daaa78aa10b396217df1e036a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206546fed813b8f0062d1c73da353f6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a206546fed813b8f0062d1c73da353f6b">DiscriminatePMTwaveforms</a> (<a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a206546fed813b8f0062d1c73da353f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48309975c699e2565d7e4575e8a766a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a48309975c699e2565d7e4575e8a766a2">operator=</a> (<a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> const &amp;)=delete</td></tr>
<tr class="separator:a48309975c699e2565d7e4575e8a766a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d5ea213ac063fa71f3dc6b0b43d6d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a8d5ea213ac063fa71f3dc6b0b43d6d22">operator=</a> (<a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a8d5ea213ac063fa71f3dc6b0b43d6d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f01cb8e428634c074d3d56c6ab5296"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#ad0f01cb8e428634c074d3d56c6ab5296">beginJob</a> () override</td></tr>
<tr class="memdesc:ad0f01cb8e428634c074d3d56c6ab5296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the plots to be filled.  <a href="#ad0f01cb8e428634c074d3d56c6ab5296">More...</a><br/></td></tr>
<tr class="separator:ad0f01cb8e428634c074d3d56c6ab5296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08ddd1b06e09e3d2ea9183e192e374f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#aa08ddd1b06e09e3d2ea9183e192e374f">produce</a> (art::Event &amp;event) override</td></tr>
<tr class="memdesc:aa08ddd1b06e09e3d2ea9183e192e374f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the data products.  <a href="#aa08ddd1b06e09e3d2ea9183e192e374f">More...</a><br/></td></tr>
<tr class="separator:aa08ddd1b06e09e3d2ea9183e192e374f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aab03b2df7f448c315685b84f5f4e2c26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#aab03b2df7f448c315685b84f5f4e2c26">fillChannelGaps</a> (<a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a> gates) const </td></tr>
<tr class="memdesc:aab03b2df7f448c315685b84f5f4e2c26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a collection with one gate per channel and no gaps.  <a href="#aab03b2df7f448c315685b84f5f4e2c26">More...</a><br/></td></tr>
<tr class="separator:aab03b2df7f448c315685b84f5f4e2c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a254b341615773ee8c735185b51683533"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a254b341615773ee8c735185b51683533">getNOpDetChannels</a> (fhicl::OptionalAtom&lt; unsigned int &gt; const &amp;param)</td></tr>
<tr class="memdesc:a254b341615773ee8c735185b51683533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the optical detector count from geometry unless in <code>param</code>.  <a href="#a254b341615773ee8c735185b51683533">More...</a><br/></td></tr>
<tr class="separator:a254b341615773ee8c735185b51683533"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a02116dcbb0aab3ed7acbcde558ac423f"><td class="memItemLeft" align="right" valign="top">art::InputTag const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a></td></tr>
<tr class="memdesc:a02116dcbb0aab3ed7acbcde558ac423f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input optical waveform tag.  <a href="#a02116dcbb0aab3ed7acbcde558ac423f">More...</a><br/></td></tr>
<tr class="separator:a02116dcbb0aab3ed7acbcde558ac423f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a073c5347b97d2ddb8788cfdb7403c228"><td class="memItemLeft" align="right" valign="top">std::optional&lt; art::InputTag &gt;<br class="typebreak"/>
 const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a></td></tr>
<tr class="separator:a073c5347b97d2ddb8788cfdb7403c228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080cdab7de7514954ace22962df24bd4"><td class="memItemLeft" align="right" valign="top">std::optional&lt; float &gt; const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a></td></tr>
<tr class="memdesc:a080cdab7de7514954ace22962df24bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constant baseline level.  <a href="#a080cdab7de7514954ace22962df24bd4">More...</a><br/></td></tr>
<tr class="separator:a080cdab7de7514954ace22962df24bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53df0c58b563d4ffa4b782f784a243aa"><td class="memItemLeft" align="right" valign="top">unsigned int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a53df0c58b563d4ffa4b782f784a243aa">fNOpDetChannels</a></td></tr>
<tr class="memdesc:a53df0c58b563d4ffa4b782f784a243aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of optical detector channels.  <a href="#a53df0c58b563d4ffa4b782f784a243aa">More...</a><br/></td></tr>
<tr class="separator:a53df0c58b563d4ffa4b782f784a243aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad72370459ed4b554721782eaf4427b"><td class="memItemLeft" align="right" valign="top">std::map<br class="typebreak"/>
&lt; <a class="el" href="namespaceicarus_1_1trigger.html#a49a4799819d963216971a31116ca8bc4">icarus::trigger::ADCCounts_t</a>, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a></td></tr>
<tr class="memdesc:a6ad72370459ed4b554721782eaf4427b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thresholds selected for saving, and their instance name.  <a href="#a6ad72370459ed4b554721782eaf4427b">More...</a><br/></td></tr>
<tr class="separator:a6ad72370459ed4b554721782eaf4427b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ef44a24c94b92e8fdabb6544a56c8ff"><td class="memItemLeft" align="right" valign="top">std::string const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">fLogCategory</a></td></tr>
<tr class="memdesc:a5ef44a24c94b92e8fdabb6544a56c8ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Category name for the console output stream.  <a href="#a5ef44a24c94b92e8fdabb6544a56c8ff">More...</a><br/></td></tr>
<tr class="separator:a5ef44a24c94b92e8fdabb6544a56c8ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700c397bd0a58d5a15dabe02ad86802c"><td class="memItemLeft" align="right" valign="top">std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html">icarus::trigger::TriggerGateBuilder</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">fTriggerGateBuilder</a></td></tr>
<tr class="memdesc:a700c397bd0a58d5a15dabe02ad86802c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Algorithms to simulate trigger gates out of optical channel output.  <a href="#a700c397bd0a58d5a15dabe02ad86802c">More...</a><br/></td></tr>
<tr class="separator:a700c397bd0a58d5a15dabe02ad86802c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Produces discriminated optical waveforms. </p>
<p>This module produces a "discriminated waveform" for each optical detector channel and for each configured threshold, via an algorithm of the class of <code><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html" title="Algorithm to produce trigger gates out of optical readout waveforms. ">icarus::trigger::TriggerGateBuilder</a></code> (<code><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html" title="Algorithm to produce trigger gates out of optical readout waveforms. ">TriggerGateBuilder</a></code> configuration parameter).</p>
<p>Thresholds are ultimately chosen by the tool in charge of actually run the discrimination algorithm. Out of the thresholds that this algorithm produces, it is possible to choose only a subset of them (<code>SelectThresholds</code>).</p>
<h1>Output data products </h1>
<ul>
<li>for each threshold <em>thr</em> (in ADC counts), data products are created with an instance name equivalent to the threshold (e.g. for a threshold of 70 ADC counts, the data product instance name will be <code>"70"</code>):<ul>
<li>a data product of type <code>std::vector&lt;<a class="el" href="classicarus_1_1trigger_1_1OpticalTriggerGate.html#a2b9986e0e920b11a5dfdc5a963f2a1c2" title="Type for gate data access. ">icarus::trigger::OpticalTriggerGate::GateData_t</a>&gt;</code>, with one entry per optical channel, including <em>all</em> optical channels (even when no signal above threshold is ever present); each gate object has as index in the vector the number of the optical channel;</li>
<li>an <em>art</em> association, one trigger gate data to many optical waveforms, of each trigger gate data (as above) with all the optical waveforms which contributed to it; the order of the association pairs is the same as the one of the trigger gate data, i.e. by channel, and some trigger gate data entries may be not associated to any waveform and therefore they can not be listed in the association; association pairs within the same optical channel are sorted by optical waveform timestamp; the type of the association is <code>art::Assns&lt;<a class="el" href="classicarus_1_1trigger_1_1OpticalTriggerGate.html#a2b9986e0e920b11a5dfdc5a963f2a1c2" title="Type for gate data access. ">icarus::trigger::OpticalTriggerGate::GateData_t</a>, <a class="el" href="classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a>&gt;</code>.</li>
</ul>
</li>
</ul>
<h1>Input data products </h1>
<ul>
<li><code>std::vector&lt;<a class="el" href="classraw_1_1OpDetWaveform.html">raw::OpDetWaveform</a>&gt;</code>: a single waveform for each recorded optical detector activity; the activity belongs to a single channel, but there may be multiple waveforms on the same channel. The time stamp is expected to be from the <a class="anchor" id="DetectorClocksElectronicsTime"></a>"electronics time scale" and therefore expressed in microseconds.</li>
</ul>
<h2>Service requirements </h2>
<p>The following services are <em>required</em>:</p>
<ul>
<li>an implementation of <code><a class="el" href="classdetinfo_1_1DetectorClocksService.html">detinfo::DetectorClocksService</a></code></li>
<li><em>art</em> message facility</li>
</ul>
<h1>Configuration parameters </h1>
<p>A terse description of the parameters is printed by running <code>lar --print-description <a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html" title="Produces discriminated optical waveforms. ">DiscriminatePMTwaveforms</a></code>.</p>
<ul>
<li><code>OpticalWaveforms</code> (input tag): the data product containing all optical detector waveforms</li>
<li><code>Baselines</code> (input tag): the data product containing one baseline per waveform in data product (from <code>OpticalWaveforms</code>)</li>
<li><code><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html" title="Algorithm to produce trigger gates out of optical readout waveforms. ">TriggerGateBuilder</a></code> (tool configuration): configuration of the <em>art</em> tool used to discriminate the optional waveforms; the tool interface is <code><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html" title="Algorithm to produce trigger gates out of optical readout waveforms. ">icarus::trigger::TriggerGateBuilder</a></code>.</li>
<li><code>OutputCategory</code> (string, default: <code>"DiscriminatePMTwaveforms"</code>): label for the category of messages in the console output; this is the label that can be used for filtering messages via MessageFacility service configuration.</li>
<li><code>SelectThresholds</code> (sequence of ADC thresholds): if specified, only the waveforms discriminated with the thresholds in this list will be saved by the module; if not specified, all the thresholds produced by the algorithm will be saved. <dl class="section note"><dt>Note</dt><dd>If a requested threshold is not eventually produced by the algorithm, an exception will be thrown by the module. </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00137">137</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a0144e3652654c8f81533f0fa621f814c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a0144e3652654c8f81533f0fa621f814c">icarus::trigger::DiscriminatePMTwaveforms::Parameters</a> =  art::EDProducer::Table&lt;<a class="el" href="structicarus_1_1trigger_1_1DiscriminatePMTwaveforms_1_1Config.html">Config</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00191">191</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4221bf523ef0d92cd9f730812be74b02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a4221bf523ef0d92cd9f730812be74b02">icarus::trigger::DiscriminatePMTwaveforms::TriggerGateData_t</a> =  <a class="el" href="classicarus_1_1trigger_1_1OpticalTriggerGate.html#a2b9986e0e920b11a5dfdc5a963f2a1c2">icarus::trigger::OpticalTriggerGate::GateData_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of data produced for a single channel. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00142">142</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac9ed912bc7c2472b0280acb4cf68914e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::trigger::DiscriminatePMTwaveforms::DiscriminatePMTwaveforms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a0144e3652654c8f81533f0fa621f814c">Parameters</a> const &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00284">284</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  : art::EDProducer(config)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// configuration</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a>(config().<a class="code" href="triggersim__singlewindow__icarus__data_8fcl.html#adb1cd4ff0e63b76acd41af381bcc739d">OpticalWaveforms</a>())</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>(<a class="code" href="namespaceutil_1_1fhicl.html#a7a710f4f9eb8ce2c8206162757289de0">util::fhicl::getOptionalValue</a>(config().Baselines))</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a>(<a class="code" href="namespaceutil_1_1fhicl.html#a7a710f4f9eb8ce2c8206162757289de0">util::fhicl::getOptionalValue</a>(config().Baseline))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a53df0c58b563d4ffa4b782f784a243aa">fNOpDetChannels</a>(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a254b341615773ee8c735185b51683533">getNOpDetChannels</a>(config().<a class="code" href="namespaceLVDSpatterns.html#a50b9bac6f0381564bc09c5fb54d2627f">NChannels</a>))</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">fLogCategory</a>(config().OutputCategory())</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  , <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">fTriggerGateBuilder</a></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    (</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      art::make_tool&lt;icarus::trigger::TriggerGateBuilder&gt;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        (config().TriggerGateBuilder_.get&lt;fhicl::ParameterSet&gt;())</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    )</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// optional configuration parameters</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a> &amp;&amp; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">throw</span> art::Exception(art::errors::Configuration)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Both `Baselines` (&#39;&quot;</span> &lt;&lt; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>-&gt;encode()</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&#39;) and `Baseline` (&quot;</span> &lt;&lt; *<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;) parameters specified, but they are exclusive!\n&quot;</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a> &amp;&amp; !<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">throw</span> art::Exception(art::errors::Configuration)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Either `Baselines` or `Baseline` parameters is required.\n&quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  std::vector&lt;raw::ADC_Count_t&gt; selectedThresholds;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (!config().SelectThresholds(selectedThresholds)) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    std::vector&lt;ADCCounts_t&gt; <span class="keyword">const</span>&amp; allThresholds</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      = <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">fTriggerGateBuilder</a>-&gt;channelThresholds();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (allThresholds.empty()) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">throw</span> art::Exception(art::errors::Configuration)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Trigger building algorithm reports no threshold!\n&quot;</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Check the configuration of `TriggerGateBuilder` tool.\n&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">std::transform</a>(</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      allThresholds.begin(), allThresholds.end(),</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      std::back_inserter(selectedThresholds),</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      std::mem_fn(&amp;<a class="code" href="structutil_1_1quantities_1_1concepts_1_1Quantity.html#a8e5644f85ca8d28abcb85c3a4a47cf47">icarus::trigger::ADCCounts_t::value</a>)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      );</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (selectedThresholds.empty()) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">throw</span> art::Exception(art::errors::Configuration)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Configured to save no thresholds!\n&quot;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Add values to the `SelectThresholds` configuration parameter.\n&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; threshold: selectedThresholds) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a>[<a class="code" href="structutil_1_1quantities_1_1concepts_1_1Quantity.html">icarus::trigger::ADCCounts_t</a>{threshold}]</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      = <a class="code" href="group__LArSoft__CoreUtils__StdUtils.html#ga3bb735c2329d4f88fa7e771cd92f8bdf">util::to_string</a>(threshold);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    mf::LogInfo log(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">fLogCategory</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;Selected thresholds:&quot;</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ threshold, <a class="code" href="BlipMaker__module_8cc.html#a8b8f5c7804b8eb6cd2f4a20f9ef30d41">instance</a> ]: <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a>)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; threshold &lt;&lt; <span class="stringliteral">&quot; (\&quot;&quot;</span> &lt;&lt; <a class="code" href="BlipMaker__module_8cc.html#a8b8f5c7804b8eb6cd2f4a20f9ef30d41">instance</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;)&quot;</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  } <span class="comment">// nameless block</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// declaration of input</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  consumes&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// declaration of output</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">for</span> (std::string <span class="keyword">const</span>&amp; instanceName: <a class="code" href="namespaceutil.html#aac4707f84c6dc5c269f147302722611f">util::const_values</a>(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a>))</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    produces&lt;std::vector&lt;TriggerGateData_t&gt;&gt;(instanceName);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    produces&lt;art::Assns&lt;TriggerGateData_t, raw::OpDetWaveform&gt;&gt;(instanceName);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  } <span class="comment">// for</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;} <span class="comment">// icarus::trigger::DiscriminatePMTwaveforms::DiscriminatePMTwaveforms()</span></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a53df0c58b563d4ffa4b782f784a243aa"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a53df0c58b563d4ffa4b782f784a243aa">icarus::trigger::DiscriminatePMTwaveforms::fNOpDetChannels</a></div><div class="ttdeci">unsigned int const fNOpDetChannels</div><div class="ttdoc">Number of optical detector channels. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00228">DiscriminatePMTwaveforms_module.cc:228</a></div></div>
<div class="ttc" id="namespaceutil_1_1fhicl_html_a7a710f4f9eb8ce2c8206162757289de0"><div class="ttname"><a href="namespaceutil_1_1fhicl.html#a7a710f4f9eb8ce2c8206162757289de0">util::fhicl::getOptionalValue</a></div><div class="ttdeci">std::optional&lt; typename Optional::value_type &gt; getOptionalValue(Optional const &amp;parameter)</div><div class="ttdoc">Returns the value of an optional parameter as std::optional. </div><div class="ttdef"><b>Definition:</b> <a href="FHiCLutils_8h_source.html#l00188">FHiCLutils.h:188</a></div></div>
<div class="ttc" id="namespaceicarus_1_1waveform__operations_1_1details_html_ae295d3f6cb2f9181dccdf0e3492d44e0"><div class="ttname"><a href="namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">icarus::waveform_operations::details::transform</a></div><div class="ttdeci">static constexpr Sample_t transform(Sample_t sample)</div><div class="ttdef"><b>Definition:</b> <a href="WaveformOperations_8h_source.html#l00145">WaveformOperations.h:145</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a080cdab7de7514954ace22962df24bd4"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">icarus::trigger::DiscriminatePMTwaveforms::fBaseline</a></div><div class="ttdeci">std::optional&lt; float &gt; const fBaseline</div><div class="ttdoc">A constant baseline level. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00226">DiscriminatePMTwaveforms_module.cc:226</a></div></div>
<div class="ttc" id="namespaceLVDSpatterns_html_a50b9bac6f0381564bc09c5fb54d2627f"><div class="ttname"><a href="namespaceLVDSpatterns.html#a50b9bac6f0381564bc09c5fb54d2627f">LVDSpatterns.NChannels</a></div><div class="ttdeci">int NChannels</div><div class="ttdef"><b>Definition:</b> <a href="LVDSpatterns_8py_source.html#l00057">LVDSpatterns.py:57</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a700c397bd0a58d5a15dabe02ad86802c"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">icarus::trigger::DiscriminatePMTwaveforms::fTriggerGateBuilder</a></div><div class="ttdeci">std::unique_ptr&lt; icarus::trigger::TriggerGateBuilder &gt; fTriggerGateBuilder</div><div class="ttdoc">Algorithms to simulate trigger gates out of optical channel output. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00246">DiscriminatePMTwaveforms_module.cc:246</a></div></div>
<div class="ttc" id="namespaceutil_html_aac4707f84c6dc5c269f147302722611f"><div class="ttname"><a href="namespaceutil.html#aac4707f84c6dc5c269f147302722611f">util::const_values</a></div><div class="ttdeci">decltype(auto) const_values(Coll &amp;&amp;coll)</div><div class="ttdoc">Range-for loop helper iterating across the constant values of the specified collection. </div></div>
<div class="ttc" id="BlipMaker__module_8cc_html_a8b8f5c7804b8eb6cd2f4a20f9ef30d41"><div class="ttname"><a href="BlipMaker__module_8cc.html#a8b8f5c7804b8eb6cd2f4a20f9ef30d41">instance</a></div><div class="ttdeci">const std::string instance</div><div class="ttdef"><b>Definition:</b> <a href="BlipMaker__module_8cc_source.html#l00035">BlipMaker_module.cc:35</a></div></div>
<div class="ttc" id="structutil_1_1quantities_1_1concepts_1_1Quantity_html_a8e5644f85ca8d28abcb85c3a4a47cf47"><div class="ttname"><a href="structutil_1_1quantities_1_1concepts_1_1Quantity.html#a8e5644f85ca8d28abcb85c3a4a47cf47">util::quantities::concepts::Quantity::value</a></div><div class="ttdeci">constexpr value_t value() const </div><div class="ttdoc">Returns the value of the quantity. </div><div class="ttdef"><b>Definition:</b> <a href="quantities_8h_source.html#l00609">quantities.h:609</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a5ef44a24c94b92e8fdabb6544a56c8ff"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">icarus::trigger::DiscriminatePMTwaveforms::fLogCategory</a></div><div class="ttdeci">std::string const fLogCategory</div><div class="ttdoc">Category name for the console output stream. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00233">DiscriminatePMTwaveforms_module.cc:233</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a02116dcbb0aab3ed7acbcde558ac423f"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">icarus::trigger::DiscriminatePMTwaveforms::fOpDetWaveformTag</a></div><div class="ttdeci">art::InputTag const fOpDetWaveformTag</div><div class="ttdoc">Input optical waveform tag. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00221">DiscriminatePMTwaveforms_module.cc:221</a></div></div>
<div class="ttc" id="group__LArSoft__CoreUtils__StdUtils_html_ga3bb735c2329d4f88fa7e771cd92f8bdf"><div class="ttname"><a href="group__LArSoft__CoreUtils__StdUtils.html#ga3bb735c2329d4f88fa7e771cd92f8bdf">util::to_string</a></div><div class="ttdeci">decltype(auto) constexpr to_string(T &amp;&amp;obj)</div><div class="ttdoc">ADL-aware version of std::to_string. </div></div>
<div class="ttc" id="structutil_1_1quantities_1_1concepts_1_1Quantity_html"><div class="ttname"><a href="structutil_1_1quantities_1_1concepts_1_1Quantity.html">util::quantities::concepts::Quantity</a></div><div class="ttdoc">A value measured in the specified unit. </div><div class="ttdef"><b>Definition:</b> <a href="quantities_8h_source.html#l00566">quantities.h:566</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a254b341615773ee8c735185b51683533"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a254b341615773ee8c735185b51683533">icarus::trigger::DiscriminatePMTwaveforms::getNOpDetChannels</a></div><div class="ttdeci">static unsigned int getNOpDetChannels(fhicl::OptionalAtom&lt; unsigned int &gt; const &amp;param)</div><div class="ttdoc">Fetches the optical detector count from geometry unless in param. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00542">DiscriminatePMTwaveforms_module.cc:542</a></div></div>
<div class="ttc" id="triggersim__singlewindow__icarus__data_8fcl_html_adb1cd4ff0e63b76acd41af381bcc739d"><div class="ttname"><a href="triggersim__singlewindow__icarus__data_8fcl.html#adb1cd4ff0e63b76acd41af381bcc739d">OpticalWaveforms</a></div><div class="ttdeci">physics producers discrimopdaq OpticalWaveforms</div><div class="ttdef"><b>Definition:</b> <a href="triggersim__singlewindow__icarus__data_8fcl_source.html#l00112">triggersim_singlewindow_icarus_data.fcl:112</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a6ad72370459ed4b554721782eaf4427b"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">icarus::trigger::DiscriminatePMTwaveforms::fSelectedThresholds</a></div><div class="ttdeci">std::map&lt; icarus::trigger::ADCCounts_t, std::string &gt; fSelectedThresholds</div><div class="ttdoc">Thresholds selected for saving, and their instance name. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00231">DiscriminatePMTwaveforms_module.cc:231</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a073c5347b97d2ddb8788cfdb7403c228"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">icarus::trigger::DiscriminatePMTwaveforms::fBaselineTag</a></div><div class="ttdeci">std::optional&lt; art::InputTag &gt; const fBaselineTag</div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00224">DiscriminatePMTwaveforms_module.cc:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a36f3087daaa78aa10b396217df1e036a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::trigger::DiscriminatePMTwaveforms::DiscriminatePMTwaveforms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a206546fed813b8f0062d1c73da353f6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">icarus::trigger::DiscriminatePMTwaveforms::DiscriminatePMTwaveforms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad0f01cb8e428634c074d3d56c6ab5296"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::trigger::DiscriminatePMTwaveforms::beginJob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the plots to be filled. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00366">366</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                                     {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;} <span class="comment">// icarus::trigger::DiscriminatePMTwaveforms::beginJob()</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab03b2df7f448c315685b84f5f4e2c26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a> icarus::trigger::DiscriminatePMTwaveforms::fillChannelGaps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a>&#160;</td>
          <td class="paramname"><em>gates</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a collection with one gate per channel and no gaps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gates</td><td>the trigger gates to be put in the collection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a collection with with one gate per channel and no gaps</dd></dl>
<p>The returned collection includes one gate per channel, and at least <code>fNOpDetChannels</code> channels (more if there are channels with higher number than that). For each channel, a gate is set in the item of the collection with index the channel ID (i.e. the first gate in the collection will be the one for channel <code>0</code>, the next the one for channel <code>1</code> and so on). It is assumed that there is only at most one gate per channel. The <code>gates</code> specified in the argument are <em>moved</em> to the proper item in the returned collection. The other gates are assigned the proper channel number but are closed gates and associated with no waveform. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00499">499</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keyword">using</span> GateDataColl_t</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    = <a class="code" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">using</span> Gate_t = GateDataColl_t::value_type; <span class="comment">// SingleChannelOpticalTriggerGate</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// fill a map channel -&gt; gate (missing channels have a nullptr gate)</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  std::vector&lt;Gate_t const*&gt; gateMap(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a53df0c58b563d4ffa4b782f784a243aa">fNOpDetChannels</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">for</span> (Gate_t <span class="keyword">const</span>&amp; gate: gates) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    assert(gate.hasChannels());</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> channel = gate.channel();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (static_cast&lt;std::size_t&gt;(channel) &gt;= gateMap.size())</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      gateMap.resize(channel + 1U, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    assert(gateMap[channel] == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    gateMap[channel] = &amp;gate;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  } <span class="comment">// for all gates</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// fill</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  GateDataColl_t allGates;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  allGates.reserve(gateMap.size());</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ channelNo, gate ]: <a class="code" href="namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a>(gateMap)) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (gate) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      assert(gate-&gt;channel() == channelNo);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      allGates.push_back(std::move(*gate));</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">else</span> allGates.emplace_back(<a class="code" href="namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">Gate_t::ChannelID_t</a>(channelNo));</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  } <span class="comment">// for</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">return</span> allGates;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;} <span class="comment">// icarus::trigger::DiscriminatePMTwaveforms::fillChannelGaps()</span></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a53df0c58b563d4ffa4b782f784a243aa"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a53df0c58b563d4ffa4b782f784a243aa">icarus::trigger::DiscriminatePMTwaveforms::fNOpDetChannels</a></div><div class="ttdeci">unsigned int const fNOpDetChannels</div><div class="ttdoc">Number of optical detector channels. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00228">DiscriminatePMTwaveforms_module.cc:228</a></div></div>
<div class="ttc" id="namespaceutil_html_af0615b7538ff948ea65d5206a23c84f2"><div class="ttname"><a href="namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a></div><div class="ttdeci">auto enumerate(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper tracking the number of iteration. </div><div class="ttdef"><b>Definition:</b> <a href="enumerate_8h_source.html#l00069">enumerate.h:69</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates_html_ae9a529eafa9b02fe3571a9906bf8490d"><div class="ttname"><a href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html#ae9a529eafa9b02fe3571a9906bf8490d">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t</a></div><div class="ttdeci">std::vector&lt; triggergate_t &gt; GateData_t</div><div class="ttdef"><b>Definition:</b> <a href="TriggerGateBuilder_8h_source.html#l00112">TriggerGateBuilder.h:112</a></div></div>
<div class="ttc" id="namespaceraw_html_abfe7badfcad7fe0e9474829fbd1408b2"><div class="ttname"><a href="namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a></div><div class="ttdeci">unsigned int ChannelID_t</div><div class="ttdoc">Type representing the ID of a readout channel. </div><div class="ttdef"><b>Definition:</b> <a href="RawTypes_8h_source.html#l00028">RawTypes.h:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a254b341615773ee8c735185b51683533"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int icarus::trigger::DiscriminatePMTwaveforms::getNOpDetChannels </td>
          <td>(</td>
          <td class="paramtype">fhicl::OptionalAtom&lt; unsigned int &gt; const &amp;&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches the optical detector count from geometry unless in <code>param</code>. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00542">542</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nChannels;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">return</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    param(nChannels)? nChannels: lar::providerFrom&lt;geo::Geometry&gt;()-&gt;<a class="code" href="namespacepmtana.html#ac1d220fc98e7866c1e4c0fd7861da12f">NOpDets</a>();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;} <span class="comment">// icarus::trigger::DiscriminatePMTwaveforms::getNOpDetChannels()</span></div>
<div class="ttc" id="namespacepmtana_html_ac1d220fc98e7866c1e4c0fd7861da12f"><div class="ttname"><a href="namespacepmtana.html#ac1d220fc98e7866c1e4c0fd7861da12f">pmtana::NOpDets</a></div><div class="ttdeci">size_t NOpDets(int cryostat)</div><div class="ttdef"><b>Definition:</b> <a href="icaruscode_2icaruscode_2PMT_2OpReco_2FlashFinder_2FlashFinderFMWKInterface_8cxx_source.html#l00059">FlashFinderFMWKInterface.cxx:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48309975c699e2565d7e4575e8a766a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a>&amp; icarus::trigger::DiscriminatePMTwaveforms::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d5ea213ac063fa71f3dc6b0b43d6d22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a>&amp; icarus::trigger::DiscriminatePMTwaveforms::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html">DiscriminatePMTwaveforms</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa08ddd1b06e09e3d2ea9183e192e374f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void icarus::trigger::DiscriminatePMTwaveforms::produce </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the data products. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00372">372</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                                   {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// set up the algorithm to create the trigger gates</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">fTriggerGateBuilder</a>-&gt;resetup(</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a>{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      art::ServiceHandle&lt;detinfo::DetectorClocksService const&gt;()-&gt;DataFor(event)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    );</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// fetch input</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; waveformHandle</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    = <span class="keyword">event</span>.getValidHandle&lt;std::vector&lt;raw::OpDetWaveform&gt;&gt;(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; waveforms = *waveformHandle;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// map address of waveform to art pointer to that waveform</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span>&amp; opDetWavePtrs</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    = <a class="code" href="namespaceutil.html#a648066c28180a7cdfac53270a2b4a80d">util::mapDataProductPointers</a>(event, waveformHandle);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// retrieve the baseline information</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  std::vector&lt;icarus::WaveformBaseline&gt; fixedBaselines;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  std::vector&lt;icarus::WaveformBaseline&gt; <span class="keyword">const</span>* baselines = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    baselines =</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      &amp;(<span class="keyword">event</span>.getProduct&lt;std::vector&lt;icarus::WaveformBaseline&gt;&gt;(*fBaselineTag));</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    fixedBaselines.resize</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      (waveforms.size(), <a class="code" href="structicarus_1_1WaveformBaseline.html">icarus::WaveformBaseline</a>{ *<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">fBaseline</a> });</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    baselines = &amp;fixedBaselines;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// provide each waveform with additional information: baseline</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (baselines-&gt;size() != waveforms.size()) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    assert(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;DiscriminatePMTwaveforms&quot;</span>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Incompatible baseline information for the waveforms: &quot;</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      &lt;&lt; waveforms.size() &lt;&lt; <span class="stringliteral">&quot; waveforms (&quot;</span> &lt;&lt; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a>.encode()</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;) for &quot;</span> &lt;&lt; baselines-&gt;size() &lt;&lt; <span class="stringliteral">&quot; baselines (&quot;</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      &lt;&lt; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>-&gt;encode() &lt;&lt; <span class="stringliteral">&quot;)!\n&quot;</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  std::vector&lt;icarus::trigger::WaveformWithBaseline&gt; waveformInfo;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  waveformInfo.reserve(waveforms.size());</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [ waveform, <a class="code" href="OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a> ]: <a class="code" href="namespaceutil.html#a3efdd3910e740873b4247e10e9884cf5">util::zip</a>(waveforms, *baselines))</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    waveformInfo.emplace_back(&amp;waveform, &amp;<a class="code" href="OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    mf::LogDebug log { <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">fLogCategory</a> };</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;Discrimination of &quot;</span> &lt;&lt; waveforms.size() &lt;&lt; <span class="stringliteral">&quot; PMT waveforms from &#39;&quot;</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      &lt;&lt; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">fOpDetWaveformTag</a>.encode() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot; with baselines from &#39;&quot;</span> &lt;&lt; <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">fBaselineTag</a>-&gt;encode() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// define channel-level trigger gate openings as function on threshold</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// this is a collection where each entry (of type `TriggerGates`) contains</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// the complete set of trigger gates for an event.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  std::vector&lt;icarus::trigger::TriggerGateBuilder::TriggerGates&gt; <span class="keyword">const</span>&amp;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    triggerGatesByThreshold = <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">fTriggerGateBuilder</a>-&gt;build(waveformInfo);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  { <span class="comment">// nameless block</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    mf::LogTrace log(<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">fLogCategory</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;Trigger gates from &quot;</span> &lt;&lt; triggerGatesByThreshold.size()</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; thresholds:\n&quot;</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; triggerGates: triggerGatesByThreshold)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      triggerGates.dump(log);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  } <span class="comment">// nameless block</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// prepare output</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html">icarus::trigger::TriggerGateBuilder::TriggerGates</a> <span class="keyword">const</span>&amp; gates</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    : triggerGatesByThreshold</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  ) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="namespaceicarus_1_1trigger.html#a49a4799819d963216971a31116ca8bc4">ADCCounts_t</a> <span class="keyword">const</span> thr = gates.threshold();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// find the threshold and its label, if we care of it</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">auto</span> iThr = <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a>.find(thr);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (iThr == <a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">fSelectedThresholds</a>.end()) <span class="keywordflow">continue</span>; <span class="comment">// not interested</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    std::string <span class="keyword">const</span>&amp; instanceName = iThr-&gt;second;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    art::PtrMaker&lt;TriggerGateData_t&gt; <span class="keyword">const</span> makeGatePtr(event, instanceName);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// reformat the results for the threshold</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">auto</span> thresholdData = <a class="code" href="namespaceicarus_1_1trigger.html#a5e3e2f0504cab0c10790916793f11381">icarus::trigger::transformIntoOpticalTriggerGate</a></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      (<a class="code" href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#aab03b2df7f448c315685b84f5f4e2c26">fillChannelGaps</a>(std::move(gates).gates()), makeGatePtr, opDetWavePtrs);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">// move the reformatted data into the event</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keyword">event</span>.put(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      std::make_unique&lt;std::vector&lt;TriggerGateData_t&gt;&gt;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        (std::move(std::get&lt;0U&gt;(thresholdData))),</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      instanceName</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      );</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">event</span>.put(</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      std::make_unique&lt;art::Assns&lt;TriggerGateData_t, raw::OpDetWaveform&gt;&gt;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        (std::move(std::get&lt;1U&gt;(thresholdData))),</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      instanceName</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  } <span class="comment">// for all extracted thresholds</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;} <span class="comment">// icarus::trigger::DiscriminatePMTwaveforms::produce()</span></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a080cdab7de7514954ace22962df24bd4"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a080cdab7de7514954ace22962df24bd4">icarus::trigger::DiscriminatePMTwaveforms::fBaseline</a></div><div class="ttdeci">std::optional&lt; float &gt; const fBaseline</div><div class="ttdoc">A constant baseline level. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00226">DiscriminatePMTwaveforms_module.cc:226</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a700c397bd0a58d5a15dabe02ad86802c"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a700c397bd0a58d5a15dabe02ad86802c">icarus::trigger::DiscriminatePMTwaveforms::fTriggerGateBuilder</a></div><div class="ttdeci">std::unique_ptr&lt; icarus::trigger::TriggerGateBuilder &gt; fTriggerGateBuilder</div><div class="ttdoc">Algorithms to simulate trigger gates out of optical channel output. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00246">DiscriminatePMTwaveforms_module.cc:246</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a5e3e2f0504cab0c10790916793f11381"><div class="ttname"><a href="namespaceicarus_1_1trigger.html#a5e3e2f0504cab0c10790916793f11381">icarus::trigger::transformIntoOpticalTriggerGate</a></div><div class="ttdeci">std::vector&lt; icarus::trigger::OpticalTriggerGateData_t &gt; transformIntoOpticalTriggerGate(Gates &amp;&amp;gates)</div><div class="ttdoc">Returns the trigger gates in serializable format. </div><div class="ttdef"><b>Definition:</b> <a href="TriggerDataUtils_8h_source.html#l00373">TriggerDataUtils.h:373</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a5ef44a24c94b92e8fdabb6544a56c8ff"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a5ef44a24c94b92e8fdabb6544a56c8ff">icarus::trigger::DiscriminatePMTwaveforms::fLogCategory</a></div><div class="ttdeci">std::string const fLogCategory</div><div class="ttdoc">Category name for the console output stream. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00233">DiscriminatePMTwaveforms_module.cc:233</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_aab03b2df7f448c315685b84f5f4e2c26"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#aab03b2df7f448c315685b84f5f4e2c26">icarus::trigger::DiscriminatePMTwaveforms::fillChannelGaps</a></div><div class="ttdeci">icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t fillChannelGaps(icarus::trigger::TriggerGateBuilder::TriggerGates::GateData_t gates) const </div><div class="ttdoc">Creates a collection with one gate per channel and no gaps. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00499">DiscriminatePMTwaveforms_module.cc:499</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a49a4799819d963216971a31116ca8bc4"><div class="ttname"><a href="namespaceicarus_1_1trigger.html#a49a4799819d963216971a31116ca8bc4">icarus::trigger::ADCCounts_t</a></div><div class="ttdeci">util::quantities::counts_as&lt; raw::ADC_Count_t &gt; ADCCounts_t</div><div class="ttdoc">ADC counts for optical detector readout. </div><div class="ttdef"><b>Definition:</b> <a href="TriggerTypes_8h_source.html#l00040">TriggerTypes.h:40</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates_html"><div class="ttname"><a href="classicarus_1_1trigger_1_1TriggerGateBuilder_1_1TriggerGates.html">icarus::trigger::TriggerGateBuilder::TriggerGates</a></div><div class="ttdoc">Container of logical gates for all triggering channels for a threshold. </div><div class="ttdef"><b>Definition:</b> <a href="TriggerGateBuilder_8h_source.html#l00108">TriggerGateBuilder.h:108</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a02116dcbb0aab3ed7acbcde558ac423f"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a02116dcbb0aab3ed7acbcde558ac423f">icarus::trigger::DiscriminatePMTwaveforms::fOpDetWaveformTag</a></div><div class="ttdeci">art::InputTag const fOpDetWaveformTag</div><div class="ttdoc">Input optical waveform tag. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00221">DiscriminatePMTwaveforms_module.cc:221</a></div></div>
<div class="ttc" id="OnlineDecoder_8fcl_html_ac3bc64ff22523df5f35d8f928ec038cd"><div class="ttname"><a href="OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a></div><div class="ttdeci">BEGIN_PROLOG baseline</div><div class="ttdef"><b>Definition:</b> <a href="OnlineDecoder_8fcl_source.html#l00014">OnlineDecoder.fcl:14</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorTimings_html"><div class="ttname"><a href="classdetinfo_1_1DetectorTimings.html">detinfo::DetectorTimings</a></div><div class="ttdoc">A class exposing an upgraded interface of detinfo::DetectorClocksData. </div><div class="ttdef"><b>Definition:</b> <a href="DetectorTimings_8h_source.html#l00249">DetectorTimings.h:249</a></div></div>
<div class="ttc" id="structicarus_1_1WaveformBaseline_html"><div class="ttname"><a href="structicarus_1_1WaveformBaseline.html">icarus::WaveformBaseline</a></div><div class="ttdoc">Class containing a waveform baseline value. </div><div class="ttdef"><b>Definition:</b> <a href="WaveformBaseline_8h_source.html#l00084">WaveformBaseline.h:84</a></div></div>
<div class="ttc" id="namespaceutil_html_a648066c28180a7cdfac53270a2b4a80d"><div class="ttname"><a href="namespaceutil.html#a648066c28180a7cdfac53270a2b4a80d">util::mapDataProductPointers</a></div><div class="ttdeci">DataProductPointerMap_t&lt; ArtHandleData_t&lt; Handle &gt; &gt; mapDataProductPointers(art::Event const &amp;event, Handle const &amp;handle)</div><div class="ttdoc">Creates a map from address of data product element to art pointer to it. </div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a6ad72370459ed4b554721782eaf4427b"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a6ad72370459ed4b554721782eaf4427b">icarus::trigger::DiscriminatePMTwaveforms::fSelectedThresholds</a></div><div class="ttdeci">std::map&lt; icarus::trigger::ADCCounts_t, std::string &gt; fSelectedThresholds</div><div class="ttdoc">Thresholds selected for saving, and their instance name. </div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00231">DiscriminatePMTwaveforms_module.cc:231</a></div></div>
<div class="ttc" id="namespaceutil_html_a3efdd3910e740873b4247e10e9884cf5"><div class="ttname"><a href="namespaceutil.html#a3efdd3910e740873b4247e10e9884cf5">util::zip</a></div><div class="ttdeci">auto zip(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper iterating across many collections at the same time. </div><div class="ttdef"><b>Definition:</b> <a href="zip_8h_source.html#l00295">zip.h:295</a></div></div>
<div class="ttc" id="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms_html_a073c5347b97d2ddb8788cfdb7403c228"><div class="ttname"><a href="classicarus_1_1trigger_1_1DiscriminatePMTwaveforms.html#a073c5347b97d2ddb8788cfdb7403c228">icarus::trigger::DiscriminatePMTwaveforms::fBaselineTag</a></div><div class="ttdeci">std::optional&lt; art::InputTag &gt; const fBaselineTag</div><div class="ttdef"><b>Definition:</b> <a href="DiscriminatePMTwaveforms__module_8cc_source.html#l00224">DiscriminatePMTwaveforms_module.cc:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a080cdab7de7514954ace22962df24bd4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;float&gt; const icarus::trigger::DiscriminatePMTwaveforms::fBaseline</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A constant baseline level. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00226">226</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a073c5347b97d2ddb8788cfdb7403c228"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;art::InputTag&gt; const icarus::trigger::DiscriminatePMTwaveforms::fBaselineTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00224">224</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a5ef44a24c94b92e8fdabb6544a56c8ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string const icarus::trigger::DiscriminatePMTwaveforms::fLogCategory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Category name for the console output stream. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00233">233</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a53df0c58b563d4ffa4b782f784a243aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int const icarus::trigger::DiscriminatePMTwaveforms::fNOpDetChannels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of optical detector channels. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00228">228</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a02116dcbb0aab3ed7acbcde558ac423f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">art::InputTag const icarus::trigger::DiscriminatePMTwaveforms::fOpDetWaveformTag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Input optical waveform tag. </p>
<p>Input waveform baseline tag. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00221">221</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6ad72370459ed4b554721782eaf4427b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="namespaceicarus_1_1trigger.html#a49a4799819d963216971a31116ca8bc4">icarus::trigger::ADCCounts_t</a>, std::string&gt; icarus::trigger::DiscriminatePMTwaveforms::fSelectedThresholds</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thresholds selected for saving, and their instance name. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00231">231</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a700c397bd0a58d5a15dabe02ad86802c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classicarus_1_1trigger_1_1TriggerGateBuilder.html">icarus::trigger::TriggerGateBuilder</a>&gt; icarus::trigger::DiscriminatePMTwaveforms::fTriggerGateBuilder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Algorithms to simulate trigger gates out of optical channel output. </p>

<p>Definition at line <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html#l00246">246</a> of file <a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>icaruscode/icaruscode/PMT/Trigger/<a class="el" href="DiscriminatePMTwaveforms__module_8cc_source.html">DiscriminatePMTwaveforms_module.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
