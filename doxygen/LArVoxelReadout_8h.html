<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>larsim/larsim/LegacyLArG4/LArVoxelReadout.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0ef3621e619e92f38380bf3633c5e005.html">larsim</a></li><li class="navelem"><a class="el" href="dir_42245cc4c40bc87aa80c6b92fceef954.html">larsim</a></li><li class="navelem"><a class="el" href="dir_4370ec8e2d375cb7a2cab0ac9ca115d2.html">LegacyLArG4</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">LArVoxelReadout.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A Geant4 sensitive detector that accumulates voxel information.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;algorithm&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
<code>#include &quot;Geant4/G4PVPlacement.hh&quot;</code><br/>
<code>#include &quot;Geant4/G4VSensitiveDetector.hh&quot;</code><br/>
<code>#include &quot;art/Framework/Services/Registry/ServiceHandle.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="Geometry_8h_source.html">larcore/Geometry/Geometry.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="geo__vectors_8h_source.html">larcoreobj/SimpleTypesAndConstants/geo_vectors.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="SimChannel_8h_source.html">lardataobj/Simulation/SimChannel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="LArG4Parameters_8h_source.html">larsim/Simulation/LArG4Parameters.h</a>&quot;</code><br/>
</div>
<p><a href="LArVoxelReadout_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlarg4_1_1TPCID__t.html">larg4::TPCID_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple structure holding a TPC and cryostat number.  <a href="structlarg4_1_1TPCID__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1G4PVPlacementWithID.html">larg4::G4PVPlacementWithID&lt; IDTYPE &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A G4PVPlacement with an additional identificator.  <a href="classlarg4_1_1G4PVPlacementWithID.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1LArVoxelReadout.html">larg4::LArVoxelReadout</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transports energy depositions from GEANT4 to TPC channels.  <a href="classlarg4_1_1LArVoxelReadout.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlarg4_1_1LArVoxelReadout_1_1Setup__t.html">larg4::LArVoxelReadout::Setup_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of what it takes to set a <code><a class="el" href="classlarg4_1_1LArVoxelReadout.html" title="Transports energy depositions from GEANT4 to TPC channels. ">LArVoxelReadout</a></code> up.  <a href="structlarg4_1_1LArVoxelReadout_1_1Setup__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacedetinfo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedetinfo.html">detinfo</a></td></tr>
<tr class="memdesc:namespacedetinfo"><td class="mdescLeft">&#160;</td><td class="mdescRight">General LArSoft Utilities. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceCLHEP"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceCLHEP.html">CLHEP</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacelarg4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelarg4.html">larg4</a></td></tr>
<tr class="memdesc:namespacelarg4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Geant4 interface. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a881353f0f9c2859d39c7d2ae76481bad"><td class="memItemLeft" align="right" valign="top">typedef G4PVPlacementWithID<br class="typebreak"/>
&lt; TPCID_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelarg4.html#a881353f0f9c2859d39c7d2ae76481bad">larg4::G4PVPlacementInTPC</a></td></tr>
<tr class="memdesc:a881353f0f9c2859d39c7d2ae76481bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">A physical volume with a TPC ID.  <a href="#a881353f0f9c2859d39c7d2ae76481bad">More...</a><br/></td></tr>
<tr class="separator:a881353f0f9c2859d39c7d2ae76481bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A Geant4 sensitive detector that accumulates voxel information. </p>
<dl class="section author"><dt>Author</dt><dd><a href="#" onclick="location.href='mai'+'lto:'+'sel'+'ig'+'man'+'@n'+'evi'+'s.'+'col'+'um'+'bia'+'.e'+'du'; return false;">selig<span style="display: none;">.nosp@m.</span>man@<span style="display: none;">.nosp@m.</span>nevis<span style="display: none;">.nosp@m.</span>.col<span style="display: none;">.nosp@m.</span>umbia<span style="display: none;">.nosp@m.</span>.edu</a></dd></dl>
<p>One way to implement voxels in Geant4 is to create a parallel "read-out" geometry along with the real, physical geometry. The read-out geometry is implemented in LArVoxelReadoutGeometry; this class is the sensitive detector for that geometry. That is, Geant4 will call this routine every time there is a step within a volume of the read-out geometry; this routine then accumulates information from that step.</p>
<p>In general, Geant4 expects to have per-event user information attached to the G4Event in some way; their G4VSensitiveDetector class supports this by allowing user-defined hit collections to added to a G4HCOfThisEvent object (a collection of hit collections; yes, it makes my head ache too!) that's part of each G4Event.</p>
<p>This class works differently, by accumulating the information in its internal <a class="el" href="classsim_1_1LArVoxelList.html">sim::LArVoxelList</a>. See LArVoxelListAction for how this information is made available to the main LArG4 module.</p>
<p>Why define a parallel geometry? Here are some reasons:</p>
<ul>
<li>The regular LAr TPC is one large volume of liquid argon. When Geant4 does its physics modeling, it can be unconstrained in step size by the voxels. Only for readout would the steps be sub-divided.</li>
<li>There may be more than one kind of readout, depending on a detector's instrumentation (e.g., OpDets in addition to the wire planes). It's possible that the voxelization appropriate for the wire planes may not be an appropriate readout for the other readouts. Geant4 allows the construction of multiple parallel readouts, so this mechanism is relatively easy to extend for each type of readout. <hr/>
 N.B. At the beginning of each event, the clock data pointer must be set to the event currently being processed. This is a thread-safety problem which should be reconciled for the <a class="el" href="namespacelarg4.html" title="Geant4 interface. ">larg4</a> package if it has not already been. The way that is done for the LArG4_module is for the LArVoxelReadoutGeometry object to update the state of the LArVoxelReadout object <h1>through a sentry object. </h1>
</li>
</ul>

<p>Definition in file <a class="el" href="LArVoxelReadout_8h_source.html">LArVoxelReadout.h</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
