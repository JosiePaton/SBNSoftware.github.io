<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CalWireSBND_module.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_e0f1515b72b556ea1a60650362b3fd43.html">sbndcode</a></li><li class="navelem"><a class="el" href="../../dir_c704eecb2dcddc67a44d0dda177b30ed.html">sbndcode</a></li><li class="navelem"><a class="el" href="../../dir_536f989121116a8335348eb5d76d1a9c.html">Calibration</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CalWireSBND_module.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/dc1/CalWireSBND__module_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// CalWireSBND class</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// brebel@fnal.gov</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// 11-3-09 Pulled all FFT code out and put into Utilitiess/LArFFT</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  copied over to 1053 - andrzej.szelc@yale.edu</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//  copied over and modified to SBND   </span><span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/ModuleMacros.h&quot;</span> </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/EDProducer.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Event.h&quot;</span> </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Handle.h&quot;</span> </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;canvas/Persistency/Common/Ptr.h&quot;</span> </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;canvas/Persistency/Common/PtrVector.h&quot;</span> </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Services/Registry/ServiceHandle.h&quot;</span> </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;art_root_io/TFileService.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;art_root_io/TFileDirectory.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/ParameterSet.h&quot;</span> </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;messagefacility/MessageLogger/MessageLogger.h&quot;</span> </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;cetlib_except/exception.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;cetlib/search_path.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;art/Utilities/make_tool.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d3e/WireCreator_8h.html">lardata/ArtDataHelper/WireCreator.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d50/SignalShapingServiceSBND_8h.html">sbndcode/Utilities/SignalShapingServiceSBND.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d0c/sbndcode_2sbndcode_2Calibration_2IROIFinder_8h.html">sbndcode/Calibration/IROIFinder.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d8b/Geometry_8h.html">larcore/Geometry/Geometry.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//#include &quot;Filters/ChannelFilter.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d5a/RawDigit_8h.html">lardataobj/RawData/RawDigit.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/df4/raw_8h.html">lardataobj/RawData/raw.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d9f/Wire_8h.html">lardataobj/RecoBase/Wire.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d33/LArFFT_8h.html">lardata/Utilities/LArFFT.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d5b/sparse__vector_8h.html">lardataobj/Utilities/sparse_vector.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d9c/lardata_2lardata_2Utilities_2AssociationUtil_8h.html">lardata/Utilities/AssociationUtil.h</a>&quot;</span>  <span class="comment">//--Hec</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dba/DetectorClocksService_8h.html">lardata/DetectorInfoServices/DetectorClocksService.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;TComplex.h&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;TFile.h&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;TH1F.h&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">///creation of calibrated signals on wires</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span><span class="keyword">namespace </span><a class="code" href="../../db/d54/pid_8fcl.html#ad64f8e0590866b2059faaaaf075473f7">caldata</a> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html">   52</a></span>&#160;  <span class="keyword">class </span><a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html">CalWireSBND</a> : <span class="keyword">public</span> art::EDProducer {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">//typedef lar::sparse_vector&lt;float&gt; RegionsOfInterest_t;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// create calibrated signals on wires. this class runs </span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// an fft to remove the electronics shaping.     </span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a1516d0e9ad14e030bb26f202eb5c08f0">CalWireSBND</a>(fhicl::ParameterSet <span class="keyword">const</span>&amp; pset); </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a9ea5035b5bd0887312dc73e2c15e66ae">~CalWireSBND</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a06b289eafaee7ec31a824ab777a63d1c">produce</a>(art::Event&amp; <a class="code" href="../../de/d0f/namespacetca.html#a3bc30aeace71ea50324b602afa2155f2">evt</a>); </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8c129541c5c59881af8a2fcdfb96212c">beginJob</a>(); </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8ddfdf16084640595e0f0b023355e76f">endJob</a>();                 </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a45b025280e9ed48a06e32053e962eeea">reconfigure</a>(fhicl::ParameterSet <span class="keyword">const</span>&amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab438f6d58226d90c577316b8051d5ad9">   68</a></span>&#160;    std::unique_ptr&lt;sbnd_tool::IROIFinder&gt; <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab438f6d58226d90c577316b8051d5ad9">fROITool</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// Define the waveform container</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a23e569f6c1a8b94499b83d5f47261f0f">   71</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a23e569f6c1a8b94499b83d5f47261f0f">Waveform</a>        = std::vector&lt;float&gt;;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// Define the ROI and its container</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">   74</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">CandidateROI</a>    = std::pair&lt;size_t, size_t&gt;;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab24eaa50a3321e850cb907268a3eccde">   75</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab24eaa50a3321e850cb907268a3eccde">CandidateROIVec</a> = std::vector&lt;CandidateROI&gt;;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#aa93a3fd7645fdc373afaa9dca48113b9">   79</a></span>&#160;    <span class="keywordtype">bool</span>          <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#aa93a3fd7645fdc373afaa9dca48113b9">fDoBaselineSub</a>;     <span class="comment">///&lt; subtract baseline to restore DC component post-deconvolution</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acb8cf310cc1d125864237a0f72a0d8e8">   80</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span>          <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acb8cf310cc1d125864237a0f72a0d8e8">fDoAdvBaselineSub</a>;  <span class="comment">///&lt; use interpolation-based baseline subtraction</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">   81</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span>           <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;    <span class="comment">///&lt; bin grouping size in &quot;interpolate&quot;  method</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a3a5498e7d183940964bfdba08caf223c">   82</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span>         <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a3a5498e7d183940964bfdba08caf223c">fBaseVarCut</a>;        <span class="comment">///&lt; baseline variance cut used in &quot;interpolate&quot; method</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>   </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">   84</a></span>&#160;    std::string  <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>;   <span class="comment">///&lt; module that made digits</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span>                                                       </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">   86</a></span>&#160;    std::string  <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>;  <span class="comment">///&lt; nominal spill is an empty string</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span><span class="comment">                              ///&lt; it is set by the DigitModuleLabel</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span><span class="comment">                              ///&lt; ex.:  &quot;daq:preSpill&quot; for prespill data</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span>    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">void</span>          <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ad48957d94663924d902e772ce1f4f3f3">SubtractBaseline</a>(std::vector&lt;float&gt;&amp; holder);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">void</span>          <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acdacc217162df3c3ad45a46d048eb7f6">SubtractBaselineAdv</a>(std::vector&lt;float&gt;&amp; holder);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">protected</span>: </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }; <span class="comment">// class CalWireSBND</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  DEFINE_ART_MODULE(<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html">CalWireSBND</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">//-------------------------------------------------</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a1516d0e9ad14e030bb26f202eb5c08f0">  101</a></span>&#160;  <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html">CalWireSBND</a>::<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html">CalWireSBND</a>(fhicl::ParameterSet <a class="code" href="../../d7/d8e/namespaceSortModuleTimes.html#a805854df4323f914a9a09f4e266b4794">const</a>&amp; pset)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  : EDProducer(pset)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    fSpillName=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    this-&gt;<a class="code" href="../../db/dc1/no__reconfigure__override_8sh.html#a43e0311a5eaaf93e2e55a29bbdd8990a">reconfigure</a>(pset);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    fROITool = art::make_tool&lt;sbnd_tool::IROIFinder&gt;(pset.get&lt;fhicl::ParameterSet&gt;(<span class="stringliteral">&quot;ROITool&quot;</span>));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">//--Hec if(fSpillName.size()&lt;1) produces&lt; std::vector&lt;recob::Wire&gt; &gt;();</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">//--Hec else produces&lt; std::vector&lt;recob::Wire&gt; &gt;(fSpillName);</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    produces&lt; std::vector&lt;recob::Wire&gt; &gt;(fSpillName);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    produces&lt;art::Assns&lt;raw::RawDigit, recob::Wire&gt;&gt;(fSpillName);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">//-------------------------------------------------</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a9ea5035b5bd0887312dc73e2c15e66ae">  116</a></span>&#160;  <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a9ea5035b5bd0887312dc73e2c15e66ae">CalWireSBND::~CalWireSBND</a>()</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">  //////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a45b025280e9ed48a06e32053e962eeea">  121</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a45b025280e9ed48a06e32053e962eeea">CalWireSBND::reconfigure</a>(fhicl::ParameterSet <span class="keyword">const</span>&amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a> = p.get&lt; std::string &gt;(<span class="stringliteral">&quot;DigitModuleLabel&quot;</span>, <span class="stringliteral">&quot;daq&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#aa93a3fd7645fdc373afaa9dca48113b9">fDoBaselineSub</a>    = p.get&lt; <span class="keywordtype">bool</span> &gt;       (<span class="stringliteral">&quot;DoBaselineSub&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acb8cf310cc1d125864237a0f72a0d8e8">fDoAdvBaselineSub</a> = p.get&lt; <span class="keywordtype">bool</span> &gt;       (<span class="stringliteral">&quot;DoAdvBaselineSub&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>   = p.get&lt; <span class="keywordtype">int</span> &gt;        (<span class="stringliteral">&quot;BaseSampleBins&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a3a5498e7d183940964bfdba08caf223c">fBaseVarCut</a>       = p.get&lt; <span class="keywordtype">int</span> &gt;        (<span class="stringliteral">&quot;BaseVarCut&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">size_t</span> pos = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>.find(<span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>( pos!=std::string::npos ) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      fSpillName = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>.substr( pos+1 );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a> = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>.substr( 0, pos );</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">//-------------------------------------------------</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8c129541c5c59881af8a2fcdfb96212c">  140</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8c129541c5c59881af8a2fcdfb96212c">CalWireSBND::beginJob</a>()</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  {  </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">  //////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8ddfdf16084640595e0f0b023355e76f">  145</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8ddfdf16084640595e0f0b023355e76f">CalWireSBND::endJob</a>()</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {  </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">  //////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a06b289eafaee7ec31a824ab777a63d1c">  150</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a06b289eafaee7ec31a824ab777a63d1c">CalWireSBND::produce</a>(art::Event&amp; <a class="code" href="../../de/d0f/namespacetca.html#a3bc30aeace71ea50324b602afa2155f2">evt</a>)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  {      </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// get the geometry</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    art::ServiceHandle&lt;geo::Geometry&gt; geom;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// get the FFT service to have access to the FFT size</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    art::ServiceHandle&lt;util::LArFFT&gt; fFFT;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> transformSize = fFFT-&gt;FFTSize();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// Get signal shaping service.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    art::ServiceHandle&lt;util::SignalShapingServiceSBND&gt; sss;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">double</span> DeconNorm = sss-&gt;GetDeconNorm();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// make a collection of Wires</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    std::unique_ptr&lt;std::vector&lt;recob::Wire&gt; &gt; wirecol(<span class="keyword">new</span> std::vector&lt;recob::Wire&gt;);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// ... and an association set     --Hec</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    std::unique_ptr&lt;art::Assns&lt;raw::RawDigit,recob::Wire&gt; &gt; WireDigitAssn</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      (<span class="keyword">new</span> art::Assns&lt;raw::RawDigit,recob::Wire&gt;);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// Read in the digit List object(s). </span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    art::Handle&lt; std::vector&lt;raw::RawDigit&gt; &gt; digitVecHandle;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>.size()&gt;0) evt.getByLabel(<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>, <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>, digitVecHandle);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">else</span> evt.getByLabel(<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">fDigitModuleLabel</a>, digitVecHandle);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (!digitVecHandle-&gt;size())  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CalWireSBND&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;CalWireSBND:: digitVecHandle size is &quot;</span> &lt;&lt; digitVecHandle-&gt;size();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// Use the handle to get a particular (0th) element of collection.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    art::Ptr&lt;raw::RawDigit&gt; digitVec0(digitVecHandle, 0);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize = digitVec0-&gt;Samples(); <span class="comment">//size of raw data vectors</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span>( (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)transformSize &lt; dataSize){</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;CalWireSBND&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;FFT size (&quot;</span> &lt;&lt; transformSize &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                    &lt;&lt; <span class="stringliteral">&quot;is smaller than the data size (&quot;</span> &lt;&lt; dataSize &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                    &lt;&lt; <span class="stringliteral">&quot;\nResizing the FFT now...&quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      fFFT-&gt;ReinitializeFFT(dataSize,fFFT-&gt;FFTOptions(),fFFT-&gt;FFTFitBins());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      transformSize = fFFT-&gt;FFTSize();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;CalWireSBND&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;FFT size is now (&quot;</span> &lt;&lt; transformSize &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                    &lt;&lt; <span class="stringliteral">&quot;and should be larger than the data size (&quot;</span> &lt;&lt; dataSize &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CalWireSBND&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Data size is &quot;</span> &lt;&lt; dataSize &lt;&lt; <span class="stringliteral">&quot; and transform size is &quot;</span> &lt;&lt; transformSize;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a> &gt; 0 &amp;&amp; dataSize % <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a> != 0) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      mf::LogError(<span class="stringliteral">&quot;CalWireSBND&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Set BaseSampleBins modulo dataSize= &quot;</span>&lt;&lt;dataSize;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    uint32_t     channel(0); <span class="comment">// channel number</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>(0);     <span class="comment">// time bin loop variable</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment"></span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">///    filter::ChannelFilter *chanFilt = new filter::ChannelFilter();  </span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    std::vector&lt;float&gt; holder;                <span class="comment">// holds signal data</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    std::vector&lt;short&gt; rawadc(transformSize);  <span class="comment">// vector holding uncompressed adc values</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    std::vector&lt;TComplex&gt; freqHolder(transformSize+1); <span class="comment">// temporary frequency data</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> clockData = art::ServiceHandle&lt;detinfo::DetectorClocksService const&gt;()-&gt;DataFor(evt);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// loop over all wires    </span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    wirecol-&gt;reserve(digitVecHandle-&gt;size());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> rdIter = 0; rdIter &lt; digitVecHandle-&gt;size(); ++rdIter){ <span class="comment">// ++ move</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      holder.clear();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// get the reference to the current raw::RawDigit</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      art::Ptr&lt;raw::RawDigit&gt; digitVec(digitVecHandle, rdIter);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      channel = digitVec-&gt;Channel();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">// skip bad channels</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">//  if(!chanFilt-&gt;BadChannel(channel)) {</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">if</span>(<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// resize and pad with zeros</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        holder.resize(transformSize, 0.);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">// uncompress the data</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="../../d9/d63/namespaceraw.html#adb44765eee4a6e600cb97fff8d7a6095">raw::Uncompress</a>(digitVec-&gt;ADCs(), rawadc, digitVec-&gt;Compression());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// loop over all adc values and subtract the pedestal</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordtype">float</span> pdstl = digitVec-&gt;GetPedestal();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">for</span>(bin = 0; bin &lt; dataSize; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>) </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          holder[bin]=(rawadc[bin]-pdstl);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">//fill the remaining bin with data</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">for</span>(bin = dataSize; bin &lt; holder.size(); bin++){</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          <span class="comment">//  philosophy change - don&#39;t repeat data but instead fill extra space with zeros.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;          <span class="comment">//    not sure that one is better than the other.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          <span class="comment">//      holder[bin] = (rawadc[bin-dataSize]-pdstl);</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>] = 0.0;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Do deconvolution.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        sss-&gt;Deconvolute(clockData, channel, holder);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          <span class="keywordflow">for</span>(bin = 0; bin &lt; holder.size(); ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>) holder[bin]=holder[bin]/DeconNorm;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      } <span class="comment">// end if not a bad channel </span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      holder.resize(dataSize,1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-5);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="comment">// restore DC component through baseline subtraction</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#aa93a3fd7645fdc373afaa9dca48113b9">fDoBaselineSub</a> ) <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ad48957d94663924d902e772ce1f4f3f3">SubtractBaseline</a>(holder);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">// more advanced, interpolation-based subtraction alg </span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// that uses the BaseSampleBins and BaseVarCut params</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acb8cf310cc1d125864237a0f72a0d8e8">fDoAdvBaselineSub</a> ) <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acdacc217162df3c3ad45a46d048eb7f6">SubtractBaselineAdv</a>(holder);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="comment">// Make a single ROI that spans the entire data size</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="comment">//RegionsOfInterest_t sparse_holder;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="comment">//sparse_holder.add_range(0,holder.begin(),holder.end());</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab24eaa50a3321e850cb907268a3eccde">CandidateROIVec</a> candROIVec;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab438f6d58226d90c577316b8051d5ad9">fROITool</a>-&gt;FindROIs( holder, channel, candROIVec);<span class="comment">//calculates ROI and returns it to roiVec.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="comment">//auto view = geom-&gt;View(channel);</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="../../d4/da5/classlar_1_1sparse__vector.html">recob::Wire::RegionsOfInterest_t</a> roiVec;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">//looping over roiVec to make a RegionOfInterest_t object.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">CandidateROI</a>: candROIVec){</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordtype">size_t</span> roiStart = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">CandidateROI</a>.first;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordtype">size_t</span> roiStop = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">CandidateROI</a>.second;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        std::vector&lt;float&gt; roiHolder;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i_holder=roiStart; i_holder&lt;=roiStop; i_holder++){</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          roiHolder.push_back(holder[i_holder]);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        roiVec.<a class="code" href="../../d4/da5/classlar_1_1sparse__vector.html#a234e1a7d10a4225b66209e2d14365f27">add_range</a>(roiStart, std::move(roiHolder));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      wirecol-&gt;push_back(<a class="code" href="../../d6/d1c/classrecob_1_1WireCreator.html">recob::WireCreator</a>(std::move(roiVec),*digitVec).move());</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="comment">// add an association between the last object in wirecol--Hec</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="comment">// (that we just inserted) and digitVec</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d72/namespaceutil.html#ac016dc123242a7f1d5c81594de910717">util::CreateAssn</a>(*<span class="keyword">this</span>, evt, *wirecol, digitVec, *WireDigitAssn, <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>)) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CalWireSBND&quot;</span>)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Can&#39;t associate wire #&quot;</span> &lt;&lt; (wirecol-&gt;size() - 1)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; with raw digit #&quot;</span> &lt;&lt; digitVec.key() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      } <span class="comment">// if failed to add association</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span>(wirecol-&gt;size() == 0)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;CalWireSBND&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;No wires made for this event.&quot;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">//--Hec if(fSpillName.size()&gt;0)</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">//--Hec   evt.put(std::move(wirecol), fSpillName);</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">//--Hec else evt.put(std::move(wirecol));</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    evt.put(std::move(wirecol), <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>);        <span class="comment">//--Hec</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    evt.put(std::move(WireDigitAssn), <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">fSpillName</a>);  <span class="comment">//--Hec</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="comment">// delete chanFilt;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ad48957d94663924d902e772ce1f4f3f3">  303</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#ad48957d94663924d902e772ce1f4f3f3">CalWireSBND::SubtractBaseline</a>(std::vector&lt;float&gt;&amp; holder)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// Robust baseline calculation that effectively ignores outlier </span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// samples from large pulses:</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">//   (1) fill a histogram with every sample&#39;s value,</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">//   (2) find mode (bin with most entries),</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">//   (3) calculate the mean along the entire waveform using</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">//       only samples with values close to this mode.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>(0);  </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">float</span> min = 0, <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a> = 0;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">for</span>(bin = 0; bin &lt; holder.size(); bin++){</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">if</span> (holder[bin] &gt; <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a>) <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a> = holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>];</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">if</span> (holder[bin] &lt; min) min = holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>];</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">int</span> nbin = <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a> - min;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (nbin &gt; 0) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      TH1F <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>(<span class="stringliteral">&quot;h&quot;</span>,<span class="stringliteral">&quot;h&quot;</span>,nbin,min,<a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">for</span>(bin = 0; bin &lt; holder.size(); bin++) h.Fill(holder[bin]);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordtype">float</span> x_max = h.GetXaxis()-&gt;GetBinCenter(h.GetMaximumBin());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordtype">float</span> ped   = x_max;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordtype">float</span> sum   = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordtype">int</span> ncount  = 0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">for</span>(bin = 0; bin &lt; holder.size(); bin++){</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span>( fabs(holder[bin]-x_max) &lt; 2. ) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          sum += holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>];</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          ncount++; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (ncount) ped = sum/ncount;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">for</span>(bin = 0; bin &lt; holder.size(); bin++) holder[bin] -= ped;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acdacc217162df3c3ad45a46d048eb7f6">  336</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#acdacc217162df3c3ad45a46d048eb7f6">CalWireSBND::SubtractBaselineAdv</a>(std::vector&lt;float&gt;&amp; holder)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// Subtract baseline using linear interpolation between regions defined</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// by the datasize and fBaseSampleBins</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// number of points to characterize the baseline</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> nBasePts = holder.size() / <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// the baseline offset vector</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      std::vector&lt;float&gt; base;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = 0; ii &lt; nBasePts; ++ii) base.push_back(0.);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">// find the average value in each region, using values that are</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// similar</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordtype">float</span> fbins = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> nfilld = 0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = 0; ii &lt; nBasePts; ++ii) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> loBin = ii * <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> hiBin = loBin + <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordtype">float</span> ave = 0.;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordtype">float</span> sum = 0.;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = loBin; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; hiBin; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          ave += holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>];</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          sum += holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>] * holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        } <span class="comment">// jj</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        ave = ave / fbins;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordtype">float</span> var = (sum - fbins * ave * ave) / (fbins - 1.);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// Set the baseline for this region if the variance is small</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span>(var &lt; <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a3a5498e7d183940964bfdba08caf223c">fBaseVarCut</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          base[ii] = ave;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          ++nfilld;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      } <span class="comment">// ii</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="comment">// fill in any missing points if there aren&#39;t too many missing</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">if</span>(nfilld &lt; nBasePts &amp;&amp; nfilld &gt; nBasePts / 2) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordtype">bool</span> baseOK = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="comment">// check the first region</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span>(base[0] == 0) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii1 = 0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = 1; ii &lt; nBasePts; ++ii) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span>(base[ii] != 0) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;              ii1 = ii;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          } <span class="comment">// ii</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii2 = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = ii1 + 1; ii &lt; nBasePts; ++ii) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keywordflow">if</span>(base[ii] != 0) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;              ii2 = ii;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          } <span class="comment">// ii</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          <span class="comment">// failure</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <span class="keywordflow">if</span>(ii2 &gt; 0) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordtype">float</span> slp = (base[ii2] - base[ii1]) / (<span class="keywordtype">float</span>)(ii2 - ii1);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            base[0] = base[ii1] - slp * ii1;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            baseOK = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        } <span class="comment">// base[0] == 0</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// check the last region</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span>(baseOK &amp;&amp; base[nBasePts] == 0) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii2 = 0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = nBasePts - 1; ii &gt; 0; --ii) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">if</span>(base[ii] != 0) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;              ii2 = ii;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          } <span class="comment">// ii</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          baseOK = <span class="keyword">false</span>; <span class="comment">// assume the worst, hope for better</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii1 = 0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          <span class="keywordflow">if</span> (ii2 &gt;= 1) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = ii2 - 1; ii &gt; 0; --ii) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;              <span class="keywordflow">if</span>(base[ii] != 0) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                ii1 = ii;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                baseOK = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;              } <span class="comment">// if base[ii]</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            } <span class="comment">// ii</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          } <span class="comment">// if ii2</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <span class="keywordflow">if</span> (baseOK) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordtype">float</span> slp = (base[ii2] - base[ii1]) / (<span class="keywordtype">float</span>)(ii2 - ii1);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            base[nBasePts] = base[ii2] + slp * (nBasePts - ii2);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        } <span class="comment">// baseOK &amp;&amp; base[nBasePts] == 0</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">// now fill in any intermediate points</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ii = 1; ii &lt; nBasePts - 1; ++ii) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          <span class="keywordflow">if</span>(base[ii] == 0) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="comment">// find the next non-zero region</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> jj = ii + 1; jj &lt; nBasePts; ++jj) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;              <span class="keywordflow">if</span>(base[jj] != 0) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordtype">float</span> slp = (base[jj] - base[ii - 1]) / (jj - ii + 1);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                base[ii] = base[ii - 1] + slp;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;              }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            } <span class="comment">// jj</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          } <span class="comment">// base[ii] == 0</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        } <span class="comment">// ii</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      } <span class="comment">// nfilld &lt; nBasePts</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="comment">// interpolate and subtract</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordtype">float</span> slp = (base[1] - base[0]) / (<span class="keywordtype">float</span>)<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="comment">// bin offset to the origin (the center of the region)</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> bof = <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a> / 2;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> lastRegion = 0;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = 0; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; holder.size(); ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// in a new region?</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> region = <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> / <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span>(region &gt; lastRegion) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          <span class="comment">// update the slope and offset</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          slp = (base[region] - base[lastRegion]) / (<span class="keywordtype">float</span>)<a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          bof += <a class="code" href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">fBaseSampleBins</a>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          lastRegion = region;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        holder[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>] -= base[region] + (<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> - bof) * slp;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;} <span class="comment">// end namespace caldata</span></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_acb8cf310cc1d125864237a0f72a0d8e8"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#acb8cf310cc1d125864237a0f72a0d8e8">caldata::CalWireSBND::fDoAdvBaselineSub</a></div><div class="ttdeci">bool fDoAdvBaselineSub</div><div class="ttdoc">use interpolation-based baseline subtraction </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00080">CalWireSBND_module.cc:80</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a23e569f6c1a8b94499b83d5f47261f0f"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a23e569f6c1a8b94499b83d5f47261f0f">caldata::CalWireSBND::Waveform</a></div><div class="ttdeci">std::vector&lt; float &gt; Waveform</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00071">CalWireSBND_module.cc:71</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a8d2fcf369d3782ac51f55e11441befcd"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8d2fcf369d3782ac51f55e11441befcd">caldata::CalWireSBND::fSpillName</a></div><div class="ttdeci">std::string fSpillName</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00086">CalWireSBND_module.cc:86</a></div></div>
<div class="ttc" id="WireCreator_8h_html"><div class="ttname"><a href="../../da/d3e/WireCreator_8h.html">WireCreator.h</a></div><div class="ttdoc">Helper functions to create a wire. </div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_aa93a3fd7645fdc373afaa9dca48113b9"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#aa93a3fd7645fdc373afaa9dca48113b9">caldata::CalWireSBND::fDoBaselineSub</a></div><div class="ttdeci">bool fDoBaselineSub</div><div class="ttdoc">subtract baseline to restore DC component post-deconvolution </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00079">CalWireSBND_module.cc:79</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a06b289eafaee7ec31a824ab777a63d1c"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a06b289eafaee7ec31a824ab777a63d1c">caldata::CalWireSBND::produce</a></div><div class="ttdeci">void produce(art::Event &amp;evt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00150">CalWireSBND_module.cc:150</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_ab438f6d58226d90c577316b8051d5ad9"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab438f6d58226d90c577316b8051d5ad9">caldata::CalWireSBND::fROITool</a></div><div class="ttdeci">std::unique_ptr&lt; sbnd_tool::IROIFinder &gt; fROITool</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00068">CalWireSBND_module.cc:68</a></div></div>
<div class="ttc" id="pmttriggerproducer_8fcl_html_a527d89be40c3c20ca8162df059180fd9"><div class="ttname"><a href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a></div><div class="ttdeci">BEGIN_PROLOG pmt_uncoated ideal single PE test page of manual option are OR or AND window for pmt trigger time start window for pmt trigger time end etc then what events all hists are saved for max</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/pmttriggerproducer_8fcl_source.html#l00023">pmttriggerproducer.fcl:23</a></div></div>
<div class="ttc" id="classlar_1_1sparse__vector_html_a234e1a7d10a4225b66209e2d14365f27"><div class="ttname"><a href="../../d4/da5/classlar_1_1sparse__vector.html#a234e1a7d10a4225b66209e2d14365f27">lar::sparse_vector::add_range</a></div><div class="ttdeci">const datarange_t &amp; add_range(size_type offset, ITER first, ITER last)</div><div class="ttdoc">Adds a sequence of elements as a range with specified offset. </div></div>
<div class="ttc" id="RawDigit_8h_html"><div class="ttname"><a href="../../d9/d5a/RawDigit_8h.html">RawDigit.h</a></div><div class="ttdoc">Definition of basic raw digits. </div></div>
<div class="ttc" id="no__reconfigure__override_8sh_html_a43e0311a5eaaf93e2e55a29bbdd8990a"><div class="ttname"><a href="../../db/dc1/no__reconfigure__override_8sh.html#a43e0311a5eaaf93e2e55a29bbdd8990a">reconfigure</a></div><div class="ttdeci">for pfile in ack l reconfigure(.*) override&quot;` do echo &quot;checking $</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc1/no__reconfigure__override_8sh_source.html#l00003">no_reconfigure_override.sh:3</a></div></div>
<div class="ttc" id="classrecob_1_1WireCreator_html"><div class="ttname"><a href="../../d6/d1c/classrecob_1_1WireCreator.html">recob::WireCreator</a></div><div class="ttdoc">Class managing the creation of a new recob::Wire object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d3e/WireCreator_8h_source.html#l00053">WireCreator.h:53</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_a512aa20fb28b8c00f3d290ba176b40e1"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">icarus::ns::util::bin</a></div><div class="ttdeci">constexpr details::BinObj&lt; T &gt; bin(T value)</div><div class="ttdoc">Returns a wrapper to print the specified data in binary format. </div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a1516d0e9ad14e030bb26f202eb5c08f0"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a1516d0e9ad14e030bb26f202eb5c08f0">caldata::CalWireSBND::CalWireSBND</a></div><div class="ttdeci">CalWireSBND(fhicl::ParameterSet const &amp;pset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00101">CalWireSBND_module.cc:101</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a45b025280e9ed48a06e32053e962eeea"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a45b025280e9ed48a06e32053e962eeea">caldata::CalWireSBND::reconfigure</a></div><div class="ttdeci">void reconfigure(fhicl::ParameterSet const &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00121">CalWireSBND_module.cc:121</a></div></div>
<div class="ttc" id="SignalShapingServiceSBND_8h_html"><div class="ttname"><a href="../../d8/d50/SignalShapingServiceSBND_8h.html">SignalShapingServiceSBND.h</a></div><div class="ttdoc">Service to provide microboone-specific signal shaping for simulation (convolution) and reconstruction...</div></div>
<div class="ttc" id="raw_8h_html"><div class="ttname"><a href="../../d6/df4/raw_8h.html">raw.h</a></div><div class="ttdoc">Collect all the RawData header files together. </div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_ad48957d94663924d902e772ce1f4f3f3"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#ad48957d94663924d902e772ce1f4f3f3">caldata::CalWireSBND::SubtractBaseline</a></div><div class="ttdeci">void SubtractBaseline(std::vector&lt; float &gt; &amp;holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00303">CalWireSBND_module.cc:303</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html">caldata::CalWireSBND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00052">CalWireSBND_module.cc:52</a></div></div>
<div class="ttc" id="namespaceSortModuleTimes_html_a805854df4323f914a9a09f4e266b4794"><div class="ttname"><a href="../../d7/d8e/namespaceSortModuleTimes.html#a805854df4323f914a9a09f4e266b4794">SortModuleTimes.const</a></div><div class="ttdeci">string const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/SortModuleTimes_8py_source.html#l00871">SortModuleTimes.py:871</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a8c129541c5c59881af8a2fcdfb96212c"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8c129541c5c59881af8a2fcdfb96212c">caldata::CalWireSBND::beginJob</a></div><div class="ttdeci">void beginJob()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00140">CalWireSBND_module.cc:140</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a3a5498e7d183940964bfdba08caf223c"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a3a5498e7d183940964bfdba08caf223c">caldata::CalWireSBND::fBaseVarCut</a></div><div class="ttdeci">float fBaseVarCut</div><div class="ttdoc">baseline variance cut used in &amp;quot;interpolate&amp;quot; method </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00082">CalWireSBND_module.cc:82</a></div></div>
<div class="ttc" id="sbndcode_2sbndcode_2Calibration_2IROIFinder_8h_html"><div class="ttname"><a href="../../d5/d0c/sbndcode_2sbndcode_2Calibration_2IROIFinder_8h.html">IROIFinder.h</a></div></div>
<div class="ttc" id="namespaceutil_html_ac016dc123242a7f1d5c81594de910717"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#ac016dc123242a7f1d5c81594de910717">util::CreateAssn</a></div><div class="ttdeci">bool CreateAssn(art::Event &amp;evt, std::vector&lt; T &gt; const &amp;a, art::Ptr&lt; U &gt; const &amp;b, art::Assns&lt; U, T &gt; &amp;assn, std::string a_instance, size_t index=UINT_MAX)</div><div class="ttdoc">Creates a single one-to-one association. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9c/lardata_2lardata_2Utilities_2AssociationUtil_8h_source.html#l00581">lardata/lardata/Utilities/AssociationUtil.h:581</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a0e171a6bcf7e91c4c1620f5985ff8390"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a0e171a6bcf7e91c4c1620f5985ff8390">caldata::CalWireSBND::fBaseSampleBins</a></div><div class="ttdeci">int fBaseSampleBins</div><div class="ttdoc">bin grouping size in &amp;quot;interpolate&amp;quot; method </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00081">CalWireSBND_module.cc:81</a></div></div>
<div class="ttc" id="classlar_1_1sparse__vector_html"><div class="ttname"><a href="../../d4/da5/classlar_1_1sparse__vector.html">lar::sparse_vector&lt; float &gt;</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a08723c932abe76c4b76d96780405a3c5"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a08723c932abe76c4b76d96780405a3c5">caldata::CalWireSBND::fDigitModuleLabel</a></div><div class="ttdeci">std::string fDigitModuleLabel</div><div class="ttdoc">module that made digits </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00084">CalWireSBND_module.cc:84</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a82426b01c6ca8597ffd5c39d1314007d"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a82426b01c6ca8597ffd5c39d1314007d">caldata::CalWireSBND::CandidateROI</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; CandidateROI</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00074">CalWireSBND_module.cc:74</a></div></div>
<div class="ttc" id="lardata_2lardata_2Utilities_2AssociationUtil_8h_html"><div class="ttname"><a href="../../d5/d9c/lardata_2lardata_2Utilities_2AssociationUtil_8h.html">AssociationUtil.h</a></div></div>
<div class="ttc" id="LArFFT_8h_html"><div class="ttname"><a href="../../d4/d33/LArFFT_8h.html">LArFFT.h</a></div></div>
<div class="ttc" id="DetectorClocksService_8h_html"><div class="ttname"><a href="../../d3/dba/DetectorClocksService_8h.html">DetectorClocksService.h</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="Wire_8h_html"><div class="ttname"><a href="../../da/d9f/Wire_8h.html">Wire.h</a></div><div class="ttdoc">Declaration of basic channel signal object. </div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a9ea5035b5bd0887312dc73e2c15e66ae"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a9ea5035b5bd0887312dc73e2c15e66ae">caldata::CalWireSBND::~CalWireSBND</a></div><div class="ttdeci">virtual ~CalWireSBND()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00116">CalWireSBND_module.cc:116</a></div></div>
<div class="ttc" id="namespacetca_html_a3bc30aeace71ea50324b602afa2155f2"><div class="ttname"><a href="../../de/d0f/namespacetca.html#a3bc30aeace71ea50324b602afa2155f2">tca::evt</a></div><div class="ttdeci">TCEvent evt</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/DataStructs_8cxx_source.html#l00007">DataStructs.cxx:7</a></div></div>
<div class="ttc" id="sparse__vector_8h_html"><div class="ttname"><a href="../../d1/d5b/sparse__vector_8h.html">sparse_vector.h</a></div><div class="ttdoc">Class defining a sparse vector (holes are zeroes) </div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_acdacc217162df3c3ad45a46d048eb7f6"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#acdacc217162df3c3ad45a46d048eb7f6">caldata::CalWireSBND::SubtractBaselineAdv</a></div><div class="ttdeci">void SubtractBaselineAdv(std::vector&lt; float &gt; &amp;holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00336">CalWireSBND_module.cc:336</a></div></div>
<div class="ttc" id="namespaceraw_html_adb44765eee4a6e600cb97fff8d7a6095"><div class="ttname"><a href="../../d9/d63/namespaceraw.html#adb44765eee4a6e600cb97fff8d7a6095">raw::Uncompress</a></div><div class="ttdeci">void Uncompress(const std::vector&lt; short &gt; &amp;adc, std::vector&lt; short &gt; &amp;uncompressed, raw::Compress_t compress)</div><div class="ttdoc">Uncompresses a raw data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df4/raw_8cxx_source.html#l00776">raw.cxx:776</a></div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_a8ddfdf16084640595e0f0b023355e76f"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#a8ddfdf16084640595e0f0b023355e76f">caldata::CalWireSBND::endJob</a></div><div class="ttdeci">void endJob()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00145">CalWireSBND_module.cc:145</a></div></div>
<div class="ttc" id="pid_8fcl_html_ad64f8e0590866b2059faaaaf075473f7"><div class="ttname"><a href="../../db/d54/pid_8fcl.html#ad64f8e0590866b2059faaaaf075473f7">caldata</a></div><div class="ttdeci">process_name can override from command line with o or output caldata</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d54/pid_8fcl_source.html#l00040">pid.fcl:40</a></div></div>
<div class="ttc" id="Geometry_8h_html"><div class="ttname"><a href="../../d3/d8b/Geometry_8h.html">Geometry.h</a></div><div class="ttdoc">art framework interface to geometry description </div></div>
<div class="ttc" id="classcaldata_1_1CalWireSBND_html_ab24eaa50a3321e850cb907268a3eccde"><div class="ttname"><a href="../../d8/def/classcaldata_1_1CalWireSBND.html#ab24eaa50a3321e850cb907268a3eccde">caldata::CalWireSBND::CandidateROIVec</a></div><div class="ttdeci">std::vector&lt; CandidateROI &gt; CandidateROIVec</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc1/CalWireSBND__module_8cc_source.html#l00075">CalWireSBND_module.cc:75</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
