<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>proxy::Tracks (recob::Track proxy)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">proxy::Tracks (recob::Track proxy)</div>  </div>
</div><!--header-->
<div class="contents">

<p>Proxy for a <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> collection.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html">proxy::Tracks</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proxy tag for a <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> collection proxy.  <a href="../../d3/df2/structproxy_1_1Tracks.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d37/classproxy_1_1TrackPointWrapper.html">proxy::TrackPointWrapper&lt; Data &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for a track data proxy.  <a href="../../d0/d37/classproxy_1_1TrackPointWrapper.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8f/structproxy_1_1TrackPoint.html">proxy::TrackPoint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of track point information.  <a href="../../dc/d8f/structproxy_1_1TrackPoint.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html">proxy::TrackCollectionProxyElement&lt; CollProxy &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for track proxy elements.  <a href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae286a749a7b96eb922cc66f38e7e28ca"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gae286a749a7b96eb922cc66f38e7e28ca">proxy::TrackPointData</a> = std::tuple&lt; <a class="el" href="../../d9/dca/classrecob_1_1Track.html">recob::Track</a> const *, art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;, <a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html">recob::TrackFitHitInfo</a> const *, std::size_t &gt;</td></tr>
<tr class="memdesc:gae286a749a7b96eb922cc66f38e7e28ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container of track point information.  <a href="#gae286a749a7b96eb922cc66f38e7e28ca">More...</a><br/></td></tr>
<tr class="separator:gae286a749a7b96eb922cc66f38e7e28ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7b34c6e05f2561aba99c839699cc1c5"><td class="memTemplParams" colspan="2">template&lt;typename TrackCollProxy &gt; </td></tr>
<tr class="memitem:gac7b34c6e05f2561aba99c839699cc1c5"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5">proxy::Track</a> = TrackCollectionProxyElement&lt; TrackCollProxy &gt;</td></tr>
<tr class="memdesc:gac7b34c6e05f2561aba99c839699cc1c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proxy to an element of a proxy collection of <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> objects.  <a href="#gac7b34c6e05f2561aba99c839699cc1c5">More...</a><br/></td></tr>
<tr class="separator:gac7b34c6e05f2561aba99c839699cc1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Auxiliary data</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpe4361e3184b2e43fe6542f980a9d359b"></a>These functions may be used as arguments to <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">proxy::getCollection</a>&lt;<a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a>&gt;()</code> call to merge of some data associated to the tracks. </p>
</td></tr>
<tr class="memitem:ga3608e82326b733fc6443034a0b464a3a"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a">proxy::withOriginalTrajectory</a> (art::InputTag const &amp;inputTag)</td></tr>
<tr class="memdesc:ga3608e82326b733fc6443034a0b464a3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code> information to the proxy.  <a href="#ga3608e82326b733fc6443034a0b464a3a">More...</a><br/></td></tr>
<tr class="separator:ga3608e82326b733fc6443034a0b464a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb08552da5e61f8b27757264bd2e7e86"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gacb08552da5e61f8b27757264bd2e7e86">proxy::withOriginalTrajectory</a> ()</td></tr>
<tr class="memdesc:gacb08552da5e61f8b27757264bd2e7e86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code> information to the proxy.  <a href="#gacb08552da5e61f8b27757264bd2e7e86">More...</a><br/></td></tr>
<tr class="separator:gacb08552da5e61f8b27757264bd2e7e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad327110ed2fa43e80296397eb91b1300"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300">proxy::withFitHitInfo</a> (art::InputTag const &amp;inputTag)</td></tr>
<tr class="memdesc:gad327110ed2fa43e80296397eb91b1300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> information to the proxy.  <a href="#gad327110ed2fa43e80296397eb91b1300">More...</a><br/></td></tr>
<tr class="separator:gad327110ed2fa43e80296397eb91b1300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a56db3c6c05c20e1a876b375665ff94"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3a56db3c6c05c20e1a876b375665ff94">proxy::withFitHitInfo</a> ()</td></tr>
<tr class="memdesc:ga3a56db3c6c05c20e1a876b375665ff94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> information to the proxy.  <a href="#ga3a56db3c6c05c20e1a876b375665ff94">More...</a><br/></td></tr>
<tr class="separator:ga3a56db3c6c05c20e1a876b375665ff94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Proxy for a <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> collection. </p>
<p><a class="el" href="../../d4/d66/structTrack.html">Track</a> proxies is a way to facilitate the navigation of <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> data objects. The ensemble of fundamental data of a track collection includes:</p>
<ul>
<li>the tracks themselves, in a <code>std::vector&lt;<a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a>&gt;</code> collection</li>
<li>the associated hits, in a <code>art::Assns&lt;<a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a>, <a class="el" href="../../db/d4e/classrecob_1_1Hit.html" title="2D representation of charge deposited in the TDC/wire plane ">recob::Hit</a>&gt;</code> data product</li>
</ul>
<p>Special customisations are provided for:</p>
<ul>
<li>the associated hits (automatically pulled in): the information is provided with <code><a class="el" href="../../db/d4e/classrecob_1_1Hit.html" title="2D representation of charge deposited in the TDC/wire plane ">recob::Hit</a></code> tag, with the dedicated accessor <code>hits()</code>, <code>nHits()</code> and <code>hitAtPoint()</code> of the track proxy and with <code>hitPtr()</code> and <code><a class="el" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit()</a></code> when accessing a single point</li>
<li>the track fit information: include it with <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">withFitHitInfo()</a></code>; the information is provided with <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> tag, with the dedicated accessor <code>fitInfoAtPoint()</code> of the track proxy and with <code>fitInfoPtr()</code> when accessing a single point</li>
</ul>
<p>LArSoft prescribes conventions to be followed, which include:</p>
<ul>
<li>a track has at least two trajectory points</li>
<li>for each track, there is one hit per trajectory point</li>
<li>the association between tracks and hits is created with tracks as first ("left") element, and hits as second one ("right")</li>
<li>hits in the association are in a well-defined order: first are the hits of the first track, sorted in the same way as their trajectory points; then the second track hits come, likewise; and all tracks follow in order; this is called the "one-to-many sequential association" requirement documented in <code>ProxyBase.h</code>.</li>
</ul>
<p>For track data products respecting this convention, a track proxy provides an interface to navigate the track information.</p>
<dl class="section note"><dt>Note</dt><dd>The interface is experimental, and it is likely not to include all the features you may need. If you find a missing feature, or find a use case violating an assumption, or you find the interface cumbersome to use, please contact the author for a discussion on how to improve this utility.</dd></dl>
<h1>Obtaining a track proxy </h1>
<p><a class="el" href="../../d4/d66/structTrack.html">Track</a> proxies are created by specifying the tag of the tracks, and the event to read them from.</p>
<p>To create a track proxy: </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a> = proxy::getCollection&lt;proxy::Tracks&gt;(event, tracksTag);</div>
</div><!-- fragment --><p> Here we ask <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> to create a proxy of category <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>. Each proxy is a different beast which needs to be explicitly supported: here support for the proxy to <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> is described.</p>
<p>The additional customizations for track proxy are described above. For example, if the module with label <code>fitTag</code> stored the fit information for the track, that information can be merged as: </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a> = proxy::getCollection&lt;proxy::Tracks&gt;</div>
<div class="line">  (event, tracksTag, <a class="code" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300">withFitHitInfo</a>(fitTag));</div>
</div><!-- fragment --><p> while in the more likely case where that information was produced together with the tracks, </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a> = proxy::getCollection&lt;proxy::Tracks&gt;</div>
<div class="line">  (event, tracksTag, <a class="code" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300">withFitHitInfo</a>());</div>
</div><!-- fragment --><p> will suffice. After this, the interface specific to <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> will be available. Otherwise, any attempt to use it will cause (complicate) compilation errors.</p>
<p>In addition, any type of data can be associated using the generic collection proxy interface (<code><a class="el" href="../../df/de7/namespaceproxy.html#a355c74bf54881097a9c5b808bd99dba0" title="Helper function to merge associated data with no metadata. ">withAssociated()</a></code>, <code><a class="el" href="../../df/de7/namespaceproxy.html#a5f757375ed3ff7aa9dcce4e729e9937b" title="Helper function to merge an auxiliary data product into the proxy. ">withParallelData()</a></code>, etc.).</p>
<p>The C++ type of <code>tracks</code> object should not matter to the user, and it depends on which additional data are merged in.</p>
<h1>Types of proxies, and what to do with them </h1>
<p>Currently there are three different type of proxy-like objects for tracks. Each one supports a specific concept:</p>
<ul>
<li><code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code> represents the whole collection of tracks; it covers the tracks themselves, and their associated hits. It is obtained by calling <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> as described above.</li>
<li><code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5" title="Proxy to an element of a proxy collection of recob::Track objects. ">proxy::Track</a></code> represents a single track; the list of hits and points, and of course the <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> object itself, can be accessed through it. <a class="el" href="../../d4/d66/structTrack.html">Track</a> proxies are obtained from a track collection proxy (<code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>).</li>
<li><code><a class="el" href="../../dc/d8f/structproxy_1_1TrackPoint.html" title="Type of track point information. ">proxy::TrackPoint</a></code> represents a single trajectory point in a track. It provide access to position and momentum of the track at that point, associated hit and point flags. <a class="el" href="../../d4/d66/structTrack.html">Track</a> point proxies are obtained from a track proxy (<code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5" title="Proxy to an element of a proxy collection of recob::Track objects. ">proxy::Track</a></code>).</li>
</ul>
<p>For the details of the interface and the information that is exposed by each of these proxy classes, please refer to each class documentation. In particular, see <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code> documentation for more usage examples.</p>
<dl class="section note"><dt>Note</dt><dd>The interface allows by deliberate design only read-only access to the underlying data.</dd></dl>
<h1><a class="anchor" id="LArSoftProxyTracksTech"></a>
Technical details</h1>
<h2><a class="anchor" id="LArSoftProxyTracksTechDetails"></a>
Track collection proxy</h2>
<p>The track collection proxy object is derived from <code><a class="el" href="../../d3/dc5/classproxy_1_1CollectionProxyBase.html" title="Base representation of a collection of proxied objects. ">proxy::CollectionProxyBase</a></code>, which points to the original (track) data product. In addition, it contains a <code><a class="el" href="../../df/d4c/classproxy_1_1details_1_1AssociatedData.html" title="Object to draft associated data interface. ">proxy::details::AssociatedData</a></code> object for the <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code>&ndash;<code><a class="el" href="../../db/d4e/classrecob_1_1Hit.html" title="2D representation of charge deposited in the TDC/wire plane ">recob::Hit</a></code> association list.</p>
<p>The <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code> interface is currently quite limited: it only allows to access a track by index, or to iterate through all of them, in addition to know how many tracks are available (<code><a class="el" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size()</a></code>).</p>
<p>The object returned when accessing the single track information, <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5" title="Proxy to an element of a proxy collection of recob::Track objects. ">proxy::Track</a></code>, actually contains enough information so that it is independent of the track collection proxy. This is derived from the generic collection element proxy object (<code><a class="el" href="../../d8/d3d/structproxy_1_1CollectionProxyElement.html" title="An element of a collection proxy. ">proxy::CollectionProxyElement</a></code>).</p>
<p>The object describing the information of a single point has the interface of <code>TrackPointWrapper</code>. The underlying storage includes pointers to the track, the associated hit, and the index of the point in the track. This is track-specific and it is not part of the generic proxy infrastructure.</p>
<h2><a class="anchor" id="LArSoftProxyTracksCustom"></a>
Track proxy as an example of proxy customization</h2>
<p>The proxy utilities provide the basic functionality of the track proxy, including the track collection proxy, representing all the tracks in the event, and the track proxy, representing a single track. Access to a third tier, the single trajectory point, as proxy is not covered by the basic framework, and it has been implemented here from scratch.</p>
<p>The most relevant customization pertains proxy to the single track. The proxy is derived from <code>proxy::details::CollectionProxyElement</code> for basic functionality, which is enriched by a custom interface that does not in fact add functionality, except for the trajectory point proxy described below. The customizations are fairly trivial, overlaying user-friendly names on the existing functionality. A step beyond that is the access to data that might not be present, that is the fit information. The proxy takes the necessary steps to determine (statically) whether that information is present, and to provide a null pointer to the information if that is not the case. This is a functionality that can't be completely implemented by the basic proxy code, since that generic code has no clue about what type of null pointer to return when the tag <code>Tracks::TrackFitHitInfoTag</code> is unknown. This information is provided by the track proxy via the <code>getIf()</code> call. For convenience, <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5" title="Proxy to an element of a proxy collection of recob::Track objects. ">proxy::Track</a></code> is defined as alias of this single track proxy.</p>
<p>The collection proxy customization is way more straightforward. A proxy "tag" is defined, <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, with the only purpose of identifying the collection proxy for tracks. For convenience, it hosts a definition used internally to identify one of the optional auxiliary data, and the type of the main data product, but both definitions are contingent and their presence in there is only to centralize some customization in a single place. Traits (<code>CollectionProxyMakerTraits&lt;<a class="el" href="../../dd/dc7/structTracks.html">Tracks</a>&gt;</code>) are specialized to inform that this <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code> proxy relies on <code>std::vector&lt;<a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a>&gt;</code> as main data product collection type (<code>std::vector&lt;<a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a>&gt;</code> is learned from <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, but again, this is a contingent detail). The only other customization we need is to have for our proxy our element class above: since we can use the standard collection base, just with the custom element, we define <code>collection_proxy_impl_t</code> in that way. Finally, the creation of the collection proxy is customised by specializing <code>CollectionProxyMaker</code> (<code>CollectionProxyMaker&lt;<a class="el" href="../../dd/dc7/structTracks.html">Tracks</a>&gt;</code>). That class normally takes care of creating the whole proxy, and our purpose is to have it always add the associated hits as auxiliary data, so that the caller does not have to explicitly use <code>withAssociated&lt;<a class="el" href="../../db/d4e/classrecob_1_1Hit.html" title="2D representation of charge deposited in the TDC/wire plane ">recob::Hit</a>&gt;()</code> in <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code>. The simple customization does exactly that, under the hood. As candy, some customized functions may be provided for convenience, like <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">withFitHitInfo()</a></code> as alias of <code>withAssociated&lt;<a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a>&gt;()</code>.</p>
<p>The trajectory point proxy has been implemented from scratch here, and it is much less refined than the generic proxy code. It is based on a data structure with a selected list of pointers to the actual data. This structure is implemented as a <code>std::tuple</code>. On top of it, a wrapper provides the interface (by interface substitution). This choice is non-essential and has been taken to stress the separation between data storage and interface. Point data structures are created by the proxy on demand, and they are designed so that they don't become invalid when the original proxies fall out of scope, at the price of added memory usage (the minimal information would be a pointer to the track proxy and a point index).</p>
<p>Summary of the customization procedure:</p>
<ol type="1">
<li>define the tag to identify the proxy (<code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>)</li>
<li>choose what type of object that will be (<code><a class="el" href="../../d3/dc5/classproxy_1_1CollectionProxyBase.html" title="Base representation of a collection of proxied objects. ">proxy::CollectionProxyBase</a></code> should do for most)</li>
<li>(<em>optional</em>) customize the element type; deriving it from <code><a class="el" href="../../d8/d3d/structproxy_1_1CollectionProxyElement.html" title="An element of a collection proxy. ">proxy::CollectionProxyElement</a></code> is recommended</li>
<li>define the main data product type (<code>std::vector&lt;<a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a>&gt;</code>) and set the traits of the collection proxy, often deriving them from <code><a class="el" href="../../dd/d97/structproxy_1_1CollectionProxyMakerTraits.html" title="Collection of data type definitions for collection proxies. ">proxy::CollectionProxyMakerTraits</a></code> with the main data product type as template argument is enough; in this example, we specified a collection proxy object with customized element though</li>
<li>customize the creation of the proxy collection, if special logic or default components are specified for the proxy (here, <code>withAssociated&lt;<a class="el" href="../../db/d4e/classrecob_1_1Hit.html" title="2D representation of charge deposited in the TDC/wire plane ">recob::Hit</a>&gt;()</code>); in this case, <code><a class="el" href="../../d5/dee/structproxy_1_1CollectionProxyMaker.html" title="Class to assemble the required proxy. ">proxy::CollectionProxyMaker</a></code> must be specialized (for <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>), and a starting point may be to derive the specialization from <code><a class="el" href="../../db/d21/structproxy_1_1CollectionProxyMakerBase.html" title="Class to assemble the required proxy. ">proxy::CollectionProxyMakerBase</a></code> and redefine its <code>make()</code> member</li>
</ol>
<h2><a class="anchor" id="LArSoftProxyTracksOverhead"></a>
Overhead</h2>
<p>See the notes on overhead in <code>ProxyBase.h</code>. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gac7b34c6e05f2561aba99c839699cc1c5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TrackCollProxy &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5">proxy::Track</a> = typedef TrackCollectionProxyElement&lt;TrackCollProxy&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Proxy to an element of a proxy collection of <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> objects. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">TrackCollProxy</td><td>type of the track collection proxy</td></tr>
  </table>
  </dd>
</dl>
<p>This class is the proxy equivalent of <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code>, which exposes data associated with the track. An object of this type is returned when accessing a single track from a track collection proxy. While the data itself is not copied, this object owns some pointers to the actual data, and once created it is independent of the track collection proxy which created it.</p>
<p>The interface is currently defined by <code><a class="el" href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html" title="Class for track proxy elements. ">proxy::TrackCollectionProxyElement</a></code>. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l01036">1036</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae286a749a7b96eb922cc66f38e7e28ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gae286a749a7b96eb922cc66f38e7e28ca">proxy::TrackPointData</a> = typedef std::tuple&lt; <a class="el" href="../../d9/dca/classrecob_1_1Track.html">recob::Track</a> const*, art::Ptr&lt;<a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a>&gt;, <a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html">recob::TrackFitHitInfo</a> const*, std::size_t &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Container of track point information. </p>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gac7b34c6e05f2561aba99c839699cc1c5" title="Proxy to an element of a proxy collection of recob::Track objects. ">proxy::Track</a></code>, <code><a class="el" href="../../d0/d37/classproxy_1_1TrackPointWrapper.html" title="Wrapper for a track data proxy. ">proxy::TrackPointWrapper</a></code></dd></dl>
<p>This class contains some information pertaining a single point of a <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code>.</p>
<p>The information is not extensible via the usual proxy mechanisms. The data supported is stored in <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gae286a749a7b96eb922cc66f38e7e28ca" title="Container of track point information. ">proxy::TrackPointData</a></code> class, and it currently includes:</p>
<ul>
<li>the <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code> the point belongs to</li>
<li>the position, momentum and flags of the point</li>
<li>the hit associated to the point</li>
<li>the index of the point in its track</li>
<li>fit information</li>
</ul>
<p>The access interface is determined by <code><a class="el" href="../../d0/d37/classproxy_1_1TrackPointWrapper.html" title="Wrapper for a track data proxy. ">proxy::TrackPointWrapper</a></code>.</p>
<p>An object of this type is returned when accessing a single track point from a track proxy. While the data itself is not copied, this object owns some pointers to the actual data, and once created it is independent of the track proxy which created it. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l00556">556</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad327110ed2fa43e80296397eb91b1300"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto proxy::withFitHitInfo </td>
          <td>(</td>
          <td class="paramtype">art::InputTag const &amp;&#160;</td>
          <td class="paramname"><em>inputTag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> information to the proxy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputTag</td><td>the data product label to read the data from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an object driving <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> to use <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">proxy::getCollection()</a></code>, <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">proxy::withFitHitInfo()</a></code></dd></dl>
<p>This function behaves like <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">withFitHitInfo()</a></code>, but allows to use <code>inputTag</code> as input tag, instead of the same label as for the track collection. See <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">proxy::withFitHitInfo()</a></code> for explanations and examples. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l01133">1133</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/de7/namespaceproxy.html#a7148a19a9e3f652f865e8bd68d76fabc">proxy::withParallelDataAs</a></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        &lt;std::vector&lt;recob::TrackFitHitInfo&gt;, Tracks::TrackFitHitInfoTag&gt;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        (inputTag);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div>
<div class="ttc" id="namespaceproxy_html_a7148a19a9e3f652f865e8bd68d76fabc"><div class="ttname"><a href="../../df/de7/namespaceproxy.html#a7148a19a9e3f652f865e8bd68d76fabc">proxy::withParallelDataAs</a></div><div class="ttdeci">auto withParallelDataAs(Args &amp;&amp;...args)</div><div class="ttdoc">Helper function to merge an auxiliary data product into the proxy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/withParallelData_8h_source.html#l00096">withParallelData.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3a56db3c6c05c20e1a876b375665ff94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto proxy::withFitHitInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> information to the proxy. </p>
<dl class="section return"><dt>Returns</dt><dd>an object driving <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> to use <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">proxy::withFitHitInfo(art::InputTag const&amp;)</a></code>, <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">proxy::getCollection()</a></code></dd></dl>
<p>A <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code>data product is read from the event and merged into the proxy being created by <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">proxy::getCollection()</a></code>. The data product has the same input tag as the track data product; if a different one is needed, use <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300" title="Adds recob::TrackFitHitInfo information to the proxy. ">proxy::withFitHitInfo(art::InputTag const&amp;)</a></code> instead.</p>
<p>Example of usage (more can be found in <code><a class="el" href="../../d3/d81/classTrackProxyTest.html#ade99fcdfc96d82aa1044bfcbfbb82ec2" title="Performs the actual test. ">TrackProxyTest::testTracks()</a></code>): </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a> = proxy::getCollection&lt;proxy::Tracks&gt;</div>
<div class="line">  (event, tracksTag, <a class="code" href="../../d0/d4d/group__LArSoftProxyTracks.html#gad327110ed2fa43e80296397eb91b1300">proxy::withFitHitInfo</a>());</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; trackInfo: <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a>) {</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; point: <a class="code" href="../../df/df2/standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>.points()) {</div>
<div class="line"></div>
<div class="line">    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; pos = point.position();</div>
<div class="line">    <span class="keyword">auto</span> <span class="keyword">const</span>* <a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a> = point.hit();</div>
<div class="line">    <span class="keyword">auto</span> <span class="keyword">const</span>* fitInfo = point.fitInfoPtr();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">  } <span class="comment">// for point</span></div>
<div class="line"></div>
<div class="line">} <span class="comment">// for tracks</span></div>
</div><!-- fragment --><p> The proxy helps associating the right set of <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> for each <code>track</code> in the outer loop (not shown in the example: it might have looked like <code>auto const&amp; fitInfo = tracks.get&lt;<a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a>&gt;()</code>). It also helps to pick the fit information of the current <code>point</code> in the inner loop of the example (<code>fitInfo</code> will never be <code>nullptr</code> here, since we <em>did</em> merge the fit information).</p>
<p>The collection of <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code> is required to be a <code>std::vector&lt;std::vector&lt;<a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a>&gt;&gt;</code>, where the first index addresses which track the information is about, and the second index which point within that track.</p>
<p>The data is also available through the regular interface via tag <code><a class="el" href="../../d8/d80/classrecob_1_1TrackFitHitInfo.html" title="Object storing per-hit information from a track fit. ">recob::TrackFitHitInfo</a></code>.</p>
<p>The data must satisfy the parallel data product requirement. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l01191">1191</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/de7/namespaceproxy.html#a7148a19a9e3f652f865e8bd68d76fabc">proxy::withParallelDataAs</a></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        &lt;std::vector&lt;recob::TrackFitHitInfo&gt;, Tracks::TrackFitHitInfoTag&gt;();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    }</div>
<div class="ttc" id="namespaceproxy_html_a7148a19a9e3f652f865e8bd68d76fabc"><div class="ttname"><a href="../../df/de7/namespaceproxy.html#a7148a19a9e3f652f865e8bd68d76fabc">proxy::withParallelDataAs</a></div><div class="ttdeci">auto withParallelDataAs(Args &amp;&amp;...args)</div><div class="ttdoc">Helper function to merge an auxiliary data product into the proxy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/withParallelData_8h_source.html#l00096">withParallelData.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3608e82326b733fc6443034a0b464a3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto proxy::withOriginalTrajectory </td>
          <td>(</td>
          <td class="paramtype">art::InputTag const &amp;&#160;</td>
          <td class="paramname"><em>inputTag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code> information to the proxy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputTag</td><td>the data product label to read the data from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an object driving <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> to use <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a" title="Adds recob::TrackTrajectory information to the proxy. ">proxy::withOriginalTrajectory()</a></code>, <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">proxy::getCollection()</a></code></dd></dl>
<p>The behaviour of this function is like <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a" title="Adds recob::TrackTrajectory information to the proxy. ">withOriginalTrajectory()</a></code>, but reading the original trajectories from the association with the specified label rather than the label of the tracks in the proxy. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l01064">1064</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/de7/namespaceproxy.html#aa7416e177cbae2b6788bbeb7bd73c8d9">proxy::withZeroOrOneAs</a></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        &lt;<a class="code" href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a>, Tracks::TrackTrajectoryTag&gt;(inputTag);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    }</div>
<div class="ttc" id="classrecob_1_1TrackTrajectory_html"><div class="ttname"><a href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a></div><div class="ttdoc">A trajectory in space reconstructed from hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/TrackTrajectory_8h_source.html#l00062">TrackTrajectory.h:62</a></div></div>
<div class="ttc" id="namespaceproxy_html_aa7416e177cbae2b6788bbeb7bd73c8d9"><div class="ttname"><a href="../../df/de7/namespaceproxy.html#aa7416e177cbae2b6788bbeb7bd73c8d9">proxy::withZeroOrOneAs</a></div><div class="ttdeci">auto withZeroOrOneAs(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddd/withZeroOrOne_8h_source.html#l00081">withZeroOrOne.h:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gacb08552da5e61f8b27757264bd2e7e86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto proxy::withOriginalTrajectory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code> information to the proxy. </p>
<dl class="section return"><dt>Returns</dt><dd>an object driving <code><a class="el" href="../../df/de7/namespaceproxy.html#a075bce612be31d72d598a931dab369bc" title="Creates a proxy to a data product collection. ">getCollection()</a></code> to use <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a" title="Adds recob::TrackTrajectory information to the proxy. ">proxy::withOriginalTrajectory(art::InputTag const&amp;)</a></code>, <code><a class="el" href="../../d3/df2/structproxy_1_1Tracks.html" title="Proxy tag for a recob::Track collection proxy. ">proxy::Tracks</a></code>, <code><a class="el" href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html#a0c64b854b213c6b7266ddb181faa1f64" title="Returns whether this track is associated to a trajectory. ">proxy::TrackCollectionProxyElement::hasOriginalTrajectory()</a></code>, <code><a class="el" href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html#a65a336aec58c296065c71db2bdac96da" title="Returns a reference to the associated trajectory. ">proxy::TrackCollectionProxyElement::originalTrajectory()</a></code>, <code><a class="el" href="../../d9/dd0/structproxy_1_1TrackCollectionProxyElement.html#a5bc680e7619c7892ab1c48d07e4a0c04">proxy::TrackCollectionProxyElement::originalTrajectoryPtr()</a></code></dd></dl>
<p>The information from the associated trajectories is merged in the proxy. That association data product must have the same input tag as the track collection data product. To specify a different one, use <code><a class="el" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a" title="Adds recob::TrackTrajectory information to the proxy. ">withOriginalTrajectory(art::InputTag const&amp;)</a></code>.</p>
<p>The data is available through the regular interface via tag <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code>, or via custom interface, e.g.: </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a> = proxy::getCollection&lt;proxy::Tracks&gt;</div>
<div class="line">  (event, tracksTag, <a class="code" href="../../d0/d4d/group__LArSoftProxyTracks.html#ga3608e82326b733fc6443034a0b464a3a">proxy::withOriginalTrajectory</a>());</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; trackProxy: <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a>) {</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!trackProxy.hasOriginalTrajectory()) <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../df/df2/standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a> = *trackProxy;</div>
<div class="line">  <a class="code" href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a> <span class="keyword">const</span>&amp; original = trackProxy.originalTrajectory();</div>
<div class="line">  <a class="code" href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a> <span class="keyword">const</span>&amp; fitted = <a class="code" href="../../df/df2/standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>.Trajectory();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">} <span class="comment">// for tracks</span></div>
</div><!-- fragment --><p> Note the subtle difference between the two inner lines: <code>trackProxy</code> is a track proxy, and the first line is accessing its interface. The second line is talking to the track object (<code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code>, actually) directly. The same effect is obtained using directly the proxy, but with the indirection operator (<code>-&gt;</code>) instead of the member operator (<code>.</code>): <code>trackProxy-&gt;Trajectory()</code>.</p>
<p>The <code><a class="el" href="../../de/de5/classrecob_1_1TrackTrajectory.html" title="A trajectory in space reconstructed from hits. ">recob::TrackTrajectory</a></code> information is required to be from a <em>art</em> association with <code><a class="el" href="../../d9/dca/classrecob_1_1Track.html" title="Track from a non-cascading particle.A recob::Track consists of a recob::TrackTrajectory, plus additional members relevant for a &quot;fitted&quot; track: ">recob::Track</a></code>. The association must fulfil the one-to-(zero-or-one) sequential association requirements. </p>

<p>Definition at line <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html#l01115">1115</a> of file <a class="el" href="../../d0/dfd/lardata_2RecoBaseProxy_2Track_8h_source.html">lardata/RecoBaseProxy/Track.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/de7/namespaceproxy.html#aa7416e177cbae2b6788bbeb7bd73c8d9">proxy::withZeroOrOneAs</a></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        &lt;<a class="code" href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a>, Tracks::TrackTrajectoryTag&gt;();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div>
<div class="ttc" id="classrecob_1_1TrackTrajectory_html"><div class="ttname"><a href="../../de/de5/classrecob_1_1TrackTrajectory.html">recob::TrackTrajectory</a></div><div class="ttdoc">A trajectory in space reconstructed from hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/TrackTrajectory_8h_source.html#l00062">TrackTrajectory.h:62</a></div></div>
<div class="ttc" id="namespaceproxy_html_aa7416e177cbae2b6788bbeb7bd73c8d9"><div class="ttname"><a href="../../df/de7/namespaceproxy.html#aa7416e177cbae2b6788bbeb7bd73c8d9">proxy::withZeroOrOneAs</a></div><div class="ttdeci">auto withZeroOrOneAs(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddd/withZeroOrOne_8h_source.html#l00081">withZeroOrOne.h:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
