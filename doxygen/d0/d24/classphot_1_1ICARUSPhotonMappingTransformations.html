<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>phot::ICARUSPhotonMappingTransformations Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d7c/namespacephot.html">phot</a></li><li class="navelem"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html">ICARUSPhotonMappingTransformations</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d0/ddb/classphot_1_1ICARUSPhotonMappingTransformations-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">phot::ICARUSPhotonMappingTransformations Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Photon library mapping for ICARUS geometry.  
 <a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for phot::ICARUSPhotonMappingTransformations:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.png" usemap="#phot::ICARUSPhotonMappingTransformations_map" alt=""/>
  <map id="phot::ICARUSPhotonMappingTransformations_map" name="phot::ICARUSPhotonMappingTransformations_map">
<area href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html" title="Collection of functions to transform photon mapping data. " alt="phot::IPhotonMappingTransformations" shape="rect" coords="0,0,265,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/db4/structphot_1_1ICARUSPhotonMappingTransformations_1_1Config.html">Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1d997c344ec2633db1aabfbc9a6e709b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d997c344ec2633db1aabfbc9a6e709b">Parameters</a> = art::ToolConfigTable&lt; <a class="el" href="../../de/db4/structphot_1_1ICARUSPhotonMappingTransformations_1_1Config.html">Config</a> &gt;</td></tr>
<tr class="separator:a1d997c344ec2633db1aabfbc9a6e709b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classphot_1_1IPhotonMappingTransformations"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classphot_1_1IPhotonMappingTransformations')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html">phot::IPhotonMappingTransformations</a></td></tr>
<tr class="memitem:adecfee9f922d0146508eca98b7abe276 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> = int</td></tr>
<tr class="memdesc:adecfee9f922d0146508eca98b7abe276 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing a optical detector ID.  <a href="#adecfee9f922d0146508eca98b7abe276">More...</a><br/></td></tr>
<tr class="separator:adecfee9f922d0146508eca98b7abe276 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e5eb707bf6f054d9f0139a73011e58 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> = <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a></td></tr>
<tr class="memdesc:ac7e5eb707bf6f054d9f0139a73011e58 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing a library index. FIXME former LibraryOpDetID_t.  <a href="#ac7e5eb707bf6f054d9f0139a73011e58">More...</a><br/></td></tr>
<tr class="separator:ac7e5eb707bf6f054d9f0139a73011e58 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314ea62c58d853ad59c2ec90636eafb7 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> = std::vector&lt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> &gt;</td></tr>
<tr class="memdesc:a314ea62c58d853ad59c2ec90636eafb7 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing the mapping of optical detectors into library indices.  <a href="#a314ea62c58d853ad59c2ec90636eafb7">More...</a><br/></td></tr>
<tr class="separator:a314ea62c58d853ad59c2ec90636eafb7 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81ee7a7d599b286db861862ee953f11 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> = std::vector&lt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> &gt;</td></tr>
<tr class="memdesc:ae81ee7a7d599b286db861862ee953f11 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing the mapping of library indices into optical detectors.  <a href="#ae81ee7a7d599b286db861862ee953f11">More...</a><br/></td></tr>
<tr class="separator:ae81ee7a7d599b286db861862ee953f11 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0864b89488045a318188f98af9d10640 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memTemplParams" colspan="2">template&lt;typename LibDataColl &gt; </td></tr>
<tr class="memitem:a0864b89488045a318188f98af9d10640 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a> = <a class="el" href="../../d9/dd4/classphot_1_1OpDetVisibilityData.html">phot::OpDetVisibilityData</a>&lt; <a class="el" href="../../dd/da4/group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt; LibDataColl &gt;, <a class="el" href="../../dd/da4/group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const  &gt; &gt;</td></tr>
<tr class="memdesc:a0864b89488045a318188f98af9d10640 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of optical detector data collection.  <a href="#a0864b89488045a318188f98af9d10640">More...</a><br/></td></tr>
<tr class="separator:a0864b89488045a318188f98af9d10640 inherit pub_types_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a43c1737b2171326010b5320cb13a4e7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a43c1737b2171326010b5320cb13a4e7e">ICARUSPhotonMappingTransformations</a> (<a class="el" href="../../de/db4/structphot_1_1ICARUSPhotonMappingTransformations_1_1Config.html">Config</a> const &amp;config)</td></tr>
<tr class="memdesc:a43c1737b2171326010b5320cb13a4e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a43c1737b2171326010b5320cb13a4e7e">More...</a><br/></td></tr>
<tr class="separator:a43c1737b2171326010b5320cb13a4e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade8c1322282ea258ea423442ad275cd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ade8c1322282ea258ea423442ad275cd3">ICARUSPhotonMappingTransformations</a> (<a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d997c344ec2633db1aabfbc9a6e709b">Parameters</a> const &amp;config)</td></tr>
<tr class="memdesc:ade8c1322282ea258ea423442ad275cd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: ignores the configuration.  <a href="#ade8c1322282ea258ea423442ad275cd3">More...</a><br/></td></tr>
<tr class="separator:ade8c1322282ea258ea423442ad275cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585e314d4b27d2ba8413ec9c84ad7291"><td class="memTemplParams" colspan="2">template&lt;typename OutputIndex , typename InputIndex , template&lt; typename...&gt; typename Container&gt; </td></tr>
<tr class="memitem:a585e314d4b27d2ba8413ec9c84ad7291"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a585e314d4b27d2ba8413ec9c84ad7291">invertMapping</a> (Container&lt; OutputIndex &gt; const &amp;directMap, std::size_t size, InputIndex invalidIndex) -&gt; Container&lt; InputIndex &gt;</td></tr>
<tr class="memdesc:a585e314d4b27d2ba8413ec9c84ad7291"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inverts a given mapping.  <a href="#a585e314d4b27d2ba8413ec9c84ad7291">More...</a><br/></td></tr>
<tr class="separator:a585e314d4b27d2ba8413ec9c84ad7291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Geometry mapping interface</div></td></tr>
<tr class="memitem:adc542d50517909e2fa6b8b38c381005c"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#adc542d50517909e2fa6b8b38c381005c">detectorToLibrary</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const override</td></tr>
<tr class="memdesc:adc542d50517909e2fa6b8b38c381005c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the representation within the library of a detector location.  <a href="#adc542d50517909e2fa6b8b38c381005c">More...</a><br/></td></tr>
<tr class="separator:adc542d50517909e2fa6b8b38c381005c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Optical detector mapping interface</div></td></tr>
<tr class="memitem:ad544ae1d740230de5c98066ce7062822"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ad544ae1d740230de5c98066ce7062822">opDetToLibraryIndex</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> opDetID) const override</td></tr>
<tr class="memdesc:ad544ae1d740230de5c98066ce7062822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the library index for the specified optical detector.  <a href="#ad544ae1d740230de5c98066ce7062822">More...</a><br/></td></tr>
<tr class="separator:ad544ae1d740230de5c98066ce7062822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52663cbda87fa69209240d778940a98b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a52663cbda87fa69209240d778940a98b">libraryIndexToOpDet</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> libIndex) const override</td></tr>
<tr class="memdesc:a52663cbda87fa69209240d778940a98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the optical detector ID for the specified library index.  <a href="#a52663cbda87fa69209240d778940a98b">More...</a><br/></td></tr>
<tr class="separator:a52663cbda87fa69209240d778940a98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44383e622cd6f364a110d956f3696980"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> <br class="typebreak"/>
const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980">opDetsToLibraryIndices</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const override</td></tr>
<tr class="memdesc:a44383e622cd6f364a110d956f3696980"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of library indices as function of optical detectors.  <a href="#a44383e622cd6f364a110d956f3696980">More...</a><br/></td></tr>
<tr class="separator:a44383e622cd6f364a110d956f3696980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43475a025d8d857cd6ec425245ded34"><td class="memItemLeft" align="right" valign="top">virtual std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ad43475a025d8d857cd6ec425245ded34">opDetMappingSize</a> () const override</td></tr>
<tr class="memdesc:ad43475a025d8d857cd6ec425245ded34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected number of mappings of optical detector into library index.  <a href="#ad43475a025d8d857cd6ec425245ded34">More...</a><br/></td></tr>
<tr class="separator:ad43475a025d8d857cd6ec425245ded34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f39118f8fc6f1724c7caac5527a0e8"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> <br class="typebreak"/>
const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8">libraryIndicesToOpDets</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const override</td></tr>
<tr class="memdesc:aa5f39118f8fc6f1724c7caac5527a0e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of identifiers of optical detectors for each library index, for the library appropriate around <code>location</code>  <a href="#aa5f39118f8fc6f1724c7caac5527a0e8">More...</a><br/></td></tr>
<tr class="separator:aa5f39118f8fc6f1724c7caac5527a0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acbb47f3c62ad3f2a23697f6fe3a05a"><td class="memItemLeft" align="right" valign="top">virtual std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a3acbb47f3c62ad3f2a23697f6fe3a05a">libraryMappingSize</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const override</td></tr>
<tr class="memdesc:a3acbb47f3c62ad3f2a23697f6fe3a05a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected size of the mapping from library to optical detectors.  <a href="#a3acbb47f3c62ad3f2a23697f6fe3a05a">More...</a><br/></td></tr>
<tr class="separator:a3acbb47f3c62ad3f2a23697f6fe3a05a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classphot_1_1IPhotonMappingTransformations"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classphot_1_1IPhotonMappingTransformations')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html">phot::IPhotonMappingTransformations</a></td></tr>
<tr class="memitem:a2507e88faca7e9fa6019b214f9cd1781 inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a2507e88faca7e9fa6019b214f9cd1781">~IPhotonMappingTransformations</a> ()=<a class="el" href="../../de/d36/crtt0matchingalg__sbnd_8fcl.html#a6c2384a9e3f7a8c21ae6f762a8ee0ece">default</a></td></tr>
<tr class="separator:a2507e88faca7e9fa6019b214f9cd1781 inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ed0b05cd8d3cea8f5952b549df868d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:ad3ed0b05cd8d3cea8f5952b549df868d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ad3ed0b05cd8d3cea8f5952b549df868d">applyOpDetMapping</a> (<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;opDetToLibraryMap, Coll &amp;&amp;<a class="el" href="../../d6/dda/condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="../../dd/da4/group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue) const -&gt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt; Coll &gt;</td></tr>
<tr class="separator:ad3ed0b05cd8d3cea8f5952b549df868d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a61d5974efeedb30784a8cbff59e04d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:a2a61d5974efeedb30784a8cbff59e04d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt; Coll &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a2a61d5974efeedb30784a8cbff59e04d">applyOpDetMapping</a> (<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;opDetToLibraryMap, Coll &amp;&amp;<a class="el" href="../../d6/dda/condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="../../dd/da4/group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue={}) const </td></tr>
<tr class="memdesc:a2a61d5974efeedb30784a8cbff59e04d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaps a collection indexed by library index into one indexed by optical detector IDs.  <a href="#a2a61d5974efeedb30784a8cbff59e04d">More...</a><br/></td></tr>
<tr class="separator:a2a61d5974efeedb30784a8cbff59e04d inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dcb61501eed216ef646b1db689c744e inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:a3dcb61501eed216ef646b1db689c744e inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a3dcb61501eed216ef646b1db689c744e">applyOpDetMapping</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, Coll &amp;&amp;<a class="el" href="../../d6/dda/condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="../../dd/da4/group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue={}) const </td></tr>
<tr class="memdesc:a3dcb61501eed216ef646b1db689c744e inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaps a collection indexed by library index into one indexed by optical detector IDs according to the mapping at <code>location</code>.  <a href="#a3dcb61501eed216ef646b1db689c744e">More...</a><br/></td></tr>
<tr class="separator:a3dcb61501eed216ef646b1db689c744e inherit pub_methods_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a65373b7c8b3c27f9920de8b5434b885a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">whichCryostat</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;point) const </td></tr>
<tr class="memdesc:a65373b7c8b3c27f9920de8b5434b885a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns which cryostat better contain <code>point</code>. Never invalid so far.  <a href="#a65373b7c8b3c27f9920de8b5434b885a">More...</a><br/></td></tr>
<tr class="separator:a65373b7c8b3c27f9920de8b5434b885a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920b24ebad3cba8664c7d2468b45cc21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">opDetsToLibraryIndicesImpl</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const </td></tr>
<tr class="separator:a920b24ebad3cba8664c7d2468b45cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d252073b979c4fa1e7f4c977d0a53d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a9d252073b979c4fa1e7f4c977d0a53d3">libraryIndicesToOpDetsImpl</a> (<a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const </td></tr>
<tr class="separator:a9d252073b979c4fa1e7f4c977d0a53d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb007ad6f6eeb3a211bccca28e733211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afb007ad6f6eeb3a211bccca28e733211">prepareGeometryMapping</a> ()</td></tr>
<tr class="separator:afb007ad6f6eeb3a211bccca28e733211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844960932c077b162c81148d013450b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a844960932c077b162c81148d013450b9">prepareLibraryMappings</a> (<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const &amp;libraryIndices)</td></tr>
<tr class="separator:a844960932c077b162c81148d013450b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601493229b667ed4f42188fcc07ce2f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a601493229b667ed4f42188fcc07ce2f0">prepareMappings</a> (<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const &amp;libraryIndices)</td></tr>
<tr class="memdesc:a601493229b667ed4f42188fcc07ce2f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts the necessary information for mapping from the geometry.  <a href="#a601493229b667ed4f42188fcc07ce2f0">More...</a><br/></td></tr>
<tr class="separator:a601493229b667ed4f42188fcc07ce2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7855afbab38a4b6932b9d8e574abd5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa7855afbab38a4b6932b9d8e574abd5e">dumpMapping</a> () const </td></tr>
<tr class="memdesc:aa7855afbab38a4b6932b9d8e574abd5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the current mapping information into the console. Debug stuff.  <a href="#aa7855afbab38a4b6932b9d8e574abd5e">More...</a><br/></td></tr>
<tr class="separator:aa7855afbab38a4b6932b9d8e574abd5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:acd973d3737d61ad30e1e03ef9d3ab2d0"><td class="memTemplParams" colspan="2">template&lt;typename OutputIndex , typename InputIndex , template&lt; typename...&gt; typename Container&gt; </td></tr>
<tr class="memitem:acd973d3737d61ad30e1e03ef9d3ab2d0"><td class="memTemplItemLeft" align="right" valign="top">static Container&lt; InputIndex &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#acd973d3737d61ad30e1e03ef9d3ab2d0">invertMapping</a> (Container&lt; OutputIndex &gt; const &amp;directMap, std::size_t size, InputIndex invalidIndex)</td></tr>
<tr class="memdesc:acd973d3737d61ad30e1e03ef9d3ab2d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inverts a given mapping.  <a href="#acd973d3737d61ad30e1e03ef9d3ab2d0">More...</a><br/></td></tr>
<tr class="separator:acd973d3737d61ad30e1e03ef9d3ab2d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:afc6c0a42c0b02206f4fbbdf79afff486"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afc6c0a42c0b02206f4fbbdf79afff486">fDumpMapping</a> = false</td></tr>
<tr class="memdesc:afc6c0a42c0b02206f4fbbdf79afff486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to dump mapping on initialization.  <a href="#afc6c0a42c0b02206f4fbbdf79afff486">More...</a><br/></td></tr>
<tr class="separator:afc6c0a42c0b02206f4fbbdf79afff486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72413fc0f8428f45de2e862b1d6cebf6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html">geo::GeometryCore</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a> = nullptr</td></tr>
<tr class="memdesc:a72413fc0f8428f45de2e862b1d6cebf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detector geometry service provider. Not really used.  <a href="#a72413fc0f8428f45de2e862b1d6cebf6">More...</a><br/></td></tr>
<tr class="separator:a72413fc0f8428f45de2e862b1d6cebf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d03e7b3a006d3923c32b5f64557f3f8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">fTranslations</a></td></tr>
<tr class="memdesc:a1d03e7b3a006d3923c32b5f64557f3f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation of the point.  <a href="#a1d03e7b3a006d3923c32b5f64557f3f8">More...</a><br/></td></tr>
<tr class="separator:a1d03e7b3a006d3923c32b5f64557f3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b38159e659deabb4edece9e6643da40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d23/namespacegeo.html#a63f4a2aa11d6bebb2b018bf037aef79a">geo::Length_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">fSwitchPoint</a></td></tr>
<tr class="memdesc:a1b38159e659deabb4edece9e6643da40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch coordinate on x axis [cm].  <a href="#a1b38159e659deabb4edece9e6643da40">More...</a><br/></td></tr>
<tr class="separator:a1b38159e659deabb4edece9e6643da40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d61189f6f669465610c027b5c44e54"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">fNOpDetChannels</a></td></tr>
<tr class="separator:ab3d61189f6f669465610c027b5c44e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada586b2bdd333f0b9cb1d0ad4fa873f0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">fChannelShifts</a></td></tr>
<tr class="memdesc:ada586b2bdd333f0b9cb1d0ad4fa873f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amount of channel number shifting indexed by cryostat. Not really used.  <a href="#ada586b2bdd333f0b9cb1d0ad4fa873f0">More...</a><br/></td></tr>
<tr class="separator:ada586b2bdd333f0b9cb1d0ad4fa873f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1d27963efc0aad40eaa3669c361cc3"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a></td></tr>
<tr class="memdesc:a4f1d27963efc0aad40eaa3669c361cc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library to detector channel mappings, indexed by cryostat number.  <a href="#a4f1d27963efc0aad40eaa3669c361cc3">More...</a><br/></td></tr>
<tr class="separator:a4f1d27963efc0aad40eaa3669c361cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d53cf313f3b2f0cb1ddd6616d9550f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a></td></tr>
<tr class="memdesc:a2d53cf313f3b2f0cb1ddd6616d9550f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A library-to-detector mapping for invalid points.  <a href="#a2d53cf313f3b2f0cb1ddd6616d9550f4">More...</a><br/></td></tr>
<tr class="separator:a2d53cf313f3b2f0cb1ddd6616d9550f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0af50041fd9846705ccda5d81da06726"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">fOpDetToLibraryIndexMaps</a></td></tr>
<tr class="memdesc:a0af50041fd9846705ccda5d81da06726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detector channel to library mappings, indexed by cryostat number.  <a href="#a0af50041fd9846705ccda5d81da06726">More...</a><br/></td></tr>
<tr class="separator:a0af50041fd9846705ccda5d81da06726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa700e37570b88ce6cd20a4f1bb9f11a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a></td></tr>
<tr class="memdesc:aa700e37570b88ce6cd20a4f1bb9f11a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">A detector-to-library mapping for invalid points.  <a href="#aa700e37570b88ce6cd20a4f1bb9f11a2">More...</a><br/></td></tr>
<tr class="separator:aa700e37570b88ce6cd20a4f1bb9f11a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classphot_1_1IPhotonMappingTransformations')"><img src="../../closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html">phot::IPhotonMappingTransformations</a></td></tr>
<tr class="memitem:ae40cb9cf601d9fec5382200a71a2fd63 inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae40cb9cf601d9fec5382200a71a2fd63">InvalidOpDetID</a> = std::numeric_limits&lt;<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&gt;::max()</td></tr>
<tr class="memdesc:ae40cb9cf601d9fec5382200a71a2fd63 inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value used to identify an invalid optical detector.  <a href="#ae40cb9cf601d9fec5382200a71a2fd63">More...</a><br/></td></tr>
<tr class="separator:ae40cb9cf601d9fec5382200a71a2fd63 inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e0fb1c8e5aa956c428ff08414dab0e inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#aa7e0fb1c8e5aa956c428ff08414dab0e">InvalidLibraryIndex</a> = std::numeric_limits&lt;<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&gt;::max()</td></tr>
<tr class="memdesc:aa7e0fb1c8e5aa956c428ff08414dab0e inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value used for an invalid library index.  <a href="#aa7e0fb1c8e5aa956c428ff08414dab0e">More...</a><br/></td></tr>
<tr class="separator:aa7e0fb1c8e5aa956c428ff08414dab0e inherit pub_static_attribs_classphot_1_1IPhotonMappingTransformations"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Photon library mapping for ICARUS geometry. </p>
<p>This is an implementation of <code>phot::IPhotonMappingTransformation</code> interface to exploit ICARUS detector symmetries.</p>
<p>The current implementation only exploits the fact that the two cryostats are identical, and ignores the symmetry respect to the cathode within each of the cryostats.</p>
<p>The required library is expected to cover the first 180 PMT channels (the ones pertaining the first cryostat, <code>C:0</code>), and the full volume of the TPC.</p>
<p>When requested a point in the first cryostat (<code>C:0</code>), the point is used directly in the visibility library to get visibility on PMT channels 0 to 179 (the lower half). The mapping then maps the remaining PMT channels (180 to 359) to be invalid and with default value of <code>0</code>.</p>
<p>When requested a point in the other cryostat (<code>C:1</code>), the point is translated into the first one to get visibility of PMT channels 0 to 179 (the lower half). The mapping then translates those channels into the range 180 to 359, and maps the remaining PMT channels (0 to 179) to be invalid and with default value of <code>0</code>.</p>
<p>Note that the content of the library for channels 180 to 359 is always ignored, and it may well be absent. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00058">58</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a1d997c344ec2633db1aabfbc9a6e709b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d997c344ec2633db1aabfbc9a6e709b">phot::ICARUSPhotonMappingTransformations::Parameters</a> =  art::ToolConfigTable&lt;<a class="el" href="../../de/db4/structphot_1_1ICARUSPhotonMappingTransformations_1_1Config.html">Config</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00082">82</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a43c1737b2171326010b5320cb13a4e7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phot::ICARUSPhotonMappingTransformations::ICARUSPhotonMappingTransformations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/db4/structphot_1_1ICARUSPhotonMappingTransformations_1_1Config.html">Config</a> const &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00031">31</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  : <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afc6c0a42c0b02206f4fbbdf79afff486">fDumpMapping</a>(config.DumpMapping())</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  , <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>(lar::providerFrom&lt;geo::Geometry&gt;())</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  , <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">fNOpDetChannels</a>(<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>? <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a00e36e8597fcf5d5059e4768f42f5362">NOpDets</a>(): 0)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> libraryIndices;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span> (!config.CryostatChannelRemap(libraryIndices)) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    assert(<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">fNOpDetChannels</a> &gt; 0U); <span class="comment">// if no mapping is specified, we need to know</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nCryoChannels = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">Cryostat</a>(0U).<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html#a878dc414182852e45470c31341c1ad00">NOpDet</a>();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    libraryIndices.resize(nCryoChannels);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    std::iota(libraryIndices.begin(), libraryIndices.end(), 0U);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a601493229b667ed4f42188fcc07ce2f0">prepareMappings</a>(libraryIndices);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::ICARUSPhotonMappingTransformations()</span></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_afc6c0a42c0b02206f4fbbdf79afff486"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afc6c0a42c0b02206f4fbbdf79afff486">phot::ICARUSPhotonMappingTransformations::fDumpMapping</a></div><div class="ttdeci">bool fDumpMapping</div><div class="ttdoc">Whether to dump mapping on initialization. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00226">ICARUSPhotonMappingTransformations.h:226</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a4fc7bfd4e3413fb5c25ca3c72906acac"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">geo::GeometryCore::Cryostat</a></div><div class="ttdeci">CryostatGeo const &amp; Cryostat(geo::CryostatID const &amp;cryoid) const </div><div class="ttdoc">Returns the specified cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00321">GeometryCore.cxx:321</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_a314ea62c58d853ad59c2ec90636eafb7"><div class="ttname"><a href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">phot::IPhotonMappingTransformations::LibraryIndexToOpDetMap</a></div><div class="ttdeci">std::vector&lt; OpDetID_t &gt; LibraryIndexToOpDetMap</div><div class="ttdoc">Type describing the mapping of optical detectors into library indices. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d50/IPhotonMappingTransformations_8h_source.html#l00141">IPhotonMappingTransformations.h:141</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a72413fc0f8428f45de2e862b1d6cebf6"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">phot::ICARUSPhotonMappingTransformations::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdoc">Detector geometry service provider. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00233">ICARUSPhotonMappingTransformations.h:233</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a00e36e8597fcf5d5059e4768f42f5362"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a00e36e8597fcf5d5059e4768f42f5362">geo::GeometryCore::NOpDets</a></div><div class="ttdeci">unsigned int NOpDets() const </div><div class="ttdoc">Number of OpDets in the whole detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00244">GeometryCore.cxx:244</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_ab3d61189f6f669465610c027b5c44e54"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">phot::ICARUSPhotonMappingTransformations::fNOpDetChannels</a></div><div class="ttdeci">unsigned int fNOpDetChannels</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00245">ICARUSPhotonMappingTransformations.h:245</a></div></div>
<div class="ttc" id="classgeo_1_1CryostatGeo_html_a878dc414182852e45470c31341c1ad00"><div class="ttname"><a href="../../de/da3/classgeo_1_1CryostatGeo.html#a878dc414182852e45470c31341c1ad00">geo::CryostatGeo::NOpDet</a></div><div class="ttdeci">unsigned int NOpDet() const </div><div class="ttdoc">Number of optical detectors in this TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/CryostatGeo_8h_source.html#l00361">CryostatGeo.h:361</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a601493229b667ed4f42188fcc07ce2f0"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a601493229b667ed4f42188fcc07ce2f0">phot::ICARUSPhotonMappingTransformations::prepareMappings</a></div><div class="ttdeci">void prepareMappings(LibraryIndexToOpDetMap const &amp;libraryIndices)</div><div class="ttdoc">Extracts the necessary information for mapping from the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00260">ICARUSPhotonMappingTransformations.cxx:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ade8c1322282ea258ea423442ad275cd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">phot::ICARUSPhotonMappingTransformations::ICARUSPhotonMappingTransformations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d997c344ec2633db1aabfbc9a6e709b">Parameters</a> const &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor: ignores the configuration. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00089">89</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      : <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a43c1737b2171326010b5320cb13a4e7e">ICARUSPhotonMappingTransformations</a>(config())</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      {}</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a43c1737b2171326010b5320cb13a4e7e"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a43c1737b2171326010b5320cb13a4e7e">phot::ICARUSPhotonMappingTransformations::ICARUSPhotonMappingTransformations</a></div><div class="ttdeci">ICARUSPhotonMappingTransformations(Config const &amp;config)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00031">ICARUSPhotonMappingTransformations.cxx:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adc542d50517909e2fa6b8b38c381005c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> phot::ICARUSPhotonMappingTransformations::detectorToLibrary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the representation within the library of a detector location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>position in world coordinates [cm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector expressing <code>location</code> in the library space</dd></dl>
<p>The returned vector is shifted as it were on the first cryostat.</p>
<p>No exception is ever thrown. </p>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ad8ccf8d8e4730cc0bbe89067368ed3ad">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00050">50</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a> onCryo = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">whichCryostat</a>(location);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> onCryo? location + <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">fTranslations</a>[onCryo.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">Cryostat</a>]: location;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::detectorToLibrary()</span></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1d03e7b3a006d3923c32b5f64557f3f8"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">phot::ICARUSPhotonMappingTransformations::fTranslations</a></div><div class="ttdeci">std::vector&lt; geo::Vector_t &gt; fTranslations</div><div class="ttdoc">Translation of the point. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00239">ICARUSPhotonMappingTransformations.h:239</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html_a2bfb744818e075d94be15dd18c950441"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">geo::CryostatID::Cryostat</a></div><div class="ttdeci">CryostatID_t Cryostat</div><div class="ttdoc">Index of cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00212">geo_types.h:212</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a65373b7c8b3c27f9920de8b5434b885a"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">phot::ICARUSPhotonMappingTransformations::whichCryostat</a></div><div class="ttdeci">geo::CryostatID whichCryostat(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns which cryostat better contain point. Never invalid so far. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00262">ICARUSPhotonMappingTransformations.h:262</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a></div><div class="ttdoc">The data type to uniquely identify a cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00190">geo_types.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7855afbab38a4b6932b9d8e574abd5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phot::ICARUSPhotonMappingTransformations::dumpMapping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the current mapping information into the console. Debug stuff. </p>

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00315">315</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                                               {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  mf::LogInfo log(<span class="stringliteral">&quot;ICARUSPhotonMappingTransformations&quot;</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  log &lt;&lt; <span class="stringliteral">&quot;ICARUSPhotonMappingTransformations mapping&quot;</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  log &lt;&lt; <span class="stringliteral">&quot;\nMapping of geometry: &#39;&quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a42ebac075e48c50ffd72ca2e41b677c0">DetectorName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;:&quot;</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;\n  - &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#ab4691c2dc44983f6082defa5a34cb001">Ncryostats</a>() &lt;&lt; <span class="stringliteral">&quot; cryostats&quot;</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;\n  - optical channels: &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">fNOpDetChannels</a></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;\n  - maximum optical detector channel number: &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a07e176f3ff3f93b46c19fffdddbff72b">MaxOpChannel</a>()</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    ;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  log &lt;&lt; <span class="stringliteral">&quot;\nThe switch point is at x=&quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">fSwitchPoint</a> &lt;&lt; <span class="stringliteral">&quot; cm.&quot;</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PageBreak = 12;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; cryo: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">IterateCryostats</a>()) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> c = cryo.ID().Cryostat;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; cryo.ID() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n  * optical detectors:        &quot;</span> &lt;&lt; cryo.NOpDet()</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n  * channel -&gt; library shift: &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">fChannelShifts</a>[c]</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n  * translation:              &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">fTranslations</a>[c];</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pager;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// print library to detector mapping</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; libOpDetIDmap = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>[c];</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    log</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n  * mapping [library index @&quot;</span> &lt;&lt; cryo.ID()</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;] =&gt; [optical detector] (&quot;</span> &lt;&lt; libOpDetIDmap.size()</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; entries):&quot;</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      ;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    pager = PageBreak;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [ i, opDetID ]: <a class="code" href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a>(libOpDetIDmap)) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (++pager &gt;= PageBreak) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        pager = 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        log &lt;&lt; <span class="stringliteral">&quot;\n    &quot;</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot;  [&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] =&gt; [&quot;</span> &lt;&lt; channelIndex(opDetID) &lt;&lt; <span class="stringliteral">&quot;];&quot;</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    } <span class="comment">// for</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// print detector to library mapping</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; opDetLibMap = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">fOpDetToLibraryIndexMaps</a>[c];</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    pager = PageBreak;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    log</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n  * mapping [optical detector] =&gt; [library index @&quot;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        &lt;&lt; cryo.ID() &lt;&lt; <span class="stringliteral">&quot;] (&quot;</span> &lt;&lt; opDetLibMap.size() &lt;&lt; <span class="stringliteral">&quot; entries):&quot;</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      ;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    pager = PageBreak;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; opDetLibMap.size(); ++i) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> (++pager &gt;= PageBreak) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        pager = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        log &lt;&lt; <span class="stringliteral">&quot;\n    &quot;</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot;  [&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] =&gt; [&quot;</span> &lt;&lt; libraryIndex(opDetLibMap[i]) &lt;&lt; <span class="stringliteral">&quot;];&quot;</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  } <span class="comment">// for cryostats</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\nMapping [library index] =&gt; [no optical detector] (&quot;</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>.size() &lt;&lt; <span class="stringliteral">&quot; entries):&quot;</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pager = PageBreak;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>.size(); ++i) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (++pager &gt;= PageBreak) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        pager = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        log &lt;&lt; <span class="stringliteral">&quot;\n    &quot;</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot;  [&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] =&gt; [&quot;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        &lt;&lt; libraryIndex(<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>[i]) &lt;&lt; <span class="stringliteral">&quot;];&quot;</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    } <span class="comment">// for</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  } <span class="comment">// anonymous scope block</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\nMapping [optical detector] =&gt; [no library] (&quot;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>.size() &lt;&lt; <span class="stringliteral">&quot; entries):&quot;</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pager = PageBreak;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>.size(); ++i) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">if</span> (++pager &gt;= PageBreak) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        pager = 0;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        log &lt;&lt; <span class="stringliteral">&quot;\n    &quot;</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      log &lt;&lt; <span class="stringliteral">&quot;  [&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] =&gt; [&quot;</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        &lt;&lt; channelIndex(<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>[i]) &lt;&lt; <span class="stringliteral">&quot;];&quot;</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    } <span class="comment">// for</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    log &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  } <span class="comment">// // anonymous scope block</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::dumpMapping()</span></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a4f1d27963efc0aad40eaa3669c361cc3"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">phot::ICARUSPhotonMappingTransformations::fLibraryIndexToOpDetMaps</a></div><div class="ttdeci">std::vector&lt; LibraryIndexToOpDetMap &gt; fLibraryIndexToOpDetMaps</div><div class="ttdoc">Library to detector channel mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00249">ICARUSPhotonMappingTransformations.h:249</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a2d53cf313f3b2f0cb1ddd6616d9550f4"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">phot::ICARUSPhotonMappingTransformations::fInvalidLibraryIndexToOpDetMap</a></div><div class="ttdeci">LibraryIndexToOpDetMap fInvalidLibraryIndexToOpDetMap</div><div class="ttdoc">A library-to-detector mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00251">ICARUSPhotonMappingTransformations.h:251</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1d03e7b3a006d3923c32b5f64557f3f8"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">phot::ICARUSPhotonMappingTransformations::fTranslations</a></div><div class="ttdeci">std::vector&lt; geo::Vector_t &gt; fTranslations</div><div class="ttdoc">Translation of the point. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00239">ICARUSPhotonMappingTransformations.h:239</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_ada586b2bdd333f0b9cb1d0ad4fa873f0"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">phot::ICARUSPhotonMappingTransformations::fChannelShifts</a></div><div class="ttdeci">std::vector&lt; int &gt; fChannelShifts</div><div class="ttdoc">Amount of channel number shifting indexed by cryostat. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00247">ICARUSPhotonMappingTransformations.h:247</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_ab4691c2dc44983f6082defa5a34cb001"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#ab4691c2dc44983f6082defa5a34cb001">geo::GeometryCore::Ncryostats</a></div><div class="ttdeci">unsigned int Ncryostats() const </div><div class="ttdoc">Returns the number of cryostats in the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02002">GeometryCore.h:2002</a></div></div>
<div class="ttc" id="namespaceutil_html_af0615b7538ff948ea65d5206a23c84f2"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#af0615b7538ff948ea65d5206a23c84f2">util::enumerate</a></div><div class="ttdeci">auto enumerate(Iterables &amp;&amp;...iterables)</div><div class="ttdoc">Range-for loop helper tracking the number of iteration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/enumerate_8h_source.html#l00069">enumerate.h:69</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_aa700e37570b88ce6cd20a4f1bb9f11a2"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">phot::ICARUSPhotonMappingTransformations::fInvalidOpDetToLibraryIndexMap</a></div><div class="ttdeci">OpDetToLibraryIndexMap fInvalidOpDetToLibraryIndexMap</div><div class="ttdoc">A detector-to-library mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00255">ICARUSPhotonMappingTransformations.h:255</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a42ebac075e48c50ffd72ca2e41b677c0"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a42ebac075e48c50ffd72ca2e41b677c0">geo::GeometryCore::DetectorName</a></div><div class="ttdeci">std::string DetectorName() const </div><div class="ttdoc">Returns a string with the name of the detector, as configured. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l01769">GeometryCore.h:1769</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a0af50041fd9846705ccda5d81da06726"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">phot::ICARUSPhotonMappingTransformations::fOpDetToLibraryIndexMaps</a></div><div class="ttdeci">std::vector&lt; OpDetToLibraryIndexMap &gt; fOpDetToLibraryIndexMaps</div><div class="ttdoc">Detector channel to library mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00253">ICARUSPhotonMappingTransformations.h:253</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1b38159e659deabb4edece9e6643da40"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">phot::ICARUSPhotonMappingTransformations::fSwitchPoint</a></div><div class="ttdeci">geo::Length_t fSwitchPoint</div><div class="ttdoc">Switch coordinate on x axis [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00240">ICARUSPhotonMappingTransformations.h:240</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a07e176f3ff3f93b46c19fffdddbff72b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a07e176f3ff3f93b46c19fffdddbff72b">geo::GeometryCore::MaxOpChannel</a></div><div class="ttdeci">unsigned int MaxOpChannel() const </div><div class="ttdoc">Largest optical channel number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00259">GeometryCore.cxx:259</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a72413fc0f8428f45de2e862b1d6cebf6"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">phot::ICARUSPhotonMappingTransformations::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdoc">Detector geometry service provider. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00233">ICARUSPhotonMappingTransformations.h:233</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6a80d135e7146eedd7c40fb23864aff3"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">geo::GeometryCore::IterateCryostats</a></div><div class="ttdeci">IteratorBox&lt; cryostat_iterator,&amp;GeometryCore::begin_cryostat,&amp;GeometryCore::end_cryostat &gt; IterateCryostats() const </div><div class="ttdoc">Enables ranged-for loops on all cryostats of the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02206">GeometryCore.h:2206</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_ab3d61189f6f669465610c027b5c44e54"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ab3d61189f6f669465610c027b5c44e54">phot::ICARUSPhotonMappingTransformations::fNOpDetChannels</a></div><div class="ttdeci">unsigned int fNOpDetChannels</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00245">ICARUSPhotonMappingTransformations.h:245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acd973d3737d61ad30e1e03ef9d3ab2d0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OutputIndex , typename InputIndex , template&lt; typename...&gt; typename Container&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Container&lt;InputIndex&gt; phot::ICARUSPhotonMappingTransformations::invertMapping </td>
          <td>(</td>
          <td class="paramtype">Container&lt; OutputIndex &gt; const &amp;&#160;</td>
          <td class="paramname"><em>directMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputIndex&#160;</td>
          <td class="paramname"><em>invalidIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inverts a given mapping. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">OutputIndex</td><td>the output index of the mapping to invert </td></tr>
    <tr><td class="paramname">IndexIndex</td><td>the input index of the mapping to invert </td></tr>
    <tr><td class="paramname">Container</td><td>container used for the mapping (be it <code>std::vector</code>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directMap</td><td>the mapping (input index to output index) to be inverted </td></tr>
    <tr><td class="paramname">size</td><td>the total number of output indices (some may be not mapped) </td></tr>
    <tr><td class="paramname">invalidIndex</td><td>input index to associate to unmapped output indices </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a mapping (output index to input index) reversing <code>directMap</code></dd></dl>
<p>The resulting, "inverse" mapping has exactly <code>size</code> entries. If the input mapping maps out beyond that, those indices are not mapped back. </p>

</div>
</div>
<a class="anchor" id="a585e314d4b27d2ba8413ec9c84ad7291"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OutputIndex , typename InputIndex , template&lt; typename...&gt; typename Container&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto phot::ICARUSPhotonMappingTransformations::invertMapping </td>
          <td>(</td>
          <td class="paramtype">Container&lt; OutputIndex &gt; const &amp;&#160;</td>
          <td class="paramname"><em>directMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputIndex&#160;</td>
          <td class="paramname"><em>invalidIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; Container&lt;InputIndex&gt; </td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inverts a given mapping. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">OutputIndex</td><td>the output index of the mapping to invert </td></tr>
    <tr><td class="paramname">IndexIndex</td><td>the input index of the mapping to invert </td></tr>
    <tr><td class="paramname">Container</td><td>type of container used for the mapping (be it <code>std::vector</code>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directMap</td><td>the mapping (input index to output index) to be inverted </td></tr>
    <tr><td class="paramname">size</td><td>the total number of output indices (some may be not mapped) </td></tr>
    <tr><td class="paramname">invalidIndex</td><td>the input index to associate to unmapped output indices </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a mapping (output index to input index) reversing <code>directMap</code></dd></dl>
<p>The resulting, "inverse" mapping has exactly <code>size</code> entries. If the input mapping maps out beyond that, those indices are not mapped back. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00332">332</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                           {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  OutputIndex <span class="keyword">const</span> endOutputIndex = <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  Container&lt;InputIndex&gt; inverseMap(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size</a>, invalidIndex);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">for</span> (std::size_t i = 0U; i &lt; directMap.size(); ++i) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    OutputIndex o = directMap[i];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (o &lt; endOutputIndex) inverseMap[o] = i;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">return</span> inverseMap;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_aaae74cf315284bc0f44c2e050c119781"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">icarus::ns::util::size</a></div><div class="ttdeci">std::size_t size(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/FixedBins_8h_source.html#l00561">FixedBins.h:561</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a52663cbda87fa69209240d778940a98b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> phot::ICARUSPhotonMappingTransformations::libraryIndexToOpDet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td>
          <td class="paramname"><em>libIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the optical detector ID for the specified library index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>where the scintillation source is in world frame [cm] </td></tr>
    <tr><td class="paramname">libIndex</td><td>library index to be mapped </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>optical detector corresponding to <code>libIndex</code> (as used, e.g., in <code><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html#a03c3be304c290d57f8909c25e70cfd81" title="Returns the geo::OpDetGeo object for the given detector number. ">geo::GeometryCore::OpDetGeoFromOpDet()</a></code>), or <code>InvalidOpDetID</code> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if input library index can't be handled TODO not implemented this way (yet?) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ad544ae1d740230de5c98066ce7062822" title="Returns the library index for the specified optical detector. ">opDetToLibraryIndex()</a></code>, <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8" title="Returns a map of identifiers of optical detectors for each library index, for the library appropriate...">libraryIndicesToOpDets()</a></code> </dd></dl>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae74d60b4a6f1c4a7cd665858c8c0bb2e">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00145">145</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a9d252073b979c4fa1e7f4c977d0a53d3">libraryIndicesToOpDetsImpl</a>(location)[libIndex]; }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a9d252073b979c4fa1e7f4c977d0a53d3"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a9d252073b979c4fa1e7f4c977d0a53d3">phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDetsImpl</a></div><div class="ttdeci">LibraryIndexToOpDetMap const &amp; libraryIndicesToOpDetsImpl(geo::Point_t const &amp;location) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00069">ICARUSPhotonMappingTransformations.cxx:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5f39118f8fc6f1724c7caac5527a0e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const&amp; phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a map of identifiers of optical detectors for each library index, for the library appropriate around <code>location</code> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>where the scintillation source is in world frame [cm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>optical detector identifiers for all library indices </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code>, <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a52663cbda87fa69209240d778940a98b" title="Returns the optical detector ID for the specified library index. ">libraryIndexToOpDet()</a></code></dd></dl>
<p>We use this mapping when we have information from the visibility library appropriate for a source at the specified <code>location</code>: this information is addressed via a "library index" with the reduced range (i.e. 0 to 179) and we need to know which are the optical detector channels that visibility covers.</p>
<p>For ICARUS, this mapping is expected to be straightforward:</p>
<ul>
<li>[ 0, 179 ] =&gt; [ 0, 179 ] if <code>location</code> is in the first cryostat (C:0)</li>
<li>[ 0, 179 ] =&gt; [ 180, 359 ] if <code>location</code> is in the other one (C:1)</li>
</ul>
<p>The specified <code>location</code> is used to provide context in a similar fashion as <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#adc542d50517909e2fa6b8b38c381005c" title="Returns the representation within the library of a detector location. ">detectorToLibrary()</a></code> does. It can be used to choose the correct mapping among the available ones.</p>
<p>The returned value is a mapping object (see <code>LibraryIndexToOpDetMap</code> documentation for the interface). If a library index does not map to any optical detector in the library at <code>location</code> (which is unusual!), the optical detector ID corresponding to it is <code>InvalidOpDetID</code>. </p>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00199">199</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a9d252073b979c4fa1e7f4c977d0a53d3">libraryIndicesToOpDetsImpl</a>(location); }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a9d252073b979c4fa1e7f4c977d0a53d3"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a9d252073b979c4fa1e7f4c977d0a53d3">phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDetsImpl</a></div><div class="ttdeci">LibraryIndexToOpDetMap const &amp; libraryIndicesToOpDetsImpl(geo::Point_t const &amp;location) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00069">ICARUSPhotonMappingTransformations.cxx:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9d252073b979c4fa1e7f4c977d0a53d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDetsImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00069">69</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a> onCryo = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">whichCryostat</a>(location);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> onCryo</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ? <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>[onCryo.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">Cryostat</a>]: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDetsImpl()</span></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a4f1d27963efc0aad40eaa3669c361cc3"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">phot::ICARUSPhotonMappingTransformations::fLibraryIndexToOpDetMaps</a></div><div class="ttdeci">std::vector&lt; LibraryIndexToOpDetMap &gt; fLibraryIndexToOpDetMaps</div><div class="ttdoc">Library to detector channel mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00249">ICARUSPhotonMappingTransformations.h:249</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a2d53cf313f3b2f0cb1ddd6616d9550f4"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">phot::ICARUSPhotonMappingTransformations::fInvalidLibraryIndexToOpDetMap</a></div><div class="ttdeci">LibraryIndexToOpDetMap fInvalidLibraryIndexToOpDetMap</div><div class="ttdoc">A library-to-detector mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00251">ICARUSPhotonMappingTransformations.h:251</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html_a2bfb744818e075d94be15dd18c950441"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">geo::CryostatID::Cryostat</a></div><div class="ttdeci">CryostatID_t Cryostat</div><div class="ttdoc">Index of cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00212">geo_types.h:212</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a65373b7c8b3c27f9920de8b5434b885a"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">phot::ICARUSPhotonMappingTransformations::whichCryostat</a></div><div class="ttdeci">geo::CryostatID whichCryostat(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns which cryostat better contain point. Never invalid so far. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00262">ICARUSPhotonMappingTransformations.h:262</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a></div><div class="ttdoc">The data type to uniquely identify a cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00190">geo_types.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3acbb47f3c62ad3f2a23697f6fe3a05a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::size_t phot::ICARUSPhotonMappingTransformations::libraryMappingSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expected size of the mapping from library to optical detectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>where the scintillation source is in world frame [cm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the expected size of the mapping from library indices to optical detectors </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8" title="Returns a map of identifiers of optical detectors for each library index, for the library appropriate...">libraryIndicesToOpDets()</a></code></dd></dl>
<p>This is effectively the size of the mapping returned by <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8" title="Returns a map of identifiers of optical detectors for each library index, for the library appropriate...">libraryIndicesToOpDets()</a></code>. It represents how many library indices are provided by the library for the specified <code>location</code>, that is <code>180</code>. </p>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a0a6842cb66a6c3dd95da821b92137ff1">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00214">214</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8">libraryIndicesToOpDets</a>(location).size();}</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_aa5f39118f8fc6f1724c7caac5527a0e8"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8">phot::ICARUSPhotonMappingTransformations::libraryIndicesToOpDets</a></div><div class="ttdeci">virtual LibraryIndexToOpDetMap const &amp; libraryIndicesToOpDets(geo::Point_t const &amp;location) const override</div><div class="ttdoc">Returns a map of identifiers of optical detectors for each library index, for the library appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00199">ICARUSPhotonMappingTransformations.h:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad43475a025d8d857cd6ec425245ded34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::size_t phot::ICARUSPhotonMappingTransformations::opDetMappingSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expected number of mappings of optical detector into library index. </p>
<dl class="section return"><dt>Returns</dt><dd>the expected size of the mapping of optical detectors </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code></dd></dl>
<p>This is effectively the number of available optical detectors, as well as the size of the mapping as returned by <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code>. </p>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a52d80dc2504dc87335a4f8fbdda02469">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00168">168</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">opDetsToLibraryIndicesImpl</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a6155d04d62c8bb11135137324ab26b5c">geo::origin</a>()).size(); }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a920b24ebad3cba8664c7d2468b45cc21"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndicesImpl</a></div><div class="ttdeci">OpDetToLibraryIndexMap const &amp; opDetsToLibraryIndicesImpl(geo::Point_t const &amp;location) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00059">ICARUSPhotonMappingTransformations.cxx:59</a></div></div>
<div class="ttc" id="namespacegeo_html_a6155d04d62c8bb11135137324ab26b5c"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a6155d04d62c8bb11135137324ab26b5c">geo::origin</a></div><div class="ttdeci">constexpr Point origin()</div><div class="ttdoc">Returns a origin position with a point of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00227">geo_vectors.h:227</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44383e622cd6f364a110d956f3696980"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const&amp; phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a map of library indices as function of optical detectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>where the scintillation source is in world frame [cm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>library indices for all optical detectors </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ad544ae1d740230de5c98066ce7062822" title="Returns the library index for the specified optical detector. ">opDetToLibraryIndex()</a></code>, <code><a class="el" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code> </dd></dl>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00156">156</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">opDetsToLibraryIndicesImpl</a>(location); }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a920b24ebad3cba8664c7d2468b45cc21"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndicesImpl</a></div><div class="ttdeci">OpDetToLibraryIndexMap const &amp; opDetsToLibraryIndicesImpl(geo::Point_t const &amp;location) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00059">ICARUSPhotonMappingTransformations.cxx:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a920b24ebad3cba8664c7d2468b45cc21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndicesImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00059">59</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a> onCryo = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">whichCryostat</a>(location);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> onCryo</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ? <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">fOpDetToLibraryIndexMaps</a>[onCryo.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">Cryostat</a>]: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndicesImpl()</span></div>
<div class="ttc" id="structgeo_1_1CryostatID_html_a2bfb744818e075d94be15dd18c950441"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">geo::CryostatID::Cryostat</a></div><div class="ttdeci">CryostatID_t Cryostat</div><div class="ttdoc">Index of cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00212">geo_types.h:212</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_aa700e37570b88ce6cd20a4f1bb9f11a2"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">phot::ICARUSPhotonMappingTransformations::fInvalidOpDetToLibraryIndexMap</a></div><div class="ttdeci">OpDetToLibraryIndexMap fInvalidOpDetToLibraryIndexMap</div><div class="ttdoc">A detector-to-library mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00255">ICARUSPhotonMappingTransformations.h:255</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a0af50041fd9846705ccda5d81da06726"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">phot::ICARUSPhotonMappingTransformations::fOpDetToLibraryIndexMaps</a></div><div class="ttdeci">std::vector&lt; OpDetToLibraryIndexMap &gt; fOpDetToLibraryIndexMaps</div><div class="ttdoc">Detector channel to library mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00253">ICARUSPhotonMappingTransformations.h:253</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a65373b7c8b3c27f9920de8b5434b885a"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a65373b7c8b3c27f9920de8b5434b885a">phot::ICARUSPhotonMappingTransformations::whichCryostat</a></div><div class="ttdeci">geo::CryostatID whichCryostat(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns which cryostat better contain point. Never invalid so far. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00262">ICARUSPhotonMappingTransformations.h:262</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a></div><div class="ttdoc">The data type to uniquely identify a cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00190">geo_types.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad544ae1d740230de5c98066ce7062822"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> phot::ICARUSPhotonMappingTransformations::opDetToLibraryIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td>
          <td class="paramname"><em>opDetID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the library index for the specified optical detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>where the scintillation source is in world frame [cm] </td></tr>
    <tr><td class="paramname">opDetID</td><td>optical detector identifier (as used, e.g., in <code><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html#a03c3be304c290d57f8909c25e70cfd81" title="Returns the geo::OpDetGeo object for the given detector number. ">geo::GeometryCore::OpDetGeoFromOpDet()</a></code>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index corresponding to <code>opDetID</code>, or <code>InvalidLibraryIndex</code> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if input optical detector ID can't be handled TODO not implemented this way (yet?) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code>opDetFromLibrary()</code></dd></dl>
<p>The mapping reduces the optical detector ID to the corresponding one in the first cryostat. </p>

<p>Implements <a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ad3a11e0ae4aa027d74cdfa9933562572">phot::IPhotonMappingTransformations</a>.</p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00132">132</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">opDetsToLibraryIndicesImpl</a>(location)[opDetID]; }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a920b24ebad3cba8664c7d2468b45cc21"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a920b24ebad3cba8664c7d2468b45cc21">phot::ICARUSPhotonMappingTransformations::opDetsToLibraryIndicesImpl</a></div><div class="ttdeci">OpDetToLibraryIndexMap const &amp; opDetsToLibraryIndicesImpl(geo::Point_t const &amp;location) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00059">ICARUSPhotonMappingTransformations.cxx:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb007ad6f6eeb3a211bccca28e733211"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phot::ICARUSPhotonMappingTransformations::prepareGeometryMapping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00078">78</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                                                    {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">   * geometry transformation:</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">   * 1. determine the switch coordinate (on x axis) between cryostats</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">   * 2. determine the amount of shift required</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// (1) geometry transformation</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// (1.1) determine the switch coordinate (on x axis) between cryostats</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="../../d6/d23/namespacegeo.html#a63f4a2aa11d6bebb2b018bf037aef79a">geo::Length_t</a> <span class="keyword">const</span> C0endX = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">Cryostat</a>(0U).<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#ae141949f30631ded82199f4375c21b7e">MaxX</a>();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="../../d6/d23/namespacegeo.html#a63f4a2aa11d6bebb2b018bf037aef79a">geo::Length_t</a> <span class="keyword">const</span> C1startX = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">Cryostat</a>(1U).<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#afd042da19afb090ba80e93ee64d4dec5">MinX</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (C0endX &gt; C1startX) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="stringliteral">&quot;phot::ICARUSPhotonMappingTransformations::prepareGeometryMapping(): &quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="stringliteral">&quot;C:0 ends at x=&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(C0endX)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      + <span class="stringliteral">&quot;, C:1 starts at x=&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(C1startX)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      + <span class="stringliteral">&quot;... this algorithm does not understand this geometry.&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">fSwitchPoint</a> = (C0endX + C1startX) / 2.0; <span class="comment">// pick the middle point</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  MF_LOG_DEBUG(<span class="stringliteral">&quot;ICARUSPhotonMappingTransformations&quot;</span>)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Switching from cryostat 0 to 1 when x &gt; &quot;</span> &lt;&lt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">fSwitchPoint</a> &lt;&lt; <span class="stringliteral">&quot; cm&quot;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// (1.2) determine the amount of shift required</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <span class="keyword">const</span> refPoint = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">Cryostat</a>(0).<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html#a3daf1122f1ae6b162aa39585586eeb29">BoundingBox</a>().<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#adcb85d99c08984dc3e955c3417ad5954">Min</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html">geo::CryostatGeo</a> <span class="keyword">const</span>&amp; cryo: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">IterateCryostats</a>()) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">fTranslations</a>.push_back(refPoint - cryo.BoundingBox().Min());</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  } <span class="comment">// for all cryostats</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::prepareGeometryMapping()</span></div>
<div class="ttc" id="namespacegeo_html_a63f4a2aa11d6bebb2b018bf037aef79a"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a63f4a2aa11d6bebb2b018bf037aef79a">geo::Length_t</a></div><div class="ttdeci">double Length_t</div><div class="ttdoc">Type used for coordinates and distances. They are measured in centimeters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00137">geo_vectors.h:137</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1d03e7b3a006d3923c32b5f64557f3f8"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1d03e7b3a006d3923c32b5f64557f3f8">phot::ICARUSPhotonMappingTransformations::fTranslations</a></div><div class="ttdeci">std::vector&lt; geo::Vector_t &gt; fTranslations</div><div class="ttdoc">Translation of the point. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00239">ICARUSPhotonMappingTransformations.h:239</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_afd042da19afb090ba80e93ee64d4dec5"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#afd042da19afb090ba80e93ee64d4dec5">geo::BoxBoundedGeo::MinX</a></div><div class="ttdeci">double MinX() const </div><div class="ttdoc">Returns the world x coordinate of the start of the box. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00088">BoxBoundedGeo.h:88</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_ae141949f30631ded82199f4375c21b7e"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#ae141949f30631ded82199f4375c21b7e">geo::BoxBoundedGeo::MaxX</a></div><div class="ttdeci">double MaxX() const </div><div class="ttdoc">Returns the world x coordinate of the end of the box. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00091">BoxBoundedGeo.h:91</a></div></div>
<div class="ttc" id="classgeo_1_1CryostatGeo_html"><div class="ttname"><a href="../../de/da3/classgeo_1_1CryostatGeo.html">geo::CryostatGeo</a></div><div class="ttdoc">Geometry information for a single cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/CryostatGeo_8h_source.html#l00043">CryostatGeo.h:43</a></div></div>
<div class="ttc" id="classgeo_1_1CryostatGeo_html_a3daf1122f1ae6b162aa39585586eeb29"><div class="ttname"><a href="../../de/da3/classgeo_1_1CryostatGeo.html#a3daf1122f1ae6b162aa39585586eeb29">geo::CryostatGeo::BoundingBox</a></div><div class="ttdeci">geo::BoxBoundedGeo const &amp; BoundingBox() const </div><div class="ttdoc">Returns the bounding box of this cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/CryostatGeo_8h_source.html#l00128">CryostatGeo.h:128</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1b38159e659deabb4edece9e6643da40"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">phot::ICARUSPhotonMappingTransformations::fSwitchPoint</a></div><div class="ttdeci">geo::Length_t fSwitchPoint</div><div class="ttdoc">Switch coordinate on x axis [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00240">ICARUSPhotonMappingTransformations.h:240</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a4fc7bfd4e3413fb5c25ca3c72906acac"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">geo::GeometryCore::Cryostat</a></div><div class="ttdeci">CryostatGeo const &amp; Cryostat(geo::CryostatID const &amp;cryoid) const </div><div class="ttdoc">Returns the specified cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00321">GeometryCore.cxx:321</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_adcb85d99c08984dc3e955c3417ad5954"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#adcb85d99c08984dc3e955c3417ad5954">geo::BoxBoundedGeo::Min</a></div><div class="ttdeci">geo::Point_t Min() const </div><div class="ttdoc">Returns the corner point with the smallest coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00133">BoxBoundedGeo.h:133</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a72413fc0f8428f45de2e862b1d6cebf6"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">phot::ICARUSPhotonMappingTransformations::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdoc">Detector geometry service provider. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00233">ICARUSPhotonMappingTransformations.h:233</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6a80d135e7146eedd7c40fb23864aff3"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">geo::GeometryCore::IterateCryostats</a></div><div class="ttdeci">IteratorBox&lt; cryostat_iterator,&amp;GeometryCore::begin_cryostat,&amp;GeometryCore::end_cryostat &gt; IterateCryostats() const </div><div class="ttdoc">Enables ranged-for loops on all cryostats of the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02206">GeometryCore.h:2206</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00102">WindowPattern.h:102</a></div></div>
<div class="ttc" id="namespacegeo_html_a5a6f22c2aa9d0ccf6ca08bf2773a0541"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a></div><div class="ttdeci">ROOT::Math::PositionVector3D&lt; ROOT::Math::Cartesian3D&lt; double &gt;, ROOT::Math::GlobalCoordinateSystemTag &gt; Point_t</div><div class="ttdoc">Type for representation of position in physical 3D space. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00184">geo_vectors.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a844960932c077b162c81148d013450b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phot::ICARUSPhotonMappingTransformations::prepareLibraryMappings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const &amp;&#160;</td>
          <td class="paramname"><em>libraryIndices</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00116">116</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">   * 2. library transformation</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">   *    1. determine the range of PMT channels in the two cryostats</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">   *    2. determine the shift amount (hint: 180)</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">   *    3. fill the maps with the shift</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// (2) library transformation</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// (2.1) determine the range of PMT channels in the two cryostats</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">   * This algorithm is a bit cumbersome, but with the complications of optical</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">   * detector geometry in LArSoft (which are usually irrelevant for ICARUS)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">   * it&#39;s a safer way.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">   * In short: we test for each possible channel in which cryostat its optical</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">   * detector is, and extract ranges of channel numbers for each cryostat.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">   * In the end, the result is pretty much known:</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">   * 0-179 on C:0 and 180-359 for C:1.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  std::vector&lt;lar::util::MinMaxCollector&lt;OpDetID_t&gt;&gt; opDetChannelRangeByCryostat</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    (<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#ab4691c2dc44983f6082defa5a34cb001">Ncryostats</a>());</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html">lar::util::MinMaxCollector&lt;OpDetID_t&gt;</a> opDetChannelRange;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> maxOpChannel = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a07e176f3ff3f93b46c19fffdddbff72b">MaxOpChannel</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel = 0; channel &lt; maxOpChannel; ++channel) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../d7/d68/classgeo_1_1OpDetGeo.html">geo::OpDetGeo</a> <span class="keyword">const</span>&amp; opDet = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4ed940e72b58f91ab8c48aafc4a3a351">OpDetGeoFromOpChannel</a>(channel);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; opDetID = opDet.<a class="code" href="../../d7/d68/classgeo_1_1OpDetGeo.html#ae0ed198828aa0b7c0d2df5d4377f8b12">ID</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (opDetID.isValid) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      opDetChannelRange.add(<a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>(channel));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      opDetChannelRangeByCryostat[opDetID.Cryostat].add(<a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>(channel));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  } <span class="comment">// for all channels</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// (2.2) determine the shift amount (hint: 180)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">fChannelShifts</a>.clear();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html">geo::CryostatGeo</a> <span class="keyword">const</span>&amp; cryo: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">IterateCryostats</a>()) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// sanity checks</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a> <span class="keyword">const</span> cid = cryo.ID();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; channelRange = opDetChannelRangeByCryostat[cid.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">Cryostat</a>];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (!channelRange.has_data()) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="stringliteral">&quot;phot::ICARUSPhotonMappingTransformations::prepareLibraryMappings(): &quot;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        + cid.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a02d9b6fc6fb5098eaf6bf6850547d232">toString</a>() + <span class="stringliteral">&quot; ends up with no optical channels??&quot;</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> nChannels = channelRange.max() + 1 - channelRange.min();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) nChannels != cryo.NOpDet()) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="stringliteral">&quot;phot::ICARUSPhotonMappingTransformations::prepareLibraryMappings(): &quot;</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        + cid.<a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html#a02d9b6fc6fb5098eaf6bf6850547d232">toString</a>() + <span class="stringliteral">&quot; expected to have &quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(cryo.NOpDet()) + <span class="stringliteral">&quot; optical channels, we end up with &quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(nChannels) + <span class="stringliteral">&quot; (&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channelRange.min()) + <span class="stringliteral">&quot; - &quot;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(channelRange.max()) + <span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    } <span class="comment">// if</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// relative shift with respect to the first cryostat:</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">fChannelShifts</a>.push_back</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      (channelRange.min() - opDetChannelRangeByCryostat.front().min());</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  } <span class="comment">// for cryostats</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// (2.3) fill the maps with the shift</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// (2.3.1) std::vector&lt;LibraryIndexToOpDetMap&gt; fLibraryIndexToOpDetMaps</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">//         mapping library index =&gt; optical detector ID</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//         indexed by cryostat number of the source</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// </span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// For ICARUS, this mapping is expected to be straightforward:</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">//  * [ 0, 179 ] =&gt; [ 0, 179 ] if `location` is in the first cryostat (C:0)</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">//  * [ 0, 179 ] =&gt; [ 180, 359 ] if `location` is in the other one (C:1)</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>.clear();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html">geo::CryostatGeo</a> <span class="keyword">const</span>&amp; cryo: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">IterateCryostats</a>()) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// this is the library for sources in cryostat `cryo`;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// it is positioned at `cryo.ID().Cryostat` in `fLibOpDetIDmaps`;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// the library is expected to have only 180 entries,</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// one per optical detector within `cryo`</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> nChannels = cryo.NOpDet();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (libraryIndices.size() != nChannels) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="stringliteral">&quot;phot::ICARUSPhotonMappingTransformations::prepareLibraryMappings(): &quot;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="stringliteral">&quot;the internal mapping should cover &quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(nChannels)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        + <span class="stringliteral">&quot; channels but it covers &quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>(libraryIndices.size())</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        + <span class="stringliteral">&quot; instead.&quot;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> nFirst = <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">fChannelShifts</a>[cryo.ID().Cryostat];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> libraryIndexToOpDetMap { libraryIndices }; <span class="comment">// copy</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c: libraryIndexToOpDetMap) c += nFirst;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>.push_back(std::move(libraryIndexToOpDetMap));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  } <span class="comment">// for channel range</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// if the position is invalid, no library data is actually present,</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// and the mapping is moot; we choose the rank of this mootness to be the same</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// as the first valid mapping</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>.clear();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">fInvalidLibraryIndexToOpDetMap</a>.resize</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    (<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>.front().size(), <a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae40cb9cf601d9fec5382200a71a2fd63">InvalidOpDetID</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// (2.3.2) std::vector&lt;OpDetToLibraryIndexMap&gt; fOpDetToLibraryIndexMaps</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">//         mapping detector optical ID =&gt; library index</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">//         </span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// For ICARUS, this mapping is expected to be:</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">//  * if `location` is in the first cryostat (C:0):</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">//      * [ 0, 179 ]   =&gt; [ 0, 179 ]</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">//      * [ 180, 359 ] =&gt; invalid indices</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">//  * if `location` is in the second cryostat (C:1):</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">//      * [ 0, 179 ]   =&gt; invalid indices</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">//      * [ 180, 359 ] =&gt; [ 0, 179 ]</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// </span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">fOpDetToLibraryIndexMaps</a>.clear();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; libToOpDetMap: <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">fLibraryIndexToOpDetMaps</a>) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">fOpDetToLibraryIndexMaps</a>.push_back</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      (<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#acd973d3737d61ad30e1e03ef9d3ab2d0">invertMapping</a>(libToOpDetMap, maxOpChannel, <a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#aa7e0fb1c8e5aa956c428ff08414dab0e">InvalidLibraryIndex</a>));</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  } <span class="comment">// for each library mapping</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>.clear();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">fInvalidOpDetToLibraryIndexMap</a>.resize(maxOpChannel, <a class="code" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#aa7e0fb1c8e5aa956c428ff08414dab0e">InvalidLibraryIndex</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::prepareMappings()</span></div>
<div class="ttc" id="classgeo_1_1OpDetGeo_html"><div class="ttname"><a href="../../d7/d68/classgeo_1_1OpDetGeo.html">geo::OpDetGeo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d38/OpDetGeo_8h_source.html#l00043">OpDetGeo.h:43</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a4f1d27963efc0aad40eaa3669c361cc3"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a4f1d27963efc0aad40eaa3669c361cc3">phot::ICARUSPhotonMappingTransformations::fLibraryIndexToOpDetMaps</a></div><div class="ttdeci">std::vector&lt; LibraryIndexToOpDetMap &gt; fLibraryIndexToOpDetMaps</div><div class="ttdoc">Library to detector channel mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00249">ICARUSPhotonMappingTransformations.h:249</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a2d53cf313f3b2f0cb1ddd6616d9550f4"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a2d53cf313f3b2f0cb1ddd6616d9550f4">phot::ICARUSPhotonMappingTransformations::fInvalidLibraryIndexToOpDetMap</a></div><div class="ttdeci">LibraryIndexToOpDetMap fInvalidLibraryIndexToOpDetMap</div><div class="ttdoc">A library-to-detector mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00251">ICARUSPhotonMappingTransformations.h:251</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_ada586b2bdd333f0b9cb1d0ad4fa873f0"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#ada586b2bdd333f0b9cb1d0ad4fa873f0">phot::ICARUSPhotonMappingTransformations::fChannelShifts</a></div><div class="ttdeci">std::vector&lt; int &gt; fChannelShifts</div><div class="ttdoc">Amount of channel number shifting indexed by cryostat. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00247">ICARUSPhotonMappingTransformations.h:247</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html_a2bfb744818e075d94be15dd18c950441"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html#a2bfb744818e075d94be15dd18c950441">geo::CryostatID::Cryostat</a></div><div class="ttdeci">CryostatID_t Cryostat</div><div class="ttdoc">Index of cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00212">geo_types.h:212</a></div></div>
<div class="ttc" id="classgeo_1_1CryostatGeo_html"><div class="ttname"><a href="../../de/da3/classgeo_1_1CryostatGeo.html">geo::CryostatGeo</a></div><div class="ttdoc">Geometry information for a single cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/CryostatGeo_8h_source.html#l00043">CryostatGeo.h:43</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_ab4691c2dc44983f6082defa5a34cb001"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#ab4691c2dc44983f6082defa5a34cb001">geo::GeometryCore::Ncryostats</a></div><div class="ttdeci">unsigned int Ncryostats() const </div><div class="ttdoc">Returns the number of cryostats in the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02002">GeometryCore.h:2002</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_aa700e37570b88ce6cd20a4f1bb9f11a2"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa700e37570b88ce6cd20a4f1bb9f11a2">phot::ICARUSPhotonMappingTransformations::fInvalidOpDetToLibraryIndexMap</a></div><div class="ttdeci">OpDetToLibraryIndexMap fInvalidOpDetToLibraryIndexMap</div><div class="ttdoc">A detector-to-library mapping for invalid points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00255">ICARUSPhotonMappingTransformations.h:255</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1MinMaxCollector_html"><div class="ttname"><a href="../../de/dc6/classlar_1_1util_1_1MinMaxCollector.html">lar::util::MinMaxCollector</a></div><div class="ttdoc">Keeps track of the minimum and maximum value we observed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/StatCollector_8h_source.html#l00748">StatCollector.h:748</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_aa7e0fb1c8e5aa956c428ff08414dab0e"><div class="ttname"><a href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#aa7e0fb1c8e5aa956c428ff08414dab0e">phot::IPhotonMappingTransformations::InvalidLibraryIndex</a></div><div class="ttdeci">static constexpr LibraryIndex_t InvalidLibraryIndex</div><div class="ttdoc">Value used for an invalid library index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d50/IPhotonMappingTransformations_8h_source.html#l00193">IPhotonMappingTransformations.h:193</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a0af50041fd9846705ccda5d81da06726"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a0af50041fd9846705ccda5d81da06726">phot::ICARUSPhotonMappingTransformations::fOpDetToLibraryIndexMaps</a></div><div class="ttdeci">std::vector&lt; OpDetToLibraryIndexMap &gt; fOpDetToLibraryIndexMaps</div><div class="ttdoc">Detector channel to library mappings, indexed by cryostat number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00253">ICARUSPhotonMappingTransformations.h:253</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_ae40cb9cf601d9fec5382200a71a2fd63"><div class="ttname"><a href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae40cb9cf601d9fec5382200a71a2fd63">phot::IPhotonMappingTransformations::InvalidOpDetID</a></div><div class="ttdeci">static constexpr OpDetID_t InvalidOpDetID</div><div class="ttdoc">Value used to identify an invalid optical detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d50/IPhotonMappingTransformations_8h_source.html#l00185">IPhotonMappingTransformations.h:185</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html_a02d9b6fc6fb5098eaf6bf6850547d232"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html#a02d9b6fc6fb5098eaf6bf6850547d232">geo::CryostatID::toString</a></div><div class="ttdeci">std::string toString() const </div><div class="ttdoc">Human-readable representation of the cryostat ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00247">geo_types.h:247</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a07e176f3ff3f93b46c19fffdddbff72b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a07e176f3ff3f93b46c19fffdddbff72b">geo::GeometryCore::MaxOpChannel</a></div><div class="ttdeci">unsigned int MaxOpChannel() const </div><div class="ttdoc">Largest optical channel number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00259">GeometryCore.cxx:259</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_a314ea62c58d853ad59c2ec90636eafb7"><div class="ttname"><a href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">phot::IPhotonMappingTransformations::LibraryIndexToOpDetMap</a></div><div class="ttdeci">std::vector&lt; OpDetID_t &gt; LibraryIndexToOpDetMap</div><div class="ttdoc">Type describing the mapping of optical detectors into library indices. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d50/IPhotonMappingTransformations_8h_source.html#l00141">IPhotonMappingTransformations.h:141</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a72413fc0f8428f45de2e862b1d6cebf6"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a72413fc0f8428f45de2e862b1d6cebf6">phot::ICARUSPhotonMappingTransformations::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdoc">Detector geometry service provider. Not really used. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00233">ICARUSPhotonMappingTransformations.h:233</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6a80d135e7146eedd7c40fb23864aff3"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6a80d135e7146eedd7c40fb23864aff3">geo::GeometryCore::IterateCryostats</a></div><div class="ttdeci">IteratorBox&lt; cryostat_iterator,&amp;GeometryCore::begin_cryostat,&amp;GeometryCore::end_cryostat &gt; IterateCryostats() const </div><div class="ttdoc">Enables ranged-for loops on all cryostats of the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02206">GeometryCore.h:2206</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_adecfee9f922d0146508eca98b7abe276"><div class="ttname"><a href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">phot::IPhotonMappingTransformations::OpDetID_t</a></div><div class="ttdeci">int OpDetID_t</div><div class="ttdoc">Type describing a optical detector ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d50/IPhotonMappingTransformations_8h_source.html#l00123">IPhotonMappingTransformations.h:123</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00102">WindowPattern.h:102</a></div></div>
<div class="ttc" id="classgeo_1_1OpDetGeo_html_ae0ed198828aa0b7c0d2df5d4377f8b12"><div class="ttname"><a href="../../d7/d68/classgeo_1_1OpDetGeo.html#ae0ed198828aa0b7c0d2df5d4377f8b12">geo::OpDetGeo::ID</a></div><div class="ttdeci">geo::OpDetID const &amp; ID() const </div><div class="ttdoc">Returns the geometry ID of this optical detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d38/OpDetGeo_8h_source.html#l00072">OpDetGeo.h:72</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_acd973d3737d61ad30e1e03ef9d3ab2d0"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#acd973d3737d61ad30e1e03ef9d3ab2d0">phot::ICARUSPhotonMappingTransformations::invertMapping</a></div><div class="ttdeci">static Container&lt; InputIndex &gt; invertMapping(Container&lt; OutputIndex &gt; const &amp;directMap, std::size_t size, InputIndex invalidIndex)</div><div class="ttdoc">Inverts a given mapping. </div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a4ed940e72b58f91ab8c48aafc4a3a351"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a4ed940e72b58f91ab8c48aafc4a3a351">geo::GeometryCore::OpDetGeoFromOpChannel</a></div><div class="ttdeci">OpDetGeo const &amp; OpDetGeoFromOpChannel(unsigned int OpChannel) const </div><div class="ttdoc">Returns the geo::OpDetGeo object for the given channel number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01913">GeometryCore.cxx:1913</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a></div><div class="ttdoc">The data type to uniquely identify a cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00190">geo_types.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a601493229b667ed4f42188fcc07ce2f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phot::ICARUSPhotonMappingTransformations::prepareMappings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const &amp;&#160;</td>
          <td class="paramname"><em>libraryIndices</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extracts the necessary information for mapping from the geometry. </p>

<p>Definition at line <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00260">260</a> of file <a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">   * 1. geometry transformation:</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   *    1. determine the switch coordinate (on x axis) between cryostats</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   *    2. determine the amount of shift required</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">   * 2. library transformation</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">   *    1. determine the range of PMT channels in the two cryostats</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">   *    2. determine the shift amount (hint: 180)</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">   *    3. fill the maps with the shift</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  mf::LogInfo(<span class="stringliteral">&quot;ICARUSPhotonMappingTransformations&quot;</span>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Photon visibility mapping tool: &#39;ICARUSPhotonMappingTransformations&#39;&quot;</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// (1) geometry transformation</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afb007ad6f6eeb3a211bccca28e733211">prepareGeometryMapping</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// (2) library transformation</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a844960932c077b162c81148d013450b9">prepareLibraryMappings</a>(libraryIndices);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// debug:</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afc6c0a42c0b02206f4fbbdf79afff486">fDumpMapping</a>) <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa7855afbab38a4b6932b9d8e574abd5e">dumpMapping</a>();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;} <span class="comment">// phot::ICARUSPhotonMappingTransformations::prepareMappings()</span></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_aa7855afbab38a4b6932b9d8e574abd5e"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#aa7855afbab38a4b6932b9d8e574abd5e">phot::ICARUSPhotonMappingTransformations::dumpMapping</a></div><div class="ttdeci">void dumpMapping() const </div><div class="ttdoc">Writes the current mapping information into the console. Debug stuff. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00315">ICARUSPhotonMappingTransformations.cxx:315</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_afc6c0a42c0b02206f4fbbdf79afff486"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afc6c0a42c0b02206f4fbbdf79afff486">phot::ICARUSPhotonMappingTransformations::fDumpMapping</a></div><div class="ttdeci">bool fDumpMapping</div><div class="ttdoc">Whether to dump mapping on initialization. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00226">ICARUSPhotonMappingTransformations.h:226</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a844960932c077b162c81148d013450b9"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a844960932c077b162c81148d013450b9">phot::ICARUSPhotonMappingTransformations::prepareLibraryMappings</a></div><div class="ttdeci">void prepareLibraryMappings(LibraryIndexToOpDetMap const &amp;libraryIndices)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00116">ICARUSPhotonMappingTransformations.cxx:116</a></div></div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_afb007ad6f6eeb3a211bccca28e733211"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#afb007ad6f6eeb3a211bccca28e733211">phot::ICARUSPhotonMappingTransformations::prepareGeometryMapping</a></div><div class="ttdeci">void prepareGeometryMapping()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html#l00078">ICARUSPhotonMappingTransformations.cxx:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65373b7c8b3c27f9920de8b5434b885a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a> phot::ICARUSPhotonMappingTransformations::whichCryostat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns which cryostat better contain <code>point</code>. Never invalid so far. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00262">262</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      { <span class="keywordflow">return</span> <a class="code" href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a>{ (point.X() &gt; <a class="code" href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">fSwitchPoint</a>)? 1U: 0U }; }</div>
<div class="ttc" id="classphot_1_1ICARUSPhotonMappingTransformations_html_a1b38159e659deabb4edece9e6643da40"><div class="ttname"><a href="../../d0/d24/classphot_1_1ICARUSPhotonMappingTransformations.html#a1b38159e659deabb4edece9e6643da40">phot::ICARUSPhotonMappingTransformations::fSwitchPoint</a></div><div class="ttdeci">geo::Length_t fSwitchPoint</div><div class="ttdoc">Switch coordinate on x axis [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00240">ICARUSPhotonMappingTransformations.h:240</a></div></div>
<div class="ttc" id="structgeo_1_1CryostatID_html"><div class="ttname"><a href="../../d9/d73/structgeo_1_1CryostatID.html">geo::CryostatID</a></div><div class="ttdoc">The data type to uniquely identify a cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00190">geo_types.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ada586b2bdd333f0b9cb1d0ad4fa873f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; phot::ICARUSPhotonMappingTransformations::fChannelShifts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Amount of channel number shifting indexed by cryostat. Not really used. </p>
<p>Total number of optical detector channels. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00247">247</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="afc6c0a42c0b02206f4fbbdf79afff486"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool phot::ICARUSPhotonMappingTransformations::fDumpMapping = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to dump mapping on initialization. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00226">226</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a72413fc0f8428f45de2e862b1d6cebf6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html">geo::GeometryCore</a> const* phot::ICARUSPhotonMappingTransformations::fGeom = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detector geometry service provider. Not really used. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00233">233</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2d53cf313f3b2f0cb1ddd6616d9550f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> phot::ICARUSPhotonMappingTransformations::fInvalidLibraryIndexToOpDetMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A library-to-detector mapping for invalid points. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00251">251</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa700e37570b88ce6cd20a4f1bb9f11a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> phot::ICARUSPhotonMappingTransformations::fInvalidOpDetToLibraryIndexMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A detector-to-library mapping for invalid points. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00255">255</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4f1d27963efc0aad40eaa3669c361cc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a>&gt; phot::ICARUSPhotonMappingTransformations::fLibraryIndexToOpDetMaps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Library to detector channel mappings, indexed by cryostat number. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00249">249</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab3d61189f6f669465610c027b5c44e54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int phot::ICARUSPhotonMappingTransformations::fNOpDetChannels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00245">245</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0af50041fd9846705ccda5d81da06726"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d2/d8a/classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a>&gt; phot::ICARUSPhotonMappingTransformations::fOpDetToLibraryIndexMaps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detector channel to library mappings, indexed by cryostat number. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00253">253</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1b38159e659deabb4edece9e6643da40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d23/namespacegeo.html#a63f4a2aa11d6bebb2b018bf037aef79a">geo::Length_t</a> phot::ICARUSPhotonMappingTransformations::fSwitchPoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch coordinate on x axis [cm]. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00240">240</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d03e7b3a006d3923c32b5f64557f3f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a>&gt; phot::ICARUSPhotonMappingTransformations::fTranslations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translation of the point. </p>

<p>Definition at line <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html#l00239">239</a> of file <a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../df/d60/ICARUSPhotonMappingTransformations_8h_source.html">ICARUSPhotonMappingTransformations.h</a></li>
<li><a class="el" href="../../d6/d88/ICARUSPhotonMappingTransformations_8cxx_source.html">ICARUSPhotonMappingTransformations.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
