<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>evgen::CORSIKAGen Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/d4d/namespaceevgen.html">evgen</a></li><li class="navelem"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html">CORSIKAGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d5/ddf/classevgen_1_1CORSIKAGen-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">evgen::CORSIKAGen Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>LArSoft interface to CORSIKA event generator.  
 <a href="../../db/d59/classevgen_1_1CORSIKAGen.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for evgen::CORSIKAGen:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../db/d59/classevgen_1_1CORSIKAGen.png" usemap="#evgen::CORSIKAGen_map" alt=""/>
  <map id="evgen::CORSIKAGen_map" name="evgen::CORSIKAGen_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7550f2d07f059e87e5042ab41e1f6037"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a7550f2d07f059e87e5042ab41e1f6037">CORSIKAGen</a> (fhicl::ParameterSet const &amp;pset)</td></tr>
<tr class="separator:a7550f2d07f059e87e5042ab41e1f6037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad214eff8cdd3ae238718d7722f2477a9"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ad214eff8cdd3ae238718d7722f2477a9">~CORSIKAGen</a> ()</td></tr>
<tr class="separator:ad214eff8cdd3ae238718d7722f2477a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a272d7dac4ee885a5e24d224fa55de7a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a272d7dac4ee885a5e24d224fa55de7a2">produce</a> (art::Event &amp;evt)</td></tr>
<tr class="separator:a272d7dac4ee885a5e24d224fa55de7a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d21e56f8fd7bd65d41ca8765bf4cd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a35d21e56f8fd7bd65d41ca8765bf4cd7">beginRun</a> (art::Run &amp;run)</td></tr>
<tr class="separator:a35d21e56f8fd7bd65d41ca8765bf4cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a502d912c07fb0eb3cc0cc14e548b0bd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a502d912c07fb0eb3cc0cc14e548b0bd5">openDBs</a> (std::string const &amp;module_label)</td></tr>
<tr class="separator:a502d912c07fb0eb3cc0cc14e548b0bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ee0a7cd60fb258892db695e777c87d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a35ee0a7cd60fb258892db695e777c87d">populateNShowers</a> ()</td></tr>
<tr class="separator:a35ee0a7cd60fb258892db695e777c87d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065ab358ca213622b0afd0a2b1432ea5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a065ab358ca213622b0afd0a2b1432ea5">populateTOffset</a> ()</td></tr>
<tr class="separator:a065ab358ca213622b0afd0a2b1432ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5df0b647cfc99c3eb832a608cd0d97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aff5df0b647cfc99c3eb832a608cd0d97">GetSample</a> (simb::MCTruth &amp;)</td></tr>
<tr class="separator:aff5df0b647cfc99c3eb832a608cd0d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae661e984083d87eadfb670e84af1f199"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ae661e984083d87eadfb670e84af1f199">wrapvar</a> (const double var, const double <a class="el" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>, const double high)</td></tr>
<tr class="separator:ae661e984083d87eadfb670e84af1f199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a406aba8d8b8f97b65b814a3c2fd6f14c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a406aba8d8b8f97b65b814a3c2fd6f14c">wrapvarBoxNo</a> (const double var, const double <a class="el" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>, const double high, int &amp;boxno)</td></tr>
<tr class="separator:a406aba8d8b8f97b65b814a3c2fd6f14c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5938a088a0092387d0297ce1179b6adf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a5938a088a0092387d0297ce1179b6adf">ProjectToBoxEdge</a> (const double xyz[], const double dxyz[], const double xlo, const double xhi, const double ylo, const double yhi, const double zlo, const double zhi, double xyzout[])</td></tr>
<tr class="memdesc:a5938a088a0092387d0297ce1179b6adf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Propagates a point back to the surface of a box.  <a href="#a5938a088a0092387d0297ce1179b6adf">More...</a><br/></td></tr>
<tr class="separator:a5938a088a0092387d0297ce1179b6adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2ab67896cd9a9ec62356478bf49a6652"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a> =0</td></tr>
<tr class="memdesc:a2ab67896cd9a9ec62356478bf49a6652"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of shower inputs to process from.  <a href="#a2ab67896cd9a9ec62356478bf49a6652">More...</a><br/></td></tr>
<tr class="separator:a2ab67896cd9a9ec62356478bf49a6652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035465680ca9f9493f0761c911c736e8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">fNShowersPerEvent</a></td></tr>
<tr class="memdesc:a035465680ca9f9493f0761c911c736e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of showers to put in each event of duration fSampleTime; one per showerinput.  <a href="#a035465680ca9f9493f0761c911c736e8">More...</a><br/></td></tr>
<tr class="separator:a035465680ca9f9493f0761c911c736e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208c0d2aa50d416e955d68957d75af0c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">fMaxShowers</a></td></tr>
<tr class="separator:a208c0d2aa50d416e955d68957d75af0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d6af58184bdb8263ab10c8dbe7fb1f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a> [6] ={0.,0.,0.,0.,0.,0.}</td></tr>
<tr class="memdesc:a38d6af58184bdb8263ab10c8dbe7fb1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boundaries of area over which showers are to be distributed (x(min), x(max), <em>unused</em>, y, z(min), z(max) )  <a href="#a38d6af58184bdb8263ab10c8dbe7fb1f">More...</a><br/></td></tr>
<tr class="separator:a38d6af58184bdb8263ab10c8dbe7fb1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac146e26e334e17b1a1ae1fbe9697b9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">fToffset_corsika</a> =0.</td></tr>
<tr class="memdesc:a0ac146e26e334e17b1a1ae1fbe9697b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timing offset to account for propagation time through atmosphere, populated from db.  <a href="#a0ac146e26e334e17b1a1ae1fbe9697b9">More...</a><br/></td></tr>
<tr class="separator:a0ac146e26e334e17b1a1ae1fbe9697b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3428b928ff73cf07c0fddfb05eb515b"><td class="memItemLeft" align="right" valign="top">ifdh_ns::ifdh *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a> =0</td></tr>
<tr class="memdesc:af3428b928ff73cf07c0fddfb05eb515b"><td class="mdescLeft">&#160;</td><td class="mdescRight">(optional) flux file handling  <a href="#af3428b928ff73cf07c0fddfb05eb515b">More...</a><br/></td></tr>
<tr class="separator:af3428b928ff73cf07c0fddfb05eb515b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa873c00ee34426f41e10e104aed7e4b9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aa873c00ee34426f41e10e104aed7e4b9">fProjectToHeight</a> =0.</td></tr>
<tr class="memdesc:aa873c00ee34426f41e10e104aed7e4b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Height to which particles will be projected [cm].  <a href="#aa873c00ee34426f41e10e104aed7e4b9">More...</a><br/></td></tr>
<tr class="separator:aa873c00ee34426f41e10e104aed7e4b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec409369d4ab955084d6c09f4c98156c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a></td></tr>
<tr class="memdesc:aec409369d4ab955084d6c09f4c98156c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of CORSIKA shower data files to use.  <a href="#aec409369d4ab955084d6c09f4c98156c">More...</a><br/></td></tr>
<tr class="separator:aec409369d4ab955084d6c09f4c98156c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b6d621bc4ed58e58f628731d1707a9"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">fShowerCopyType</a></td></tr>
<tr class="separator:af4b6d621bc4ed58e58f628731d1707a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980b16f939ad5b4898ff7379a72c0e64"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">fShowerFluxConstants</a></td></tr>
<tr class="memdesc:a980b16f939ad5b4898ff7379a72c0e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of flux constants to be associated with each shower data file.  <a href="#a980b16f939ad5b4898ff7379a72c0e64">More...</a><br/></td></tr>
<tr class="separator:a980b16f939ad5b4898ff7379a72c0e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8339e82d42b3ef9dbc68666e1bcc4ab"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a> =0.</td></tr>
<tr class="memdesc:ab8339e82d42b3ef9dbc68666e1bcc4ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration of sample [s].  <a href="#ab8339e82d42b3ef9dbc68666e1bcc4ab">More...</a><br/></td></tr>
<tr class="separator:ab8339e82d42b3ef9dbc68666e1bcc4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1faf6cd8deda80a711e5e39bf4efa1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">fToffset</a> =0.</td></tr>
<tr class="memdesc:a6f1faf6cd8deda80a711e5e39bf4efa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time offset of sample, defaults to zero (no offset) [s].  <a href="#a6f1faf6cd8deda80a711e5e39bf4efa1">More...</a><br/></td></tr>
<tr class="separator:a6f1faf6cd8deda80a711e5e39bf4efa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c567dda3844f0ee4c57e6d9e3f44d0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">fBuffBox</a></td></tr>
<tr class="memdesc:a86c567dda3844f0ee4c57e6d9e3f44d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer box extensions to cryostat in each direction (6 of them: x_lo,x_hi,y_lo,y_hi,z_lo,z_hi) [cm].  <a href="#a86c567dda3844f0ee4c57e6d9e3f44d0">More...</a><br/></td></tr>
<tr class="separator:a86c567dda3844f0ee4c57e6d9e3f44d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8092f07c0302e1b1b49dd008e95963f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">fShowerAreaExtension</a> =0.</td></tr>
<tr class="memdesc:ac8092f07c0302e1b1b49dd008e95963f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extend distribution of corsika particles in x,z by this much (e.g. 1000 will extend 10 m in -x, +x, -z, and +z) [cm].  <a href="#ac8092f07c0302e1b1b49dd008e95963f">More...</a><br/></td></tr>
<tr class="separator:ac8092f07c0302e1b1b49dd008e95963f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b9e0bcefaaaa2eb17dc761b760e7c61"><td class="memItemLeft" align="right" valign="top">sqlite3 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a> [5]</td></tr>
<tr class="memdesc:a0b9e0bcefaaaa2eb17dc761b760e7c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointers to sqlite3 database object, max of 5.  <a href="#a0b9e0bcefaaaa2eb17dc761b760e7c61">More...</a><br/></td></tr>
<tr class="separator:a0b9e0bcefaaaa2eb17dc761b760e7c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbeb15bfb3616a7f60b3add3d11ade5a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a> =0.</td></tr>
<tr class="memdesc:adbeb15bfb3616a7f60b3add3d11ade5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Each shower will be shifted by a random amount in xz so that showers won't repeatedly sample the same space [cm].  <a href="#adbeb15bfb3616a7f60b3add3d11ade5a">More...</a><br/></td></tr>
<tr class="separator:adbeb15bfb3616a7f60b3add3d11ade5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831ef865e6049b358f571096a0d123a9"><td class="memItemLeft" align="right" valign="top">CLHEP::HepRandomEngine &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a831ef865e6049b358f571096a0d123a9">fGenEngine</a></td></tr>
<tr class="separator:a831ef865e6049b358f571096a0d123a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14dcafc9edf31a6f2800609973c1a9aa"><td class="memItemLeft" align="right" valign="top">CLHEP::HepRandomEngine &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a14dcafc9edf31a6f2800609973c1a9aa">fPoisEngine</a></td></tr>
<tr class="separator:a14dcafc9edf31a6f2800609973c1a9aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>LArSoft interface to CORSIKA event generator. </p>
<dl class="section note"><dt>Note</dt><dd>A presentation on this module by the original author is archived at: <a href="https://indico.fnal.gov/event/10893/contribution/3/material/slides">https://indico.fnal.gov/event/10893/contribution/3/material/slides</a></dd></dl>
<p>In CORSIKA jargon, a "shower" is the cascade of particles resulting from a primary cosmic ray interaction. This module creates a single <code>simb::MCTruth</code> object (stored as data product into a <code>std::vector&lt;simb::MCTruth&gt;</code> with a single entry) containing all the particles from cosmic ray showers crossing a <em>surface</em> above the detector.</p>
<p>The generation procedure consists of selecting showers from a database of <em>pregenerated</em> events, and then to adapt them to the parameters requested in the module configuration. Pregenerated showers are "observed" at a altitude set in CORSIKA configuration.</p>
<p>Databases need to be stored as files in SQLite3 format. Multiple file sources can be specified (<code>ShowerInputFiles</code> configuration parameter). From each source, one database file is selected and copied locally via IFDH. From each source, showers are extracted proportionally to the relative flux specified in the configuration (specified in <code>ShowerFluxConstants</code>, see <a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#CORSIKAGen_Normalization">normalization</a> below). The actual number of showers per event and per source is extracted according to a Poisson distribution around the predicted average number of primary cosmic rays for that source.</p>
<h2>Flux normalization </h2>
<p><a class="anchor" id="CORSIKAGen_Normalization"></a> CORSIKA generates showers from each specific cosmic ray type <img class="formulaInl" alt="$ A $" src="../../form_10.png"/> (e.g. iron, proton, etc.) according to a power law distribution <img class="formulaInl" alt="$ \Phi_{A}(E) \propto E^{-\gamma_{A}} $" src="../../form_131.png"/> of the primary particle energy <img class="formulaInl" alt="$ E $" src="../../form_59.png"/> [GeV]. When sampling pregenerated events, we bypass the normalization imposed by CORSIKA and gain complete control on it.</p>
<p>Within <a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html" title="LArSoft interface to CORSIKA event generator. ">CORSIKAGen</a>, for each source (usually each on a different primary cosmic ray type, e.g. iron, proton, etc.), the average number of generated showers is <img class="formulaInl" alt="$ n_{A} = \pi S T k_{A} \int E^{-\gamma_{A}} dE $" src="../../form_132.png"/> with <img class="formulaInl" alt="$ S $" src="../../form_133.png"/> the area of the surface the flux passes across, <img class="formulaInl" alt="$ T $" src="../../form_134.png"/> the exposure time, the integral defined over the full energy range of the pregenerated showers in the source, and <img class="formulaInl" alt="$ k_{A} $" src="../../form_135.png"/> a factor specified in the configuration (<code>ShowerFluxConstants</code> parameters). This is the flux of primary cosmic rays, not of the observed particles from their showers. Note that it depends on an area and a time interval, but it is uniform with respect to translations and constant in time.</p>
<p>As explained <a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#CORSIKAGen_Coverage">below</a>, we consider only the secondary particles that cross an "observation" surface. After cosmic ray primary particles cross the flux surface ( <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> above), they develop into showers of particles that spread across large areas. Limiting ourself to the observation of particles on a small surface <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> has two effects. We lose the part of the showers that misses that surface <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/>. Also, considering a span of time with multiple showers, we miss particles from other hypothetical showers whose primaries crossed outside the generation surface <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> whose shower development would leak into <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/>: we did not simulate those showers at all! In terms of total flux of observed particles, under the assumption that the flux is uniform in space, choosing <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> the same size as <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> makes the two effects get the same size: just as many particles from primaries from <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> leak out of <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/>, as many particles from primaries from outside <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> sneak in <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/>. In that case, counting <em>all</em> the particles from the primaries crossing a surface <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/> of area <em>S</em> regardless of where they land yields the right amount of cosmic ray secondary particles across an observation surface <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> also of area <em>S</em>. Practically, the particles landing outside <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> need to be recovered to preserve the correct normalization, which is described in the <a class="el" href="../../db/d59/classevgen_1_1CORSIKAGen.html#CORSIKAGen_Coverage">next section</a>.</p>
<h2>Surface coverage, position and timing </h2>
<p><a class="anchor" id="CORSIKAGen_Coverage"></a> The surface we detect the particles through (let's call it <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/>) is defined by the smallest <em>rectangle</em> including all cryostats in the detector, and located at the height of the ceiling of the tallest cryostat. This surface can be increased by specifying a positive value for <code>ShowerAreaExtension</code> configuration parameter, in which case each side of the rectangle will be extended by that amount.</p>
<p>Showers are extracted one by one from the pregenerated samples and treated independently. Ideally, the detection surface <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/> would be at the same exact altitude as the observation surface set in CORSIKA (called <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> above). In practice, we go the other way around, with the assumption that the shower observed at <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/> would be very close to the one we actually generated at <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/>, and teleport the generated particles on <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/>. Since the cryostats may be just meters from the earth surface <img class="formulaInl" alt="$ S_{o} $" src="../../form_137.png"/> lies on, this is an acceptable approximation.</p>
<p>All the particles of one shower are compelled within surface <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/> as a first step. As explained when describing the <a class="anchor" id="CORSIKAGen_Normalization"></a>"normalization", we need to keep all the shower particles, one way or the other. So, particles of the shower that fell out of <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/> are repackaged into other showers and translated back in. This is equivalent to assume the primary cosmic rays originating such shower would happen outside our generation volume ( <img class="formulaInl" alt="$ S_{\Phi} $" src="../../form_136.png"/>), and their shower would then spill into <img class="formulaInl" alt="$ S_{d} $" src="../../form_138.png"/>. Since these repackaged showers are in principle independent and uncorrelated, they are assigned a random time different than the main shower, leveraging the assumption of constantness of the flux.</p>
<p>As for the azimuth, this module uses an approximation by setting north direction to match the <em>z</em> axis of LArSoft geometry (typically assumed to be the direction of the beam particle).</p>
<p>The particles so manipulated are then back-propagated from the observation surface to an absolute height defined by <code>ProjectToHeight</code> (although for particular combination of position and direction, the particles might be propagated back to the edge of the world, or even outside it).</p>
<p>As a final filter, only the particles whose straight projections cross any of the cryostats (with some buffer volume around, defined by <code>BufferBox</code>) are stored, while the other ones are discarded. Note that the actual interactions that particles from the generation surface undergo may deviate them enough to miss the cryostats anyway, and conversely particles that have been filtered out because shooting off the cryostats might have been subsequently deviated to actually cross them. This effect is not corrected for at this time.</p>
<p>The time of the showers is uniformly distributed within the configured time interval, defined by <code>SampleTime</code> starting from <code>TimeOffset</code>.</p>
<h1>Configuration parameters </h1>
<ul>
<li><code>ShowerInputFiles</code> (list of paths; mandatory): a list of file paths to pregenerated CORSIKA shower files. Each entry can be a single file or use wildcards (<code>*</code>) to specify a set of files to choose among. Paths and wildcards are processed by IFDH.</li>
<li><code>ShowerFluxConstants</code> (list of real numbers; mandatory): for each entry <img class="formulaInl" alt="$ A $" src="../../form_10.png"/> in <code>ShowerInputFiles</code>, specify the normalization factor <img class="formulaInl" alt="$ K_{A} $" src="../../form_139.png"/> of their distribution [ <img class="formulaInl" alt="$ m^{-2}s^{-1} $" src="../../form_140.png"/>]</li>
<li><code>ProjectToHeight</code> (real, default: <code>0</code>): the generated particles will appear to come from this height [cm]</li>
<li><code>TimeOffset</code> (real; default: <code>0</code>): start time of the exposure window [s], relative to the <a class="el" href="../../d0/dc3/classdetinfo_1_1DetectorClocksData.html#DetectorClocksSimulationTime">simulation time start</a></li>
<li><code>SampleTime</code> (real; mandatory): duration of the simulated exposure to cosmic rays [s]</li>
<li><code>ShowerAreaExtension</code> (real; default: <code>0</code>): extend the size of the observation surface of shower particles (<em>S</em>) by this much [cm]; e.g. 1000 will extend 10 m on each side</li>
<li><code>RandomXZShift</code> (real; default: <code>0</code>): the original position of each shower is randomly shifted within a square with this length as side [cm]</li>
<li><code>BufferBox</code> (list of six lengths, all <code>0</code> by default): extension to the volume of each cryostat for the purpose of filtering out the particles which do not cross the detector; each cryostat volume is independently extended by the same amount, specified here as <em>shifts</em> to lower <em>x</em>, higher <em>x</em>, lower <em>y</em>, higher <em>y</em>, lower <em>z</em> and higher <em>z</em>, in that order <a href="../../note that to extend e.g. the
    negative _x_ side by 5 meters the parameter value should be -500">cm</a></li>
<li><code>SeedGenerator</code> (integer): force random number generator for event generation to the specified value</li>
<li><code>SeedPoisson</code> (integer): force random number generator for number of showers to the specified value</li>
<li><code>Seed</code>: alias for <code>SeedGenerator</code></li>
</ul>
<h2>Random engines </h2>
<p>Currently two random engines are used:</p>
<ul>
<li>a generator engine (driven by <code>SeedGenerator</code>), of general use</li>
<li>a "Poisson" engine (driven by <code>SeedPoisson</code>), only used to determine the number of showers to be selected on each event </li>
</ul>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00221">221</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7550f2d07f059e87e5042ab41e1f6037"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">evgen::CORSIKAGen::CORSIKAGen </td>
          <td>(</td>
          <td class="paramtype">fhicl::ParameterSet const &amp;&#160;</td>
          <td class="paramname"><em>pset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00291">291</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    : EDProducer{<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>},</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aa873c00ee34426f41e10e104aed7e4b9">fProjectToHeight</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; <span class="keywordtype">double</span> &gt;(<span class="stringliteral">&quot;ProjectToHeight&quot;</span>,0.)),</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; std::vector&lt; std::string &gt; &gt;(<span class="stringliteral">&quot;ShowerInputFiles&quot;</span>)),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">fShowerCopyType</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; std::string &gt;(<span class="stringliteral">&quot;ShowerCopyType&quot;</span>, <span class="stringliteral">&quot;IFDH&quot;</span>)),</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">fShowerFluxConstants</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; std::vector&lt; double &gt; &gt;(<span class="stringliteral">&quot;ShowerFluxConstants&quot;</span>)),</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; <span class="keywordtype">double</span> &gt;(<span class="stringliteral">&quot;SampleTime&quot;</span>,0.)),</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">fToffset</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; <span class="keywordtype">double</span> &gt;(<span class="stringliteral">&quot;TimeOffset&quot;</span>,0.)),</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">fBuffBox</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt; std::vector&lt; double &gt; &gt;(<span class="stringliteral">&quot;BufferBox&quot;</span>,{0.0, 0.0, 0.0, 0.0, 0.0, 0.0})),</div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a6f1faf6cd8deda80a711e5e39bf4efa1"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">evgen::CORSIKAGen::fToffset</a></div><div class="ttdeci">double fToffset</div><div class="ttdoc">Time offset of sample, defaults to zero (no offset) [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00279">CORSIKAGen_module.cc:279</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_ab8339e82d42b3ef9dbc68666e1bcc4ab"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">evgen::CORSIKAGen::fSampleTime</a></div><div class="ttdeci">double fSampleTime</div><div class="ttdoc">Duration of sample [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00278">CORSIKAGen_module.cc:278</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_aa873c00ee34426f41e10e104aed7e4b9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#aa873c00ee34426f41e10e104aed7e4b9">evgen::CORSIKAGen::fProjectToHeight</a></div><div class="ttdeci">double fProjectToHeight</div><div class="ttdoc">Height to which particles will be projected [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00274">CORSIKAGen_module.cc:274</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_aec409369d4ab955084d6c09f4c98156c"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">evgen::CORSIKAGen::fShowerInputFiles</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fShowerInputFiles</div><div class="ttdoc">Set of CORSIKA shower data files to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00275">CORSIKAGen_module.cc:275</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a980b16f939ad5b4898ff7379a72c0e64"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">evgen::CORSIKAGen::fShowerFluxConstants</a></div><div class="ttdeci">std::vector&lt; double &gt; fShowerFluxConstants</div><div class="ttdoc">Set of flux constants to be associated with each shower data file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00277">CORSIKAGen_module.cc:277</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_af4b6d621bc4ed58e58f628731d1707a9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">evgen::CORSIKAGen::fShowerCopyType</a></div><div class="ttdeci">std::string fShowerCopyType</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00276">CORSIKAGen_module.cc:276</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a86c567dda3844f0ee4c57e6d9e3f44d0"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">evgen::CORSIKAGen::fBuffBox</a></div><div class="ttdeci">std::vector&lt; double &gt; fBuffBox</div><div class="ttdoc">Buffer box extensions to cryostat in each direction (6 of them: x_lo,x_hi,y_lo,y_hi,z_lo,z_hi) [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00280">CORSIKAGen_module.cc:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad214eff8cdd3ae238718d7722f2477a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">evgen::CORSIKAGen::~CORSIKAGen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00325">325</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                         {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a>; i++){</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      sqlite3_close(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i]);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">//cleanup temp files</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a>-&gt;cleanup();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_af3428b928ff73cf07c0fddfb05eb515b"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">evgen::CORSIKAGen::fIFDH</a></div><div class="ttdeci">ifdh_ns::ifdh * fIFDH</div><div class="ttdoc">(optional) flux file handling </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00271">CORSIKAGen_module.cc:271</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a2ab67896cd9a9ec62356478bf49a6652"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">evgen::CORSIKAGen::fShowerInputs</a></div><div class="ttdeci">int fShowerInputs</div><div class="ttdoc">Number of shower inputs to process from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">CORSIKAGen_module.cc:266</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0b9e0bcefaaaa2eb17dc761b760e7c61"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">evgen::CORSIKAGen::fdb</a></div><div class="ttdeci">sqlite3 * fdb[5]</div><div class="ttdoc">Pointers to sqlite3 database object, max of 5. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">CORSIKAGen_module.cc:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a35d21e56f8fd7bd65d41ca8765bf4cd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::beginRun </td>
          <td>(</td>
          <td class="paramtype">art::Run &amp;&#160;</td>
          <td class="paramname"><em>run</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00714">714</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    art::ServiceHandle&lt;geo::Geometry const&gt; geo;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    run.put(std::make_unique&lt;sumdata::RunData&gt;(geo-&gt;DetectorName()));</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aff5df0b647cfc99c3eb832a608cd0d97"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::GetSample </td>
          <td>(</td>
          <td class="paramtype">simb::MCTruth &amp;&#160;</td>
          <td class="paramname"><em>mctruth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00562">562</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                                {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">//for each input, randomly pull fNShowersPerEvent[i] showers from the Particles table</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">//and randomly place them in time (between -fSampleTime/2 and fSampleTime/2)</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">//wrap their positions based on the size of the area under consideration</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">//based on http://nusoft.fnal.gov/larsoft/doxsvn/html/CRYHelper_8cxx_source.html (Sample)</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">//query from sqlite db with select * from particles where shower in (select id from showers ORDER BY substr(id*0.51123124141,length(id)+2) limit 100000) ORDER BY substr(shower*0.51123124141,length(shower)+2);</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">//where 0.51123124141 is a random seed to allow randomly selecting rows and should be randomly generated for each query</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">//the inner order by is to select randomly from the possible shower id&#39;s</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">//the outer order by is to make sure the shower numbers are ordered randomly (without this, the showers always come out ordered by shower number</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">//and 100000 is the number of showers to be selected at random and needs to be less than the number of showers in the showers table</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">//TDatabasePDG is for looking up particle masses</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">static</span> TDatabasePDG* pdgt = TDatabasePDG::Instance();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">//db variables</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    sqlite3_stmt *statement;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keyword">const</span> TString kStatement(<span class="stringliteral">&quot;select shower,pdg,px,py,pz,x,z,t,e from particles where shower in (select id from showers ORDER BY substr(id*%f,length(id)+2) limit %d) ORDER BY substr(shower*%f,length(shower)+2)&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    CLHEP::RandFlat flat(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a831ef865e6049b358f571096a0d123a9">fGenEngine</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    CLHEP::RandPoissonQ randpois(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a14dcafc9edf31a6f2800609973c1a9aa">fPoisEngine</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// get geometry and figure where to project particles to, based on CRYHelper</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    art::ServiceHandle&lt;geo::Geometry const&gt; geom;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordtype">double</span> x1, x2;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">double</span> y1, y2;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordtype">double</span> z1, z2;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    geom-&gt;WorldBox(&amp;x1, &amp;x2, &amp;y1, &amp;y2, &amp;z1, &amp;z2);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// make the world box slightly smaller so that the projection to</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// the edge avoids possible rounding errors later on with Geant4</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordtype">double</span> fBoxDelta=1.e-5;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    x1 += fBoxDelta;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    x2 -= fBoxDelta;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    y1 += fBoxDelta;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    y2 = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aa873c00ee34426f41e10e104aed7e4b9">fProjectToHeight</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    z1 += fBoxDelta;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    z2 -= fBoxDelta;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">//populate mctruth</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">int</span> ntotalCtr=0; <span class="comment">//count number of particles added to mctruth</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordtype">int</span> lastShower=0; <span class="comment">//keep track of last shower id so that t can be randomized on every new shower</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordtype">int</span> nShowerCntr=0; <span class="comment">//keep track of how many showers are left to be added to mctruth</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordtype">int</span> nShowerQry=0; <span class="comment">//number of showers to query from db</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/d36/cheaterreco_8fcl.html#ad36c739018def8e4e44032f4cf395c9d">shower</a>,<a class="code" href="../../d9/dd2/selectors_8fcl.html#a697017f6ca07cbb4f47653babf318012">pdg</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../de/d4f/filemuons_8fcl.html#a5d65ed57c8d202a924f2716ca6c8d209">px</a>,<a class="code" href="../../d2/df3/prod__muon__2GeV__d45__Collection_8fcl.html#ad3fdde52520bceee418a61ecae2a8343">py</a>,<a class="code" href="../../de/d4f/filemuons_8fcl.html#a353996e037fc5b2ea33c626744db2552">pz</a>,<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a>,<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a>,tParticleTime,etot,showerTime=0.,showerTimex=0.,showerTimez=0.,showerXOffset=0.,showerZOffset=0.,t;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a>; i++){</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      nShowerCntr=randpois.fire(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">fNShowersPerEvent</a>[i]);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGEN&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; Shower input &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; with mean &quot;</span> &lt;&lt; <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">fNShowersPerEvent</a>[i] &lt;&lt; <span class="stringliteral">&quot; generating &quot;</span> &lt;&lt; nShowerCntr;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">while</span>(nShowerCntr&gt;0){</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="comment">//how many showers should we query?</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span>(nShowerCntr&gt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">fMaxShowers</a>[i]){</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;          nShowerQry=<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">fMaxShowers</a>[i]; <span class="comment">//take the group size</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;          nShowerQry=nShowerCntr; <span class="comment">//take the rest that are needed</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="comment">//build and do query to get nshowers</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordtype">double</span> thisrnd=flat(); <span class="comment">//need a new random number for each query</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        TString kthisStatement=TString::Format(kStatement.Data(),thisrnd,nShowerQry,thisrnd);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        MF_LOG_DEBUG(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Executing: &quot;</span>&lt;&lt;kthisStatement;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> ( sqlite3_prepare(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i], kthisStatement.Data(), -1, &amp;statement, 0 ) == SQLITE_OK ){</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <span class="keywordtype">int</span> res=0;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <span class="comment">//loop over database rows, pushing particles into mctruth object</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          <span class="keywordflow">while</span>(1){</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            res = sqlite3_step(statement);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> ( res == SQLITE_ROW ){</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;              <span class="comment">/*</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">               * Memo columns:</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">               * [0] shower</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">               * [1] particle ID (PDG)</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">               * [2] momentum: x component [GeV/c]</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">               * [3] momentum: y component [GeV/c]</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">               * [4] momentum: z component [GeV/c]</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">               * [5] position: x component [cm]</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">               * [6] position: z component [cm]</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">               * [7] time [ns]</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">               * [8] energy [GeV]</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">               */</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;              shower=sqlite3_column_int(statement,0);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;              <span class="keywordflow">if</span>(shower!=lastShower){</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <span class="comment">//each new shower gets its own random time and position offsets</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                showerTime=1e9*(flat()*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>); <span class="comment">//converting from s to ns</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                showerTimex=1e9*(flat()*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>); <span class="comment">//converting from s to ns</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                showerTimez=1e9*(flat()*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>); <span class="comment">//converting from s to ns</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="comment">//and a random offset in both z and x controlled by the fRandomXZShift parameter</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                showerXOffset=flat()*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a> - (<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a>/2);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                showerZOffset=flat()*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a> - (<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a>/2);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;              }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;              pdg=sqlite3_column_int(statement,1);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;              <span class="comment">//get mass for this particle</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;              <span class="keywordtype">double</span> <a class="code" href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a> = 0.; <span class="comment">// in GeV</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;              TParticlePDG* pdgp = pdgt-&gt;GetParticle(pdg);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;              <span class="keywordflow">if</span> (pdgp) m = pdgp-&gt;Mass();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;              <span class="comment">//Note: position/momentum in db have north=-x and west=+z, rotate so that +z is north and +x is west</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;              <span class="comment">//get momentum components</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;              px=sqlite3_column_double(statement,4);<span class="comment">//uboone x=Particlez</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;              py=sqlite3_column_double(statement,3);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;              pz=-sqlite3_column_double(statement,2);<span class="comment">//uboone z=-Particlex</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;              etot=sqlite3_column_double(statement,8);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;              <span class="comment">//get/calculate position components</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;              <span class="keywordtype">int</span> boxnoX=0,boxnoZ=0;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;              x=<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a406aba8d8b8f97b65b814a3c2fd6f14c">wrapvarBoxNo</a>(sqlite3_column_double(statement,6)+showerXOffset,<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[0],<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[1],boxnoX);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;              z=<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a406aba8d8b8f97b65b814a3c2fd6f14c">wrapvarBoxNo</a>(-sqlite3_column_double(statement,5)+showerZOffset,<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[4],<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[5],boxnoZ);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;              tParticleTime=sqlite3_column_double(statement,7); <span class="comment">//time offset, includes propagation time from top of atmosphere</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;              <span class="comment">//actual particle time is particle surface arrival time</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;              <span class="comment">//+ shower start time</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;              <span class="comment">//+ global offset (fcl parameter, in s)</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;              <span class="comment">//- propagation time through atmosphere</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;              <span class="comment">//+ boxNo{X,Z} time offset to make grid boxes have different shower times</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;              t=tParticleTime+showerTime+(1e9*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">fToffset</a>)-<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">fToffset_corsika</a> + showerTimex*boxnoX + showerTimez*boxnoZ;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;              <span class="comment">//wrap surface arrival so that it&#39;s in the desired time window</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;              t=<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ae661e984083d87eadfb670e84af1f199">wrapvar</a>(t,(1e9*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">fToffset</a>),1e9*(fToffset+<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;              simb::MCParticle <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>(ntotalCtr,pdg,<span class="stringliteral">&quot;primary&quot;</span>,-200,m,1);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;              <span class="comment">//project back to wordvol/fProjectToHeight</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;              <span class="comment">/*</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">               * This back propagation goes from a point on the upper surface of</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">               * the cryostat back to the edge of the world, except that that</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">               * world is cut short by `fProjectToHeight` (`y2`) ceiling.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">               * The projection will most often lie on that ceiling, but it may</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">               * end up instead on one of the side edges of the world, or even</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">               * outside it.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">               */</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;              <span class="keywordtype">double</span> xyzo[3];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;              <span class="keywordtype">double</span> x0[3]={<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a>,<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[3],z};</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;              <span class="keywordtype">double</span> dx[3]={<a class="code" href="../../de/d4f/filemuons_8fcl.html#a5d65ed57c8d202a924f2716ca6c8d209">px</a>,<a class="code" href="../../d2/df3/prod__muon__2GeV__d45__Collection_8fcl.html#ad3fdde52520bceee418a61ecae2a8343">py</a>,pz};</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;              this-&gt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a5938a088a0092387d0297ce1179b6adf">ProjectToBoxEdge</a>(x0, dx, x1, x2, y1, y2, z1, z2, xyzo);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;              TLorentzVector pos(xyzo[0],xyzo[1],xyzo[2],t);<span class="comment">// time needs to be in ns to match GENIE, etc</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;              TLorentzVector mom(px,py,pz,etot);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;              <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.AddTrajectoryPoint(pos,mom);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;              mctruth.Add(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;              ntotalCtr++;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;              lastShower=<a class="code" href="../../d2/d36/cheaterreco_8fcl.html#ad36c739018def8e4e44032f4cf395c9d">shower</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> ( res == SQLITE_DONE ){</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;              <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Unexpected sqlite3_step return value: (&quot;</span> &lt;&lt;res&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;          <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Error preparing statement: (&quot;</span> &lt;&lt;kthisStatement&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        nShowerCntr=nShowerCntr-nShowerQry;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="ttc" id="run__opflash__electron_8fcl_html_ae40184b0245025a43c56daa3261d5e3c"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a></div><div class="ttdeci">process_name opflash particleana ie ie ie z</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00092">run_opflash_electron.fcl:92</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a6f1faf6cd8deda80a711e5e39bf4efa1"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">evgen::CORSIKAGen::fToffset</a></div><div class="ttdeci">double fToffset</div><div class="ttdoc">Time offset of sample, defaults to zero (no offset) [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00279">CORSIKAGen_module.cc:279</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_ae661e984083d87eadfb670e84af1f199"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#ae661e984083d87eadfb670e84af1f199">evgen::CORSIKAGen::wrapvar</a></div><div class="ttdeci">double wrapvar(const double var, const double low, const double high)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00449">CORSIKAGen_module.cc:449</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_ab8339e82d42b3ef9dbc68666e1bcc4ab"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">evgen::CORSIKAGen::fSampleTime</a></div><div class="ttdeci">double fSampleTime</div><div class="ttdoc">Duration of sample [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00278">CORSIKAGen_module.cc:278</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a697017f6ca07cbb4f47653babf318012"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a697017f6ca07cbb4f47653babf318012">pdg</a></div><div class="ttdeci">var pdg</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00014">selectors.fcl:14</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_aa873c00ee34426f41e10e104aed7e4b9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#aa873c00ee34426f41e10e104aed7e4b9">evgen::CORSIKAGen::fProjectToHeight</a></div><div class="ttdeci">double fProjectToHeight</div><div class="ttdoc">Height to which particles will be projected [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00274">CORSIKAGen_module.cc:274</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a6673f03521899f7844189bcfd8ee5941"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a></div><div class="ttdeci">process_name opflash particleana ie x</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00090">run_opflash_electron.fcl:90</a></div></div>
<div class="ttc" id="filemuons_8fcl_html_a353996e037fc5b2ea33c626744db2552"><div class="ttname"><a href="../../de/d4f/filemuons_8fcl.html#a353996e037fc5b2ea33c626744db2552">pz</a></div><div class="ttdeci">BEGIN_PROLOG pz</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4f/filemuons_8fcl_source.html#l00010">filemuons.fcl:10</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="cheaterreco_8fcl_html_ad36c739018def8e4e44032f4cf395c9d"><div class="ttname"><a href="../../d2/d36/cheaterreco_8fcl.html#ad36c739018def8e4e44032f4cf395c9d">shower</a></div><div class="ttdeci">process_name shower</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/cheaterreco_8fcl_source.html#l00051">cheaterreco.fcl:51</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a55a56854d78e363691470c7297fde77c"><div class="ttname"><a href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">gen_crt_frags.m</a></div><div class="ttdeci">tuple m</div><div class="ttdoc">now if test mode generate materials, CRT shell, world, gdml header else just generate CRT shell for u...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8c/gen__crt__frags_8py_source.html#l01347">gen_crt_frags.py:1347</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a2ab67896cd9a9ec62356478bf49a6652"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">evgen::CORSIKAGen::fShowerInputs</a></div><div class="ttdeci">int fShowerInputs</div><div class="ttdoc">Number of shower inputs to process from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">CORSIKAGen_module.cc:266</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0b9e0bcefaaaa2eb17dc761b760e7c61"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">evgen::CORSIKAGen::fdb</a></div><div class="ttdeci">sqlite3 * fdb[5]</div><div class="ttdoc">Pointers to sqlite3 database object, max of 5. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">CORSIKAGen_module.cc:282</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a5938a088a0092387d0297ce1179b6adf"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a5938a088a0092387d0297ce1179b6adf">evgen::CORSIKAGen::ProjectToBoxEdge</a></div><div class="ttdeci">void ProjectToBoxEdge(const double xyz[], const double dxyz[], const double xlo, const double xhi, const double ylo, const double yhi, const double zlo, const double zhi, double xyzout[])</div><div class="ttdoc">Propagates a point back to the surface of a box. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00333">CORSIKAGen_module.cc:333</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a14dcafc9edf31a6f2800609973c1a9aa"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a14dcafc9edf31a6f2800609973c1a9aa">evgen::CORSIKAGen::fPoisEngine</a></div><div class="ttdeci">CLHEP::HepRandomEngine &amp; fPoisEngine</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00285">CORSIKAGen_module.cc:285</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a406aba8d8b8f97b65b814a3c2fd6f14c"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a406aba8d8b8f97b65b814a3c2fd6f14c">evgen::CORSIKAGen::wrapvarBoxNo</a></div><div class="ttdeci">double wrapvarBoxNo(const double var, const double low, const double high, int &amp;boxno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00454">CORSIKAGen_module.cc:454</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a208c0d2aa50d416e955d68957d75af0c"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">evgen::CORSIKAGen::fMaxShowers</a></div><div class="ttdeci">std::vector&lt; int &gt; fMaxShowers</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00268">CORSIKAGen_module.cc:268</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0ac146e26e334e17b1a1ae1fbe9697b9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">evgen::CORSIKAGen::fToffset_corsika</a></div><div class="ttdeci">double fToffset_corsika</div><div class="ttdoc">Timing offset to account for propagation time through atmosphere, populated from db. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00270">CORSIKAGen_module.cc:270</a></div></div>
<div class="ttc" id="filemuons_8fcl_html_a5d65ed57c8d202a924f2716ca6c8d209"><div class="ttname"><a href="../../de/d4f/filemuons_8fcl.html#a5d65ed57c8d202a924f2716ca6c8d209">px</a></div><div class="ttdeci">BEGIN_PROLOG px</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4f/filemuons_8fcl_source.html#l00010">filemuons.fcl:10</a></div></div>
<div class="ttc" id="prod__muon__2GeV__d45__Collection_8fcl_html_ad3fdde52520bceee418a61ecae2a8343"><div class="ttname"><a href="../../d2/df3/prod__muon__2GeV__d45__Collection_8fcl.html#ad3fdde52520bceee418a61ecae2a8343">py</a></div><div class="ttdeci">process_name physics producers generator physics producers generator physics producers generator py</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/prod__muon__2GeV__d45__Collection_8fcl_source.html#l00021">prod_muon_2GeV_d45_Collection.fcl:21</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_adbeb15bfb3616a7f60b3add3d11ade5a"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">evgen::CORSIKAGen::fRandomXZShift</a></div><div class="ttdeci">double fRandomXZShift</div><div class="ttdoc">Each shower will be shifted by a random amount in xz so that showers won&amp;#39;t repeatedly sample the same...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00283">CORSIKAGen_module.cc:283</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a38d6af58184bdb8263ab10c8dbe7fb1f"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">evgen::CORSIKAGen::fShowerBounds</a></div><div class="ttdeci">double fShowerBounds[6]</div><div class="ttdoc">Boundaries of area over which showers are to be distributed (x(min), x(max), unused, y, z(min), z(max) ) </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00269">CORSIKAGen_module.cc:269</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a035465680ca9f9493f0761c911c736e8"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">evgen::CORSIKAGen::fNShowersPerEvent</a></div><div class="ttdeci">std::vector&lt; double &gt; fNShowersPerEvent</div><div class="ttdoc">Number of showers to put in each event of duration fSampleTime; one per showerinput. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00267">CORSIKAGen_module.cc:267</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a831ef865e6049b358f571096a0d123a9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a831ef865e6049b358f571096a0d123a9">evgen::CORSIKAGen::fGenEngine</a></div><div class="ttdeci">CLHEP::HepRandomEngine &amp; fGenEngine</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00284">CORSIKAGen_module.cc:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a502d912c07fb0eb3cc0cc14e548b0bd5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::openDBs </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>module_label</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00372">372</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                       {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">//choose files based on fShowerInputFiles, copy them with ifdh, open them</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// for c2: statement is unused</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">//sqlite3_stmt *statement;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    CLHEP::RandFlat flat(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a831ef865e6049b358f571096a0d123a9">fGenEngine</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">//setup ifdh object</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a> ) <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a> = <span class="keyword">new</span> ifdh_ns::ifdh;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* ifdh_debug_env = std::getenv(<span class="stringliteral">&quot;IFDH_DEBUG_LEVEL&quot;</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> ( ifdh_debug_env ) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;IFDH_DEBUG_LEVEL: &quot;</span> &lt;&lt; ifdh_debug_env&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a>-&gt;set_debug(ifdh_debug_env);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">//get ifdh path for each file in fShowerInputFiles, put into selectedflist</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">//if 1 file returned, use that file</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">//if &gt;1 file returned, randomly select one file</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">//if 0 returned, make exeption for missing files</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    std::vector&lt;std::pair&lt;std::string,long&gt;&gt; selectedflist;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a>; i++){</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>[i].find(<span class="stringliteral">&quot;*&quot;</span>)==std::string::npos){</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="comment">//if there are no wildcards, don&#39;t call findMatchingFiles</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        selectedflist.push_back(std::make_pair(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>[i],0));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        mf::LogInfo(<span class="stringliteral">&quot;CorsikaGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Selected&quot;</span>&lt;&lt;selectedflist.back().first&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">//use findMatchingFiles</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="comment">//default to IFDH approach when wildcards in path</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        std::vector&lt;std::pair&lt;std::string,long&gt;&gt; flist;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                std::string <a class="code" href="../../d0/d77/magic__raw__to__triggeremu__icarus__Run1__data_8fcl.html#a5f35fdd8d6b31fcea15200951c830767">path</a>(gSystem-&gt;DirName(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>[i].c_str()));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                std::string <a class="code" href="../../df/d32/namespaceLVDSpatterns.html#ad2b1658effcfafaf8c9a54a6845befa0">pattern</a>(gSystem-&gt;BaseName(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>[i].c_str()));</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                flist = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a>-&gt;findMatchingFiles(<a class="code" href="../../d0/d77/magic__raw__to__triggeremu__icarus__Run1__data_8fcl.html#a5f35fdd8d6b31fcea15200951c830767">path</a>,<a class="code" href="../../df/d32/namespaceLVDSpatterns.html#ad2b1658effcfafaf8c9a54a6845befa0">pattern</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> selIndex=-1;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keywordflow">if</span>(flist.size()==1){ <span class="comment">//0th element is the search path:pattern</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                        selIndex=0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(flist.size()&gt;1){</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        selIndex= (<span class="keywordtype">unsigned</span> int) (flat()*(flist.size()-1)+0.5); <span class="comment">//rnd with rounding, dont allow picking the 0th element</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                        <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;No files returned for path:pattern: &quot;</span>&lt;&lt;<a class="code" href="../../d0/d77/magic__raw__to__triggeremu__icarus__Run1__data_8fcl.html#a5f35fdd8d6b31fcea15200951c830767">path</a>&lt;&lt;<span class="stringliteral">&quot;:&quot;</span>&lt;&lt;<a class="code" href="../../df/d32/namespaceLVDSpatterns.html#ad2b1658effcfafaf8c9a54a6845befa0">pattern</a>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                selectedflist.push_back(flist[selIndex]);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                mf::LogInfo(<span class="stringliteral">&quot;CorsikaGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;For &quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">fShowerInputFiles</a>[i]&lt;&lt;<span class="stringliteral">&quot;:&quot;</span>&lt;&lt;<a class="code" href="../../df/d32/namespaceLVDSpatterns.html#ad2b1658effcfafaf8c9a54a6845befa0">pattern</a></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        &lt;&lt;<span class="stringliteral">&quot;\nFound &quot;</span>&lt;&lt; flist.size() &lt;&lt; <span class="stringliteral">&quot; candidate files&quot;</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        &lt;&lt;<span class="stringliteral">&quot;\nChoosing file number &quot;</span>&lt;&lt; selIndex &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        &lt;&lt;<span class="stringliteral">&quot;\nSelected &quot;</span>&lt;&lt;selectedflist.back().first&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;     }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">//do the fetching, store local filepaths in locallist</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    std::vector&lt;std::string&gt; locallist;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;selectedflist.size(); i++){</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      mf::LogInfo(<span class="stringliteral">&quot;CorsikaGen&quot;</span>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Fetching: &quot;</span>&lt;&lt;selectedflist[i].first&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;selectedflist[i].second&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">fShowerCopyType</a> == <span class="stringliteral">&quot;IFDH&quot;</span>) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        std::string fetchedfile(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">fIFDH</a>-&gt;fetchInput(selectedflist[i].first));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        MF_LOG_DEBUG(<span class="stringliteral">&quot;CorsikaGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Fetched; local path: &quot;</span>&lt;&lt;fetchedfile &lt;&lt; <span class="stringliteral">&quot;; copy type: IFDH&quot;</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        locallist.push_back(fetchedfile);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">fShowerCopyType</a> == <span class="stringliteral">&quot;DIRECT&quot;</span>) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        std::string fetchedfile(selectedflist[i].<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        MF_LOG_DEBUG(<span class="stringliteral">&quot;CorsikaGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Fetched; local path: &quot;</span>&lt;&lt;fetchedfile &lt;&lt; <span class="stringliteral">&quot;; copy type: DIRECT&quot;</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        locallist.push_back(fetchedfile);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Error copying shower db: ShowerCopyType must be \&quot;IFDH\&quot; or \&quot;DIRECT\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">//open the files in fShowerInputFilesLocalPaths with sqlite3</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;locallist.size(); i++){</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">//prepare and execute statement to attach db file</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordtype">int</span> res=sqlite3_open(locallist[i].c_str(),&amp;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i]);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (res!= SQLITE_OK)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Error opening db: (&quot;</span> &lt;&lt;locallist[i].c_str()&lt;&lt;<span class="stringliteral">&quot;) (&quot;</span>&lt;&lt;res&lt;&lt;<span class="stringliteral">&quot;): &quot;</span> &lt;&lt; sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i]) &lt;&lt; <span class="stringliteral">&quot;; memory used:&lt;&lt;&quot;</span>&lt;&lt;sqlite3_memory_used()&lt;&lt;<span class="stringliteral">&quot;/&quot;</span>&lt;&lt;sqlite3_memory_highwater(0)&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Attached db &quot;</span>&lt;&lt; locallist[i]&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div>
<div class="ttc" id="namespacechannelDBConverter_html_af481fa22253619167bce75a37e10ec34"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">channelDBConverter.first</a></div><div class="ttdeci">first</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00146">channelDBConverter.py:146</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_af3428b928ff73cf07c0fddfb05eb515b"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#af3428b928ff73cf07c0fddfb05eb515b">evgen::CORSIKAGen::fIFDH</a></div><div class="ttdeci">ifdh_ns::ifdh * fIFDH</div><div class="ttdoc">(optional) flux file handling </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00271">CORSIKAGen_module.cc:271</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_aec409369d4ab955084d6c09f4c98156c"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#aec409369d4ab955084d6c09f4c98156c">evgen::CORSIKAGen::fShowerInputFiles</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fShowerInputFiles</div><div class="ttdoc">Set of CORSIKA shower data files to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00275">CORSIKAGen_module.cc:275</a></div></div>
<div class="ttc" id="magic__raw__to__triggeremu__icarus__Run1__data_8fcl_html_a5f35fdd8d6b31fcea15200951c830767"><div class="ttname"><a href="../../d0/d77/magic__raw__to__triggeremu__icarus__Run1__data_8fcl.html#a5f35fdd8d6b31fcea15200951c830767">path</a></div><div class="ttdeci">BEGIN_PROLOG triggeremu_data_config_icarus settings PMTADCthresholds sequence::icarus_stage0_multiTPC_TPC physics sequence::icarus_stage0_EastHits_TPC physics sequence::icarus_stage0_WestHits_TPC physics producers purityana0 caloskimCalorimetryCryoE physics caloskimCalorimetryCryoW physics path</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/magic__raw__to__triggeremu__icarus__Run1__data_8fcl_source.html#l00108">magic_raw_to_triggeremu_icarus_Run1_data.fcl:108</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a2ab67896cd9a9ec62356478bf49a6652"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">evgen::CORSIKAGen::fShowerInputs</a></div><div class="ttdeci">int fShowerInputs</div><div class="ttdoc">Number of shower inputs to process from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">CORSIKAGen_module.cc:266</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0b9e0bcefaaaa2eb17dc761b760e7c61"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">evgen::CORSIKAGen::fdb</a></div><div class="ttdeci">sqlite3 * fdb[5]</div><div class="ttdoc">Pointers to sqlite3 database object, max of 5. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">CORSIKAGen_module.cc:282</a></div></div>
<div class="ttc" id="namespaceLVDSpatterns_html_ad2b1658effcfafaf8c9a54a6845befa0"><div class="ttname"><a href="../../df/d32/namespaceLVDSpatterns.html#ad2b1658effcfafaf8c9a54a6845befa0">LVDSpatterns.pattern</a></div><div class="ttdeci">tuple pattern</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3e/LVDSpatterns_8py_source.html#l00112">LVDSpatterns.py:112</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_af4b6d621bc4ed58e58f628731d1707a9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#af4b6d621bc4ed58e58f628731d1707a9">evgen::CORSIKAGen::fShowerCopyType</a></div><div class="ttdeci">std::string fShowerCopyType</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00276">CORSIKAGen_module.cc:276</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a831ef865e6049b358f571096a0d123a9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a831ef865e6049b358f571096a0d123a9">evgen::CORSIKAGen::fGenEngine</a></div><div class="ttdeci">CLHEP::HepRandomEngine &amp; fGenEngine</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00284">CORSIKAGen_module.cc:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35ee0a7cd60fb258892db695e777c87d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::populateNShowers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00487">487</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                   {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">//populate vector of the number of showers per event based on:</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">//AREA the showers are being distributed over</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">//TIME of the event (fSampleTime)</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">//flux constants that determine the overall normalizations (fShowerFluxConstants)</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="comment">//Energy range over which the sample was generated (ERANGE_*)</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">//power spectrum over which the sample was generated (ESLOPE)</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">//compute shower area based on the maximal x,z dimensions of cryostat boundaries + fShowerAreaExtension</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    art::ServiceHandle&lt;geo::Geometry const&gt; geom;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; geom-&gt;Ncryostats(); ++c){</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordtype">double</span> bounds[6] = {0.};</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      geom-&gt;CryostatBoundaries(bounds, c);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bnd = 0; bnd&lt;6; bnd++){</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        mf::LogVerbatim(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Cryo Boundary: &quot;</span>&lt;&lt;bnd&lt;&lt;<span class="stringliteral">&quot;=&quot;</span>&lt;&lt;bounds[bnd]&lt;&lt;<span class="stringliteral">&quot; ( + Buffer=&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">fBuffBox</a>[bnd]&lt;&lt;<span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">if</span>(fabs(bounds[bnd])&gt;fabs(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[bnd])){</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[bnd]=bounds[bnd];</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">//add on fShowerAreaExtension without being clever</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[0] = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[0] - <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">fShowerAreaExtension</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[1] = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[1] + <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">fShowerAreaExtension</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[4] = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[4] - <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">fShowerAreaExtension</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[5] = <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[5] + <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">fShowerAreaExtension</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">double</span> showersArea=(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[1]/100-<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[0]/100)*(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[5]/100-<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[4]/100);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      &lt;&lt;  <span class="stringliteral">&quot;Area extended by : &quot;</span>&lt;&lt;fShowerAreaExtension</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed betweeen: x=&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[0]&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[1]</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                             &lt;&lt;<span class="stringliteral">&quot; &amp; z=&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[4]&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[5]</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed with random XZ shift: &quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">fRandomXZShift</a>&lt;&lt;<span class="stringliteral">&quot; cm&quot;</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed over area: &quot;</span>&lt;&lt;showersArea&lt;&lt;<span class="stringliteral">&quot; m^2&quot;</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed over time: &quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>&lt;&lt;<span class="stringliteral">&quot; s&quot;</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed with time offset: &quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">fToffset</a>&lt;&lt;<span class="stringliteral">&quot; s&quot;</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      &lt;&lt;<span class="stringliteral">&quot;\nShowers to be distributed at y: &quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">fShowerBounds</a>[3]&lt;&lt;<span class="stringliteral">&quot; cm&quot;</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      ;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">//db variables</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    sqlite3_stmt *statement;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">const</span> std::string kStatement(<span class="stringliteral">&quot;select erange_high,erange_low,eslope,nshow from input&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">double</span> upperLimitOfEnergyRange=0.,lowerLimitOfEnergyRange=0.,energySlope=0.,oneMinusGamma=0.,EiToOneMinusGamma=0.,EfToOneMinusGamma=0.;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a>; i++){</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">//build and do query to get run info from databases</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="comment">//  double thisrnd=flat();//need a new random number for each query</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> ( sqlite3_prepare(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i], kStatement.c_str(), -1, &amp;statement, 0 ) == SQLITE_OK ){</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordtype">int</span> res=0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;          res = sqlite3_step(statement);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="keywordflow">if</span> ( res == SQLITE_ROW ){</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            upperLimitOfEnergyRange=sqlite3_column_double(statement,0);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            lowerLimitOfEnergyRange=sqlite3_column_double(statement,1);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            energySlope = sqlite3_column_double(statement,2);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">fMaxShowers</a>.push_back(sqlite3_column_int(statement,3));</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            oneMinusGamma = 1 + energySlope;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            EiToOneMinusGamma = pow(lowerLimitOfEnergyRange, oneMinusGamma);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            EfToOneMinusGamma = pow(upperLimitOfEnergyRange, oneMinusGamma);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            mf::LogVerbatim(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;For showers input &quot;</span>&lt;&lt; i&lt;&lt;<span class="stringliteral">&quot; found e_hi=&quot;</span>&lt;&lt;upperLimitOfEnergyRange&lt;&lt;<span class="stringliteral">&quot;, e_lo=&quot;</span>&lt;&lt;lowerLimitOfEnergyRange&lt;&lt;<span class="stringliteral">&quot;, slope=&quot;</span>&lt;&lt;energySlope&lt;&lt;<span class="stringliteral">&quot;, k=&quot;</span>&lt;&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">fShowerFluxConstants</a>[i]&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Unexpected sqlite3_step return value: (&quot;</span> &lt;&lt;res&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;          <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Error preparing statement: (&quot;</span> &lt;&lt;kStatement&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="comment">//this is computed, how?</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordtype">double</span> NShowers=( M_PI * showersArea * <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">fShowerFluxConstants</a>[i] * (EfToOneMinusGamma - EiToOneMinusGamma) / oneMinusGamma )*<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">fSampleTime</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">fNShowersPerEvent</a>.push_back(NShowers);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      mf::LogVerbatim(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;For showers input &quot;</span>&lt;&lt; i</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                               &lt;&lt;<span class="stringliteral">&quot; the number of showers per event is &quot;</span>&lt;&lt;(int)NShowers&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a6f1faf6cd8deda80a711e5e39bf4efa1"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a6f1faf6cd8deda80a711e5e39bf4efa1">evgen::CORSIKAGen::fToffset</a></div><div class="ttdeci">double fToffset</div><div class="ttdoc">Time offset of sample, defaults to zero (no offset) [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00279">CORSIKAGen_module.cc:279</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_ab8339e82d42b3ef9dbc68666e1bcc4ab"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#ab8339e82d42b3ef9dbc68666e1bcc4ab">evgen::CORSIKAGen::fSampleTime</a></div><div class="ttdeci">double fSampleTime</div><div class="ttdoc">Duration of sample [s]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00278">CORSIKAGen_module.cc:278</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a2ab67896cd9a9ec62356478bf49a6652"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">evgen::CORSIKAGen::fShowerInputs</a></div><div class="ttdeci">int fShowerInputs</div><div class="ttdoc">Number of shower inputs to process from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">CORSIKAGen_module.cc:266</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0b9e0bcefaaaa2eb17dc761b760e7c61"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">evgen::CORSIKAGen::fdb</a></div><div class="ttdeci">sqlite3 * fdb[5]</div><div class="ttdoc">Pointers to sqlite3 database object, max of 5. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">CORSIKAGen_module.cc:282</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a980b16f939ad5b4898ff7379a72c0e64"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a980b16f939ad5b4898ff7379a72c0e64">evgen::CORSIKAGen::fShowerFluxConstants</a></div><div class="ttdeci">std::vector&lt; double &gt; fShowerFluxConstants</div><div class="ttdoc">Set of flux constants to be associated with each shower data file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00277">CORSIKAGen_module.cc:277</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a208c0d2aa50d416e955d68957d75af0c"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a208c0d2aa50d416e955d68957d75af0c">evgen::CORSIKAGen::fMaxShowers</a></div><div class="ttdeci">std::vector&lt; int &gt; fMaxShowers</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00268">CORSIKAGen_module.cc:268</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_adbeb15bfb3616a7f60b3add3d11ade5a"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#adbeb15bfb3616a7f60b3add3d11ade5a">evgen::CORSIKAGen::fRandomXZShift</a></div><div class="ttdeci">double fRandomXZShift</div><div class="ttdoc">Each shower will be shifted by a random amount in xz so that showers won&amp;#39;t repeatedly sample the same...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00283">CORSIKAGen_module.cc:283</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a38d6af58184bdb8263ab10c8dbe7fb1f"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a38d6af58184bdb8263ab10c8dbe7fb1f">evgen::CORSIKAGen::fShowerBounds</a></div><div class="ttdeci">double fShowerBounds[6]</div><div class="ttdoc">Boundaries of area over which showers are to be distributed (x(min), x(max), unused, y, z(min), z(max) ) </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00269">CORSIKAGen_module.cc:269</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a035465680ca9f9493f0761c911c736e8"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a035465680ca9f9493f0761c911c736e8">evgen::CORSIKAGen::fNShowersPerEvent</a></div><div class="ttdeci">std::vector&lt; double &gt; fNShowersPerEvent</div><div class="ttdoc">Number of showers to put in each event of duration fSampleTime; one per showerinput. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00267">CORSIKAGen_module.cc:267</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_ac8092f07c0302e1b1b49dd008e95963f"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#ac8092f07c0302e1b1b49dd008e95963f">evgen::CORSIKAGen::fShowerAreaExtension</a></div><div class="ttdeci">double fShowerAreaExtension</div><div class="ttdoc">Extend distribution of corsika particles in x,z by this much (e.g. 1000 will extend 10 m in -x...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00281">CORSIKAGen_module.cc:281</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a86c567dda3844f0ee4c57e6d9e3f44d0"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">evgen::CORSIKAGen::fBuffBox</a></div><div class="ttdeci">std::vector&lt; double &gt; fBuffBox</div><div class="ttdoc">Buffer box extensions to cryostat in each direction (6 of them: x_lo,x_hi,y_lo,y_hi,z_lo,z_hi) [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00280">CORSIKAGen_module.cc:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a065ab358ca213622b0afd0a2b1432ea5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::populateTOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00460">460</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                  {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">//populate TOffset_corsika by finding minimum ParticleTime from db file</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    sqlite3_stmt *statement;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">const</span> std::string kStatement(<span class="stringliteral">&quot;select min(t) from particles&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordtype">double</span> t=0.;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">fShowerInputs</a>; i++){</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">//build and do query to get run min(t) from each db</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> ( sqlite3_prepare(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i], kStatement.c_str(), -1, &amp;statement, 0 ) == SQLITE_OK ){</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <span class="keywordtype">int</span> res=0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          res = sqlite3_step(statement);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          <span class="keywordflow">if</span> ( res == SQLITE_ROW ){</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            t=sqlite3_column_double(statement,0);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;For showers input &quot;</span>&lt;&lt; i&lt;&lt;<span class="stringliteral">&quot; found particles.min(t)=&quot;</span>&lt;&lt;t&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordflow">if</span> (i==0 || t&lt;<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">fToffset_corsika</a>) <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">fToffset_corsika</a>=t;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Unexpected sqlite3_step return value: (&quot;</span> &lt;&lt;res&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Error preparing statement: (&quot;</span> &lt;&lt;kStatement&lt;&lt;<span class="stringliteral">&quot;); &quot;</span>&lt;&lt;<span class="stringliteral">&quot;ERROR:&quot;</span>&lt;&lt;sqlite3_errmsg(<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">fdb</a>[i])&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Found corsika timeoffset [ns]: &quot;</span>&lt;&lt; <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">fToffset_corsika</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a2ab67896cd9a9ec62356478bf49a6652"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a2ab67896cd9a9ec62356478bf49a6652">evgen::CORSIKAGen::fShowerInputs</a></div><div class="ttdeci">int fShowerInputs</div><div class="ttdoc">Number of shower inputs to process from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">CORSIKAGen_module.cc:266</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0b9e0bcefaaaa2eb17dc761b760e7c61"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0b9e0bcefaaaa2eb17dc761b760e7c61">evgen::CORSIKAGen::fdb</a></div><div class="ttdeci">sqlite3 * fdb[5]</div><div class="ttdoc">Pointers to sqlite3 database object, max of 5. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">CORSIKAGen_module.cc:282</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a0ac146e26e334e17b1a1ae1fbe9697b9"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a0ac146e26e334e17b1a1ae1fbe9697b9">evgen::CORSIKAGen::fToffset_corsika</a></div><div class="ttdeci">double fToffset_corsika</div><div class="ttdoc">Timing offset to account for propagation time through atmosphere, populated from db. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00270">CORSIKAGen_module.cc:270</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a272d7dac4ee885a5e24d224fa55de7a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::produce </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00720">720</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                       {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    std::unique_ptr&lt; std::vector&lt;simb::MCTruth&gt; &gt; truthcol(<span class="keyword">new</span> std::vector&lt;simb::MCTruth&gt;);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    art::ServiceHandle&lt;geo::Geometry const&gt; geom;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    simb::MCTruth truth;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    truth.SetOrigin(<a class="code" href="../../d0/d98/PAC2020_2SBND_2helper_8h.html#a0f8170e4d8765178d662f2d77d6e92ce">simb::kCosmicRay</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    simb::MCTruth pretruth;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#aff5df0b647cfc99c3eb832a608cd0d97">GetSample</a>(pretruth);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;GetSample number of particles returned: &quot;</span>&lt;&lt;pretruth.NParticles()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// loop over particles in the truth object</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; pretruth.NParticles(); ++i){</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      simb::MCParticle particle = pretruth.GetParticle(i);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keyword">const</span> TLorentzVector&amp; v4 = particle.Position();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keyword">const</span> TLorentzVector&amp; p4 = particle.Momentum();</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordtype">double</span> x0[3] = {v4.X(),  v4.Y(),  v4.Z() };</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordtype">double</span> dx[3] = {p4.Px(), p4.Py(), p4.Pz()};</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="comment">// now check if the particle goes through any cryostat in the detector</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="comment">// if so, add it to the truth object.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; geom-&gt;Ncryostats(); ++c){</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordtype">double</span> bounds[6] = {0.};</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        geom-&gt;CryostatBoundaries(bounds, c);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">//add a buffer box around the cryostat bounds to increase the acceptance and account for scattering</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">//By default, the buffer box has zero size</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cb=0; cb&lt;6; cb++)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;           bounds[cb] = bounds[cb]+<a class="code" href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">fBuffBox</a>[cb];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="comment">//calculate the intersection point with each cryostat surface</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordtype">bool</span> intersects_cryo = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bnd=0; bnd!=6; ++bnd) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;          <span class="keywordflow">if</span> (bnd&lt;2) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordtype">double</span> p2[3] = {bounds[bnd],  x0[1] + (dx[1]/dx[0])*(bounds[bnd] - x0[0]), x0[2] + (dx[2]/dx[0])*(bounds[bnd] - x0[0])};</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordflow">if</span> ( p2[1] &gt;= bounds[2] &amp;&amp; p2[1] &lt;= bounds[3] &amp;&amp;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                 p2[2] &gt;= bounds[4] &amp;&amp; p2[2] &lt;= bounds[5] ) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;              intersects_cryo = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;          }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bnd&gt;=2 &amp;&amp; bnd&lt;4) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordtype">double</span> p2[3] = {x0[0] + (dx[0]/dx[1])*(bounds[bnd] - x0[1]), bounds[bnd], x0[2] + (dx[2]/dx[1])*(bounds[bnd] - x0[1])};</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> ( p2[0] &gt;= bounds[0] &amp;&amp; p2[0] &lt;= bounds[1] &amp;&amp;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                 p2[2] &gt;= bounds[4] &amp;&amp; p2[2] &lt;= bounds[5] ) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;              intersects_cryo = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bnd&gt;=4) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <span class="keywordtype">double</span> p2[3] = {x0[0] + (dx[0]/dx[2])*(bounds[bnd] - x0[2]), x0[1] + (dx[1]/dx[2])*(bounds[bnd] - x0[2]), bounds[bnd]};</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> ( p2[0] &gt;= bounds[0] &amp;&amp; p2[0] &lt;= bounds[1] &amp;&amp;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                 p2[1] &gt;= bounds[2] &amp;&amp; p2[1] &lt;= bounds[3] ) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;              intersects_cryo = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;          }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">if</span> (intersects_cryo){</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          truth.Add(particle);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          <span class="keywordflow">break</span>; <span class="comment">//leave loop over cryostats to avoid adding particle multiple times</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }<span class="comment">// end if particle goes into a cryostat</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      }<span class="comment">// end loop over cryostats in the detector</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }<span class="comment">// loop on particles</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    mf::LogInfo(<span class="stringliteral">&quot;CORSIKAGen&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;Number of particles from getsample crossing cryostat + bounding box: &quot;</span>&lt;&lt;truth.NParticles()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    truthcol-&gt;push_back(truth);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="../../de/d0f/namespacetca.html#a3bc30aeace71ea50324b602afa2155f2">evt</a>.put(std::move(truthcol));</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }<span class="comment">// end produce</span></div>
<div class="ttc" id="PAC2020_2SBND_2helper_8h_html_a0f8170e4d8765178d662f2d77d6e92ce"><div class="ttname"><a href="../../d0/d98/PAC2020_2SBND_2helper_8h.html#a0f8170e4d8765178d662f2d77d6e92ce">kCosmicRay</a></div><div class="ttdeci">const Cut kCosmicRay</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d98/PAC2020_2SBND_2helper_8h_source.html#l00054">PAC2020/SBND/helper.h:54</a></div></div>
<div class="ttc" id="namespacetca_html_a3bc30aeace71ea50324b602afa2155f2"><div class="ttname"><a href="../../de/d0f/namespacetca.html#a3bc30aeace71ea50324b602afa2155f2">tca::evt</a></div><div class="ttdeci">TCEvent evt</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/DataStructs_8cxx_source.html#l00008">DataStructs.cxx:8</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_aff5df0b647cfc99c3eb832a608cd0d97"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#aff5df0b647cfc99c3eb832a608cd0d97">evgen::CORSIKAGen::GetSample</a></div><div class="ttdeci">void GetSample(simb::MCTruth &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00562">CORSIKAGen_module.cc:562</a></div></div>
<div class="ttc" id="classevgen_1_1CORSIKAGen_html_a86c567dda3844f0ee4c57e6d9e3f44d0"><div class="ttname"><a href="../../db/d59/classevgen_1_1CORSIKAGen.html#a86c567dda3844f0ee4c57e6d9e3f44d0">evgen::CORSIKAGen::fBuffBox</a></div><div class="ttdeci">std::vector&lt; double &gt; fBuffBox</div><div class="ttdoc">Buffer box extensions to cryostat in each direction (6 of them: x_lo,x_hi,y_lo,y_hi,z_lo,z_hi) [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00280">CORSIKAGen_module.cc:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5938a088a0092387d0297ce1179b6adf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void evgen::CORSIKAGen::ProjectToBoxEdge </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xyz</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>dxyz</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xlo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xhi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>ylo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>yhi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>zlo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>zhi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xyzout</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Propagates a point back to the surface of a box. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xyz</td><td>coordinates of the point to be propagated (<code>{ x, y, z }</code>) </td></tr>
    <tr><td class="paramname">dxyz</td><td>direction of the point (<code>{ dx, dy, dz }</code>) </td></tr>
    <tr><td class="paramname">xlo</td><td>lower <em>x</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">xhi</td><td>upper <em>x</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">ylo</td><td>lower <em>y</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">yhi</td><td>upper <em>y</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">zlo</td><td>lower <em>z</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">zhi</td><td>upper <em>z</em> coordinate of the target box </td></tr>
    <tr><td class="paramname">xyzout</td><td>_(output, room for at least 3 numbers)_ propagated point</td></tr>
  </table>
  </dd>
</dl>
<p>The point <code>xyz</code>, assumed to be inside the box, is propagated at the level of <em>the closest among the sides of the box</em>. Note that this means the propagated point might still be not on the surface of the box, even if it would later reach it. It is anyway guaranteed that <code>xyzout</code> is not inside the target box, and that at least one of its three coordinates is on the box surface. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00333">333</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                          {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">//we want to project backwards, so take mirror of momentum</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> dxyz[3]={-indxyz[0],-indxyz[1],-indxyz[2]};</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Compute the distances to the x/y/z walls</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordtype">double</span> dx = 99.E99;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">double</span> dy = 99.E99;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">double</span> dz = 99.E99;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span>      (dxyz[0] &gt; 0.0) { dx = (xhi-xyz[0])/dxyz[0]; }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dxyz[0] &lt; 0.0) { dx = (xlo-xyz[0])/dxyz[0]; }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span>      (dxyz[1] &gt; 0.0) { dy = (yhi-xyz[1])/dxyz[1]; }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dxyz[1] &lt; 0.0) { dy = (ylo-xyz[1])/dxyz[1]; }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span>      (dxyz[2] &gt; 0.0) { dz = (zhi-xyz[2])/dxyz[2]; }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dxyz[2] &lt; 0.0) { dz = (zlo-xyz[2])/dxyz[2]; }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// Choose the shortest distance</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">double</span> d = 0.0;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span>      (dx &lt; dy &amp;&amp; dx &lt; dz) d = dx;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dy &lt; dz &amp;&amp; dy &lt; dx) d = dy;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dz &lt; dx &amp;&amp; dz &lt; dy) d = dz;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Make the step</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      xyzout[i] = xyz[i] + dxyz[i]*d;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae661e984083d87eadfb670e84af1f199"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::wrapvar </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>high</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00449">449</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                                                                  {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">//wrap variable so that it&#39;s always between low and high</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">return</span> (var - (high - <a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>) * floor(var/(high-<a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>))) + <a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  }</div>
<div class="ttc" id="clusteralgorithms_8fcl_html_ae8c2886a2cc7a0fb0fbf4efdb2d32257"><div class="ttname"><a href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a></div><div class="ttdeci">standard_dbscan3dalg useful for diagnostics hits not in a line will not be clustered on on only for track like only for track like on on the smaller the less shower like tracks low</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d69/clusteralgorithms_8fcl_source.html#l00253">clusteralgorithms.fcl:253</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a406aba8d8b8f97b65b814a3c2fd6f14c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::wrapvarBoxNo </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>high</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>boxno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00454">454</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                                                                   {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">//wrap variable so that it&#39;s always between low and high</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    boxno=int(floor(var/(high-<a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>)));</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> (var - (high - <a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>) * floor(var/(high-<a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>))) + <a class="code" href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div>
<div class="ttc" id="clusteralgorithms_8fcl_html_ae8c2886a2cc7a0fb0fbf4efdb2d32257"><div class="ttname"><a href="../../d6/d69/clusteralgorithms_8fcl.html#ae8c2886a2cc7a0fb0fbf4efdb2d32257">low</a></div><div class="ttdeci">standard_dbscan3dalg useful for diagnostics hits not in a line will not be clustered on on only for track like only for track like on on the smaller the less shower like tracks low</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d69/clusteralgorithms_8fcl_source.html#l00253">clusteralgorithms.fcl:253</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a86c567dda3844f0ee4c57e6d9e3f44d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; evgen::CORSIKAGen::fBuffBox</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer box extensions to cryostat in each direction (6 of them: x_lo,x_hi,y_lo,y_hi,z_lo,z_hi) [cm]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00280">280</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a0b9e0bcefaaaa2eb17dc761b760e7c61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sqlite3* evgen::CORSIKAGen::fdb[5]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointers to sqlite3 database object, max of 5. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00282">282</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a831ef865e6049b358f571096a0d123a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CLHEP::HepRandomEngine&amp; evgen::CORSIKAGen::fGenEngine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00284">284</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="af3428b928ff73cf07c0fddfb05eb515b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ifdh_ns::ifdh* evgen::CORSIKAGen::fIFDH =0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>(optional) flux file handling </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00271">271</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a208c0d2aa50d416e955d68957d75af0c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; evgen::CORSIKAGen::fMaxShowers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00268">268</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a035465680ca9f9493f0761c911c736e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; evgen::CORSIKAGen::fNShowersPerEvent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of showers to put in each event of duration fSampleTime; one per showerinput. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00267">267</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a14dcafc9edf31a6f2800609973c1a9aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CLHEP::HepRandomEngine&amp; evgen::CORSIKAGen::fPoisEngine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00285">285</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aa873c00ee34426f41e10e104aed7e4b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fProjectToHeight =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Height to which particles will be projected [cm]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00274">274</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="adbeb15bfb3616a7f60b3add3d11ade5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fRandomXZShift =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Each shower will be shifted by a random amount in xz so that showers won't repeatedly sample the same space [cm]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00283">283</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ab8339e82d42b3ef9dbc68666e1bcc4ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fSampleTime =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duration of sample [s]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00278">278</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ac8092f07c0302e1b1b49dd008e95963f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fShowerAreaExtension =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extend distribution of corsika particles in x,z by this much (e.g. 1000 will extend 10 m in -x, +x, -z, and +z) [cm]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00281">281</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a38d6af58184bdb8263ab10c8dbe7fb1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fShowerBounds[6] ={0.,0.,0.,0.,0.,0.}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boundaries of area over which showers are to be distributed (x(min), x(max), <em>unused</em>, y, z(min), z(max) ) </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00269">269</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="af4b6d621bc4ed58e58f628731d1707a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string evgen::CORSIKAGen::fShowerCopyType</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00276">276</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a980b16f939ad5b4898ff7379a72c0e64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; evgen::CORSIKAGen::fShowerFluxConstants</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set of flux constants to be associated with each shower data file. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00277">277</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="aec409369d4ab955084d6c09f4c98156c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; evgen::CORSIKAGen::fShowerInputFiles</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set of CORSIKA shower data files to use. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00275">275</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a2ab67896cd9a9ec62356478bf49a6652"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int evgen::CORSIKAGen::fShowerInputs =0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of shower inputs to process from. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00266">266</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6f1faf6cd8deda80a711e5e39bf4efa1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fToffset =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time offset of sample, defaults to zero (no offset) [s]. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00279">279</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a0ac146e26e334e17b1a1ae1fbe9697b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double evgen::CORSIKAGen::fToffset_corsika =0.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timing offset to account for propagation time through atmosphere, populated from db. </p>

<p>Definition at line <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html#l00270">270</a> of file <a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../d6/d97/CORSIKAGen__module_8cc_source.html">CORSIKAGen_module.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
