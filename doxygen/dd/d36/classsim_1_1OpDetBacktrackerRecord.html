<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>sim::OpDetBacktrackerRecord Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d7d/namespacesim.html">sim</a></li><li class="navelem"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d6/d12/classsim_1_1OpDetBacktrackerRecord-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sim::OpDetBacktrackerRecord Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Energy deposited on a readout Optical Detector by simulated tracks.  
 <a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d05/structsim_1_1OpDetBacktrackerRecord_1_1CompareByTimePDclock.html">CompareByTimePDclock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa7adeff4821f9f3188d3a65a91072ec7"><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
timePDclockSDP_t::first_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">storedTimePDclock_t</a></td></tr>
<tr class="memdesc:aa7adeff4821f9f3188d3a65a91072ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for timePDclock tick used in the internal representation.  <a href="#aa7adeff4821f9f3188d3a65a91072ec7">More...</a><br/></td></tr>
<tr class="separator:aa7adeff4821f9f3188d3a65a91072ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8ebbb2da17a914fa395c3f2cb647ee"><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d8/d7d/namespacesim.html#ab855bebd5e64aeb1fa367f97f1d6205f">timePDclockSDP_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">timePDclockSDPs_t</a></td></tr>
<tr class="memdesc:aca8ebbb2da17a914fa395c3f2cb647ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of list of energy deposits for each timePDclock with signal.  <a href="#aca8ebbb2da17a914fa395c3f2cb647ee">More...</a><br/></td></tr>
<tr class="separator:aca8ebbb2da17a914fa395c3f2cb647ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc9df1d508ec086867b4028712cbdb5"><td class="memItemLeft" align="right" valign="top">typedef double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a></td></tr>
<tr class="memdesc:a7dc9df1d508ec086867b4028712cbdb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for iTimePDclock tick used in the interface.  <a href="#a7dc9df1d508ec086867b4028712cbdb5">More...</a><br/></td></tr>
<tr class="separator:a7dc9df1d508ec086867b4028712cbdb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af64412a95c4145252281318a022a2175"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../da/d9c/structsim_1_1SDP.html#af942b038c1ce8265921ea80553037a95">SDP::TrackID_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">TrackID_t</a></td></tr>
<tr class="memdesc:af64412a95c4145252281318a022a2175"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of track ID (the value comes from Geant4)  <a href="#af64412a95c4145252281318a022a2175">More...</a><br/></td></tr>
<tr class="separator:af64412a95c4145252281318a022a2175"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acaa5d487e977273f96d10ac4b6f72d1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acaa5d487e977273f96d10ac4b6f72d1f">OpDetBacktrackerRecord</a> ()</td></tr>
<tr class="separator:acaa5d487e977273f96d10ac4b6f72d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac62ab12e1d8a3f03e10417ae395e6ab1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#ac62ab12e1d8a3f03e10417ae395e6ab1">OpDetBacktrackerRecord</a> (int detNum)</td></tr>
<tr class="memdesc:ac62ab12e1d8a3f03e10417ae395e6ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: immediately sets the Optical Detector number.  <a href="#ac62ab12e1d8a3f03e10417ae395e6ab1">More...</a><br/></td></tr>
<tr class="separator:ac62ab12e1d8a3f03e10417ae395e6ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aee9733ee49c909fe1008f4a6e80463"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a4aee9733ee49c909fe1008f4a6e80463">AddScintillationPhotons</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">TrackID_t</a> trackID, <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> timePDclock, double numberPhotons, double const *xyz, double energy)</td></tr>
<tr class="memdesc:a4aee9733ee49c909fe1008f4a6e80463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add scintillation photons and energy to this OpticalDetector.  <a href="#a4aee9733ee49c909fe1008f4a6e80463">More...</a><br/></td></tr>
<tr class="separator:a4aee9733ee49c909fe1008f4a6e80463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8467e153830914d8ea9228e8aa99dc9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">OpDetNum</a> () const </td></tr>
<tr class="memdesc:a8467e153830914d8ea9228e8aa99dc9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the readout Optical Detector this object describes.  <a href="#a8467e153830914d8ea9228e8aa99dc9b">More...</a><br/></td></tr>
<tr class="separator:a8467e153830914d8ea9228e8aa99dc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a4d6d99065286ff657bf8df1f0460c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a28a4d6d99065286ff657bf8df1f0460c">TrackIDsAndEnergies</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> startTimePDclock, <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> endTimePDclock) const </td></tr>
<tr class="memdesc:a28a4d6d99065286ff657bf8df1f0460c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all the recorded energy deposition within a time interval.  <a href="#a28a4d6d99065286ff657bf8df1f0460c">More...</a><br/></td></tr>
<tr class="separator:a28a4d6d99065286ff657bf8df1f0460c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4e0f67a24880c26962fc45108f05fed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">timePDclockSDPs_t</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#ab4e0f67a24880c26962fc45108f05fed">timePDclockSDPsMap</a> () const </td></tr>
<tr class="memdesc:ab4e0f67a24880c26962fc45108f05fed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all the deposited energy information as stored.  <a href="#ab4e0f67a24880c26962fc45108f05fed">More...</a><br/></td></tr>
<tr class="separator:ab4e0f67a24880c26962fc45108f05fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293f039fe09b62296e53d1eeff362ce4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a293f039fe09b62296e53d1eeff362ce4">Photons</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> iTimePDclock) const </td></tr>
<tr class="memdesc:a293f039fe09b62296e53d1eeff362ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of scintillation photons on this Optical Detector in the specified timePDclock.  <a href="#a293f039fe09b62296e53d1eeff362ce4">More...</a><br/></td></tr>
<tr class="separator:a293f039fe09b62296e53d1eeff362ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dae7e36e514e30d04bd594952c6c953"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a1dae7e36e514e30d04bd594952c6c953">Energy</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> iTimePDclock) const </td></tr>
<tr class="memdesc:a1dae7e36e514e30d04bd594952c6c953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total energy on this Optical Detector in the specified iTimePDclock [MeV].  <a href="#a1dae7e36e514e30d04bd594952c6c953">More...</a><br/></td></tr>
<tr class="separator:a1dae7e36e514e30d04bd594952c6c953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffe6a06f72c746f17a0d3ed5c78a2d1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../db/de6/structsim_1_1TrackSDP.html">sim::TrackSDP</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#afffe6a06f72c746f17a0d3ed5c78a2d1">TrackSDPs</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> startTimePDclock, <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a> endTimePDclock) const </td></tr>
<tr class="memdesc:afffe6a06f72c746f17a0d3ed5c78a2d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns energies collected for each track within a time interval.  <a href="#afffe6a06f72c746f17a0d3ed5c78a2d1">More...</a><br/></td></tr>
<tr class="separator:afffe6a06f72c746f17a0d3ed5c78a2d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d68c3313be243d0df523af0267a6582"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a0d68c3313be243d0df523af0267a6582">operator&lt;</a> (const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;other) const </td></tr>
<tr class="memdesc:a0d68c3313be243d0df523af0267a6582"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparison: sorts by Optical Detector ID.  <a href="#a0d68c3313be243d0df523af0267a6582">More...</a><br/></td></tr>
<tr class="separator:a0d68c3313be243d0df523af0267a6582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6138a96e9d39b46f9849bbeb5e22d8c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af6138a96e9d39b46f9849bbeb5e22d8c">operator==</a> (const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;other) const </td></tr>
<tr class="memdesc:af6138a96e9d39b46f9849bbeb5e22d8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparison: true if OpDetBacktrackerRecords have the same Optical Detector ID.  <a href="#af6138a96e9d39b46f9849bbeb5e22d8c">More...</a><br/></td></tr>
<tr class="separator:af6138a96e9d39b46f9849bbeb5e22d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68380e84689222b823381199cbe2e20"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">TrackID_t</a>, <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">TrackID_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af68380e84689222b823381199cbe2e20">MergeOpDetBacktrackerRecord</a> (const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;opDetNum, int <a class="el" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a>)</td></tr>
<tr class="memdesc:af68380e84689222b823381199cbe2e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges the deposits from another Optical Detector into this one.  <a href="#af68380e84689222b823381199cbe2e20">More...</a><br/></td></tr>
<tr class="separator:af68380e84689222b823381199cbe2e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bea79d26dc1ad948836a5dd317ad761"><td class="memTemplParams" colspan="2">template&lt;typename Stream &gt; </td></tr>
<tr class="memitem:a9bea79d26dc1ad948836a5dd317ad761"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9bea79d26dc1ad948836a5dd317ad761">Dump</a> (<a class="el" href="../../d0/d8f/runFilesFromSAM_8sh.html#a9cafae22b6225844ee0cdf5ea57176ff">Stream</a> &amp;&amp;out, std::string indent, std::string first_indent) const </td></tr>
<tr class="memdesc:a9bea79d26dc1ad948836a5dd317ad761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps the full content of the <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html" title="Energy deposited on a readout Optical Detector by simulated tracks. ">OpDetBacktrackerRecord</a> into a stream.  <a href="#a9bea79d26dc1ad948836a5dd317ad761">More...</a><br/></td></tr>
<tr class="separator:a9bea79d26dc1ad948836a5dd317ad761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8424021368042520efca492904253c16"><td class="memTemplParams" colspan="2">template&lt;typename Stream &gt; </td></tr>
<tr class="memitem:a8424021368042520efca492904253c16"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8424021368042520efca492904253c16">Dump</a> (<a class="el" href="../../d0/d8f/runFilesFromSAM_8sh.html#a9cafae22b6225844ee0cdf5ea57176ff">Stream</a> &amp;&amp;out, std::string indent=&quot;&quot;) const </td></tr>
<tr class="memdesc:a8424021368042520efca492904253c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Documentation at <code><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9bea79d26dc1ad948836a5dd317ad761" title="Dumps the full content of the OpDetBacktrackerRecord into a stream. ">Dump(Stream&amp;&amp;, std::string, std::string) const</a></code>.  <a href="#a8424021368042520efca492904253c16">More...</a><br/></td></tr>
<tr class="separator:a8424021368042520efca492904253c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af0d28b1dd6061e8f6a5317bf2cbe854c"><td class="memItemLeft" align="right" valign="top">timePDclockSDPs_t::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">storedTimePDclock_t</a> timePDclock)</td></tr>
<tr class="memdesc:af0d28b1dd6061e8f6a5317bf2cbe854c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the iterator to the first timePDclockSDP not earlier than timePDclock.  <a href="#af0d28b1dd6061e8f6a5317bf2cbe854c">More...</a><br/></td></tr>
<tr class="separator:af0d28b1dd6061e8f6a5317bf2cbe854c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9becb6435ccac0f7f31730e07efbd639"><td class="memItemLeft" align="right" valign="top">timePDclockSDPs_t::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9becb6435ccac0f7f31730e07efbd639">findClosestTimePDclockSDP</a> (<a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">storedTimePDclock_t</a> timePDclock) const </td></tr>
<tr class="memdesc:a9becb6435ccac0f7f31730e07efbd639"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the (constant) iterator to the first timePDclockSDP not earlier than timePDclock.  <a href="#a9becb6435ccac0f7f31730e07efbd639">More...</a><br/></td></tr>
<tr class="separator:a9becb6435ccac0f7f31730e07efbd639"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a41ca910afbb4d91d966fda0ccee2615e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a></td></tr>
<tr class="memdesc:a41ca910afbb4d91d966fda0ccee2615e"><td class="mdescLeft">&#160;</td><td class="mdescRight">OpticalDetector where the photons were detected.  <a href="#a41ca910afbb4d91d966fda0ccee2615e">More...</a><br/></td></tr>
<tr class="separator:a41ca910afbb4d91d966fda0ccee2615e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd40677d49bf800e062ac080a97b3ec1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">timePDclockSDPs_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a></td></tr>
<tr class="memdesc:acd40677d49bf800e062ac080a97b3ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of energy deposits for each timePDclock with signal  <a href="#acd40677d49bf800e062ac080a97b3ec1">More...</a><br/></td></tr>
<tr class="separator:acd40677d49bf800e062ac080a97b3ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Energy deposited on a readout Optical Detector by simulated tracks. </p>
<p>This class stores a time organized list of scintillation photons detected connected to the G4 tracks they originated from. This class also tracks the energy deposited by those tracks, and what fraction of the energy deposited is realted to the photons detected by this OpDet.</p>
<p>The information is organized by time: it is divided by timePDclock ticks (units of ns), and each timePDclock tick where some energy was deposited appears in a separate entry, while the quiet timePDclock ticks are omitted. For each timePDclock, the information is stored as a list of energy deposits; each deposit comes from a single Geant4 track and stores the location where the ionization happened according to the simulation (see <code><a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></code> class).</p>
<p>Note that there can be multiple energy deposit records (that is <code><a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></code>) for a single track in a single timePDclock tick. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00123">123</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aa7adeff4821f9f3188d3a65a91072ec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef timePDclockSDP_t::first_type <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">sim::OpDetBacktrackerRecord::storedTimePDclock_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for timePDclock tick used in the internal representation. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00127">127</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7dc9df1d508ec086867b4028712cbdb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef double <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">sim::OpDetBacktrackerRecord::timePDclock_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for iTimePDclock tick used in the interface. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00144">144</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<a class="anchor" id="aca8ebbb2da17a914fa395c3f2cb647ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../d8/d7d/namespacesim.html#ab855bebd5e64aeb1fa367f97f1d6205f">timePDclockSDP_t</a>&gt; <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">sim::OpDetBacktrackerRecord::timePDclockSDPs_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of list of energy deposits for each timePDclock with signal. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00130">130</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<a class="anchor" id="af64412a95c4145252281318a022a2175"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../da/d9c/structsim_1_1SDP.html#af942b038c1ce8265921ea80553037a95">SDP::TrackID_t</a> <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">sim::OpDetBacktrackerRecord::TrackID_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of track ID (the value comes from Geant4) </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00147">147</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acaa5d487e977273f96d10ac4b6f72d1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sim::OpDetBacktrackerRecord::OpDetBacktrackerRecord </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00044">44</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    : <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a>(-1) <span class="comment">//set an impossible channel number in the case where this is called without an opticalchannel.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                     <span class="comment">//The reason for doing this is to follow the structure of SimChannel, which uses kBogusChannel</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  {}</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a41ca910afbb4d91d966fda0ccee2615e"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">sim::OpDetBacktrackerRecord::iOpDetNum</a></div><div class="ttdeci">int iOpDetNum</div><div class="ttdoc">OpticalDetector where the photons were detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">OpDetBacktrackerRecord.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac62ab12e1d8a3f03e10417ae395e6ab1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sim::OpDetBacktrackerRecord::OpDetBacktrackerRecord </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>detNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor: immediately sets the Optical Detector number. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00050">50</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    : <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a>(detNum)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  {}</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a41ca910afbb4d91d966fda0ccee2615e"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">sim::OpDetBacktrackerRecord::iOpDetNum</a></div><div class="ttdeci">int iOpDetNum</div><div class="ttdoc">OpticalDetector where the photons were detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">OpDetBacktrackerRecord.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4aee9733ee49c909fe1008f4a6e80463"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sim::OpDetBacktrackerRecord::AddScintillationPhotons </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">TrackID_t</a>&#160;</td>
          <td class="paramname"><em>trackID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>timePDclock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>numberPhotons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double const *&#160;</td>
          <td class="paramname"><em>xyz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>energy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add scintillation photons and energy to this OpticalDetector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trackID</td><td>ID of simulated track depositing this energy (from Geant4) </td></tr>
    <tr><td class="paramname">timePDclock</td><td>tick when this deposit was collected (ns) </td></tr>
    <tr><td class="paramname">numberPhotons</td><td>detected at the OpticalDetector at this time from this track </td></tr>
    <tr><td class="paramname">xyz</td><td>coordinates of original location of ionization/scintillation (3D array) [cm] </td></tr>
    <tr><td class="paramname">energy</td><td>energy deposited at this point by this track [MeV] </td></tr>
  </table>
  </dd>
</dl>
<p>The iTimePDclock from OpFastScintillation (where OpDetBacktrackerRecords originate) is done with CLHEP::ns (units of nanoseconds).</p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00055">55</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  {<span class="comment"></span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     * The iTimePDclock from OpFastScintillation (where OpDetBacktrackerRecords originate) is done with CLHEP::ns (units of nanoseconds).</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// look at the collection to see if the current iTimePDclock already</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// exists, if not, add it, if so, just add a new track id to the</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// vector, or update the information if track is already present</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// no photons? no good!</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (( numberPhotons &lt; std::numeric_limits&lt;double&gt;::epsilon() )</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        || ( energy&lt;=std::numeric_limits&lt;double&gt;::epsilon()      ))</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="comment">// will throw</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      MF_LOG_ERROR(<span class="stringliteral">&quot;OpDetBacktrackerRecord&quot;</span>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;AddTrackPhotons() trying to add to iTimePDclock #&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      &lt;&lt; iTimePDclock</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      &lt;&lt; numberPhotons</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; photons with &quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      &lt;&lt; energy</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; MeV of energy from track ID=&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      &lt;&lt; trackID;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    } <span class="comment">// if no photons</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">auto</span> itr = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a>(iTimePDclock);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// check if this iTimePDclock value is in the vector, it is possible that</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// the lower bound is different from the given TimePDclock, in which case</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// we need to add something for that TimePDclock</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span>(itr        == <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end() ||</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a>(itr-&gt;first - iTimePDclock) &gt; .50 )){</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;       <span class="comment">//itr-&gt;first != iTimePDclock){</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      std::vector&lt;sim::SDP&gt; sdplist;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      sdplist.emplace_back(trackID,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                           numberPhotons,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                           energy,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                           xyz[0],</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                           xyz[1],</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                           xyz[2]</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                           );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.emplace(itr, std::round(iTimePDclock), std::move(sdplist) );</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// we have that iTimePDclock already; itr points to it</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="comment">// loop over the SDP vector for this iTimePDclock and add the electrons</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// to the entry with the same track id</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; sdp : itr-&gt;second){</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (sdp.trackID != trackID ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// make a weighted average for the location information</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordtype">double</span> weight    = sdp.numPhotons + numberPhotons;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        sdp.x            = (sdp.x * sdp.numPhotons + xyz[0]*numberPhotons)/weight;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        sdp.y            = (sdp.y * sdp.numPhotons + xyz[1]*numberPhotons)/weight;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        sdp.z            = (sdp.z * sdp.numPhotons + xyz[2]*numberPhotons)/weight;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        sdp.numPhotons   = weight;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        sdp.energy       = sdp.energy + energy;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">// found the track id we wanted, so return;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      } <span class="comment">// for</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="comment">// if we never found the track id, then this is the first instance of</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="comment">// the track id for this TimePDclock, so add sdp to the vector</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      itr-&gt;second.emplace_back(trackID,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                               numberPhotons,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                               energy,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                               xyz[0],</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                               xyz[1],</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                               xyz[2]</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                               );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    } <span class="comment">// end of else &quot;We have that iTimePDclock already&quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  } <span class="comment">// OpDetBacktrackerRecord::AddIonizationElectrons()</span></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="sparse__vector__test_8cc_html_a39f16bf854ba527dee7eba5bbbd93f3f"><div class="ttname"><a href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a></div><div class="ttdeci">T abs(T value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d59/sparse__vector__test_8cc_source.html#l00030">sparse_vector_test.cc:30</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_af0d28b1dd6061e8f6a5317bf2cbe854c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP</a></div><div class="ttdeci">timePDclockSDPs_t::iterator findClosestTimePDclockSDP(storedTimePDclock_t timePDclock)</div><div class="ttdoc">Return the iterator to the first timePDclockSDP not earlier than timePDclock. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">OpDetBacktrackerRecord.cxx:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9bea79d26dc1ad948836a5dd317ad761"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Stream &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void sim::OpDetBacktrackerRecord::Dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/runFilesFromSAM_8sh.html#a9cafae22b6225844ee0cdf5ea57176ff">Stream</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>indent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>first_indent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dumps the full content of the <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html" title="Energy deposited on a readout Optical Detector by simulated tracks. ">OpDetBacktrackerRecord</a> into a stream. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Stream</td><td>an ostream-like stream object </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>the stream to send the information into </td></tr>
    <tr><td class="paramname">indent</td><td>indentation of the lines (default: none) </td></tr>
    <tr><td class="paramname">first_indent</td><td>indentation for the first line (default: as indent) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00316">316</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  out &lt;&lt; first_indent &lt;&lt; <span class="stringliteral">&quot;OpDet #&quot;</span> &lt;&lt; <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">OpDetNum</a>() &lt;&lt; <span class="stringliteral">&quot; read &quot;</span> &lt;&lt; <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.size()</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; timePDclocks:\n&quot;</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordtype">double</span> opDet_energy = 0., opDet_photons = 0.;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; timePDclockinfo: <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> iTimePDclock = timePDclockinfo.first;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    out &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;  timePDclock #&quot;</span> &lt;&lt; iTimePDclock</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; timePDclockinfo.second.size() &lt;&lt; <span class="stringliteral">&quot; SDPs\n&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">double</span> timePDclock_energy = 0., timePDclock_photons = 0.;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a>&amp; sdp: timePDclockinfo.second) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      out &lt;&lt; indent</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;    (&quot;</span> &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a826b8aa1d977ae0929828ac37cf7208a">x</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#ad240a10ffffdbf57482d0bfff03e4e73">y</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a4bcdaadae480beac9551b1e7efedd26e">z</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">numPhotons</a> &lt;&lt; <span class="stringliteral">&quot; photons, &quot;</span> &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#ab71b28d1e907eaa0ae6aced242ebc0c0">energy</a> &lt;&lt; <span class="stringliteral">&quot;MeV  (trkID=&quot;</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        &lt;&lt; sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a60e2931c7e5aeac4853ab17e6da8414e">trackID</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      timePDclock_energy += sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#ab71b28d1e907eaa0ae6aced242ebc0c0">energy</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      timePDclock_photons += sdp.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">numPhotons</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="comment">// for SDPs</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    out &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;    =&gt; timePDclock #&quot;</span> &lt;&lt; iTimePDclock &lt;&lt; <span class="stringliteral">&quot; CH #&quot;</span> &lt;&lt; <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">OpDetNum</a>()</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; collected &quot;</span> &lt;&lt; timePDclock_energy &lt;&lt; <span class="stringliteral">&quot; MeV and &quot;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      &lt;&lt; timePDclock_photons &lt;&lt;<span class="stringliteral">&quot; photons. \n&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    opDet_energy += timePDclock_energy;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    opDet_photons += timePDclock_photons;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  } <span class="comment">// for timePDclocks</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  out &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;  =&gt; channel #&quot;</span> &lt;&lt; <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">OpDetNum</a>() &lt;&lt; <span class="stringliteral">&quot; collected &quot;</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    &lt;&lt; opDet_photons &lt;&lt; <span class="stringliteral">&quot; photons and &quot;</span>&lt;&lt; opDet_energy &lt;&lt; <span class="stringliteral">&quot; MeV.\n&quot;</span> ;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;} <span class="comment">// sim::OpDetBacktrackerRecord::Dump&lt;&gt;()</span></div>
<div class="ttc" id="structsim_1_1SDP_html_a826b8aa1d977ae0929828ac37cf7208a"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a826b8aa1d977ae0929828ac37cf7208a">sim::SDP::x</a></div><div class="ttdeci">float x</div><div class="ttdoc">x position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00097">OpDetBacktrackerRecord.h:97</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00066">OpDetBacktrackerRecord.h:66</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a8467e153830914d8ea9228e8aa99dc9b"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">sim::OpDetBacktrackerRecord::OpDetNum</a></div><div class="ttdeci">int OpDetNum() const </div><div class="ttdoc">Returns the readout Optical Detector this object describes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00308">OpDetBacktrackerRecord.h:308</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_a60e2931c7e5aeac4853ab17e6da8414e"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a60e2931c7e5aeac4853ab17e6da8414e">sim::SDP::trackID</a></div><div class="ttdeci">TrackID_t trackID</div><div class="ttdoc">Geant4 supplied track ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00094">OpDetBacktrackerRecord.h:94</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_ad240a10ffffdbf57482d0bfff03e4e73"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#ad240a10ffffdbf57482d0bfff03e4e73">sim::SDP::y</a></div><div class="ttdeci">float y</div><div class="ttdoc">y position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00098">OpDetBacktrackerRecord.h:98</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_a88e8e2c355857ac71027856d225612af"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">sim::SDP::numPhotons</a></div><div class="ttdeci">float numPhotons</div><div class="ttdoc">number of photons at the optical detector for this track ID and time </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00095">OpDetBacktrackerRecord.h:95</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_ab71b28d1e907eaa0ae6aced242ebc0c0"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#ab71b28d1e907eaa0ae6aced242ebc0c0">sim::SDP::energy</a></div><div class="ttdeci">float energy</div><div class="ttdoc">energy deposited by ionization </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00096">OpDetBacktrackerRecord.h:96</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_a4bcdaadae480beac9551b1e7efedd26e"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a4bcdaadae480beac9551b1e7efedd26e">sim::SDP::z</a></div><div class="ttdeci">float z</div><div class="ttdoc">z position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00099">OpDetBacktrackerRecord.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8424021368042520efca492904253c16"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Stream &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sim::OpDetBacktrackerRecord::Dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/runFilesFromSAM_8sh.html#a9cafae22b6225844ee0cdf5ea57176ff">Stream</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>indent</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Documentation at <code><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9bea79d26dc1ad948836a5dd317ad761" title="Dumps the full content of the OpDetBacktrackerRecord into a stream. ">Dump(Stream&amp;&amp;, std::string, std::string) const</a></code>. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00284">284</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      { <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9bea79d26dc1ad948836a5dd317ad761">Dump</a>(std::forward&lt;Stream&gt;(out), indent, indent); }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a9bea79d26dc1ad948836a5dd317ad761"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a9bea79d26dc1ad948836a5dd317ad761">sim::OpDetBacktrackerRecord::Dump</a></div><div class="ttdeci">void Dump(Stream &amp;&amp;out, std::string indent, std::string first_indent) const </div><div class="ttdoc">Dumps the full content of the OpDetBacktrackerRecord into a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00316">OpDetBacktrackerRecord.h:316</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1dae7e36e514e30d04bd594952c6c953"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sim::OpDetBacktrackerRecord::Energy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>iTimePDclock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the total energy on this Optical Detector in the specified iTimePDclock [MeV]. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00162">162</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">double</span> energy = 0.;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">auto</span> itr = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a>(iTimePDclock);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="comment">// check to see if this iTimePDclock value is in the map</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span>(itr        != <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end() &amp;&amp;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;       itr-&gt;first == iTimePDclock){</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// loop over the list for this iTimePDclock value and add up</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// the total number of photons</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> sdp : itr-&gt;second ){</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        energy += sdp.energy;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      } <span class="comment">// end loop over sim::SDP for this TimePDclock</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    } <span class="comment">// end if this iTimePDclock is represented in the map</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">return</span> energy;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_af0d28b1dd6061e8f6a5317bf2cbe854c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP</a></div><div class="ttdeci">timePDclockSDPs_t::iterator findClosestTimePDclockSDP(storedTimePDclock_t timePDclock)</div><div class="ttdoc">Return the iterator to the first timePDclockSDP not earlier than timePDclock. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">OpDetBacktrackerRecord.cxx:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0d28b1dd6061e8f6a5317bf2cbe854c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">OpDetBacktrackerRecord::timePDclockSDPs_t::iterator sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">storedTimePDclock_t</a>&#160;</td>
          <td class="paramname"><em>timePDclock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the iterator to the first timePDclockSDP not earlier than timePDclock. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">342</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> std::lower_bound</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      (<a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.begin(), <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end(), iTimePDclock, CompareByTimePDclock());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9becb6435ccac0f7f31730e07efbd639"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">OpDetBacktrackerRecord::timePDclockSDPs_t::const_iterator sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aa7adeff4821f9f3188d3a65a91072ec7">storedTimePDclock_t</a>&#160;</td>
          <td class="paramname"><em>timePDclock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the (constant) iterator to the first timePDclockSDP not earlier than timePDclock. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00349">349</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> std::lower_bound</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      ( <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.begin(), <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end(), TimePDclock, CompareByTimePDclock() );</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af68380e84689222b823381199cbe2e20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">OpDetBacktrackerRecord::TrackID_t</a>, <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af64412a95c4145252281318a022a2175">OpDetBacktrackerRecord::TrackID_t</a> &gt; sim::OpDetBacktrackerRecord::MergeOpDetBacktrackerRecord </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;&#160;</td>
          <td class="paramname"><em>opDetNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges the deposits from another Optical Detector into this one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opDetNum</td><td>the <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html" title="Energy deposited on a readout Optical Detector by simulated tracks. ">sim::OpDetBacktrackerRecord</a> holding information to be merged </td></tr>
    <tr><td class="paramname">offset</td><td>track ID offset for the merge </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>range of the IDs of the added tracks</dd></dl>
<p>The information from the specified simulated opDetRecord is added to the current one. This is achieved by appending the energy deposit information (<code><a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></code>) at each iTimePDclock tick from the merged opDetRecord to the list of existing energy deposits for that iTimePDclock tick.</p>
<p>In addition, the track IDs of the merged opDetRecord are added an offset, so that they can be distinguished from the existing ones. This is useful when simulating tracks with multiple Geant4 runs. Geant4 will reuse track IDs on each run, and using the highest number of track ID from one run as the offset for the next avoids track ID collisions. Note however that this function does not perform any collision check, and it is caller's duty to ensure that the offset is properly large. The return value is a pair including the lowest and the largest track IDs added to this opDetRecord, equivalent to the lowest and the highest track IDs present in the merged opDetRecord, both augmented by the applied offset.</p>
<p>The opDetNum number of the merged opDetRecord is ignored. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00282">282</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span>( this-&gt;<a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">OpDetNum</a>() != channel.OpDetNum() )</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;ERROR OpDetBacktrackerRecord Merge: Trying to merge different channels!&quot;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    std::pair&lt;TrackID_t,TrackID_t&gt; range_trackID(std::numeric_limits&lt;int&gt;::max(),</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                                 std::numeric_limits&lt;int&gt;::min());</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; itr : channel.timePDclockSDPsMap()){</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keyword">auto</span> iTimePDclock  = itr.first;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdps = itr.second;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// find the entry from this OpDetBacktrackerRecord corresponding to the iTimePDclock from the other</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keyword">auto</span> itrthis = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a>(iTimePDclock);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// pick which SDP list we have to fill: new one or existing one</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      std::vector&lt;sim::SDP&gt;* curSDPVec;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span>(itrthis        == <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end() ||</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         itrthis-&gt;first != iTimePDclock){</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.emplace_back(iTimePDclock, std::vector&lt;sim::SDP&gt;());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        curSDPVec = &amp;(<a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.back().second);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        curSDPVec = &amp;(itrthis-&gt;second);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdp : sdps){</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        curSDPVec-&gt;emplace_back(sdp, <a class="code" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span>( sdp.trackID+<a class="code" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a> &lt; range_trackID.first  )</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          range_trackID.first = sdp.trackID+<a class="code" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">if</span>( sdp.trackID+<a class="code" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a> &gt; range_trackID.second )</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          range_trackID.second = sdp.trackID+<a class="code" href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      }<span class="comment">//end loop over SDPs</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }<span class="comment">//end loop over TimePDclockSDPMap</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> range_trackID;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div>
<div class="ttc" id="CORSIKAGen_8fcl_html_a424b27db311314d6e22e0e78fd28a35a"><div class="ttname"><a href="../../d2/d0d/CORSIKAGen_8fcl.html#a424b27db311314d6e22e0e78fd28a35a">offset</a></div><div class="ttdeci">BEGIN_PROLOG TPC Trig offset(g4 rise time) ProjectToHeight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/CORSIKAGen_8fcl_source.html#l00007">CORSIKAGen.fcl:7</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a8467e153830914d8ea9228e8aa99dc9b"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a8467e153830914d8ea9228e8aa99dc9b">sim::OpDetBacktrackerRecord::OpDetNum</a></div><div class="ttdeci">int OpDetNum() const </div><div class="ttdoc">Returns the readout Optical Detector this object describes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00308">OpDetBacktrackerRecord.h:308</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_af0d28b1dd6061e8f6a5317bf2cbe854c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP</a></div><div class="ttdeci">timePDclockSDPs_t::iterator findClosestTimePDclockSDP(storedTimePDclock_t timePDclock)</div><div class="ttdoc">Return the iterator to the first timePDclockSDP not earlier than timePDclock. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">OpDetBacktrackerRecord.cxx:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8467e153830914d8ea9228e8aa99dc9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sim::OpDetBacktrackerRecord::OpDetNum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the readout Optical Detector this object describes. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00308">308</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a>; }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a41ca910afbb4d91d966fda0ccee2615e"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">sim::OpDetBacktrackerRecord::iOpDetNum</a></div><div class="ttdeci">int iOpDetNum</div><div class="ttdoc">OpticalDetector where the photons were detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">OpDetBacktrackerRecord.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0d68c3313be243d0df523af0267a6582"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sim::OpDetBacktrackerRecord::operator&lt; </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Comparison: sorts by Optical Detector ID. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00305">305</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a> &lt; other.OpDetNum(); }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a41ca910afbb4d91d966fda0ccee2615e"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">sim::OpDetBacktrackerRecord::iOpDetNum</a></div><div class="ttdeci">int iOpDetNum</div><div class="ttdoc">OpticalDetector where the photons were detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">OpDetBacktrackerRecord.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6138a96e9d39b46f9849bbeb5e22d8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sim::OpDetBacktrackerRecord::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html">OpDetBacktrackerRecord</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Comparison: true if OpDetBacktrackerRecords have the same Optical Detector ID. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00306">306</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">iOpDetNum</a> == other.OpDetNum(); }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a41ca910afbb4d91d966fda0ccee2615e"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a41ca910afbb4d91d966fda0ccee2615e">sim::OpDetBacktrackerRecord::iOpDetNum</a></div><div class="ttdeci">int iOpDetNum</div><div class="ttdoc">OpticalDetector where the photons were detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">OpDetBacktrackerRecord.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a293f039fe09b62296e53d1eeff362ce4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sim::OpDetBacktrackerRecord::Photons </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>iTimePDclock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the total number of scintillation photons on this Optical Detector in the specified timePDclock. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00139">139</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">double</span> numPhotons = 0.;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">auto</span> itr = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a>(iTimePDclock);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">// check to see if this iTimePDclock value is in the map</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span>(itr        != <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end() &amp;&amp;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;       itr-&gt;first == iTimePDclock){</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// loop over the list for this iTimePDclock value and add up</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// the total number of electrons</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> sdp : itr-&gt;second){</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        numPhotons += sdp.numPhotons;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      } <span class="comment">// end loop over sim::SDP for this TimePDclock</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    } <span class="comment">// end if this iTimePDclock is represented in the map</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> numPhotons;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_af0d28b1dd6061e8f6a5317bf2cbe854c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP</a></div><div class="ttdeci">timePDclockSDPs_t::iterator findClosestTimePDclockSDP(storedTimePDclock_t timePDclock)</div><div class="ttdoc">Return the iterator to the first timePDclockSDP not earlier than timePDclock. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">OpDetBacktrackerRecord.cxx:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4e0f67a24880c26962fc45108f05fed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">sim::OpDetBacktrackerRecord::timePDclockSDPs_t</a> const &amp; sim::OpDetBacktrackerRecord::timePDclockSDPsMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns all the deposited energy information as stored. </p>
<dl class="section return"><dt>Returns</dt><dd>all the deposited energy information as stored in the object</dd></dl>
<p>The returned list is organized in pairs. Each pair contains all ionization information in a single iTimePDclock tick (collection of <code><a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></code>), and the number of that tick. The information is sorted by increasing timePDclock tick.</p>
<p>See the class description for the details of the ionization information content. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00307">307</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>; }</div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28a4d6d99065286ff657bf8df1f0460c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a> &gt; sim::OpDetBacktrackerRecord::TrackIDsAndEnergies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>startTimePDclock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>endTimePDclock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all the recorded energy deposition within a time interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startTimePDclock</td><td>iTimePDclock tick opening the time window </td></tr>
    <tr><td class="paramname">endTimePDclock</td><td>iTimePDclock tick closing the time window (included in the interval) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a collection of energy deposit information from all tracks</dd></dl>
<p>This method returns the energy deposited on this Optical Detector by each track ID active in the specified iTimePDclock time interval.</p>
<p>Each entry pertains a single track ID. For each entry, all energy deposit information is merged into a single record. It includes:</p>
<ul>
<li>energy and number of photons, as the integral in the time interval</li>
<li>position, as average weighted by the number of photons</li>
<li>the ID of the track depositing this energy</li>
</ul>
<p>Entries are sorted by track ID number. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00185">185</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// make a map of track ID values to sim::SDP objects</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>(startTimePDclock &gt; endTimePDclock ){</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;OpDetBacktrackerRecord&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;requested TimePDclock range is bogus: &quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                   &lt;&lt; startTimePDclock &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endTimePDclock</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                   &lt;&lt; <span class="stringliteral">&quot; return empty vector&quot;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> {}; <span class="comment">// returns an empty vector</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    std::map&lt;TrackID_t, sim::SDP&gt; idToSDP;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">//find the lower bound for this iTimePDclock and then iterate from there</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">auto</span> itr = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">findClosestTimePDclockSDP</a>(startTimePDclock);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">while</span>(itr != <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">timePDclockSDPs</a>.end()){</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="comment">// check the iTimePDclock value for the iterator, break the loop if we</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// are outside the range</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span>(itr-&gt;first &gt; endTimePDclock) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">// grab the vector of SDPs for this TimePDclock</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdplist = itr-&gt;second;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="comment">// now loop over them and add their content to the map</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdp : sdplist){</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keyword">auto</span> itTrkSDP = idToSDP.find(sdp.trackID);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span>( itTrkSDP != idToSDP.end() ){</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <span class="comment">// the SDP we are going to update:</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <a class="code" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a>&amp; trackSDP = itTrkSDP-&gt;second;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> nPh1   = trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">numPhotons</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> nPh2   = sdp.numPhotons;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> weight = nPh1 + nPh2;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// make a weighted average for the location information</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a826b8aa1d977ae0929828ac37cf7208a">x</a>            = (sdp.x*nPh2 + trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a826b8aa1d977ae0929828ac37cf7208a">x</a>*nPh1)/weight;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#ad240a10ffffdbf57482d0bfff03e4e73">y</a>            = (sdp.y*nPh2 + trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#ad240a10ffffdbf57482d0bfff03e4e73">y</a>*nPh1)/weight;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a4bcdaadae480beac9551b1e7efedd26e">z</a>            = (sdp.z*nPh2 + trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a4bcdaadae480beac9551b1e7efedd26e">z</a>*nPh1)/weight;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          trackSDP.<a class="code" href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">numPhotons</a> = weight;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        } <span class="comment">// end if the track id for this one is found</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          idToSDP[sdp.trackID] = <a class="code" href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a>(sdp);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      } <span class="comment">// end loop over vector</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      ++itr;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    } <span class="comment">// end loop over iTimePDclock values</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// now fill the vector with the sdps from the map</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    std::vector&lt;sim::SDP&gt; sdps;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    sdps.reserve(idToSDP.size());</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; itr : idToSDP){</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      sdps.push_back(itr.second);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> sdps;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div>
<div class="ttc" id="structsim_1_1SDP_html_a826b8aa1d977ae0929828ac37cf7208a"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a826b8aa1d977ae0929828ac37cf7208a">sim::SDP::x</a></div><div class="ttdeci">float x</div><div class="ttdoc">x position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00097">OpDetBacktrackerRecord.h:97</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html">sim::SDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00066">OpDetBacktrackerRecord.h:66</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_acd40677d49bf800e062ac080a97b3ec1"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#acd40677d49bf800e062ac080a97b3ec1">sim::OpDetBacktrackerRecord::timePDclockSDPs</a></div><div class="ttdeci">timePDclockSDPs_t timePDclockSDPs</div><div class="ttdoc">list of energy deposits for each timePDclock with signal </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">OpDetBacktrackerRecord.h:134</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_af0d28b1dd6061e8f6a5317bf2cbe854c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#af0d28b1dd6061e8f6a5317bf2cbe854c">sim::OpDetBacktrackerRecord::findClosestTimePDclockSDP</a></div><div class="ttdeci">timePDclockSDPs_t::iterator findClosestTimePDclockSDP(storedTimePDclock_t timePDclock)</div><div class="ttdoc">Return the iterator to the first timePDclockSDP not earlier than timePDclock. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00342">OpDetBacktrackerRecord.cxx:342</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_ad240a10ffffdbf57482d0bfff03e4e73"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#ad240a10ffffdbf57482d0bfff03e4e73">sim::SDP::y</a></div><div class="ttdeci">float y</div><div class="ttdoc">y position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00098">OpDetBacktrackerRecord.h:98</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_a88e8e2c355857ac71027856d225612af"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a88e8e2c355857ac71027856d225612af">sim::SDP::numPhotons</a></div><div class="ttdeci">float numPhotons</div><div class="ttdoc">number of photons at the optical detector for this track ID and time </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00095">OpDetBacktrackerRecord.h:95</a></div></div>
<div class="ttc" id="structsim_1_1SDP_html_a4bcdaadae480beac9551b1e7efedd26e"><div class="ttname"><a href="../../da/d9c/structsim_1_1SDP.html#a4bcdaadae480beac9551b1e7efedd26e">sim::SDP::z</a></div><div class="ttdeci">float z</div><div class="ttdoc">z position of ionization [cm] </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00099">OpDetBacktrackerRecord.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afffe6a06f72c746f17a0d3ed5c78a2d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../db/de6/structsim_1_1TrackSDP.html">sim::TrackSDP</a> &gt; sim::OpDetBacktrackerRecord::TrackSDPs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>startTimePDclock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a7dc9df1d508ec086867b4028712cbdb5">timePDclock_t</a>&#160;</td>
          <td class="paramname"><em>endTimePDclock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns energies collected for each track within a time interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startTimePDclock</td><td>iTimePDclock tick opening the time window </td></tr>
    <tr><td class="paramname">endTimePDclock</td><td>iTimePDclock tick closing the time window (included in the interval) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a collection of energy and fraction from each track in interval </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a28a4d6d99065286ff657bf8df1f0460c" title="Return all the recorded energy deposition within a time interval. ">TrackIDsAndEnergies()</a></dd></dl>
<p>This method returns the energy deposited on this Optical Detector by each track ID active in the specified iTimePDclock time interval.</p>
<p>Each entry pertains a single track ID. For each entry, all energy deposit information is merged into a single record. It includes:</p>
<ul>
<li>energy of the track, as the integral in the time interval [MeV]</li>
<li>energy fraction respect to the total (see below)</li>
<li>the ID of the track depositing this energy</li>
</ul>
<p>The energy fraction is the energy deposited by the track on this Optical Detector in the specified time interval, divided by the total of the energy deposited by all tracks on this Optical Detector in that same time interval.</p>
<p>Entries are sorted by track ID number. </p>

<p>Definition at line <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00247">247</a> of file <a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    std::vector&lt;sim::TrackSDP&gt; trackSDPs;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span>(startTimePDclock &gt; endTimePDclock ){</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;OpDetBacktrackerRecord::TrackSDPs&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;requested iTimePDclock range is bogus: &quot;</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                              &lt;&lt; startTimePDclock &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endTimePDclock</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                              &lt;&lt; <span class="stringliteral">&quot; return empty vector&quot;</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> trackSDPs;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">double</span> totalPhotons = 0.;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    std::vector&lt;sim::SDP&gt; <span class="keyword">const</span> sdps = <a class="code" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a28a4d6d99065286ff657bf8df1f0460c">TrackIDsAndEnergies</a>(startTimePDclock, endTimePDclock);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdp : sdps)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      totalPhotons += sdp.numPhotons;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// protect against a divide by zero below</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span>(totalPhotons &lt; 1.<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-5) totalPhotons = 1.;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// loop over the entries in the map and fill the input vectors</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; sdp : sdps){</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span>(sdp.trackID == <a class="code" href="../../d8/d7d/namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      trackSDPs.emplace_back(sdp.trackID, sdp.numPhotons/totalPhotons, sdp.numPhotons);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> trackSDPs;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  }</div>
<div class="ttc" id="namespacesim_html_a48dadad6801cca82aa98f10fda7b4754"><div class="ttname"><a href="../../d8/d7d/namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a></div><div class="ttdeci">static const int NoParticleId</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00028">sim.h:28</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="classsim_1_1OpDetBacktrackerRecord_html_a28a4d6d99065286ff657bf8df1f0460c"><div class="ttname"><a href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#a28a4d6d99065286ff657bf8df1f0460c">sim::OpDetBacktrackerRecord::TrackIDsAndEnergies</a></div><div class="ttdeci">std::vector&lt; sim::SDP &gt; TrackIDsAndEnergies(timePDclock_t startTimePDclock, timePDclock_t endTimePDclock) const </div><div class="ttdoc">Return all the recorded energy deposition within a time interval. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html#l00185">OpDetBacktrackerRecord.cxx:185</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a41ca910afbb4d91d966fda0ccee2615e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sim::OpDetBacktrackerRecord::iOpDetNum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>OpticalDetector where the photons were detected. </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00133">133</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<a class="anchor" id="acd40677d49bf800e062ac080a97b3ec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d36/classsim_1_1OpDetBacktrackerRecord.html#aca8ebbb2da17a914fa395c3f2cb647ee">timePDclockSDPs_t</a> sim::OpDetBacktrackerRecord::timePDclockSDPs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>list of energy deposits for each timePDclock with signal </p>

<p>Definition at line <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html#l00134">134</a> of file <a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../dd/dc1/OpDetBacktrackerRecord_8h_source.html">OpDetBacktrackerRecord.h</a></li>
<li><a class="el" href="../../de/d02/OpDetBacktrackerRecord_8cxx_source.html">OpDetBacktrackerRecord.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
