<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>SkeletonAlg.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_f58b2474d7db671760af109c057c9f12.html">larreco</a></li><li class="navelem"><a class="el" href="../../dir_bfd42686fcf7bc0e8145fd17787a17cd.html">larreco</a></li><li class="navelem"><a class="el" href="../../dir_a92975983e87729a773cfa3b8109c8c3.html">RecoAlg</a></li><li class="navelem"><a class="el" href="../../dir_b02dfeb329a20d2db259c15d8b2da0a5.html">Cluster3DAlgs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SkeletonAlg.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dd/d7e/SkeletonAlg_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  @file   SkeletonAlg.cxx</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  @brief  This algorithm accepts a list of 3D space points and attempts to find the &quot;medial skeleton&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *          describing the &quot;best&quot; path through them. Here, &quot;medial&quot; is defined by the best time match</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *          between associated 2D hits along the &quot;best&quot; directions.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// Framework Includes</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/ParameterSet.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// LArSoft includes</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d48/geo__types_8h.html">larcoreobj/SimpleTypesAndConstants/geo_types.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dfc/SkeletonAlg_8h.html">larreco/RecoAlg/Cluster3DAlgs/SkeletonAlg.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// std includes</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>lar_cluster3d</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a4023c1d51195a892fb24915653304b58">   25</a></span>&#160;<a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a4023c1d51195a892fb24915653304b58">SkeletonAlg::SkeletonAlg</a>(fhicl::ParameterSet <span class="keyword">const</span> &amp;pset)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a15781064c07d76d4564e99800902dd1e">reconfigure</a>(pset);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2467e4618e2bc8a40665d569c00ca65e">   32</a></span>&#160;<a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2467e4618e2bc8a40665d569c00ca65e">SkeletonAlg::~SkeletonAlg</a>()</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a15781064c07d76d4564e99800902dd1e">   38</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a15781064c07d76d4564e99800902dd1e">SkeletonAlg::reconfigure</a>(fhicl::ParameterSet <span class="keyword">const</span> &amp;pset)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a0b1cfd528a91ee16de34140d421da403">m_minimumDeltaTicks</a> = pset.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;MinimumDeltaTicks&quot;</span>,  0.05);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a32fb5bb0c5a4aca51956d6fe8dd8c8e4">m_maximumDeltaTicks</a> = pset.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;MaximumDeltaTicks&quot;</span>, 10.0 );</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a6da8d6758117d98ae93dd9e574cd1cdd">   44</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a6da8d6758117d98ae93dd9e574cd1cdd">SkeletonAlg::FindFirstAndLastWires</a>(std::vector&lt;const reco::ClusterHit3D*&gt;&amp; hitVec,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                          <span class="keywordtype">int</span>                                     planeToCheck,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                          <span class="keywordtype">int</span>                                     referenceWire,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                          <span class="keywordtype">double</span>                                  referenceTicks,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                          <span class="keywordtype">int</span>&amp;                                    firstWire,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                          <span class="keywordtype">int</span>&amp;                                    lastWire)<span class="keyword"> const</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// In the simple case the first and last wires are simply the front and back of the input vector</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    firstWire = hitVec.front()-&gt;getHits()[planeToCheck]-&gt;WireID().Wire;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    lastWire  = hitVec.back()-&gt;getHits()[planeToCheck]-&gt;WireID().Wire;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">double</span> maxDeltaTicks = referenceTicks - hitVec.front()-&gt;getHits()[planeToCheck]-&gt;getTimeTicks();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">double</span> minDeltaTicks = referenceTicks - hitVec.back()-&gt;getHits()[planeToCheck]-&gt;getTimeTicks();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (minDeltaTicks &gt; maxDeltaTicks) std::swap(maxDeltaTicks, minDeltaTicks);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">double</span> bestDeltaTicks = 1000000.;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Can&#39;t have a gap if only one element</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (hitVec.size() &gt; 1)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="comment">// The issue is that there may be a gap in wires which we need to find.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">// Reset the last wire</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        lastWire = firstWire;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="comment">// Keep track of all the deltas</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordtype">double</span> nextBestDeltaTicks = bestDeltaTicks;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hitPair : hitVec)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordtype">int</span>    curWire    = hitPair-&gt;getHits()[planeToCheck]-&gt;WireID().Wire;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordtype">double</span> deltaTicks = referenceTicks - hitPair-&gt;getHits()[planeToCheck]-&gt;getTimeTicks();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            maxDeltaTicks = <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">std::max</a>(maxDeltaTicks, deltaTicks);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            minDeltaTicks = std::min(minDeltaTicks, deltaTicks);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keywordflow">if</span> (bestDeltaTicks &gt; fabs(deltaTicks))</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="comment">// By definition, the &quot;next best&quot; is now the current best</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                nextBestDeltaTicks = bestDeltaTicks;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                bestDeltaTicks     = fabs(deltaTicks);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextBestDeltaTicks &gt; fabs(deltaTicks))</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                nextBestDeltaTicks = fabs(deltaTicks);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="comment">// if gap detected, take action depending on where the input wire is</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="comment">// But remember we need to be willing to accept a 1 wire gap... for efficiency</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">if</span> (fabs(curWire - lastWire) &gt; 2000)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="keywordflow">if</span> (referenceWire &lt;= lastWire) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="comment">// Stepped over gap, reset everything</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                firstWire          = curWire;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                maxDeltaTicks      = deltaTicks;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                minDeltaTicks      = deltaTicks;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                bestDeltaTicks     = fabs(deltaTicks);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                nextBestDeltaTicks = bestDeltaTicks;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            lastWire = curWire;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        bestDeltaTicks = nextBestDeltaTicks;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    bestDeltaTicks = <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">std::max</a>(std::min(bestDeltaTicks,<a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a32fb5bb0c5a4aca51956d6fe8dd8c8e4">m_maximumDeltaTicks</a>), <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a0b1cfd528a91ee16de34140d421da403">m_minimumDeltaTicks</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (minDeltaTicks * maxDeltaTicks &gt; 0. &amp;&amp; bestDeltaTicks &gt; 30.) bestDeltaTicks = 0.;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> bestDeltaTicks;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">class </span><a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html">OrderHitsAlongWire</a></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ad25c62e1b990f124f433d8dce9b7fe16">  121</a></span>&#160;    <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ad25c62e1b990f124f433d8dce9b7fe16">OrderHitsAlongWire</a>(<span class="keywordtype">int</span> plane = 0) : <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#a9ce68b77ba3045c1dd40b84b372644cd">m_plane</a>(plane) {}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ace48870aef488c259014b3b01c2f1c52">  123</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ace48870aef488c259014b3b01c2f1c52">operator()</a>(<span class="keyword">const</span> <a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html">reco::ClusterHit3D</a>* <a class="code" href="../../d9/dd2/selectors_8fcl.html#a1abc6b9e279feba048394f49a85218c9">left</a>, <span class="keyword">const</span> <a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html">reco::ClusterHit3D</a>* <a class="code" href="../../d9/dd2/selectors_8fcl.html#a9453748558088ae22499027391c13aaf">right</a>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> leftHit : left-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">getHits</a>())</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> (leftHit-&gt;WireID().Plane == <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#a9ce68b77ba3045c1dd40b84b372644cd">m_plane</a>)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> rightHit : right-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">getHits</a>())</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    <span class="keywordflow">if</span> (rightHit-&gt;WireID().Plane == <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#a9ce68b77ba3045c1dd40b84b372644cd">m_plane</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        <span class="keywordflow">return</span> leftHit-&gt;WireID().Wire &lt; rightHit-&gt;WireID().Wire;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ac1300be291f8768374ff60b39373f0a1">  142</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ac1300be291f8768374ff60b39373f0a1">m_plane</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;};</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html">OrderBestPlanes</a></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html#a7cbd106af21a2b082e108a893cec9cdc">  147</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html#a7cbd106af21a2b082e108a893cec9cdc">operator()</a>(<span class="keyword">const</span> std::pair&lt;size_t,size_t&gt;&amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a1abc6b9e279feba048394f49a85218c9">left</a>, <span class="keyword">const</span> std::pair&lt;size_t,size_t&gt;&amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a9453748558088ae22499027391c13aaf">right</a>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> left.second &lt; right.second;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;};</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#abe17002f82f9187d3982febed28b7fe9">  154</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#abe17002f82f9187d3982febed28b7fe9">SkeletonAlg::FindMedialSkeleton</a>(<a class="code" href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a>&amp; hitPairList)<span class="keyword"> const</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Our mission is to try to find the medial skeletion of the input list of hits</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// We define that as the set of hit pairs where the pairs share the same hit in a given direction</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// and the selected medial hit is equal distance from the edges.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// The first step in trying to do this is to build a map which relates a give 2D hit to an ordered list of hitpairs using it</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">typedef</span> std::map&lt;const reco::ClusterHit2D*, std::vector&lt;const reco::ClusterHit3D*&gt; &gt; Hit2DtoHit3DMapU;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    Hit2DtoHit3DMapU hit2DToHit3DMap[3];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hitPair : hitPairList)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// Don&#39;t consider points &quot;rejected&quot; earlier</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97ac860c5505f2b4a3a268b9c7da4371e9d">reco::ClusterHit3D::REJECTEDHIT</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// Don&#39;t consider hitPair&#39;s with less than 3 hits</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordtype">unsigned</span> status = hitPair-&gt;getStatusBits();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> ((status &amp; 0x7) != 0x7) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hit2D : hitPair-&gt;getHits())</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordtype">size_t</span> plane = hit2D-&gt;WireID().Plane;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            hit2DToHit3DMap[plane][hit2D].push_back(hitPair);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// Do an explicit loop through to sort?</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> idx = 0; idx &lt; 3; idx++)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; mapPair : hit2DToHit3DMap[idx])</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordtype">size_t</span> numHitPairs = mapPair.second.size();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordtype">int</span>    planeToCheck = (idx + 1) % 3;    <span class="comment">// have forgotten reasoning here...</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> (numHitPairs &gt; 1) std::sort(mapPair.second.begin(), mapPair.second.end(), <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html">OrderHitsAlongWire</a>(planeToCheck));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// Keep a count of the number of skeleton points to be returned</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">int</span> nSkeletonPoints(0);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// The idea is go through all the hits again and determine if they could be &quot;skeleton&quot; elements</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hitPair : hitPairList)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// Don&#39;t consider points &quot;rejected&quot; earlier</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97ac860c5505f2b4a3a268b9c7da4371e9d">reco::ClusterHit3D::REJECTEDHIT</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// If a hit pair we skip for now</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> ((hitPair-&gt;getStatusBits() &amp; 0x7) != 7) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// Hopefully I am not confusing myself here.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// The goal is to know, for a given 3D hit, how many other 3D hits share the 2D hits that it is made of</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">// We want this to be a bit more precise in that we don&#39;t count other 3D hits if there is a gap between</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// the current hit and the one we are comparing.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">// How do we do this?</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">// We consider each 2D hit comprising the 3D hit in turn... for each 2D hit we have a list of the 3D</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">// hits which share this hit. Note that for the 3D hits to be unique, there must be an equal number of 2D</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">// hits from the other two views. So, to count &quot;wires&quot; to the boundary, we can simply pick one of the other views</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// so the idea is to through each of the views to determine</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// a) the difference in distance to the last hit on this wire (in each direction)</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// b) the number of 3D hits using the 2D hit in the given 3D hit</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordtype">size_t</span> numHitPairs[3]    = {0,  0,  0};    <span class="comment">// This keeps track of the number of 3D hits a given 2D hit is associated with</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordtype">int</span>    deltaWires[3]     = {0,  0,  0};</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordtype">double</span> planeDeltaT[3]    = {0., 0., 0.};</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordtype">double</span> bestDeltaTicks[3] = {0., 0., 0.};</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordtype">int</span>    wireNumByPlane[3] = {int(hitPair-&gt;getHits()[0]-&gt;WireID().Wire),</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                    <span class="keywordtype">int</span>(hitPair-&gt;getHits()[1]-&gt;WireID().Wire),</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                    <span class="keywordtype">int</span>(hitPair-&gt;getHits()[2]-&gt;WireID().Wire)};</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordtype">size_t</span> bestPlaneIdx(0);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="comment">// Initiate the loop over views</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> planeIdx = 0; planeIdx &lt; 3; planeIdx++)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/dcf/classreco_1_1ClusterHit2D.html">reco::ClusterHit2D</a>* hit2D          = hitPair-&gt;getHits()[planeIdx];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordtype">double</span>                    hit2DTimeTicks = hit2D-&gt;<a class="code" href="../../df/dcf/classreco_1_1ClusterHit2D.html#ae18b8ea2a7a3bcc1687fafda9514c5c1">getTimeTicks</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            std::vector&lt;const reco::ClusterHit3D*&gt;&amp; hitVec(hit2DToHit3DMap[planeIdx][hit2D]);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            numHitPairs[planeIdx] = hitVec.size();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">if</span> (numHitPairs[planeIdx] &gt; 1)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordtype">int</span> planeToCheck = (planeIdx + 1) % 3;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordtype">int</span> firstWire;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordtype">int</span> lastWire;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                bestDeltaTicks[planeIdx] = <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a6da8d6758117d98ae93dd9e574cd1cdd">FindFirstAndLastWires</a>(hitVec,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                                                 planeToCheck,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                                                 wireNumByPlane[planeToCheck],</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                                                 hit2DTimeTicks,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                                                 firstWire,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                                 lastWire);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordtype">int</span> deltaFirst = wireNumByPlane[planeToCheck] - firstWire;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordtype">int</span> deltaLast  = wireNumByPlane[planeToCheck] - lastWire;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="comment">// If either distance to the first or last wire is zero then we are an edge point</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="keywordflow">if</span> (deltaFirst == 0 || deltaLast == 0) hitPair-&gt;setStatusBit(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a6e112d7982e5a51dc426133a6071fd29">reco::ClusterHit3D::EDGEHIT</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                deltaWires[planeIdx]  = deltaFirst + deltaLast;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                numHitPairs[planeIdx] = lastWire - firstWire + 1;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                planeDeltaT[planeIdx]  = fabs(hit2DTimeTicks - hitPair-&gt;getHits()[planeToCheck]-&gt;getTimeTicks());</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment">// Otherwise, by definition, it is both a skeleton point and an edge point</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">else</span> hitPair-&gt;setStatusBit(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b">reco::ClusterHit3D::SKELETONHIT</a> | <a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a6e112d7982e5a51dc426133a6071fd29">reco::ClusterHit3D::EDGEHIT</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (numHitPairs[planeIdx] &lt; numHitPairs[bestPlaneIdx])</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                bestPlaneIdx = planeIdx;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// Make sure a real index was found (which should always happen)</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (bestPlaneIdx &lt; 3 &amp;&amp; numHitPairs[bestPlaneIdx] &gt; 0)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">// Make a sliding value for the width of the core region</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordtype">int</span> maxBestWires = 0.05 * numHitPairs[bestPlaneIdx] + 1;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            maxBestWires = 5000;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">// Check condition for a &quot;skeleton&quot; point</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">if</span> (fabs(deltaWires[bestPlaneIdx]) &lt; maxBestWires + 1)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="comment">// If exactly in the middle then we are done</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="comment">// Set a bit in the ClusterHit3D word to signify</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">//                if (fabs(deltaWires[bestViewIdx]) &lt; maxBestWires || numHitPairs[bestViewIdx] &lt; 3)</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">//                    hitPair-&gt;setStatusBit(reco::ClusterHit3D::SKELETONHIT);</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="comment">// Otherwise we can try to look at the other view</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">//                else</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    <span class="comment">// Find the next best view</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    <span class="keywordtype">int</span> nextBestIdx = (bestPlaneIdx + 1) % 3;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> idx = 0; idx &lt; 3; idx++)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <span class="keywordflow">if</span> (idx == bestPlaneIdx) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">if</span> (numHitPairs[idx] &lt; numHitPairs[nextBestIdx]) nextBestIdx = idx;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <span class="keywordflow">if</span> (nextBestIdx &gt; 2)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;***** invalid next best plane: &quot;</span> &lt;&lt; nextBestIdx &lt;&lt; <span class="stringliteral">&quot; *******&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <span class="keywordflow">if</span> (planeDeltaT[bestPlaneIdx] &lt; 1.01*bestDeltaTicks[bestPlaneIdx] &amp;&amp; planeDeltaT[nextBestIdx] &lt; 6.01*bestDeltaTicks[nextBestIdx])</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        hitPair-&gt;setStatusBit(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b">reco::ClusterHit3D::SKELETONHIT</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// We want to keep count of &quot;pure&quot; skeleton points only</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">if</span> (hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b">reco::ClusterHit3D::SKELETONHIT</a>) &amp;&amp; !hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a6e112d7982e5a51dc426133a6071fd29">reco::ClusterHit3D::EDGEHIT</a>)) nSkeletonPoints++;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> nSkeletonPoints;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#ac45eaa7abd64688cd084e73c5735a175">  319</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#ac45eaa7abd64688cd084e73c5735a175">SkeletonAlg::GetSkeletonHits</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a>&amp; inputHitList, <a class="code" href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a>&amp; skeletonHitList)<span class="keyword"> const</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hit3D : inputHitList) <span class="keywordflow">if</span> (hit3D-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b">reco::ClusterHit3D::SKELETONHIT</a>)) skeletonHitList.emplace_back(hit3D);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2ca4a34662de678bb27a22bdf4396cf6">  326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2ca4a34662de678bb27a22bdf4396cf6">SkeletonAlg::AverageSkeletonPositions</a>(<a class="code" href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a>&amp; skeletonHitList)<span class="keyword"> const</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// NOTE: This method assumes the list being given to it is comprised of skeleton hits</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">//       YMMV if you send in a complete hit collection!</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// Define a mapping between 2D hits and the 3D hits they make</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">typedef</span> std::map&lt;const reco::ClusterHit2D*, std::vector&lt;const reco::ClusterHit3D*&gt; &gt; Hit2DtoHit3DMap;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// We want to keep track of this mapping by view</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    Hit2DtoHit3DMap hit2DToHit3DMap[3];</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// Keep count of the number of skeleton hits selected</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSkeletonHits(0);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Execute the first loop through the hits to build the map</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hitPair : skeletonHitList)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">// Don&#39;t consider points &quot;rejected&quot; earlier</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97ac860c5505f2b4a3a268b9c7da4371e9d">reco::ClusterHit3D::REJECTEDHIT</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="comment">// Count only those skeleton hits which have not been averaged</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span> (!hitPair-&gt;bitsAreSet(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a0d938b396ffda43f8eee3fc87839ea34">reco::ClusterHit3D::SKELETONPOSAVE</a>)) nSkeletonHits++;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hit2D : hitPair-&gt;getHits())</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordtype">size_t</span> plane = hit2D-&gt;WireID().Plane;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            hit2DToHit3DMap[plane][hit2D].push_back(hitPair);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// Exit early if no skeleton hits to process</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (!nSkeletonHits) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// The list of 3D hits associated to any given 2D hit is most useful to us if it is ordered</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// So this will loop through entries in the map and do the ordering</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> idx = 0; idx &lt; 3; idx++)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; mapPair : hit2DToHit3DMap[idx])</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordtype">size_t</span> numHitPairs = mapPair.second.size();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordtype">int</span>    planeToCheck = (idx + 1) % 3;    <span class="comment">// have forgotten reasoning here...</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">if</span> (numHitPairs &gt; 1) std::sort(mapPair.second.begin(), mapPair.second.end(), <a class="code" href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html">OrderHitsAlongWire</a>(planeToCheck));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Ok, so the basic strategy is not entirely different from that used to build the skeleton hits in the first</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// place. The idea is to loop through all skeleton hits and then determine the average position for the hit</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// based on the wire direction with the fewest hits to the edge.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">// Currently this is a pretty simple minded approach and it would appear that some effort could be spent</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// here to improve this.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// NOTE: the averaging being performed is ONLY in the Y-Z plane since this is where the hit ambiguity</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">//       issue arises.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    reco::HitPairListPtr::iterator hitPairItr = skeletonHitList.begin();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> bestPlaneVecIdx = 0; bestPlaneVecIdx &lt; 2; bestPlaneVecIdx++)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        std::list&lt;reco::ClusterHit3D&gt; tempHitPairList;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a>          tempHitPairListPtr;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        std::map&lt;const reco::ClusterHit3D*, const reco::ClusterHit3D*&gt; hit3DToHit3DMap;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">while</span>(hitPairItr != skeletonHitList.end())</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html">reco::ClusterHit3D</a>* hit3D = *hitPairItr++;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            std::vector&lt;std::pair&lt;size_t,size_t&gt; &gt; bestPlaneVec;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hit2D : hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">getHits</a>())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                bestPlaneVec.push_back(std::pair&lt;size_t,size_t&gt;(hit2D-&gt;WireID().Plane,hit2DToHit3DMap[hit2D-&gt;WireID().Plane][hit2D].size()));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            std::sort(bestPlaneVec.begin(), bestPlaneVec.end(), <a class="code" href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html">OrderBestPlanes</a>());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordtype">size_t</span> bestPlaneIdx = bestPlaneVec[bestPlaneVecIdx].first;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordtype">size_t</span> bestPlaneCnt = bestPlaneVec[bestPlaneVecIdx].second;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">if</span> (bestPlaneCnt &gt; 5) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            std::vector&lt;const reco::ClusterHit3D*&gt;&amp; hit3DVec = hit2DToHit3DMap[bestPlaneIdx][hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">getHits</a>()[bestPlaneIdx]];</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            Eigen::Vector3f avePosition(hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#af99cbefa85c37a75106ce43ce6179b03">getPosition</a>()[0],0.,0.);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; tempHit3D : hit3DVec)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                avePosition[1] += tempHit3D-&gt;getPosition()[1];</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                avePosition[2] += tempHit3D-&gt;getPosition()[2];</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            avePosition[1] *= 1./double(hit3DVec.size());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            avePosition[2] *= 1./double(hit3DVec.size());</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            tempHitPairList.emplace_back(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html">reco::ClusterHit3D</a>(hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a77baa452ae9a4b4241a846e461bd8efa">getID</a>(),</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ad69d6da338b99636aacdca4daca952b8">getStatusBits</a>(),</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                                            avePosition,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5e1c7542c342c7f91b2b8308c76cc8c6">getTotalCharge</a>(),</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ad664c71dd06e6a26eb8947397ec49102">getAvePeakTime</a>(),</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a24ab97c6dd242d96b4f34fb1dd7c0c30">getDeltaPeakTime</a>(),</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a4da91427a164e2fab0461c8d31e18d58">getSigmaPeakTime</a>(),</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ac329d23a9a2195bcda0d8fc62781000e">getHitChiSquare</a>(),</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a2a68fd91537f462056617eb50cfb8257">getOverlapFraction</a>(),</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a4e0dff121cb2ab99791e59f6aa8ee236">getChargeAsymmetry</a>(),</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a1f7e2f9068a7f75122e732bbba00b99a">getDocaToAxis</a>(),</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#aad52a8c6526adb28bb2e4f352dbce2fa">getArclenToPoca</a>(),</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">getHits</a>(),</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5d1be6dd1f1d2a027e5ce9be3a288ac0">getHitDelTSigVec</a>(),</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                                            hit3D-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a3b7371174c3e423294423d17da9efb4a">getWireIDs</a>()));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            tempHitPairListPtr.push_back(&amp;tempHitPairList.back());</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            hit3DToHit3DMap[tempHitPairListPtr.back()] = hit3D;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : hit3DToHit3DMap)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            pair.second-&gt;<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a9a9acaf5b8a0a8c94b9d99f8fe669704">setPosition</a>(pair.first-&gt;getPosition());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            pair.second-&gt;setStatusBit(<a class="code" href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a0d938b396ffda43f8eee3fc87839ea34">reco::ClusterHit3D::SKELETONPOSAVE</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;} <span class="comment">// namespace lar_cluster3d</span></div>
<div class="ttc" id="classreco_1_1ClusterHit2D_html_ae18b8ea2a7a3bcc1687fafda9514c5c1"><div class="ttname"><a href="../../df/dcf/classreco_1_1ClusterHit2D.html#ae18b8ea2a7a3bcc1687fafda9514c5c1">reco::ClusterHit2D::getTimeTicks</a></div><div class="ttdeci">float getTimeTicks() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00076">Cluster3D.h:76</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_af99cbefa85c37a75106ce43ce6179b03"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#af99cbefa85c37a75106ce43ce6179b03">reco::ClusterHit3D::getPosition</a></div><div class="ttdeci">const Eigen::Vector3f getPosition() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00158">Cluster3D.h:158</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a9453748558088ae22499027391c13aaf"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a9453748558088ae22499027391c13aaf">right</a></div><div class="ttdeci">walls no right</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00105">selectors.fcl:105</a></div></div>
<div class="ttc" id="pmttriggerproducer_8fcl_html_a527d89be40c3c20ca8162df059180fd9"><div class="ttname"><a href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a></div><div class="ttdeci">BEGIN_PROLOG pmt_uncoated ideal single PE test page of manual option are OR or AND window for pmt trigger time start window for pmt trigger time end etc then what events all hists are saved for max</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/pmttriggerproducer_8fcl_source.html#l00023">pmttriggerproducer.fcl:23</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5a393b9e2f9116aa5c0dad758f168b97a6e112d7982e5a51dc426133a6071fd29"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a6e112d7982e5a51dc426133a6071fd29">reco::ClusterHit3D::EDGEHIT</a></div><div class="ttdoc">Hit is an &amp;quot;edge&amp;quot; hit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00101">Cluster3D.h:101</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5d1be6dd1f1d2a027e5ce9be3a288ac0"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5d1be6dd1f1d2a027e5ce9be3a288ac0">reco::ClusterHit3D::getHitDelTSigVec</a></div><div class="ttdeci">const std::vector&lt; float &gt; getHitDelTSigVec() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00172">Cluster3D.h:172</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5e1c7542c342c7f91b2b8308c76cc8c6"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5e1c7542c342c7f91b2b8308c76cc8c6">reco::ClusterHit3D::getTotalCharge</a></div><div class="ttdeci">float getTotalCharge() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00162">Cluster3D.h:162</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5a393b9e2f9116aa5c0dad758f168b97ac860c5505f2b4a3a268b9c7da4371e9d"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97ac860c5505f2b4a3a268b9c7da4371e9d">reco::ClusterHit3D::REJECTEDHIT</a></div><div class="ttdoc">Hit has been rejected for any reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00099">Cluster3D.h:99</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1OrderHitsAlongWire_html_ac1300be291f8768374ff60b39373f0a1"><div class="ttname"><a href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ac1300be291f8768374ff60b39373f0a1">lar_cluster3d::OrderHitsAlongWire::m_plane</a></div><div class="ttdeci">size_t m_plane</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00142">SkeletonAlg.cxx:142</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a4da91427a164e2fab0461c8d31e18d58"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a4da91427a164e2fab0461c8d31e18d58">reco::ClusterHit3D::getSigmaPeakTime</a></div><div class="ttdeci">float getSigmaPeakTime() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00165">Cluster3D.h:165</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a2a68fd91537f462056617eb50cfb8257"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a2a68fd91537f462056617eb50cfb8257">reco::ClusterHit3D::getOverlapFraction</a></div><div class="ttdeci">float getOverlapFraction() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00167">Cluster3D.h:167</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_ad69d6da338b99636aacdca4daca952b8"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#ad69d6da338b99636aacdca4daca952b8">reco::ClusterHit3D::getStatusBits</a></div><div class="ttdeci">unsigned int getStatusBits() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00157">Cluster3D.h:157</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_ac45eaa7abd64688cd084e73c5735a175"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#ac45eaa7abd64688cd084e73c5735a175">lar_cluster3d::SkeletonAlg::GetSkeletonHits</a></div><div class="ttdeci">void GetSkeletonHits(const reco::HitPairListPtr &amp;inputHitList, reco::HitPairListPtr &amp;skeletonHitList) const </div><div class="ttdoc">Return the skeleton hits from the input list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00319">SkeletonAlg.cxx:319</a></div></div>
<div class="ttc" id="structlar__cluster3d_1_1OrderBestPlanes_html"><div class="ttname"><a href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html">lar_cluster3d::OrderBestPlanes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d59/HoughSeedFinderAlg_8cxx_source.html#l00321">HoughSeedFinderAlg.cxx:321</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a1f7e2f9068a7f75122e732bbba00b99a"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a1f7e2f9068a7f75122e732bbba00b99a">reco::ClusterHit3D::getDocaToAxis</a></div><div class="ttdeci">float getDocaToAxis() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00169">Cluster3D.h:169</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a4023c1d51195a892fb24915653304b58"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a4023c1d51195a892fb24915653304b58">lar_cluster3d::SkeletonAlg::SkeletonAlg</a></div><div class="ttdeci">SkeletonAlg(fhicl::ParameterSet const &amp;pset)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00025">SkeletonAlg.cxx:25</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a15781064c07d76d4564e99800902dd1e"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a15781064c07d76d4564e99800902dd1e">lar_cluster3d::SkeletonAlg::reconfigure</a></div><div class="ttdeci">void reconfigure(fhicl::ParameterSet const &amp;pset)</div><div class="ttdoc">a handler for the case where the algorithm control parameters are to be reset </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00038">SkeletonAlg.cxx:38</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1OrderHitsAlongWire_html_ad25c62e1b990f124f433d8dce9b7fe16"><div class="ttname"><a href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ad25c62e1b990f124f433d8dce9b7fe16">lar_cluster3d::OrderHitsAlongWire::OrderHitsAlongWire</a></div><div class="ttdeci">OrderHitsAlongWire(int plane=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00121">SkeletonAlg.cxx:121</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_ad664c71dd06e6a26eb8947397ec49102"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#ad664c71dd06e6a26eb8947397ec49102">reco::ClusterHit3D::getAvePeakTime</a></div><div class="ttdeci">float getAvePeakTime() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00163">Cluster3D.h:163</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit2D_html"><div class="ttname"><a href="../../df/dcf/classreco_1_1ClusterHit2D.html">reco::ClusterHit2D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00035">Cluster3D.h:35</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a4e0dff121cb2ab99791e59f6aa8ee236"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a4e0dff121cb2ab99791e59f6aa8ee236">reco::ClusterHit3D::getChargeAsymmetry</a></div><div class="ttdeci">float getChargeAsymmetry() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00168">Cluster3D.h:168</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_abe17002f82f9187d3982febed28b7fe9"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#abe17002f82f9187d3982febed28b7fe9">lar_cluster3d::SkeletonAlg::FindMedialSkeleton</a></div><div class="ttdeci">int FindMedialSkeleton(reco::HitPairListPtr &amp;hitPairList) const </div><div class="ttdoc">This is intended to find the medial skeleton given a list of input hit pairs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00154">SkeletonAlg.cxx:154</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a0b1cfd528a91ee16de34140d421da403"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a0b1cfd528a91ee16de34140d421da403">lar_cluster3d::SkeletonAlg::m_minimumDeltaTicks</a></div><div class="ttdeci">double m_minimumDeltaTicks</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfc/SkeletonAlg_8h_source.html#l00084">SkeletonAlg.h:84</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a2ca4a34662de678bb27a22bdf4396cf6"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2ca4a34662de678bb27a22bdf4396cf6">lar_cluster3d::SkeletonAlg::AverageSkeletonPositions</a></div><div class="ttdeci">void AverageSkeletonPositions(reco::HitPairListPtr &amp;skeletonHitList) const </div><div class="ttdoc">Modifies the position of input skeleton hits by averaging along the &amp;quot;best&amp;quot; wire direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00326">SkeletonAlg.cxx:326</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a77baa452ae9a4b4241a846e461bd8efa"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a77baa452ae9a4b4241a846e461bd8efa">reco::ClusterHit3D::getID</a></div><div class="ttdeci">size_t getID() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00156">Cluster3D.h:156</a></div></div>
<div class="ttc" id="namespacereco_html_ad2e55059e696dd652ce2edaccbb18b66"><div class="ttname"><a href="../../d1/d57/namespacereco.html#ad2e55059e696dd652ce2edaccbb18b66">reco::HitPairListPtr</a></div><div class="ttdeci">std::list&lt; const reco::ClusterHit3D * &gt; HitPairListPtr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00335">Cluster3D.h:335</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a1abc6b9e279feba048394f49a85218c9"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a1abc6b9e279feba048394f49a85218c9">left</a></div><div class="ttdeci">walls no left</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00105">selectors.fcl:105</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1OrderHitsAlongWire_html_ace48870aef488c259014b3b01c2f1c52"><div class="ttname"><a href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#ace48870aef488c259014b3b01c2f1c52">lar_cluster3d::OrderHitsAlongWire::operator()</a></div><div class="ttdeci">bool operator()(const reco::ClusterHit3D *left, const reco::ClusterHit3D *right)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00123">SkeletonAlg.cxx:123</a></div></div>
<div class="ttc" id="geo__types_8h_html"><div class="ttname"><a href="../../d8/d48/geo__types_8h.html">geo_types.h</a></div><div class="ttdoc">Definition of data types for geometry description. </div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a32fb5bb0c5a4aca51956d6fe8dd8c8e4"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a32fb5bb0c5a4aca51956d6fe8dd8c8e4">lar_cluster3d::SkeletonAlg::m_maximumDeltaTicks</a></div><div class="ttdeci">double m_maximumDeltaTicks</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfc/SkeletonAlg_8h_source.html#l00085">SkeletonAlg.h:85</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a6da8d6758117d98ae93dd9e574cd1cdd"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a6da8d6758117d98ae93dd9e574cd1cdd">lar_cluster3d::SkeletonAlg::FindFirstAndLastWires</a></div><div class="ttdeci">double FindFirstAndLastWires(std::vector&lt; const reco::ClusterHit3D * &gt; &amp;hitVec, int planeToCheck, int referenceWire, double referenceTicks, int &amp;firstWire, int &amp;lastWire) const </div><div class="ttdoc">A function to find the bounding wires in a given view. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00044">SkeletonAlg.cxx:44</a></div></div>
<div class="ttc" id="structlar__cluster3d_1_1OrderBestPlanes_html_a7cbd106af21a2b082e108a893cec9cdc"><div class="ttname"><a href="../../df/d8b/structlar__cluster3d_1_1OrderBestPlanes.html#a7cbd106af21a2b082e108a893cec9cdc">lar_cluster3d::OrderBestPlanes::operator()</a></div><div class="ttdeci">bool operator()(const std::pair&lt; size_t, size_t &gt; &amp;left, const std::pair&lt; size_t, size_t &gt; &amp;right)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00147">SkeletonAlg.cxx:147</a></div></div>
<div class="ttc" id="SkeletonAlg_8h_html"><div class="ttname"><a href="../../da/dfc/SkeletonAlg_8h.html">SkeletonAlg.h</a></div><div class="ttdoc">Header file to define the interface to the SkeletonAlg. </div></div>
<div class="ttc" id="classlar__cluster3d_1_1SkeletonAlg_html_a2467e4618e2bc8a40665d569c00ca65e"><div class="ttname"><a href="../../d2/d2b/classlar__cluster3d_1_1SkeletonAlg.html#a2467e4618e2bc8a40665d569c00ca65e">lar_cluster3d::SkeletonAlg::~SkeletonAlg</a></div><div class="ttdeci">~SkeletonAlg()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7e/SkeletonAlg_8cxx_source.html#l00032">SkeletonAlg.cxx:32</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a3b7371174c3e423294423d17da9efb4a"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a3b7371174c3e423294423d17da9efb4a">reco::ClusterHit3D::getWireIDs</a></div><div class="ttdeci">const std::vector&lt; geo::WireID &gt; &amp; getWireIDs() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00173">Cluster3D.h:173</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_aad52a8c6526adb28bb2e4f352dbce2fa"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#aad52a8c6526adb28bb2e4f352dbce2fa">reco::ClusterHit3D::getArclenToPoca</a></div><div class="ttdeci">float getArclenToPoca() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00170">Cluster3D.h:170</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a24ab97c6dd242d96b4f34fb1dd7c0c30"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a24ab97c6dd242d96b4f34fb1dd7c0c30">reco::ClusterHit3D::getDeltaPeakTime</a></div><div class="ttdeci">float getDeltaPeakTime() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00164">Cluster3D.h:164</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5a393b9e2f9116aa5c0dad758f168b97a0d938b396ffda43f8eee3fc87839ea34"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a0d938b396ffda43f8eee3fc87839ea34">reco::ClusterHit3D::SKELETONPOSAVE</a></div><div class="ttdoc">Skeleton hit position averaged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00106">Cluster3D.h:106</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1OrderHitsAlongWire_html"><div class="ttname"><a href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html">lar_cluster3d::OrderHitsAlongWire</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d59/HoughSeedFinderAlg_8cxx_source.html#l00304">HoughSeedFinderAlg.cxx:304</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_ac329d23a9a2195bcda0d8fc62781000e"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#ac329d23a9a2195bcda0d8fc62781000e">reco::ClusterHit3D::getHitChiSquare</a></div><div class="ttdeci">float getHitChiSquare() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00166">Cluster3D.h:166</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a5a393b9e2f9116aa5c0dad758f168b97a9a3aedd4393e419a3bcd321d5200743b">reco::ClusterHit3D::SKELETONHIT</a></div><div class="ttdoc">Hit is a &amp;quot;skeleton&amp;quot; hit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00100">Cluster3D.h:100</a></div></div>
<div class="ttc" id="classlar__cluster3d_1_1OrderHitsAlongWire_html_a9ce68b77ba3045c1dd40b84b372644cd"><div class="ttname"><a href="../../d5/db6/classlar__cluster3d_1_1OrderHitsAlongWire.html#a9ce68b77ba3045c1dd40b84b372644cd">lar_cluster3d::OrderHitsAlongWire::m_plane</a></div><div class="ttdeci">int m_plane</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d59/HoughSeedFinderAlg_8cxx_source.html#l00318">HoughSeedFinderAlg.cxx:318</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_ae1e682b58940ec6714a4b03ad1e95885"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#ae1e682b58940ec6714a4b03ad1e95885">reco::ClusterHit3D::getHits</a></div><div class="ttdeci">const ClusterHit2DVec &amp; getHits() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00171">Cluster3D.h:171</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html_a9a9acaf5b8a0a8c94b9d99f8fe669704"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html#a9a9acaf5b8a0a8c94b9d99f8fe669704">reco::ClusterHit3D::setPosition</a></div><div class="ttdeci">void setPosition(const Eigen::Vector3f &amp;pos) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00186">Cluster3D.h:186</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classreco_1_1ClusterHit3D_html"><div class="ttname"><a href="../../df/d06/classreco_1_1ClusterHit3D.html">reco::ClusterHit3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/Cluster3D_8h_source.html#l00095">Cluster3D.h:95</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
