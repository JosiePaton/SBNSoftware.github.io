<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>wcls::FrameSaver Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dd/d47/namespacewcls.html">wcls</a></li><li class="navelem"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html">FrameSaver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../dd/d52/classwcls_1_1FrameSaver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">wcls::FrameSaver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for wcls::FrameSaver:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../df/d6c/classwcls_1_1FrameSaver.png" usemap="#wcls::FrameSaver_map" alt=""/>
  <map id="wcls::FrameSaver_map" name="wcls::FrameSaver_map">
<area href="../../dc/d49/classwcls_1_1IArtEventVisitor.html" alt="wcls::IArtEventVisitor" shape="rect" coords="0,56,244,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ace62802cdd50a26b37db894fe30bdb61"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">channel_list</a></td></tr>
<tr class="separator:ace62802cdd50a26b37db894fe30bdb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0a0a77ea445b6ee0834222920b1e269"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">channel_masks</a></td></tr>
<tr class="separator:ab0a0a77ea445b6ee0834222920b1e269"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a98fa33fb27980419f9736208cc3d72f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a98fa33fb27980419f9736208cc3d72f9">FrameSaver</a> ()</td></tr>
<tr class="separator:a98fa33fb27980419f9736208cc3d72f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa356b495973b422c4a9ed524cd1b932"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#aaa356b495973b422c4a9ed524cd1b932">~FrameSaver</a> ()</td></tr>
<tr class="separator:aaa356b495973b422c4a9ed524cd1b932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2843fbe6d424b662312fc4c1cd2d4f28"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a2843fbe6d424b662312fc4c1cd2d4f28">produces</a> (art::ProducesCollector &amp;collector)</td></tr>
<tr class="memdesc:a2843fbe6d424b662312fc4c1cd2d4f28"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html">IArtEventVisitor</a>.  <a href="#a2843fbe6d424b662312fc4c1cd2d4f28">More...</a><br/></td></tr>
<tr class="separator:a2843fbe6d424b662312fc4c1cd2d4f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51eafc955399d2f62bd58161060bed2f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a51eafc955399d2f62bd58161060bed2f">visit</a> (art::Event &amp;event)</td></tr>
<tr class="memdesc:a51eafc955399d2f62bd58161060bed2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement to visit an Art event.  <a href="#a51eafc955399d2f62bd58161060bed2f">More...</a><br/></td></tr>
<tr class="separator:a51eafc955399d2f62bd58161060bed2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cae44e9124274b3de99d693e059c3d5"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a7cae44e9124274b3de99d693e059c3d5">operator()</a> (const WireCell::IFrame::pointer &amp;inframe, WireCell::IFrame::pointer &amp;outframe)</td></tr>
<tr class="memdesc:a7cae44e9124274b3de99d693e059c3d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">IFrameFilter.  <a href="#a7cae44e9124274b3de99d693e059c3d5">More...</a><br/></td></tr>
<tr class="separator:a7cae44e9124274b3de99d693e059c3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8972ad7f1e7c531767aa90b20609e58f"><td class="memItemLeft" align="right" valign="top">virtual WireCell::Configuration&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a8972ad7f1e7c531767aa90b20609e58f">default_configuration</a> () const </td></tr>
<tr class="memdesc:a8972ad7f1e7c531767aa90b20609e58f"><td class="mdescLeft">&#160;</td><td class="mdescRight">IConfigurable.  <a href="#a8972ad7f1e7c531767aa90b20609e58f">More...</a><br/></td></tr>
<tr class="separator:a8972ad7f1e7c531767aa90b20609e58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7759b2a860230f031f570ee0d124aa8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae7759b2a860230f031f570ee0d124aa8">configure</a> (const WireCell::Configuration &amp;config)</td></tr>
<tr class="separator:ae7759b2a860230f031f570ee0d124aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classwcls_1_1IArtEventVisitor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classwcls_1_1IArtEventVisitor')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html">wcls::IArtEventVisitor</a></td></tr>
<tr class="memitem:a71edb80008b34a29c4ccc6847bfc6d48 inherit pub_methods_classwcls_1_1IArtEventVisitor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html#a71edb80008b34a29c4ccc6847bfc6d48">~IArtEventVisitor</a> ()</td></tr>
<tr class="separator:a71edb80008b34a29c4ccc6847bfc6d48 inherit pub_methods_classwcls_1_1IArtEventVisitor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a21e640e0402794414ad085d1d91c70ad"><td class="memItemLeft" align="right" valign="top">typedef std::function&lt; float(const <br class="typebreak"/>
std::vector&lt; float &gt; &amp;tsvals)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a21e640e0402794414ad085d1d91c70ad">summarizer_function</a></td></tr>
<tr class="separator:a21e640e0402794414ad085d1d91c70ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac1f9f2a3e9f308cea9ca33ff7d07639a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ac1f9f2a3e9f308cea9ca33ff7d07639a">save_as_raw</a> (art::Event &amp;event)</td></tr>
<tr class="separator:ac1f9f2a3e9f308cea9ca33ff7d07639a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6cd1750640347df6603ee5a76bea986"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab6cd1750640347df6603ee5a76bea986">save_as_cooked</a> (art::Event &amp;event)</td></tr>
<tr class="separator:ab6cd1750640347df6603ee5a76bea986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc010bde2959c32f8d2e92b805ff5ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a4fc010bde2959c32f8d2e92b805ff5ed">save_summaries</a> (art::Event &amp;event)</td></tr>
<tr class="separator:a4fc010bde2959c32f8d2e92b805ff5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa509a95450c05ad39f1b2715c198e9e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa509a95450c05ad39f1b2715c198e9e9">save_cmms</a> (art::Event &amp;event)</td></tr>
<tr class="separator:aa509a95450c05ad39f1b2715c198e9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f26fd73145dedffc0d548d76166079c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a2f26fd73145dedffc0d548d76166079c">save_empty</a> (art::Event &amp;event)</td></tr>
<tr class="separator:a2f26fd73145dedffc0d548d76166079c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a10835b18f3f83f85c86e4175c1b8d825"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a></td></tr>
<tr class="separator:a10835b18f3f83f85c86e4175c1b8d825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c27b8bcd97b5b574c6fce799c15afa8"><td class="memItemLeft" align="right" valign="top">WireCell::IFrame::pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a></td></tr>
<tr class="separator:a1c27b8bcd97b5b574c6fce799c15afa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a158278ae49eb24881ba8849178cbb16a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a></td></tr>
<tr class="separator:a158278ae49eb24881ba8849178cbb16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9920eb2c91a2af4fd96a11e2ade7330"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a></td></tr>
<tr class="separator:ae9920eb2c91a2af4fd96a11e2ade7330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30187e861a22d2fd60c94b9c9ec1c61c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">m_frame_scale</a></td></tr>
<tr class="separator:a30187e861a22d2fd60c94b9c9ec1c61c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d347f366368bb0f10f173a8e6666279"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">m_summary_scale</a></td></tr>
<tr class="separator:a1d347f366368bb0f10f173a8e6666279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7484786cb0ccdc166ee3901c2d16a3bb"><td class="memItemLeft" align="right" valign="top">std::unordered_map<br class="typebreak"/>
&lt; std::string, <br class="typebreak"/>
<a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a21e640e0402794414ad085d1d91c70ad">summarizer_function</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">m_summary_operators</a></td></tr>
<tr class="separator:a7484786cb0ccdc166ee3901c2d16a3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e663b3c971b4f9996edf7fddbbe4ea4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a></td></tr>
<tr class="separator:a1e663b3c971b4f9996edf7fddbbe4ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f51171e582beed48a69ee5dc76e2f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">m_digitize</a></td></tr>
<tr class="separator:a25f51171e582beed48a69ee5dc76e2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6573efca61de799971ab62d87f7223a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a6573efca61de799971ab62d87f7223a3">m_sparse</a></td></tr>
<tr class="separator:a6573efca61de799971ab62d87f7223a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e558f8b124c9854d4f8c8e8cfc8d9b"><td class="memItemLeft" align="right" valign="top">Json::Value&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a></td></tr>
<tr class="separator:a77e558f8b124c9854d4f8c8e8cfc8d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642ea6338c0b454402251580448e4efd"><td class="memItemLeft" align="right" valign="top">Json::Value&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">m_pedestal_mean</a></td></tr>
<tr class="separator:a642ea6338c0b454402251580448e4efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0fa44e77616eaf8ea2908cb2f96e16f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">m_pedestal_sigma</a></td></tr>
<tr class="separator:aa0fa44e77616eaf8ea2908cb2f96e16f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00030">30</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ace62802cdd50a26b37db894fe30bdb61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;int&gt; <a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">wcls::FrameSaver::channel_list</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A WCT frame includes the concept of a "channel mask map" which is a named association between a set of channels and a number of bin ranges (the masks) for each channel. The name is meant to connote some semantic meaning to the masks (eg, "bad" or "noisy"). The bin ranges are expressed as a begin and end index into the associated channel waveform (aka the "trace"). The end index is one past the intended coverage in the usual C++ iterator convention. This information is stored in two vecotor&lt;int&gt; data products which are given instance names based on the channel mask map name. The first vector&lt;int&gt; named "&lt;name&gt;channels" holds a simple list of channel numbers which have at least one mask. The second vector&lt;int&gt; named "&lt;name&gt;masks" is a flattened 3xN array of entries like: [(channel, begin, end), ...]. This contrivied storage format is to avoid creating an data product class. Both are produced so that the job may be configured to drop one or both. </p>

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00067">67</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab0a0a77ea445b6ee0834222920b1e269"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;int&gt; <a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">wcls::FrameSaver::channel_masks</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00068">68</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a21e640e0402794414ad085d1d91c70ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::function&lt;float(const std::vector&lt;float&gt;&amp; tsvals)&gt; <a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a21e640e0402794414ad085d1d91c70ad">wcls::FrameSaver::summarizer_function</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00081">81</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a98fa33fb27980419f9736208cc3d72f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FrameSaver::FrameSaver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00031">31</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;: <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>(<span class="keyword">nullptr</span>), <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a>(0) {}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1e663b3c971b4f9996edf7fddbbe4ea4"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">wcls::FrameSaver::m_nticks</a></div><div class="ttdeci">int m_nticks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00084">FrameSaver.h:84</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa356b495973b422c4a9ed524cd1b932"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FrameSaver::~FrameSaver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00033">33</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae7759b2a860230f031f570ee0d124aa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::configure </td>
          <td>(</td>
          <td class="paramtype">const WireCell::Configuration &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00110">110</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">const</span> std::string anode_tn = cfg[<span class="stringliteral">&quot;anode&quot;</span>].asString();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (anode_tn.empty()) { THROW(ValueError() &lt;&lt; errmsg{<span class="stringliteral">&quot;FrameSaver requires an anode plane&quot;</span>}); }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  WireCell::IAnodePlane::pointer anode = Factory::find_tn&lt;IAnodePlane&gt;(anode_tn);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> chid : anode-&gt;channels()) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">auto</span> wpid = anode-&gt;resolve(chid);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a> view;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// Use configurable translation between WCT and larsoft</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// plane view IDs. Relevant especially for VD 3 view</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// since the 2nd induction plane is actually labelled</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// kY in larsoft vs kV in WCT</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Unless otherwise specified, this map amounts to</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// kU-&gt;kU, kV-&gt;kV, kW-&gt;kW</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    std::string wct_layer = <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>((<span class="keywordtype">int</span>)wpid.layer());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    view = (<a class="code" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a>) (cfg[<span class="stringliteral">&quot;plane_map&quot;</span>][wct_layer].asInt());</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a>[chid] = view;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">m_digitize</a> = <span class="keyword">get</span>(cfg, <span class="stringliteral">&quot;digitize&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a6573efca61de799971ab62d87f7223a3">m_sparse</a> = <span class="keyword">get</span>(cfg, <span class="stringliteral">&quot;sparse&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a> = cfg[<span class="stringliteral">&quot;chanmaskmaps&quot;</span>];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">m_pedestal_mean</a> = cfg[<span class="stringliteral">&quot;pedestal_mean&quot;</span>];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">m_pedestal_sigma</a> = <span class="keyword">get</span>(cfg, <span class="stringliteral">&quot;pedestal_sigma&quot;</span>, 0.0);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (!cfg[<span class="stringliteral">&quot;frame_scale&quot;</span>].isNull()) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">m_frame_scale</a>.clear();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">auto</span> jscale = cfg[<span class="stringliteral">&quot;frame_scale&quot;</span>];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>.clear();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keyword">auto</span> jtags = cfg[<span class="stringliteral">&quot;frame_tags&quot;</span>];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> jtag : jtags) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      std::string tag = jtag.asString();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// get any waveform scaling for this frame</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> ind = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>.size();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordtype">double</span> scale = 1.0;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">//std::cerr &lt;&lt; &quot;JSCALE:&quot; &lt;&lt; jscale &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (!jscale.isNull()) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (jscale.isArray()) { scale = jscale[ind].asDouble(); }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          scale = jscale.asDouble();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">m_frame_scale</a>.push_back(scale);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>.push_back(tag);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a> = <span class="keyword">get</span>(cfg, <span class="stringliteral">&quot;nticks&quot;</span>, <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">auto</span> jso = cfg[<span class="stringliteral">&quot;summary_operator&quot;</span>];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (!cfg[<span class="stringliteral">&quot;summary_tags&quot;</span>].isNull()) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">m_summary_scale</a>.clear();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">auto</span> jscale = cfg[<span class="stringliteral">&quot;summary_scale&quot;</span>];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>.clear();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">auto</span> jtags = cfg[<span class="stringliteral">&quot;summary_tags&quot;</span>];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> jtag : jtags) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      std::string tag = jtag.asString();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> ind = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>.size();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordtype">double</span> scale = 1.0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (!jscale.isNull()) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (jscale.isArray()) { scale = jscale[ind].asDouble(); }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          scale = jscale.asDouble();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>.push_back(tag);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">m_summary_scale</a>.push_back(scale);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keyword">auto</span> so = get&lt;std::string&gt;(jso, tag, <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (so == <span class="stringliteral">&quot;set&quot;</span>) { <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">m_summary_operators</a>[tag] = <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a8b96b59686f93b98a2252827ad4e78bd">summary_set</a>; }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">m_summary_operators</a>[tag] = <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a4e51aa3b21fe5d625ae4d32292b50766">summary_sum</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a10835b18f3f83f85c86e4175c1b8d825"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">wcls::FrameSaver::m_chview</a></div><div class="ttdeci">std::map&lt; int, geo::View_t &gt; m_chview</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00074">FrameSaver.h:74</a></div></div>
<div class="ttc" id="namespacegeo_html_a6baec40eaf3ff161f7eb1a5f0779794f"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a></div><div class="ttdeci">enum geo::_plane_proj View_t</div><div class="ttdoc">Enumerate the possible plane projections. </div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ae9920eb2c91a2af4fd96a11e2ade7330"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">wcls::FrameSaver::m_summary_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_summary_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a8b96b59686f93b98a2252827ad4e78bd"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a8b96b59686f93b98a2252827ad4e78bd">summary_set</a></div><div class="ttdeci">static float summary_set(const std::vector&lt; float &gt; &amp;tsvals)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00103">FrameSaver.cxx:103</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a4e51aa3b21fe5d625ae4d32292b50766"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a4e51aa3b21fe5d625ae4d32292b50766">summary_sum</a></div><div class="ttdeci">static float summary_sum(const std::vector&lt; float &gt; &amp;tsvals)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00098">FrameSaver.cxx:98</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a158278ae49eb24881ba8849178cbb16a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">wcls::FrameSaver::m_frame_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_frame_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a25f51171e582beed48a69ee5dc76e2f8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">wcls::FrameSaver::m_digitize</a></div><div class="ttdeci">bool m_digitize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a642ea6338c0b454402251580448e4efd"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">wcls::FrameSaver::m_pedestal_mean</a></div><div class="ttdeci">Json::Value m_pedestal_mean</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1e663b3c971b4f9996edf7fddbbe4ea4"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">wcls::FrameSaver::m_nticks</a></div><div class="ttdeci">int m_nticks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00084">FrameSaver.h:84</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a6573efca61de799971ab62d87f7223a3"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a6573efca61de799971ab62d87f7223a3">wcls::FrameSaver::m_sparse</a></div><div class="ttdeci">bool m_sparse</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1d347f366368bb0f10f173a8e6666279"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">wcls::FrameSaver::m_summary_scale</a></div><div class="ttdeci">std::vector&lt; double &gt; m_summary_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00079">FrameSaver.h:79</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a7484786cb0ccdc166ee3901c2d16a3bb"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">wcls::FrameSaver::m_summary_operators</a></div><div class="ttdeci">std::unordered_map&lt; std::string, summarizer_function &gt; m_summary_operators</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00082">FrameSaver.h:82</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a77e558f8b124c9854d4f8c8e8cfc8d9b"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">wcls::FrameSaver::m_cmms</a></div><div class="ttdeci">Json::Value m_cmms</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a30187e861a22d2fd60c94b9c9ec1c61c"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">wcls::FrameSaver::m_frame_scale</a></div><div class="ttdeci">std::vector&lt; double &gt; m_frame_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00079">FrameSaver.h:79</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00115">WindowPattern.h:115</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_aa0fa44e77616eaf8ea2908cb2f96e16f"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">wcls::FrameSaver::m_pedestal_sigma</a></div><div class="ttdeci">double m_pedestal_sigma</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00087">FrameSaver.h:87</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8972ad7f1e7c531767aa90b20609e58f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WireCell::Configuration FrameSaver::default_configuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>IConfigurable. </p>

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00036">36</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  Configuration cfg;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  cfg[<span class="stringliteral">&quot;anode&quot;</span>] = <span class="stringliteral">&quot;AnodePlane&quot;</span>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// If true, truncate frame waveforms and save as raw::RawDigit,</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// else leave as floating point recob::Wire</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  cfg[<span class="stringliteral">&quot;digitize&quot;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// If true, save recob::Wires as sparse (true zero suppressed).</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// Note, this sparsification is performed independently from if</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// the input IFrame itself is sparse or not.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  cfg[<span class="stringliteral">&quot;sparse&quot;</span>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// Provide a configurable translation layer between WCT Plane View IDs</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// and those from larsoft. Default is to assume they&#39;re the same,</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// except for in certain cases (such as the vertical drift geometry)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// where the map is provided in the jsonnet/json</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  cfg[<span class="stringliteral">&quot;plane_map&quot;</span>][<a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>((<span class="keywordtype">int</span>)WireCell::kUlayer)] = (int)<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  cfg[<span class="stringliteral">&quot;plane_map&quot;</span>][<a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>((<span class="keywordtype">int</span>)WireCell::kVlayer)] = (int)<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  cfg[<span class="stringliteral">&quot;plane_map&quot;</span>][<a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>((<span class="keywordtype">int</span>)WireCell::kWlayer)] = (int)<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a7aa5678675f243c5e03583de1bfe1b4e">geo::kW</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// If digitize, raw::RawDigit has slots for pedestal mean and</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// sigma.  Legacy/obsolete code stuff unrelated values into these</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// slots.  If pedestal_mean is a number, it will be stuffed.  If</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// it is the string &quot;fiction&quot; then the DetPedestalService will be</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// used to set some unrelated pedestal value.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  cfg[<span class="stringliteral">&quot;pedestal_mean&quot;</span>] = 0.0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// Stuff some value into pedestal sigma.  This value has nothing</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// to do with the produced NF&#39;ed waveforms.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  cfg[<span class="stringliteral">&quot;pedestal_sigma&quot;</span>] = 0.0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// frames to output, if any</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  cfg[<span class="stringliteral">&quot;frame_tags&quot;</span>] = Json::arrayValue;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  cfg[<span class="stringliteral">&quot;frame_scale&quot;</span>] = 1.0; <span class="comment">// multiply this number to all</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// waveform samples.  If list, then</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// one number per frame tags.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// If nonzero, force number of ticks in output waveforms.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// If zero, use whatever input data has.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// If -1, use value as per LS&#39;s detector properties service.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  cfg[<span class="stringliteral">&quot;nticks&quot;</span>] = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// Summaries to output, if any</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  cfg[<span class="stringliteral">&quot;summary_tags&quot;</span>] = Json::arrayValue;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  cfg[<span class="stringliteral">&quot;summary_scale&quot;</span>] = 1.0;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// Sumaries are *per trace* quantities coming in but it is likely</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// that some (most?) consumers of the output will expect *per</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// channel* quantities.  Aggregating by channel requires some</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// operator to be applied to the sequence of summary values from a</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// common channel.  The operator is defined as an object keyed by</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// the summary tag.  Values may be &quot;set&quot; which will simply save a</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// summary value to the output element (last one from a channel</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// wins) or &quot;sum&quot; (the default) which will add up the values.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  cfg[<span class="stringliteral">&quot;summary_operator&quot;</span>] = Json::objectValue;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Names of channel mask maps to save, if any.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  cfg[<span class="stringliteral">&quot;chanmaskmaps&quot;</span>] = Json::arrayValue;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">return</span> cfg;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a></div><div class="ttdoc">Planes which measure V. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00130">geo_types.h:130</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a></div><div class="ttdoc">Planes which measure U. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00129">geo_types.h:129</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1e663b3c971b4f9996edf7fddbbe4ea4"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">wcls::FrameSaver::m_nticks</a></div><div class="ttdeci">int m_nticks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00084">FrameSaver.h:84</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00115">WindowPattern.h:115</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a7aa5678675f243c5e03583de1bfe1b4e"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a7aa5678675f243c5e03583de1bfe1b4e">geo::kW</a></div><div class="ttdoc">Planes which measure W (third view for Bo, MicroBooNE, etc). </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00131">geo_types.h:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7cae44e9124274b3de99d693e059c3d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FrameSaver::operator() </td>
          <td>(</td>
          <td class="paramtype">const WireCell::IFrame::pointer &amp;&#160;</td>
          <td class="paramname"><em>inframe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WireCell::IFrame::pointer &amp;&#160;</td>
          <td class="paramname"><em>outframe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>IFrameFilter. </p>

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00562">562</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// set an IFrame based on last visited event.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  outframe = inframe;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (inframe) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: warning: dropping prior frame.  Fixme to handle queue of frames.\n&quot;</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// else {</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">//     std::cerr &lt;&lt; &quot;wclsFrameSaver got frame\n&quot;;</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a> = inframe;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// else {</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">//     std::cerr &lt;&lt; &quot;wclsFrameSaver sees EOS\n&quot;;</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2843fbe6d424b662312fc4c1cd2d4f28"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::produces </td>
          <td>(</td>
          <td class="paramtype">art::ProducesCollector &amp;&#160;</td>
          <td class="paramname"><em>collector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html">IArtEventVisitor</a>. </p>

<p>Reimplemented from <a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html#a34f25eeda5cda02bd6c75471cb02a127">wcls::IArtEventVisitor</a>.</p>

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00197">197</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> tag : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">m_digitize</a>) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: promising to produce recob::Wires named \&quot;&quot;</span> &lt;&lt; tag &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      collector.produces&lt;std::vector&lt;recob::Wire&gt;&gt;(tag);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: promising to produce raw::RawDigits named \&quot;&quot;</span> &lt;&lt; tag &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      collector.produces&lt;std::vector&lt;raw::RawDigit&gt;&gt;(tag);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> tag : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: promising to produce channel summary named \&quot;&quot;</span> &lt;&lt; tag &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    collector.produces&lt;std::vector&lt;double&gt;&gt;(tag);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> cmm : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a>) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">const</span> std::string cmm_name = cmm.asString();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: promising to produce channel masks named \&quot;&quot;</span> &lt;&lt; cmm_name</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    collector.produces&lt;<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">channel_list</a>&gt;(cmm_name + <span class="stringliteral">&quot;channels&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    collector.produces&lt;<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">channel_masks</a>&gt;(cmm_name + <span class="stringliteral">&quot;masks&quot;</span>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ab0a0a77ea445b6ee0834222920b1e269"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">wcls::FrameSaver::channel_masks</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_masks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00068">FrameSaver.h:68</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ae9920eb2c91a2af4fd96a11e2ade7330"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">wcls::FrameSaver::m_summary_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_summary_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a158278ae49eb24881ba8849178cbb16a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">wcls::FrameSaver::m_frame_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_frame_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a25f51171e582beed48a69ee5dc76e2f8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">wcls::FrameSaver::m_digitize</a></div><div class="ttdeci">bool m_digitize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a77e558f8b124c9854d4f8c8e8cfc8d9b"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">wcls::FrameSaver::m_cmms</a></div><div class="ttdeci">Json::Value m_cmms</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ace62802cdd50a26b37db894fe30bdb61"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">wcls::FrameSaver::channel_list</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_list</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00067">FrameSaver.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6cd1750640347df6603ee5a76bea986"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::save_as_cooked </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00332">332</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">int</span> nticks_want = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> (nticks_want &lt; 0) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a> =</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      art::ServiceHandle&lt;detinfo::DetectorPropertiesService const&gt;()-&gt;DataFor(event);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    nticks_want = <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>.NumberTimeSamples();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver saving cooked to &quot;</span> &lt;&lt; nticks_want &lt;&lt; <span class="stringliteral">&quot; ticks\n&quot;</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordtype">size_t</span> nftags = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>.size();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iftag = 0; iftag &lt; nftags; ++iftag) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    std::string ftag = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>[iftag];</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">double</span> scale = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">m_frame_scale</a>[iftag];</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">ITrace::vector</a> traces;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a>(<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>, ftag, traces);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (traces.empty()) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: no traces tagged \&quot;&quot;</span> &lt;&lt; ftag &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">// fall through loop so we put (empty) outwires</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: saving &quot;</span> &lt;&lt; traces.size() &lt;&lt; <span class="stringliteral">&quot; traces tagged \&quot;&quot;</span> &lt;&lt; ftag</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a57eb0b6d7a0405a813ed740f8950933d">traces_bychan_t</a> bychan;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#afb43fd0e7a52a731486b80ed5956630b">traces_bychan</a>(traces, bychan);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    std::unique_ptr&lt;std::vector&lt;recob::Wire&gt;&gt; outwires(<span class="keyword">new</span> std::vector&lt;recob::Wire&gt;);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">double</span> total_charge = 0.0;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">int</span> total_samples = 0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> chv : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a>) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> chid = chv.first;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; traces = bychan[chid];</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="../../d4/da5/classlar_1_1sparse__vector.html">recob::Wire::RegionsOfInterest_t</a> rois(nticks_want);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a> : traces) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> tbin = <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a>-&gt;tbin();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; charge = <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a>-&gt;charge();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keyword">auto</span> beg = charge.begin();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a> = beg;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keyword">auto</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a> = charge.end();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (nticks_want) { <span class="comment">// user set waveform size</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="keywordflow">if</span> (tbin &gt;= nticks_want) { beg = <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>; }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordtype">int</span> backup = tbin + charge.size() - nticks_want;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">if</span> (backup &gt; 0) { <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a> -= backup; }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (beg &gt;= <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: no samples within desired window for channel &quot;</span> &lt;&lt; chid</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a6573efca61de799971ab62d87f7223a3">m_sparse</a>) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          std::vector&lt;float&gt; scaled(beg, <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; scaled.size(); ++i)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            scaled[i] *= scale;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          <span class="comment">// prefer combine_range() but it segfaults.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          rois.add_range(tbin, scaled.begin(), scaled.end());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">// sparsify trace whether or not it may itself already</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">// represents a sparse ROI</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          beg = std::find_if(beg, <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>, [](<span class="keywordtype">float</span> v) { <span class="keywordflow">return</span> v != 0.0; });</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          <span class="keywordflow">if</span> (beg == <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>) { <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <span class="keyword">auto</span> mid = std::find_if(beg, <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">end</a>, [](<span class="keywordtype">float</span> v) { <span class="keywordflow">return</span> v == 0.0; });</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          std::vector&lt;float&gt; scaled(beg, mid);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind = 0; ind &lt; mid - beg; ++ind) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            scaled[ind] *= scale;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            total_charge += scaled[ind];</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            ++total_samples;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          rois.add_range(tbin + beg - <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a>, scaled.begin(), scaled.end());</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;          beg = mid;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a> view = chv.second;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      outwires-&gt;emplace_back(<a class="code" href="../../d2/db7/classrecob_1_1Wire.html">recob::Wire</a>(rois, chid, view));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;FrameSaver: q=&quot;</span> &lt;&lt; total_charge &lt;&lt; <span class="stringliteral">&quot; n=&quot;</span> &lt;&lt; total_samples &lt;&lt; <span class="stringliteral">&quot; tag=&quot;</span> &lt;&lt; ftag</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keyword">event</span>.put(std::move(outwires), ftag);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  } <span class="comment">// loop over tags</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a10835b18f3f83f85c86e4175c1b8d825"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">wcls::FrameSaver::m_chview</a></div><div class="ttdeci">std::map&lt; int, geo::View_t &gt; m_chview</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00074">FrameSaver.h:74</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="namespacegeo_html_a6baec40eaf3ff161f7eb1a5f0779794f"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a></div><div class="ttdeci">enum geo::_plane_proj View_t</div><div class="ttdoc">Enumerate the possible plane projections. </div></div>
<div class="ttc" id="namespacechannelDBConverter_html_af481fa22253619167bce75a37e10ec34"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">channelDBConverter.first</a></div><div class="ttdeci">first</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00146">channelDBConverter.py:146</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a0ec17850ad37eb8871386dfa4125cdac"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a></div><div class="ttdeci">static void tagged_traces(IFrame::pointer frame, std::string tag, ITrace::vector &amp;ret)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00223">FrameSaver.cxx:223</a></div></div>
<div class="ttc" id="namespacetrkf_html_a02fec8e0cecf3305fca58a71de0d42c1"><div class="ttname"><a href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trkf::trace</a></div><div class="ttdeci">M::value_type trace(const M &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7d/KalmanLinearAlgebra_8h_source.html#l00231">KalmanLinearAlgebra.h:231</a></div></div>
<div class="ttc" id="namespacelar_1_1dump_html_a71d4403edbac4d265176f8677118194f"><div class="ttname"><a href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">lar::dump::vector</a></div><div class="ttdeci">auto vector(Vector const &amp;v)</div><div class="ttdoc">Returns a manipulator which will print the specified array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da9/DumpUtils_8h_source.html#l00265">DumpUtils.h:265</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a158278ae49eb24881ba8849178cbb16a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">wcls::FrameSaver::m_frame_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_frame_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_aac918da84f16d53ad17bab4f817da1c4"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aac918da84f16d53ad17bab4f817da1c4">icarus::ns::util::end</a></div><div class="ttdeci">auto end(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/FixedBins_8h_source.html#l00585">FixedBins.h:585</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1e663b3c971b4f9996edf7fddbbe4ea4"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">wcls::FrameSaver::m_nticks</a></div><div class="ttdeci">int m_nticks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00084">FrameSaver.h:84</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a6573efca61de799971ab62d87f7223a3"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a6573efca61de799971ab62d87f7223a3">wcls::FrameSaver::m_sparse</a></div><div class="ttdeci">bool m_sparse</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a57eb0b6d7a0405a813ed740f8950933d"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a57eb0b6d7a0405a813ed740f8950933d">traces_bychan_t</a></div><div class="ttdeci">std::unordered_map&lt; int, ITrace::vector &gt; traces_bychan_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00238">FrameSaver.cxx:238</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_afb43fd0e7a52a731486b80ed5956630b"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#afb43fd0e7a52a731486b80ed5956630b">traces_bychan</a></div><div class="ttdeci">static void traces_bychan(ITrace::vector &amp;traces, traces_bychan_t &amp;ret)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00240">FrameSaver.cxx:240</a></div></div>
<div class="ttc" id="classlar_1_1sparse__vector_html"><div class="ttname"><a href="../../d4/da5/classlar_1_1sparse__vector.html">lar::sparse_vector&lt; float &gt;</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a30187e861a22d2fd60c94b9c9ec1c61c"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">wcls::FrameSaver::m_frame_scale</a></div><div class="ttdeci">std::vector&lt; double &gt; m_frame_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00079">FrameSaver.h:79</a></div></div>
<div class="ttc" id="classrecob_1_1Wire_html"><div class="ttname"><a href="../../d2/db7/classrecob_1_1Wire.html">recob::Wire</a></div><div class="ttdoc">Class holding the regions of interest of signal from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9f/Wire_8h_source.html#l00118">Wire.h:118</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00157">SimWire_module.cc:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac1f9f2a3e9f308cea9ca33ff7d07639a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::save_as_raw </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00269">269</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">int</span> nticks_want = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">m_nticks</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (nticks_want &lt; 0) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a> =</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      art::ServiceHandle&lt;detinfo::DetectorPropertiesService const&gt;()-&gt;DataFor(event);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    nticks_want = <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>.NumberTimeSamples();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">size_t</span> nftags = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>.size();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iftag = 0; iftag &lt; nftags; ++iftag) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    std::string ftag = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>[iftag];</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: saving raw::RawDigits tagged \&quot;&quot;</span> &lt;&lt; ftag &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">double</span> scale = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">m_frame_scale</a>[iftag];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">ITrace::vector</a> traces;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a>(<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>, ftag, traces);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a57eb0b6d7a0405a813ed740f8950933d">traces_bychan_t</a> bychan;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#afb43fd0e7a52a731486b80ed5956630b">traces_bychan</a>(traces, bychan);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    std::unique_ptr&lt;std::vector&lt;raw::RawDigit&gt;&gt; out(<span class="keyword">new</span> std::vector&lt;raw::RawDigit&gt;);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> chv : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a>) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> chid = chv.first;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; traces = bychan[chid];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">size_t</span> ntraces = traces.size();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordtype">int</span> tbin = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      std::vector&lt;float&gt; charge;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> (ntraces) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keyword">auto</span> <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a> = traces[0];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        tbin = <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a>-&gt;tbin();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        charge = <a class="code" href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trace</a>-&gt;charge();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="comment">// charge may be empty here</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// enforce number of ticks if we are so configured.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordtype">size_t</span> ncharge = charge.size();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordtype">int</span> nticks = tbin + ncharge;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">if</span> (nticks_want) { <span class="comment">// force output waveform size</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (nticks_want &lt; nticks) { ncharge = nticks_want - tbin; }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        nticks = nticks_want;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="../../d7/d64/classraw_1_1RawDigit.html#ad62e5ca64bf3915a5c66a71b34f45ba5">raw::RawDigit::ADCvector_t</a> adcv(nticks);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ind = 0; ind &lt; ncharge; ++ind) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        adcv[tbin + ind] = scale * charge[ind]; <span class="comment">// scale + truncate/redigitize</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      out-&gt;emplace_back(<a class="code" href="../../d7/d64/classraw_1_1RawDigit.html">raw::RawDigit</a>(chid, nticks, adcv, <a class="code" href="../../d9/d63/namespaceraw.html#a75392ac34cff2e6c998dcc1cb35670c4a76fb4ec9d88a77500a556aab12c35703">raw::kNone</a>));</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">m_pedestal_mean</a>.asString() == <span class="stringliteral">&quot;native&quot;</span>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordtype">short</span> <a class="code" href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a> = Waveform::most_frequent(adcv);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        out-&gt;back().SetPedestal(baseline, <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">m_pedestal_sigma</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="../../dc/d91/structPU.html">PU</a> pu(<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">m_pedestal_mean</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        out-&gt;back().SetPedestal(pu(chid), <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">m_pedestal_sigma</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">event</span>.put(std::move(out), ftag);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a10835b18f3f83f85c86e4175c1b8d825"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">wcls::FrameSaver::m_chview</a></div><div class="ttdeci">std::map&lt; int, geo::View_t &gt; m_chview</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00074">FrameSaver.h:74</a></div></div>
<div class="ttc" id="structPU_html"><div class="ttname"><a href="../../dc/d91/structPU.html">PU</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00250">FrameSaver.cxx:250</a></div></div>
<div class="ttc" id="classraw_1_1RawDigit_html"><div class="ttname"><a href="../../d7/d64/classraw_1_1RawDigit.html">raw::RawDigit</a></div><div class="ttdoc">Collection of charge vs time digitized from a single readout channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d5a/RawDigit_8h_source.html#l00069">RawDigit.h:69</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classraw_1_1RawDigit_html_ad62e5ca64bf3915a5c66a71b34f45ba5"><div class="ttname"><a href="../../d7/d64/classraw_1_1RawDigit.html#ad62e5ca64bf3915a5c66a71b34f45ba5">raw::RawDigit::ADCvector_t</a></div><div class="ttdeci">std::vector&lt; short &gt; ADCvector_t</div><div class="ttdoc">Type representing a (compressed) vector of ADC counts. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d5a/RawDigit_8h_source.html#l00073">RawDigit.h:73</a></div></div>
<div class="ttc" id="namespaceraw_html_a75392ac34cff2e6c998dcc1cb35670c4a76fb4ec9d88a77500a556aab12c35703"><div class="ttname"><a href="../../d9/d63/namespaceraw.html#a75392ac34cff2e6c998dcc1cb35670c4a76fb4ec9d88a77500a556aab12c35703">raw::kNone</a></div><div class="ttdoc">no compression </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d38/RawTypes_8h_source.html#l00009">RawTypes.h:9</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a0ec17850ad37eb8871386dfa4125cdac"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a></div><div class="ttdeci">static void tagged_traces(IFrame::pointer frame, std::string tag, ITrace::vector &amp;ret)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00223">FrameSaver.cxx:223</a></div></div>
<div class="ttc" id="namespacetrkf_html_a02fec8e0cecf3305fca58a71de0d42c1"><div class="ttname"><a href="../../d0/da2/namespacetrkf.html#a02fec8e0cecf3305fca58a71de0d42c1">trkf::trace</a></div><div class="ttdeci">M::value_type trace(const M &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d7d/KalmanLinearAlgebra_8h_source.html#l00231">KalmanLinearAlgebra.h:231</a></div></div>
<div class="ttc" id="namespacelar_1_1dump_html_a71d4403edbac4d265176f8677118194f"><div class="ttname"><a href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">lar::dump::vector</a></div><div class="ttdeci">auto vector(Vector const &amp;v)</div><div class="ttdoc">Returns a manipulator which will print the specified array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da9/DumpUtils_8h_source.html#l00265">DumpUtils.h:265</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a158278ae49eb24881ba8849178cbb16a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">wcls::FrameSaver::m_frame_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_frame_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="OnlineDecoder_8fcl_html_ac3bc64ff22523df5f35d8f928ec038cd"><div class="ttname"><a href="../../d1/d82/OnlineDecoder_8fcl.html#ac3bc64ff22523df5f35d8f928ec038cd">baseline</a></div><div class="ttdeci">BEGIN_PROLOG baseline</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d82/OnlineDecoder_8fcl_source.html#l00014">OnlineDecoder.fcl:14</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a642ea6338c0b454402251580448e4efd"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a642ea6338c0b454402251580448e4efd">wcls::FrameSaver::m_pedestal_mean</a></div><div class="ttdeci">Json::Value m_pedestal_mean</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1e663b3c971b4f9996edf7fddbbe4ea4"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1e663b3c971b4f9996edf7fddbbe4ea4">wcls::FrameSaver::m_nticks</a></div><div class="ttdeci">int m_nticks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00084">FrameSaver.h:84</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a57eb0b6d7a0405a813ed740f8950933d"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a57eb0b6d7a0405a813ed740f8950933d">traces_bychan_t</a></div><div class="ttdeci">std::unordered_map&lt; int, ITrace::vector &gt; traces_bychan_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00238">FrameSaver.cxx:238</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_afb43fd0e7a52a731486b80ed5956630b"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#afb43fd0e7a52a731486b80ed5956630b">traces_bychan</a></div><div class="ttdeci">static void traces_bychan(ITrace::vector &amp;traces, traces_bychan_t &amp;ret)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00240">FrameSaver.cxx:240</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a30187e861a22d2fd60c94b9c9ec1c61c"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a30187e861a22d2fd60c94b9c9ec1c61c">wcls::FrameSaver::m_frame_scale</a></div><div class="ttdeci">std::vector&lt; double &gt; m_frame_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00079">FrameSaver.h:79</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00157">SimWire_module.cc:157</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_aa0fa44e77616eaf8ea2908cb2f96e16f"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#aa0fa44e77616eaf8ea2908cb2f96e16f">wcls::FrameSaver::m_pedestal_sigma</a></div><div class="ttdeci">double m_pedestal_sigma</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00087">FrameSaver.h:87</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa509a95450c05ad39f1b2715c198e9e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::save_cmms </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00474">474</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a>.isNull()) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a>.isArray()) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: wrong type for configuration array of channel mask maps to save\n&quot;</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> jcmm : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a>) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    std::string <a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> = jcmm.asString();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    std::unique_ptr&lt;channel_list&gt; out_list(<span class="keyword">new</span> <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">channel_list</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    std::unique_ptr&lt;channel_masks&gt; out_masks(<span class="keyword">new</span> <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">channel_masks</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">auto</span> cmm = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>-&gt;masks();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">auto</span> it = cmm.find(name);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (it == cmm.end()) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: failed to find requested channel masks \&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> cmit : it-&gt;second) { <span class="comment">// int-&gt;vec&lt;pair&lt;int,int&gt;&gt;</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      out_list-&gt;push_back(cmit.first);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> be : cmit.second) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        out_masks-&gt;push_back(cmit.first);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        out_masks-&gt;push_back(be.first);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        out_masks-&gt;push_back(be.second);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (out_list-&gt;empty()) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: found empty channel masks for \&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">event</span>.put(std::move(out_list), name + <span class="stringliteral">&quot;channels&quot;</span>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keyword">event</span>.put(std::move(out_masks), name + <span class="stringliteral">&quot;masks&quot;</span>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ab0a0a77ea445b6ee0834222920b1e269"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">wcls::FrameSaver::channel_masks</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_masks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00068">FrameSaver.h:68</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a77e558f8b124c9854d4f8c8e8cfc8d9b"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">wcls::FrameSaver::m_cmms</a></div><div class="ttdeci">Json::Value m_cmms</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ace62802cdd50a26b37db894fe30bdb61"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">wcls::FrameSaver::channel_list</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_list</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00067">FrameSaver.h:67</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a19dd16849ed641adb2aff777fdc4bd8b"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a></div><div class="ttdeci">then echo fcl name</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00220">sbndpoms_genfclwithrunnumber_maker.sh:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f26fd73145dedffc0d548d76166079c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::save_empty </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00511">511</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// art (apparently?) requires something to be saved if a produces() is promised.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;wclsFrameSaver: saving empty frame to art::Event\n&quot;</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ftag : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">m_frame_tags</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">m_digitize</a>) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      std::unique_ptr&lt;std::vector&lt;raw::RawDigit&gt;&gt; out(<span class="keyword">new</span> std::vector&lt;raw::RawDigit&gt;);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keyword">event</span>.put(std::move(out), ftag);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      std::unique_ptr&lt;std::vector&lt;recob::Wire&gt;&gt; outwires(<span class="keyword">new</span> std::vector&lt;recob::Wire&gt;);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keyword">event</span>.put(std::move(outwires), ftag);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> stag : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    std::unique_ptr&lt;std::vector&lt;double&gt;&gt; outsum(<span class="keyword">new</span> std::vector&lt;double&gt;);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">event</span>.put(std::move(outsum), stag);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> jcmm : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">m_cmms</a>) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    std::string <a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> = jcmm.asString();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    std::unique_ptr&lt;channel_list&gt; out_list(<span class="keyword">new</span> <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">channel_list</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    std::unique_ptr&lt;channel_masks&gt; out_masks(<span class="keyword">new</span> <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">channel_masks</a>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">event</span>.put(std::move(out_list), name + <span class="stringliteral">&quot;channels&quot;</span>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keyword">event</span>.put(std::move(out_masks), name + <span class="stringliteral">&quot;masks&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ab0a0a77ea445b6ee0834222920b1e269"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ab0a0a77ea445b6ee0834222920b1e269">wcls::FrameSaver::channel_masks</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_masks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00068">FrameSaver.h:68</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ae9920eb2c91a2af4fd96a11e2ade7330"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">wcls::FrameSaver::m_summary_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_summary_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a158278ae49eb24881ba8849178cbb16a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a158278ae49eb24881ba8849178cbb16a">wcls::FrameSaver::m_frame_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_frame_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a25f51171e582beed48a69ee5dc76e2f8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">wcls::FrameSaver::m_digitize</a></div><div class="ttdeci">bool m_digitize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a77e558f8b124c9854d4f8c8e8cfc8d9b"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a77e558f8b124c9854d4f8c8e8cfc8d9b">wcls::FrameSaver::m_cmms</a></div><div class="ttdeci">Json::Value m_cmms</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00086">FrameSaver.h:86</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ace62802cdd50a26b37db894fe30bdb61"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ace62802cdd50a26b37db894fe30bdb61">wcls::FrameSaver::channel_list</a></div><div class="ttdeci">std::vector&lt; int &gt; channel_list</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00067">FrameSaver.h:67</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a19dd16849ed641adb2aff777fdc4bd8b"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a></div><div class="ttdeci">then echo fcl name</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00220">sbndpoms_genfclwithrunnumber_maker.sh:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4fc010bde2959c32f8d2e92b805ff5ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::save_summaries </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00427">427</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> ntags = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>.size();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> (0 == ntags) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// no tags</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> nchans = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a>.size();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// for each summary</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> tag_ind = 0; tag_ind &lt; ntags; ++tag_ind) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// The scale set for the tag.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> scale = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">m_summary_scale</a>[tag_ind];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    std::unique_ptr&lt;std::vector&lt;double&gt;&gt; outsum(<span class="keyword">new</span> std::vector&lt;double&gt;(nchans, 0.0));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// The &quot;summary&quot; and &quot;traces&quot; vectors of the same tag are</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// synced, element-by-element.  Each element corresponds to</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// one trace (ROI).  No particular order or correlation by</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// channel exists, and that&#39;s what the rest of this code</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// creates.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keyword">auto</span> tag = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">m_summary_tags</a>[tag_ind];</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; summary = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>-&gt;trace_summary(tag);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">ITrace::vector</a> traces;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a>(<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>, tag, traces);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ntraces = traces.size();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    std::unordered_map&lt;int, std::vector&lt;float&gt;&gt; bychan;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> itrace = 0; itrace &lt; ntraces; ++itrace) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> chid = traces[itrace]-&gt;channel();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> summary_value = summary[itrace];</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      bychan[chid].push_back(summary_value);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">auto</span> oper = <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">m_summary_operators</a>[tag];</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">size_t</span> chanind = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> chv : <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">m_chview</a>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> chid = chv.first;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> val = oper(bychan[chid]);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      outsum-&gt;at(chanind) = val * scale;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      ++chanind;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">event</span>.put(std::move(outsum), tag);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a10835b18f3f83f85c86e4175c1b8d825"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a10835b18f3f83f85c86e4175c1b8d825">wcls::FrameSaver::m_chview</a></div><div class="ttdeci">std::map&lt; int, geo::View_t &gt; m_chview</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00074">FrameSaver.h:74</a></div></div>
<div class="ttc" id="FrameSaver_8cxx_html_a0ec17850ad37eb8871386dfa4125cdac"><div class="ttname"><a href="../../da/dec/FrameSaver_8cxx.html#a0ec17850ad37eb8871386dfa4125cdac">tagged_traces</a></div><div class="ttdeci">static void tagged_traces(IFrame::pointer frame, std::string tag, ITrace::vector &amp;ret)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00223">FrameSaver.cxx:223</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ae9920eb2c91a2af4fd96a11e2ade7330"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ae9920eb2c91a2af4fd96a11e2ade7330">wcls::FrameSaver::m_summary_tags</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_summary_tags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00078">FrameSaver.h:78</a></div></div>
<div class="ttc" id="namespacelar_1_1dump_html_a71d4403edbac4d265176f8677118194f"><div class="ttname"><a href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">lar::dump::vector</a></div><div class="ttdeci">auto vector(Vector const &amp;v)</div><div class="ttdoc">Returns a manipulator which will print the specified array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da9/DumpUtils_8h_source.html#l00265">DumpUtils.h:265</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1d347f366368bb0f10f173a8e6666279"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1d347f366368bb0f10f173a8e6666279">wcls::FrameSaver::m_summary_scale</a></div><div class="ttdeci">std::vector&lt; double &gt; m_summary_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00079">FrameSaver.h:79</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a7484786cb0ccdc166ee3901c2d16a3bb"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a7484786cb0ccdc166ee3901c2d16a3bb">wcls::FrameSaver::m_summary_operators</a></div><div class="ttdeci">std::unordered_map&lt; std::string, summarizer_function &gt; m_summary_operators</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00082">FrameSaver.h:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51eafc955399d2f62bd58161060bed2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FrameSaver::visit </td>
          <td>(</td>
          <td class="paramtype">art::Event &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implement to visit an Art event. </p>

<p>Implements <a class="el" href="../../dc/d49/classwcls_1_1IArtEventVisitor.html#aa6b011440d9d707b022b7c9ffa41bed4">wcls::IArtEventVisitor</a>.</p>

<p>Definition at line <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html#l00542">542</a> of file <a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a>) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a2f26fd73145dedffc0d548d76166079c">save_empty</a>(event);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">m_digitize</a>) { <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ac1f9f2a3e9f308cea9ca33ff7d07639a">save_as_raw</a>(event); }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#ab6cd1750640347df6603ee5a76bea986">save_as_cooked</a>(event);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a4fc010bde2959c32f8d2e92b805ff5ed">save_summaries</a>(event);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#aa509a95450c05ad39f1b2715c198e9e9">save_cmms</a>(event);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">m_frame</a> = <span class="keyword">nullptr</span>; <span class="comment">// done with stashed frame</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_aa509a95450c05ad39f1b2715c198e9e9"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#aa509a95450c05ad39f1b2715c198e9e9">wcls::FrameSaver::save_cmms</a></div><div class="ttdeci">void save_cmms(art::Event &amp;event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00474">FrameSaver.cxx:474</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a2f26fd73145dedffc0d548d76166079c"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a2f26fd73145dedffc0d548d76166079c">wcls::FrameSaver::save_empty</a></div><div class="ttdeci">void save_empty(art::Event &amp;event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00511">FrameSaver.cxx:511</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ab6cd1750640347df6603ee5a76bea986"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ab6cd1750640347df6603ee5a76bea986">wcls::FrameSaver::save_as_cooked</a></div><div class="ttdeci">void save_as_cooked(art::Event &amp;event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00332">FrameSaver.cxx:332</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a25f51171e582beed48a69ee5dc76e2f8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a25f51171e582beed48a69ee5dc76e2f8">wcls::FrameSaver::m_digitize</a></div><div class="ttdeci">bool m_digitize</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00085">FrameSaver.h:85</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_ac1f9f2a3e9f308cea9ca33ff7d07639a"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#ac1f9f2a3e9f308cea9ca33ff7d07639a">wcls::FrameSaver::save_as_raw</a></div><div class="ttdeci">void save_as_raw(art::Event &amp;event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00269">FrameSaver.cxx:269</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a1c27b8bcd97b5b574c6fce799c15afa8"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a1c27b8bcd97b5b574c6fce799c15afa8">wcls::FrameSaver::m_frame</a></div><div class="ttdeci">WireCell::IFrame::pointer m_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/FrameSaver_8h_source.html#l00077">FrameSaver.h:77</a></div></div>
<div class="ttc" id="classwcls_1_1FrameSaver_html_a4fc010bde2959c32f8d2e92b805ff5ed"><div class="ttname"><a href="../../df/d6c/classwcls_1_1FrameSaver.html#a4fc010bde2959c32f8d2e92b805ff5ed">wcls::FrameSaver::save_summaries</a></div><div class="ttdeci">void save_summaries(art::Event &amp;event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/FrameSaver_8cxx_source.html#l00427">FrameSaver.cxx:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a10835b18f3f83f85c86e4175c1b8d825"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, <a class="el" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a>&gt; wcls::FrameSaver::m_chview</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00074">74</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a77e558f8b124c9854d4f8c8e8cfc8d9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Json::Value wcls::FrameSaver::m_cmms</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00086">86</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a25f51171e582beed48a69ee5dc76e2f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wcls::FrameSaver::m_digitize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00085">85</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1c27b8bcd97b5b574c6fce799c15afa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WireCell::IFrame::pointer wcls::FrameSaver::m_frame</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00077">77</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30187e861a22d2fd60c94b9c9ec1c61c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; wcls::FrameSaver::m_frame_scale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00079">79</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a158278ae49eb24881ba8849178cbb16a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; wcls::FrameSaver::m_frame_tags</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00078">78</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e663b3c971b4f9996edf7fddbbe4ea4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int wcls::FrameSaver::m_nticks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00084">84</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a642ea6338c0b454402251580448e4efd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Json::Value wcls::FrameSaver::m_pedestal_mean</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00086">86</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa0fa44e77616eaf8ea2908cb2f96e16f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double wcls::FrameSaver::m_pedestal_sigma</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00087">87</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6573efca61de799971ab62d87f7223a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wcls::FrameSaver::m_sparse</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00085">85</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7484786cb0ccdc166ee3901c2d16a3bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::string, <a class="el" href="../../df/d6c/classwcls_1_1FrameSaver.html#a21e640e0402794414ad085d1d91c70ad">summarizer_function</a>&gt; wcls::FrameSaver::m_summary_operators</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00082">82</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d347f366368bb0f10f173a8e6666279"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; wcls::FrameSaver::m_summary_scale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00079">79</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae9920eb2c91a2af4fd96a11e2ade7330"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; wcls::FrameSaver::m_summary_tags</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../de/d56/FrameSaver_8h_source.html#l00078">78</a> of file <a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../de/d56/FrameSaver_8h_source.html">FrameSaver.h</a></li>
<li><a class="el" href="../../da/dec/FrameSaver_8cxx_source.html">FrameSaver.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
