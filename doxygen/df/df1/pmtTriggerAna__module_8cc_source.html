<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>pmtTriggerAna_module.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_e0f1515b72b556ea1a60650362b3fd43.html">sbndcode</a></li><li class="navelem"><a class="el" href="../../dir_c704eecb2dcddc67a44d0dda177b30ed.html">sbndcode</a></li><li class="navelem"><a class="el" href="../../dir_f265dcaea80f81d6b900d2efc577b444.html">Trigger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">pmtTriggerAna_module.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/df1/pmtTriggerAna__module_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span><span class="comment">// Class:       pmtTriggerAna</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Module Type: analyzer</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// File:        pmtTriggerAna_module.cc</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Analyzer to determine pmt hardware trigger</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Authors: Erin Yandel</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/EDAnalyzer.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Core/ModuleMacros.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Event.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Handle.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/Run.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Principal/SubRun.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;art_root_io/TFileService.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;canvas/Utilities/InputTag.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;fhiclcpp/ParameterSet.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;messagefacility/MessageLogger/MessageLogger.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;canvas/Utilities/Exception.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;art/Framework/Services/Registry/ServiceHandle.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d8b/Geometry_8h.html">larcore/Geometry/Geometry.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dba/DetectorClocksService_8h.html">lardata/DetectorInfoServices/DetectorClocksService.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/DetectorClocksServiceStandard_8h.html">lardata/DetectorInfoServices/DetectorClocksServiceStandard.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/df8/DetectorPropertiesService_8h.html">lardata/DetectorInfoServices/DetectorPropertiesService.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d9f/LArPropertiesService_8h.html">lardata/DetectorInfoServices/LArPropertiesService.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h.html">lardataobj/RawData/OpDetWaveform.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d50/SignalShapingServiceSBND_8h.html">sbndcode/Utilities/SignalShapingServiceSBND.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d94/sim_8h.html">lardataobj/Simulation/sim.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/dde/SimChannel_8h.html">lardataobj/Simulation/SimChannel.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dd4/SimPhotons_8h.html">lardataobj/Simulation/SimPhotons.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;TH1D.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;TFile.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;TTree.h&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d35/sbndPDMapAlg_8hh.html">sbndcode/OpDetSim/sbndPDMapAlg.hh</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">namespace </span>opdet {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keyword">class </span>pmtTriggerAna;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">   52</a></span>&#160;  <span class="keyword">class </span><a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> : <span class="keyword">public</span> art::EDAnalyzer {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">pmtTriggerAna</a>(fhicl::ParameterSet <span class="keyword">const</span> &amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// The destructor generated by the compiler is fine for classes</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// without bare pointers or other resource use.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// Plugins should not be copied or assigned.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">pmtTriggerAna</a>(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> <span class="keyword">const</span> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">pmtTriggerAna</a>(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> &amp;&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> &amp; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a0b48829caf5d21e00bf37910d716695d">operator = </a>(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> <span class="keyword">const</span> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> &amp; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a0b48829caf5d21e00bf37910d716695d">operator = </a>(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">pmtTriggerAna</a> &amp;&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// Required functions.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#acbfa053bf9a63025563ac31ecf5b37f3">analyze</a>(art::Event <span class="keyword">const</span> &amp; <a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">//Selected optional functions</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a59ce50bfb77c60fd0c997de721f9a015">beginJob</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aaf9b9debfd18bed838ac2eda5f374616">endJob</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a32aa5dc1052cf228b495c30ba0c1ab10">   71</a></span>&#160;    <a class="code" href="../../d9/df2/classopdet_1_1sbndPDMapAlg.html">opdet::sbndPDMapAlg</a> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a32aa5dc1052cf228b495c30ba0c1ab10">pdMap</a>; <span class="comment">//map for photon detector types</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#af1ef6619a13b2f0f769a4f264e09dbdb">   74</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#af1ef6619a13b2f0f769a4f264e09dbdb">run</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ad21148df582a53fab401f457795e8ca4">   75</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ad21148df582a53fab401f457795e8ca4">subrun</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4824628fb5bcea66a36d3982c22c58d5">   76</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4824628fb5bcea66a36d3982c22c58d5">event</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">   77</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">   78</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a>; <span class="comment">//channel number</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">   79</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a>; <span class="comment">//sampling rate</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">   80</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>; <span class="comment">//start time (in us) of raw waveform</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">   81</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>; <span class="comment">//end time (in us) of raw waeform</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">   82</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">fWindowStart</a>; <span class="comment">//start time (in us) of trigger window (set in fcl, 0 for beam spill)</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">   83</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">fWindowEnd</a>; <span class="comment">//end time (in us) of trigger window (set in fcl, 1.6 for beam spill)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">   84</a></span>&#160;    TTree *<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">//double fBaseline = 8000.0; //baseline ADC (set in simulation)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa7d966fcd324939df321989f3c4a6421">   87</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa7d966fcd324939df321989f3c4a6421">fThreshold</a>; <span class="comment">//individual pmt threshold in ADC (set in fcl, passes if ADC is LESS THAN threshold)</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">   88</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">fOVTHRWidth</a>;<span class="comment">//over-threshold width, page 40 of manual (set in fcl)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">   89</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>; <span class="comment">//channel numbers for first set of paired pmts (set in fcl)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">   90</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>; <span class="comment">//channel numbers for second set of paired pmts (set in fcl)</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">   91</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">fUnpaired</a>;<span class="comment">//channel numbers for unpired pmts (set in fcl)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3a48a9f33180e8ce419d05d962a615e1">   93</a></span>&#160;    std::string <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3a48a9f33180e8ce419d05d962a615e1">fInputModuleName</a>; <span class="comment">//opdet waveform module name (set in fcl)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a5bbe205eaeb7dffded24ead47f7881d6">   94</a></span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a5bbe205eaeb7dffded24ead47f7881d6">fOpDetsToPlot</a>; <span class="comment">//types of optical detetcors (e.g. &quot;pmt_coated&quot;, &quot;xarapuca_vuv&quot;, etc.), should only be pmt_coated and pmt_uncoated (set in fcl)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">   95</a></span>&#160;    std::stringstream <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a>; <span class="comment">//raw waveform hist name</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">   96</a></span>&#160;    std::stringstream <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>; <span class="comment">//other hists names</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">   97</a></span>&#160;    std::string <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">opdetType</a>; <span class="comment">//opdet wavform&#39;s opdet type (required to be pmt_coated or pmt_uncoated)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">   99</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>; <span class="comment">//index =time (us, triger window only), content = number of pmt pairs passed threshold</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">  100</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a>; <span class="comment">//maximum number of pmt pairs passing threshold at the same time within trigger window</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  };</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">  104</a></span>&#160;  <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">pmtTriggerAna::pmtTriggerAna</a>(fhicl::ParameterSet <span class="keyword">const</span> &amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    :</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    EDAnalyzer(p),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    fTree(nullptr)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// More initializers here.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    art::ServiceHandle&lt;art::TFileService&gt; <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a> = tfs-&gt;make&lt;TTree&gt;(<span class="stringliteral">&quot;pmttriggertree&quot;</span>,<span class="stringliteral">&quot;analysis tree&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Branch(<span class="stringliteral">&quot;run&quot;</span>, &amp;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#af1ef6619a13b2f0f769a4f264e09dbdb">run</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Branch(<span class="stringliteral">&quot;subrun&quot;</span>, &amp;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ad21148df582a53fab401f457795e8ca4">subrun</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Branch(<span class="stringliteral">&quot;event&quot;</span>, &amp;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4824628fb5bcea66a36d3982c22c58d5">event</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Branch(<span class="stringliteral">&quot;passed_trigger&quot;</span>, &amp;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Branch(<span class="stringliteral">&quot;max_passed&quot;</span>,&amp;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3a48a9f33180e8ce419d05d962a615e1">fInputModuleName</a> = p.get&lt; std::string &gt;(<span class="stringliteral">&quot;InputModule&quot;</span> );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a5bbe205eaeb7dffded24ead47f7881d6">fOpDetsToPlot</a>    = p.get&lt;std::vector&lt;std::string&gt; &gt;(<span class="stringliteral">&quot;OpDetsToPlot&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa7d966fcd324939df321989f3c4a6421">fThreshold</a>       = p.get&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;Threshold&quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">fOVTHRWidth</a>        = p.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;OVTHRWidth&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>    = p.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;Pair1&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>    = p.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;Pair2&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">fUnpaired</a>    = p.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;Unpaired&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">fWindowStart</a> = p.get&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;WindowStart&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">fWindowEnd</a> = p.get&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;WindowEnd&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> clockData = art::ServiceHandle&lt;detinfo::DetectorClocksService const&gt;()-&gt;DataForJob();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a> = clockData.OpticalClock().Frequency(); <span class="comment">// MHz</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a59ce50bfb77c60fd0c997de721f9a015">  133</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a59ce50bfb77c60fd0c997de721f9a015">pmtTriggerAna::beginJob</a>()</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#acbfa053bf9a63025563ac31ecf5b37f3">  138</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#acbfa053bf9a63025563ac31ecf5b37f3">pmtTriggerAna::analyze</a>(art::Event <span class="keyword">const</span> &amp; <a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// Implementation of required member function here.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;My module on event #&quot;</span> &lt;&lt; e.id().event() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    art::ServiceHandle&lt;art::TFileService&gt; <a class="code" href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a> = e.id().event();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#af1ef6619a13b2f0f769a4f264e09dbdb">run</a> = e.run();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ad21148df582a53fab401f457795e8ca4">subrun</a> = e.subRun();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">event</span> = e.id().event();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    art::Handle&lt; std::vector&lt; raw::OpDetWaveform &gt; &gt; waveHandle;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    e.getByLabel(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3a48a9f33180e8ce419d05d962a615e1">fInputModuleName</a>, waveHandle);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span>(!waveHandle.isValid()) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; Form(<span class="stringliteral">&quot;Did not find any G4 photons from a producer: %s&quot;</span>, <span class="stringliteral">&quot;largeant&quot;</span>) &lt;&lt; std::endl;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// // example of usage for pdMap.getCollectionWithProperty()</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// //</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// // define a container</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// auto inBoxTwo = pdMap.getCollectionWithProperty(&quot;pds_box&quot;, 2);</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// // you can cout the whole json object</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// std::cout &lt;&lt; &quot;inBoxTwo:\t&quot; &lt;&lt; inBoxTwo &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// // traverse its components in a loop</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// for (auto const &amp;e: inBoxTwo) {</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">//   std::cout &lt;&lt; e[&quot;pd_type&quot;] &lt;&lt; &quot; &quot; &lt;&lt; e[&quot;channel&quot;] &lt;&lt; &#39; &#39; &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// // example of usage for pdMap.getCollectionFromCondition()</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// // define a lambda function with the conditions</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// auto subsetCondition = [](auto const&amp; e)-&gt;bool</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">//   // modify conditions as you want in the curly braces below</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">//   {return e[&quot;pd_type&quot;] == &quot;pmt_uncoated&quot; &amp;&amp; e[&quot;tpc&quot;] == 0;};</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// // get the container that satisfies the conditions</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// auto uncoatedsInTPC0 = pdMap.getCollectionFromCondition(subsetCondition);</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// std::cout &lt;&lt; &quot;uncoatedsInTPC0.size():\t&quot; &lt;&lt; uncoatedsInTPC0.size() &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// for(auto const&amp; e:uncoatedsInTPC0){</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">//   std::cout &lt;&lt; &quot;e:\t&quot; &lt;&lt; e &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">//fOpDetsToPlot = [&quot;pmt_coated&quot;, &quot;pmt_uncoated&quot;];</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a> = 0;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">//std::cout &lt;&lt; &quot;Number of PMT waveforms: &quot; &lt;&lt; waveHandle-&gt;size() &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">int</span> num_pmt_wvf = 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">int</span> num_pmt_ch = 0;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;fOpDetsToPlot:\t&quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; opdet : <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a5bbe205eaeb7dffded24ead47f7881d6">fOpDetsToPlot</a>){<a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; opdet &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">//size_t previous_channel = -1;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">//std::vector&lt;int&gt; previous_waveform;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">//std::vector&lt;int&gt; previous_waveform_down;</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    std::vector&lt;int&gt; channel_numbers = {6,7,8,9,10,11,12,13,14,15,16,17,36,37,38,39,40,41,60,61,62,63,64,65,66,67,68,69,70,71,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      84,85,86,87,88,89,90,91,92,93,94,95,114,115,116,117,118,119,138,139,140,141,142,143,144,145,146,147,148,149,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      162,163,164,165,166,167,168,169,170,171,172,173,192,193,194,195,196,197,216,217,218,219,220,221,222,223,224,225,226,227,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      240,241,242,243,244,245,246,247,248,249,250,251,270,271,272,273,274,275,294,295,296,297,298,299,300,301,302,303,304,305};</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    std::vector&lt;std::vector&lt;int&gt;&gt; channel_bin_wvfs;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    std::vector&lt;int&gt; <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a6ff98669e621a35d1f398614fe209dc7">paired</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    std::vector&lt;std::vector&lt;int&gt;&gt; unpaired_wvfs;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">//std::vector&lt;int&gt; passed_trigger;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    std::vector&lt;int&gt; wvf_bin_0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = -1500.0; i&lt;1500.0; i+=(1./<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a>)){</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      wvf_bin_0.emplace_back(0);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i&lt;120; i++){</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      channel_bin_wvfs.emplace_back(wvf_bin_0);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.size(); i++){</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      paired.emplace_back(0);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.size(); i++){</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      unpaired_wvfs.emplace_back(paired);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">fWindowStart</a>; i&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">fWindowEnd</a>; i+=(4./<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a>)){</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>.emplace_back(0);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.size()!=paired.size()){<a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;Pair lists mismatched sizes!&quot;</span>&lt;&lt;std::endl;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordtype">size_t</span> wvf_id = -1;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">int</span> hist_id = -1;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; wvf : (*waveHandle)) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      wvf_id++;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      hist_id++;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a> = wvf.ChannelNumber();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">opdetType</a> = <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a32aa5dc1052cf228b495c30ba0c1ab10">pdMap</a>.<a class="code" href="../../d9/df2/classopdet_1_1sbndPDMapAlg.html#a27eaf41b286740621a15019864d338ee">pdType</a>(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (std::find(fOpDetsToPlot.begin(), fOpDetsToPlot.end(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">opdetType</a>) == fOpDetsToPlot.end()) {<span class="keywordflow">continue</span>;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      num_pmt_wvf++;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a>.str(std::string());</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_opchannel_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">opdetType</a></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; hist_id</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_raw&quot;</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a> = wvf.TimeStamp(); <span class="comment">//in us</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a> = double(wvf.size()) / <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a> + <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>; <span class="comment">//in us</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">//double orig_size = double(wvf.size());</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">//baseline</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">//double baseline = -1.;</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">//std::vector&lt;double&gt; wvf_full;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">//create binary waveform</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        std::vector&lt;int&gt; wvf_bin;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">//std::vector&lt;int&gt; wvf_bin_down;</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">//pmt above Threshold</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">//bool above_thres = false;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">//Create a new histogram for binary waveform</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        TH1D *wvfHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a>.str().c_str(), <span class="stringliteral">&quot;Raw Waveform&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, wvf.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        wvfHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf.size(); i++) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          wvfHist-&gt;SetBinContent(i + 1, (<span class="keywordtype">double</span>)wvf[i]);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">/*  wvfHist-&gt;Fit(&quot;pol0&quot;, &quot;Q&quot;);</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">        //std::cout &lt;&lt; &quot;Line 190&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">        TF1 *bline = (TF1*)wvfHist-&gt;GetListOfFunctions()-&gt;FindObject(&quot;pol0&quot;);</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">        //std::cout &lt;&lt; &quot;Line 192&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">        baseline = bline-&gt;GetParameter(0); */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">//std::cout &lt;&lt; &quot;Line 194&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">/*for(unsigned int i = 0; i &lt; wvf.size(); i++) {</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">          wvf_full.emplace_back((double)wvf[i]);</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">        }*/</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="comment">/*  histname2.str(std::string());</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">        histname2 &lt;&lt; &quot;event_&quot; &lt;&lt; fEvNumber</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">                 &lt;&lt; &quot;_opchannel_&quot; &lt;&lt; fChNumber</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">                 &lt;&lt; &quot;_&quot; &lt;&lt; opdetType</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">                 &lt;&lt; &quot;_&quot; &lt;&lt; hist_id</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">                 &lt;&lt; &quot;_binary&quot;; */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a> &lt; -1500.0<span class="comment">/*-1488.94*/</span>){<a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;Start Time is &quot;</span>&lt;&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>&lt;&lt;std::endl;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a> &gt; -1500.0){</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;           <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>+1500.0; i&gt;0.; i-=(1./<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a>)){</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;             wvf_bin.emplace_back(0);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;           }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;         }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf.size(); i++) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <span class="keywordflow">if</span>((<span class="keywordtype">double</span>)wvf[i]&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa7d966fcd324939df321989f3c4a6421">fThreshold</a>){wvf_bin.emplace_back(1);}<span class="keywordflow">else</span>{wvf_bin.emplace_back(0);}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a> &gt; 1500.0<span class="comment">/*1486.98 1473.08*/</span>){<a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;End Time is &quot;</span>&lt;&lt;<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>&lt;&lt;std::endl;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a> &lt; 1500.0){</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = 1500.0-<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>; i&gt;0.; i-=(1./<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">fSampling</a>)){</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            wvf_bin.emplace_back(0);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment">//  fStartTime = -1500.0;</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="comment">//  fEndTime = 1500.0;//1473.08;</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">//combine wavform with any other waveforms from same channel</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordtype">int</span> i_ch = -1.;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keyword">auto</span> ich = std::find(channel_numbers.begin(), channel_numbers.end(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> (ich != channel_numbers.end()){</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          i_ch = ich - channel_numbers.begin();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_bin.size(); i++) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="keywordflow">if</span>(channel_bin_wvfs.at(i_ch)[i]==1 || wvf_bin[i]==1){channel_bin_wvfs.at(i_ch)[i]=1;}<span class="keywordflow">else</span>{channel_bin_wvfs.at(i_ch)[i]=0;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      }<span class="comment">//wave handle loop</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">//combine all waveforms for a single PMT into one, only works if OoDetWaveForms are saved in order of channel number (i.e. all waveforms for</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">//a channel are next to each other)</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">/*  if (fChNumber==previous_channel){</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">          //if (wvf_bin.size()!=previous_waveform.size()){std::cout &lt;&lt; &quot;Mismatch binary waveform sizes&quot; &lt;&lt; std::endl;}</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">          //unsigned int wvf_size = wvf_bin.size();</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">          //if (wvf_bin.size() &lt; previous_waveform.size()){</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">          for(unsigned int i = 0; i &lt; wvf_bin.size(); i++) {</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">            //if (i==previous_waveform.size()){previous_waveform.emplace_back(0);}</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">            if(previous_waveform[i]==1 || wvf_bin[i]==1){wvf_bin[i]=1;}else{wvf_bin[i]=0;}</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">          }</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">          //if (wvf_bin.size()!=previous_waveform.size()){std::cout &lt;&lt; &quot;Mismatch binary waveform sizes&quot; &lt;&lt; std::endl;}</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">        } */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">//if (wvf_bin.size()!=wvf.size()){std::cout &lt;&lt; &quot;Mismatch analog and binary waveform size&quot; &lt;&lt; std::endl;}</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordtype">int</span> wvf_num = -1;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> wvf_bin : channel_bin_wvfs){</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        wvf_num++;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a> = channel_numbers.at(wvf_num);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a> = -1500.0;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a> = 1500.0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="comment">//downscale binary waveform by 4</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        std::vector&lt;int&gt; wvf_bin_down;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_bin.size(); i++) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          <span class="keywordflow">if</span>(i%4==0){wvf_bin_down.emplace_back(wvf_bin[i]);}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">//if (wvf_id==waveHandle-&gt;size() || waveHandle-&gt;at(wvf_id+1).ChannelNumber()!=fChNumber){</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        num_pmt_ch++;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str(std::string());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_opchannel_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">fChNumber</a></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_binary&quot;</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        TH1D *wvfbHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str().c_str(), <span class="stringliteral">&quot;Binary Waveform&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, wvf_bin.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        wvfbHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_bin.size(); i++) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          wvfbHist-&gt;SetBinContent(i + 1, wvf_bin[i]);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str(std::string());</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_opchannel_&quot;</span> &lt;&lt; fChNumber</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;_binary_down&quot;</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        TH1D *wvfbdHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str().c_str(), <span class="stringliteral">&quot;Downsampled Binary Waveform&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, wvf_bin_down.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        wvfbdHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_bin_down.size(); i++) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          wvfbdHist-&gt;SetBinContent(i + 1, wvf_bin_down[i]);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordtype">bool</span> combine = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">bool</span> unpaired = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">size_t</span> pair_num = -1;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="comment">/*  std::cout&lt;&lt;&quot;Pair1 size:&quot;&lt;&lt;fPair1.size()&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">            std::cout&lt;&lt;&quot;Pair2 size:&quot;&lt;&lt;fPair2.size()&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">            std::cout&lt;&lt;&quot;paired size:&quot;&lt;&lt;paired.size()&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">            std::cout&lt;&lt;&quot;unpaired wvfs size:&quot;&lt;&lt;unpaired_wvfs.size()&lt;&lt;std::endl;*/</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">fUnpaired</a>.size(); i++){</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">fUnpaired</a>.at(i) == (int)fChNumber){found=<span class="keyword">true</span>; unpaired=<span class="keyword">true</span>;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (!found){</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.size(); i++){</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.at(i) == (int)fChNumber &amp;&amp; paired.at(i)==1){found=<span class="keyword">true</span>; pair_num=i; combine=<span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.at(i) == (int)fChNumber &amp;&amp; paired.at(i)==0){found=<span class="keyword">true</span>; unpaired_wvfs.at(i)=wvf_bin_down; paired.at(i)=1; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          <span class="keywordflow">if</span> (!found){</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.size(); i++){</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.at(i) == (int)fChNumber &amp;&amp; paired.at(i)==1){found=<span class="keyword">true</span>; pair_num=i; combine=<span class="keyword">true</span>; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.at(i) == (int)fChNumber &amp;&amp; paired.at(i)==0){found=<span class="keyword">true</span>; unpaired_wvfs.at(i)=wvf_bin_down; paired.at(i)=1; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (combine || unpaired){</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          std::vector&lt;int&gt; wvf_combine;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;          <span class="keywordflow">if</span> (combine){</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> (unpaired_wvfs.at(pair_num).size()!=wvf_bin_down.size()){<a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;Mismatched paired waveform size&quot;</span>&lt;&lt;std::endl;}</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_bin_down.size(); i++) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;              <span class="comment">//if (i==unpaired_wvfs.at(pair_num).size()){unpaired_wvfs.at(pair_num).emplace_back(0);}</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;              <span class="keywordflow">if</span>(unpaired_wvfs.at(pair_num)[i]==1 || wvf_bin_down[i]==1){wvf_combine.emplace_back(1);}<span class="keywordflow">else</span>{wvf_combine.emplace_back(0);}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(unpaired){</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            wvf_combine = wvf_bin_down;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str(std::string());</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (unpaired){</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_opchannels_&quot;</span> &lt;&lt; fChNumber</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_unpaired&quot;</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_combined&quot;</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_opchannels_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.at(pair_num)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.at(pair_num)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_combined&quot;</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        TH1D *wvfcHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str().c_str(), <span class="stringliteral">&quot;Paired Waveform&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, wvf_combine.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        wvfcHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_combine.size(); i++) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          wvfcHist-&gt;SetBinContent(i + 1, wvf_combine[i]);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;Hist &quot;&lt;&lt;histname2.str().c_str()&lt;&lt;&quot; created&quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">//implement over threshold trigger signal width</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">//(Every time the combined waveform transitions from 0 to 1, change the next fOVTHRWidth values to 1 (ex: fOVTHRWidth=11 -&gt; 12 high -&gt; 12*8=96 ns true) )</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; wvf_combine.size()-<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">fOVTHRWidth</a>; i++) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          <span class="keywordflow">if</span>(wvf_combine[i]==1 &amp;&amp; wvf_combine[i-1]==0){</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = i+1; j &lt; i+<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">fOVTHRWidth</a>+1; j++){</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              wvf_combine[j] = 1;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str(std::string());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> (unpaired){</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;          <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_opchannels_&quot;</span> &lt;&lt; fChNumber</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_unpaired&quot;</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_combined_width&quot;</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_opchannels_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">fPair1</a>.at(pair_num)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">fPair2</a>.at(pair_num)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;_combined_width&quot;</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        TH1D *wvfcwHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">histname2</a>.str().c_str(), <span class="stringliteral">&quot;Over Threshold Paired Waveform&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, wvf_combine.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        wvfcwHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; wvf_combine.size(); i++) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          wvfcwHist-&gt;SetBinContent(i + 1, wvf_combine[i]);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">//Combine the waveforms to get a 1D array of integers where the value corresponds to the number of pairs ON and the</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">//index corresponds to the tick in the waveform</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordtype">double</span> binspermus = wvf_combine.size()/(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">fEndTime</a>-<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> startbin = std::floor(binspermus*(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">fWindowStart</a> - <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>));</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> endbin = std::ceil(binspermus*(fWindowEnd - <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">fStartTime</a>));</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i_p = 0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = startbin; i&lt;endbin; i++){</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          <span class="keywordflow">if</span> (wvf_combine[i]==1){<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>[i_p]++;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          i_p++;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">//previous_channel = fChNumber;</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">//previous_waveform = wvf_bin;</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">//previous_waveform_down = wvf_bin_down;</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">//hist_id++;</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a>.str(std::string());</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a> &lt;&lt; <span class="stringliteral">&quot;event_&quot;</span> &lt;&lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">fEvNumber</a></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;_passed_trigger&quot;</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    TH1D *passedHist = tfs-&gt;make&lt; TH1D &gt;(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">histname</a>.str().c_str(), <span class="stringliteral">&quot;Number of PMTs Passing Trigger During Beam&quot;</span><span class="comment">/*TString::Format(&quot;;t - %f (#mus);&quot;, fStartTime)*/</span>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>.size(), <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">fWindowStart</a>, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">fWindowEnd</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    passedHist-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;t (#mus)&quot;</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>.size(); i++) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      passedHist-&gt;SetBinContent(i + 1, <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>[i]);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pmts: <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">passed_trigger</a>){</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">if</span> (pmts &gt; <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a>) <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a> = pmts;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Number of PMT waveforms: &quot;</span> &lt;&lt; num_pmt_wvf &lt;&lt; std::endl;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Number of PMT channels: &quot;</span> &lt;&lt; num_pmt_ch &lt;&lt; std::endl;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">fTree</a>-&gt;Fill();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    passed_trigger.clear();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">max_passed</a>= 0;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aaf9b9debfd18bed838ac2eda5f374616">  518</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aaf9b9debfd18bed838ac2eda5f374616">pmtTriggerAna::endJob</a>()</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  DEFINE_ART_MODULE(<a class="code" href="../../dc/def/classopdet_1_1pmtTriggerAna.html">opdet::pmtTriggerAna</a>)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
<div class="ttc" id="pmttriggerproducer_8fcl_html_a6ff98669e621a35d1f398614fe209dc7"><div class="ttname"><a href="../../d7/d5a/pmttriggerproducer_8fcl.html#a6ff98669e621a35d1f398614fe209dc7">paired</a></div><div class="ttdeci">BEGIN_PROLOG pmt_uncoated Threshold needs to be a element array of each individual PMT ADC threshold in order of lowest to highest channel number page of manual option are OR or AND window for pmt trigger time start window for pmt trigger time end paired</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/pmttriggerproducer_8fcl_source.html#l00010">pmttriggerproducer.fcl:10</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a4e6077a9bfda43ac22ab74f9d29d5cdf"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4e6077a9bfda43ac22ab74f9d29d5cdf">opdet::pmtTriggerAna::fWindowStart</a></div><div class="ttdeci">double fWindowStart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00082">pmtTriggerAna_module.cc:82</a></div></div>
<div class="ttc" id="sbndPDMapAlg_8hh_html"><div class="ttname"><a href="../../df/d35/sbndPDMapAlg_8hh.html">sbndPDMapAlg.hh</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_af1ef6619a13b2f0f769a4f264e09dbdb"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#af1ef6619a13b2f0f769a4f264e09dbdb">opdet::pmtTriggerAna::run</a></div><div class="ttdeci">int run</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00074">pmtTriggerAna_module.cc:74</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a36babb235342ed6208f675ab49c9b05a"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a36babb235342ed6208f675ab49c9b05a">opdet::pmtTriggerAna::fChNumber</a></div><div class="ttdeci">size_t fChNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00078">pmtTriggerAna_module.cc:78</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a3c3d222a21726339548fe83959b5650b"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3c3d222a21726339548fe83959b5650b">opdet::pmtTriggerAna::fStartTime</a></div><div class="ttdeci">double fStartTime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00080">pmtTriggerAna_module.cc:80</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aa01dfb4990b61cb1e3671c97f04f66e7"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa01dfb4990b61cb1e3671c97f04f66e7">opdet::pmtTriggerAna::fTree</a></div><div class="ttdeci">TTree * fTree</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00084">pmtTriggerAna_module.cc:84</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a32aa5dc1052cf228b495c30ba0c1ab10"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a32aa5dc1052cf228b495c30ba0c1ab10">opdet::pmtTriggerAna::pdMap</a></div><div class="ttdeci">opdet::sbndPDMapAlg pdMap</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00071">pmtTriggerAna_module.cc:71</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a9edf98351fd2dece396129eb49d15bde"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a9edf98351fd2dece396129eb49d15bde">opdet::pmtTriggerAna::fOVTHRWidth</a></div><div class="ttdeci">int fOVTHRWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00088">pmtTriggerAna_module.cc:88</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aef42e7c7b785f07b245ee7bfa23fae65"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aef42e7c7b785f07b245ee7bfa23fae65">opdet::pmtTriggerAna::max_passed</a></div><div class="ttdeci">int max_passed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00100">pmtTriggerAna_module.cc:100</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_acbfa053bf9a63025563ac31ecf5b37f3"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#acbfa053bf9a63025563ac31ecf5b37f3">opdet::pmtTriggerAna::analyze</a></div><div class="ttdeci">void analyze(art::Event const &amp;e) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00138">pmtTriggerAna_module.cc:138</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aaf9b9debfd18bed838ac2eda5f374616"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aaf9b9debfd18bed838ac2eda5f374616">opdet::pmtTriggerAna::endJob</a></div><div class="ttdeci">void endJob() override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00518">pmtTriggerAna_module.cc:518</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a59ce50bfb77c60fd0c997de721f9a015"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a59ce50bfb77c60fd0c997de721f9a015">opdet::pmtTriggerAna::beginJob</a></div><div class="ttdeci">void beginJob() override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00133">pmtTriggerAna_module.cc:133</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_ada538a56ce61b6273d27b25c1052adb0"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ada538a56ce61b6273d27b25c1052adb0">opdet::pmtTriggerAna::passed_trigger</a></div><div class="ttdeci">std::vector&lt; int &gt; passed_trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00099">pmtTriggerAna_module.cc:99</a></div></div>
<div class="ttc" id="classopdet_1_1sbndPDMapAlg_html"><div class="ttname"><a href="../../d9/df2/classopdet_1_1sbndPDMapAlg.html">opdet::sbndPDMapAlg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d35/sbndPDMapAlg_8hh_source.html#l00041">sbndPDMapAlg.hh:41</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_ab10819c35a8ee9201373c67c22c1be17"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ab10819c35a8ee9201373c67c22c1be17">opdet::pmtTriggerAna::histname</a></div><div class="ttdeci">std::stringstream histname</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00095">pmtTriggerAna_module.cc:95</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html">opdet::pmtTriggerAna</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00052">pmtTriggerAna_module.cc:52</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a3a48a9f33180e8ce419d05d962a615e1"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3a48a9f33180e8ce419d05d962a615e1">opdet::pmtTriggerAna::fInputModuleName</a></div><div class="ttdeci">std::string fInputModuleName</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00093">pmtTriggerAna_module.cc:93</a></div></div>
<div class="ttc" id="DetectorPropertiesService_8h_html"><div class="ttname"><a href="../../de/df8/DetectorPropertiesService_8h.html">DetectorPropertiesService.h</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a57390a66bde33ccd4773b4052318634a"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a57390a66bde33ccd4773b4052318634a">opdet::pmtTriggerAna::fPair2</a></div><div class="ttdeci">std::vector&lt; int &gt; fPair2</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00090">pmtTriggerAna_module.cc:90</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a94e83cb99c0f2333df0e4f042df8cd47"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a94e83cb99c0f2333df0e4f042df8cd47">opdet::pmtTriggerAna::histname2</a></div><div class="ttdeci">std::stringstream histname2</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00096">pmtTriggerAna_module.cc:96</a></div></div>
<div class="ttc" id="SimPhotons_8h_html"><div class="ttname"><a href="../../da/dd4/SimPhotons_8h.html">SimPhotons.h</a></div><div class="ttdoc">Simulation objects for optical detectors. </div></div>
<div class="ttc" id="SignalShapingServiceSBND_8h_html"><div class="ttname"><a href="../../d8/d50/SignalShapingServiceSBND_8h.html">SignalShapingServiceSBND.h</a></div><div class="ttdoc">Service to provide microboone-specific signal shaping for simulation (convolution) and reconstruction...</div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a5bbe205eaeb7dffded24ead47f7881d6"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a5bbe205eaeb7dffded24ead47f7881d6">opdet::pmtTriggerAna::fOpDetsToPlot</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fOpDetsToPlot</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00094">pmtTriggerAna_module.cc:94</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aa13925d14264200c586babf4fbb0cc66"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa13925d14264200c586babf4fbb0cc66">opdet::pmtTriggerAna::fWindowEnd</a></div><div class="ttdeci">double fWindowEnd</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00083">pmtTriggerAna_module.cc:83</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_afef19af59cfec093deb0c2645afb7402"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#afef19af59cfec093deb0c2645afb7402">opdet::pmtTriggerAna::opdetType</a></div><div class="ttdeci">std::string opdetType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00097">pmtTriggerAna_module.cc:97</a></div></div>
<div class="ttc" id="DetectorClocksServiceStandard_8h_html"><div class="ttname"><a href="../../db/dce/DetectorClocksServiceStandard_8h.html">DetectorClocksServiceStandard.h</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a4824628fb5bcea66a36d3982c22c58d5"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a4824628fb5bcea66a36d3982c22c58d5">opdet::pmtTriggerAna::event</a></div><div class="ttdeci">int event</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00076">pmtTriggerAna_module.cc:76</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a979f9cd4f9eb8f22684a72df620e29c3"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a979f9cd4f9eb8f22684a72df620e29c3">opdet::pmtTriggerAna::fPair1</a></div><div class="ttdeci">std::vector&lt; int &gt; fPair1</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00089">pmtTriggerAna_module.cc:89</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aecfc5a0a2ef916a866863dde6663813b"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aecfc5a0a2ef916a866863dde6663813b">opdet::pmtTriggerAna::fEvNumber</a></div><div class="ttdeci">size_t fEvNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00077">pmtTriggerAna_module.cc:77</a></div></div>
<div class="ttc" id="lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h_html"><div class="ttname"><a href="../../d5/dbc/lardataobj_2lardataobj_2RawData_2OpDetWaveform_8h.html">OpDetWaveform.h</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_ace4d6771f363c7d26a74f64a014702bf"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ace4d6771f363c7d26a74f64a014702bf">opdet::pmtTriggerAna::pmtTriggerAna</a></div><div class="ttdeci">pmtTriggerAna(fhicl::ParameterSet const &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00104">pmtTriggerAna_module.cc:104</a></div></div>
<div class="ttc" id="SimChannel_8h_html"><div class="ttname"><a href="../../d6/dde/SimChannel_8h.html">SimChannel.h</a></div><div class="ttdoc">object containing MC truth information necessary for making RawDigits and doing back tracking ...</div></div>
<div class="ttc" id="DetectorClocksService_8h_html"><div class="ttname"><a href="../../d3/dba/DetectorClocksService_8h.html">DetectorClocksService.h</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_aa7d966fcd324939df321989f3c4a6421"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#aa7d966fcd324939df321989f3c4a6421">opdet::pmtTriggerAna::fThreshold</a></div><div class="ttdeci">double fThreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00087">pmtTriggerAna_module.cc:87</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_ad21148df582a53fab401f457795e8ca4"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#ad21148df582a53fab401f457795e8ca4">opdet::pmtTriggerAna::subrun</a></div><div class="ttdeci">int subrun</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00075">pmtTriggerAna_module.cc:75</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a0b48829caf5d21e00bf37910d716695d"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a0b48829caf5d21e00bf37910d716695d">opdet::pmtTriggerAna::operator=</a></div><div class="ttdeci">pmtTriggerAna &amp; operator=(pmtTriggerAna const &amp;)=delete</div></div>
<div class="ttc" id="NuVertexChargeTree__module_8cc_html_aa8ae0901ab0cec47d6c9bf9c22af764f"><div class="ttname"><a href="../../dd/d33/NuVertexChargeTree__module_8cc.html#aa8ae0901ab0cec47d6c9bf9c22af764f">tfs</a></div><div class="ttdeci">art::ServiceHandle&lt; art::TFileService &gt; tfs</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d33/NuVertexChargeTree__module_8cc_source.html#l00254">NuVertexChargeTree_module.cc:254</a></div></div>
<div class="ttc" id="LArPropertiesService_8h_html"><div class="ttname"><a href="../../da/d9f/LArPropertiesService_8h.html">LArPropertiesService.h</a></div></div>
<div class="ttc" id="classopdet_1_1sbndPDMapAlg_html_a27eaf41b286740621a15019864d338ee"><div class="ttname"><a href="../../d9/df2/classopdet_1_1sbndPDMapAlg.html#a27eaf41b286740621a15019864d338ee">opdet::sbndPDMapAlg::pdType</a></div><div class="ttdeci">std::string pdType(size_t ch) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/sbndPDMapAlg__tool_8cc_source.html#l00037">sbndPDMapAlg_tool.cc:37</a></div></div>
<div class="ttc" id="sim_8h_html"><div class="ttname"><a href="../../d2/d94/sim_8h.html">sim.h</a></div><div class="ttdoc">Tools and modules for checking out the basics of the Monte Carlo. </div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a2200828ae950e9c06b36701b40124990"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a2200828ae950e9c06b36701b40124990">opdet::pmtTriggerAna::fUnpaired</a></div><div class="ttdeci">std::vector&lt; int &gt; fUnpaired</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00091">pmtTriggerAna_module.cc:91</a></div></div>
<div class="ttc" id="Geometry_8h_html"><div class="ttname"><a href="../../d3/d8b/Geometry_8h.html">Geometry.h</a></div><div class="ttdoc">art framework interface to geometry description </div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a3177686db3276af9ecb73c110d93f265"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a3177686db3276af9ecb73c110d93f265">opdet::pmtTriggerAna::fEndTime</a></div><div class="ttdeci">double fEndTime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00081">pmtTriggerAna_module.cc:81</a></div></div>
<div class="ttc" id="classopdet_1_1pmtTriggerAna_html_a800628d9bf37a143a564b468c023e139"><div class="ttname"><a href="../../dc/def/classopdet_1_1pmtTriggerAna.html#a800628d9bf37a143a564b468c023e139">opdet::pmtTriggerAna::fSampling</a></div><div class="ttdeci">double fSampling</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df1/pmtTriggerAna__module_8cc_source.html#l00079">pmtTriggerAna_module.cc:79</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
