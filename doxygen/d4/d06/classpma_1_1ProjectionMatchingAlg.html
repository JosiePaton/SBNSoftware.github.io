<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>pma::ProjectionMatchingAlg Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d4a/namespacepma.html">pma</a></li><li class="navelem"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html">ProjectionMatchingAlg</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d3/d6f/classpma_1_1ProjectionMatchingAlg-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">pma::ProjectionMatchingAlg Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d01/structpma_1_1ProjectionMatchingAlg_1_1Config.html">Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a79d802c4cdf5bc843da375cf510fbb01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a79d802c4cdf5bc843da375cf510fbb01">ProjectionMatchingAlg</a> (const <a class="el" href="../../d6/d01/structpma_1_1ProjectionMatchingAlg_1_1Config.html">Config</a> &amp;config)</td></tr>
<tr class="separator:a79d802c4cdf5bc843da375cf510fbb01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade62201dc54c276129a15baef9ab9109"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ade62201dc54c276129a15baef9ab9109">ProjectionMatchingAlg</a> (const fhicl::ParameterSet &amp;pset)</td></tr>
<tr class="separator:ade62201dc54c276129a15baef9ab9109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9065279b0139c8aac662813345c9e1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a5d9065279b0139c8aac662813345c9e1">validate_on_adc_test</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;channelStatus, const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const <a class="el" href="../../d7/dd9/classimg_1_1DataProviderAlg.html">img::DataProviderAlg</a> &amp;adcImage, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, TH1F *histoPassing, TH1F *histoRejected) const </td></tr>
<tr class="separator:a5d9065279b0139c8aac662813345c9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3da44b59aa1898c0f9305792f80927b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ab3da44b59aa1898c0f9305792f80927b">validate</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;channelStatus, const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits) const </td></tr>
<tr class="separator:ab3da44b59aa1898c0f9305792f80927b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc71d55614091fa024f64c500400c64"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a5fc71d55614091fa024f64c500400c64">validate</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;channelStatus, const TVector3 &amp;p0, const TVector3 &amp;<a class="el" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a>, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, unsigned int testView, unsigned int tpc, unsigned int cryo) const </td></tr>
<tr class="separator:a5fc71d55614091fa024f64c500400c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa066184b75ec3103aa7e2e7dbdb7661b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa066184b75ec3103aa7e2e7dbdb7661b">twoViewFraction</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk) const </td></tr>
<tr class="separator:aa066184b75ec3103aa7e2e7dbdb7661b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4a034871638a26095c6632b6c45c57"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#abf4a034871638a26095c6632b6c45c57">testHits</a> (<a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> const &amp;detProp, const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, double eps=1.0) const </td></tr>
<tr class="memdesc:abf4a034871638a26095c6632b6c45c57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the number of hits that are closer than eps * fHitTestingDist2D to the track 2D projection.  <a href="#abf4a034871638a26095c6632b6c45c57">More...</a><br/></td></tr>
<tr class="separator:abf4a034871638a26095c6632b6c45c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a974fe899543a129da538b8a5eeff8fbb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a974fe899543a129da538b8a5eeff8fbb">isContained</a> (const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, float margin=0.0F) const </td></tr>
<tr class="separator:a974fe899543a129da538b8a5eeff8fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4152d3baacf6e046ee610edd88adfdcf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4152d3baacf6e046ee610edd88adfdcf">buildTrack</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_2={}) const </td></tr>
<tr class="separator:a4152d3baacf6e046ee610edd88adfdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6fc0bdf8dea419c76c4483128c4854f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ae6fc0bdf8dea419c76c4483128c4854f">buildMultiTPCTrack</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits) const </td></tr>
<tr class="separator:ae6fc0bdf8dea419c76c4483128c4854f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3125dbd18e7460433f7e6840ac6c791b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a3125dbd18e7460433f7e6840ac6c791b">buildShowerSeg</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, const <a class="el" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> &amp;vtx) const </td></tr>
<tr class="separator:a3125dbd18e7460433f7e6840ac6c791b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693cd31de3882f0f5a261cb5606ee592"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">buildSegment</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_2={}) const </td></tr>
<tr class="separator:a693cd31de3882f0f5a261cb5606ee592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5ca50307f21787b22ca17247c1160e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aac5ca50307f21787b22ca17247c1160e">buildSegment</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_2, const TVector3 &amp;point) const </td></tr>
<tr class="separator:aac5ca50307f21787b22ca17247c1160e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bfdc85028f28b8f7ccbe01e828e21b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a85bfdc85028f28b8f7ccbe01e828e21b">buildSegment</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, const TVector3 &amp;point) const </td></tr>
<tr class="separator:a85bfdc85028f28b8f7ccbe01e828e21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18d843a2eecf1d492c267065594a2956"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a18d843a2eecf1d492c267065594a2956">FilterOutSmallParts</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, double r2d, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_in, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_out, const TVector2 &amp;vtx2d) const </td></tr>
<tr class="separator:a18d843a2eecf1d492c267065594a2956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d09029e53d7f8d3d41912c470c53adb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a6d09029e53d7f8d3d41912c470c53adb">RemoveNotEnabledHits</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk) const </td></tr>
<tr class="separator:a6d09029e53d7f8d3d41912c470c53adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18a748cd1cdded10dd74c1dad4fea46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ae18a748cd1cdded10dd74c1dad4fea46">extendTrack</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits, bool add_nodes) const </td></tr>
<tr class="memdesc:ae18a748cd1cdded10dd74c1dad4fea46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add more hits to an existing track, reoptimize, optionally add more nodes.  <a href="#ae18a748cd1cdded10dd74c1dad4fea46">More...</a><br/></td></tr>
<tr class="separator:ae18a748cd1cdded10dd74c1dad4fea46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b9f19ccced2db9cb9fd416ddc24dd24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a0b9f19ccced2db9cb9fd416ddc24dd24">guideEndpoints</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;hits) const </td></tr>
<tr class="separator:a0b9f19ccced2db9cb9fd416ddc24dd24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab269f74e0aefd86776cc5fd8ed1be6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4ab269f74e0aefd86776cc5fd8ed1be6">guideEndpoints</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;clockData, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891">pma::Track3D::ETrackEnd</a> endpoint, const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;hits) const </td></tr>
<tr class="memdesc:a4ab269f74e0aefd86776cc5fd8ed1be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add 3D reference points to clean endpoint of a track.  <a href="#a4ab269f74e0aefd86776cc5fd8ed1be6">More...</a><br/></td></tr>
<tr class="separator:a4ab269f74e0aefd86776cc5fd8ed1be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3ecedc917738f716c035a93a4b9f0a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#abd3ecedc917738f716c035a93a4b9f0a">trimTrackToVolume</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, TVector3 p0, TVector3 <a class="el" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a>) const </td></tr>
<tr class="separator:abd3ecedc917738f716c035a93a4b9f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf436e3c33f6a353c30b12e42182747"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aebf436e3c33f6a353c30b12e42182747">alignTracks</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;first, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;<a class="el" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>) const </td></tr>
<tr class="separator:aebf436e3c33f6a353c30b12e42182747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba38c6c25868992c3c1592ab1315d234"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aba38c6c25868992c3c1592ab1315d234">mergeTracks</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;dst, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;src, bool reopt) const </td></tr>
<tr class="separator:aba38c6c25868992c3c1592ab1315d234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8035e3fd0a8d894de853e2ecb2d5cf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ae8035e3fd0a8d894de853e2ecb2d5cf6">autoFlip</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#a1f6428b89518e48188e293c2c67743dd">pma::Track3D::EDirection</a> <a class="el" href="../../d6/d91/make__tar__sbnd_8sh.html#aaf78092b2b7e15dcd60eda6328769a09">dir</a>=<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#a1f6428b89518e48188e293c2c67743ddaa703023c9fcc4055af46588f20785bfd">Track3D::kForward</a>, double thr=0.0, unsigned int <a class="el" href="../../d0/d99/find__fhicl_8sh.html#a1bfbd78e0d8a2bc06df6cee466cca51a">n</a>=0) const </td></tr>
<tr class="separator:ae8035e3fd0a8d894de853e2ecb2d5cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b5b6bed1c3e4c22f1490211ae74ec0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a88b5b6bed1c3e4c22f1490211ae74ec0">selectInitialHits</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, unsigned int view=<a class="el" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>, unsigned int *nused=0) const </td></tr>
<tr class="separator:a88b5b6bed1c3e4c22f1490211ae74ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2b26f99f9f26ad108dc56c4f7700c32b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2b26f99f9f26ad108dc56c4f7700c32b">chkEndpointHits_</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, int wire, int wdir, double drift_x, int view, unsigned int tpc, unsigned int cryo, const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits) const </td></tr>
<tr class="separator:a2b26f99f9f26ad108dc56c4f7700c32b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24197f0ae4486ed088dfd1ca70e2fd47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">addEndpointRef_</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;hits, std::pair&lt; int, int &gt; const *wires, double const *xPos, unsigned int tpc, unsigned int cryo) const </td></tr>
<tr class="separator:a24197f0ae4486ed088dfd1ca70e2fd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84f1df680a549250cda2e4bdfd26e92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af84f1df680a549250cda2e4bdfd26e92">GetCloseHits_</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, double r2d, const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_in, std::vector&lt; size_t &gt; &amp;used, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;hits_out) const </td></tr>
<tr class="separator:af84f1df680a549250cda2e4bdfd26e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a596e7dfa7d28d37f25c8c5922405acb5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a596e7dfa7d28d37f25c8c5922405acb5">Has_</a> (const std::vector&lt; size_t &gt; &amp;v, size_t idx) const </td></tr>
<tr class="separator:a596e7dfa7d28d37f25c8c5922405acb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e3e72f253bd01119d538ffb77dd8e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a00e3e72f253bd01119d538ffb77dd8e7">ShortenSeg_</a> (const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;detProp, <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const <a class="el" href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a> &amp;tpcgeom) const </td></tr>
<tr class="separator:a00e3e72f253bd01119d538ffb77dd8e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d7b9c31c248a18612f31138df645b57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4d7b9c31c248a18612f31138df645b57">TestTrk_</a> (<a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;trk, const <a class="el" href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a> &amp;tpcgeom) const </td></tr>
<tr class="separator:a4d7b9c31c248a18612f31138df645b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a4526427b451d4ee3f3a463ad5b306c3b"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">getSegCount_</a> (size_t trk_size)</td></tr>
<tr class="separator:a4526427b451d4ee3f3a463ad5b306c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a919b5abb7237461d376ea12ac26e7aad"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a></td></tr>
<tr class="separator:a919b5abb7237461d376ea12ac26e7aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59594fedcfd32699ac1ddfa18522c57"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a></td></tr>
<tr class="separator:ac59594fedcfd32699ac1ddfa18522c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af110a4c6e8e887b1807d52868102c9e4"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">fTrkValidationDist2D</a></td></tr>
<tr class="separator:af110a4c6e8e887b1807d52868102c9e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0579ff709ef808497ec91163e1718a8"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa0579ff709ef808497ec91163e1718a8">fHitTestingDist2D</a></td></tr>
<tr class="separator:aa0579ff709ef808497ec91163e1718a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe5ab73520e1f2a0f132786200eada4"><td class="memItemLeft" align="right" valign="top">double const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2fe5ab73520e1f2a0f132786200eada4">fMinTwoViewFraction</a></td></tr>
<tr class="separator:a2fe5ab73520e1f2a0f132786200eada4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa09d2eedd9b8602bd2b5a4bef917753c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html">geo::GeometryCore</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a></td></tr>
<tr class="separator:aa09d2eedd9b8602bd2b5a4bef917753c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00053">53</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a79d802c4cdf5bc843da375cf510fbb01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pma::ProjectionMatchingAlg::ProjectionMatchingAlg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d01/structpma_1_1ProjectionMatchingAlg_1_1Config.html">Config</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00029">29</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  : <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a>{config.OptimizationEps()}</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  , <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>{config.FineTuningEps()}</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  , <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">fTrkValidationDist2D</a>{config.TrkValidationDist2D()}</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  , <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa0579ff709ef808497ec91163e1718a8">fHitTestingDist2D</a>{config.HitTestingDist2D()}</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  , <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2fe5ab73520e1f2a0f132786200eada4">fMinTwoViewFraction</a>{config.MinTwoViewFraction()}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  , <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>{lar::providerFrom&lt;geo::Geometry&gt;()}</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="../../d3/dfc/classpma_1_1Node3D.html#a7991ba37fc5240bf22cb06996276042a">pma::Node3D::SetMargin</a>(config.NodeMargin3D());</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a9ede68dac17c1580a5be6b85e0067389">pma::Element3D::SetOptFactor</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>, config.HitWeightU());</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a9ede68dac17c1580a5be6b85e0067389">pma::Element3D::SetOptFactor</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>, config.HitWeightV());</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a9ede68dac17c1580a5be6b85e0067389">pma::Element3D::SetOptFactor</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>, config.HitWeightZ());</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a2fe5ab73520e1f2a0f132786200eada4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2fe5ab73520e1f2a0f132786200eada4">pma::ProjectionMatchingAlg::fMinTwoViewFraction</a></div><div class="ttdeci">double const fMinTwoViewFraction</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00325">ProjectionMatchingAlg.h:325</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a9ede68dac17c1580a5be6b85e0067389"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a9ede68dac17c1580a5be6b85e0067389">pma::Element3D::SetOptFactor</a></div><div class="ttdeci">static void SetOptFactor(unsigned int view, float value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00107">PmaElement3D.h:107</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a></div><div class="ttdoc">Planes which measure V. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00130">geo_types.h:130</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a></div><div class="ttdoc">Planes which measure Z direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00132">geo_types.h:132</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html_a7991ba37fc5240bf22cb06996276042a"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html#a7991ba37fc5240bf22cb06996276042a">pma::Node3D::SetMargin</a></div><div class="ttdeci">static void SetMargin(double m)</div><div class="ttdoc">Set allowed node position margin around TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/PmaNode3D_8h_source.html#l00151">PmaNode3D.h:151</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a></div><div class="ttdoc">Planes which measure U. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00129">geo_types.h:129</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_af110a4c6e8e887b1807d52868102c9e4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">pma::ProjectionMatchingAlg::fTrkValidationDist2D</a></div><div class="ttdeci">double const fTrkValidationDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00320">ProjectionMatchingAlg.h:320</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa0579ff709ef808497ec91163e1718a8"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa0579ff709ef808497ec91163e1718a8">pma::ProjectionMatchingAlg::fHitTestingDist2D</a></div><div class="ttdeci">double const fHitTestingDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00322">ProjectionMatchingAlg.h:322</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a919b5abb7237461d376ea12ac26e7aad"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">pma::ProjectionMatchingAlg::fOptimizationEps</a></div><div class="ttdeci">double const fOptimizationEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00313">ProjectionMatchingAlg.h:313</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ade62201dc54c276129a15baef9ab9109"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pma::ProjectionMatchingAlg::ProjectionMatchingAlg </td>
          <td>(</td>
          <td class="paramtype">const fhicl::ParameterSet &amp;&#160;</td>
          <td class="paramname"><em>pset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00093">93</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    : <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a79d802c4cdf5bc843da375cf510fbb01">ProjectionMatchingAlg</a>(fhicl::Table&lt;Config&gt;(pset, {})())</div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a79d802c4cdf5bc843da375cf510fbb01"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a79d802c4cdf5bc843da375cf510fbb01">pma::ProjectionMatchingAlg::ProjectionMatchingAlg</a></div><div class="ttdeci">ProjectionMatchingAlg(const Config &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00029">ProjectionMatchingAlg.cxx:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a24197f0ae4486ed088dfd1ca70e2fd47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::addEndpointRef_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; int, int &gt; const *&#160;</td>
          <td class="paramname"><em>wires</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double const *&#160;</td>
          <td class="paramname"><em>xPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>tpc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cryo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01041">1041</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> = 0.0, <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a> = 0.0, <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> = 0.0;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  std::vector&lt;std::pair&lt;int, unsigned int&gt;&gt; wire_view;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (wires[i].<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a> &gt;= 0) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> hiter = hits.find(i);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">if</span> (hiter != hits.end()) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2b26f99f9f26ad108dc56c4f7700c32b">chkEndpointHits_</a>(detProp,</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                             wires[i].<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a>,</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                             wires[i].<a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                             xPos[i],</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                             i,</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                             tpc,</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                             cryo,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                             trk,</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                             hiter-&gt;second)) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;          x += xPos[i];</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          wire_view.emplace_back(wires[i].first, i);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">if</span> (wire_view.size() &gt; 1) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    x /= wire_view.size();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#aed0d5fe55e605367888c245e1e94f42e">IntersectionPoint</a>(wire_view[0].<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a>,</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                             wire_view[1].first,</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                             wire_view[0].<a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>,</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                             wire_view[1].second,</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                             cryo,</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                             tpc,</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                             <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a>,</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                             <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ae1f5d5b73013b99163fcd53d96edecd6">AddRefPoint</a>(x, <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a>, <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;trk tpc:&quot;</span> &lt;&lt; tpc &lt;&lt; <span class="stringliteral">&quot; size:&quot;</span> &lt;&lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() &lt;&lt; <span class="stringliteral">&quot; add ref.point (&quot;</span> &lt;&lt; x &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a> &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      &lt;&lt; <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;trk tpc:&quot;</span> &lt;&lt; tpc &lt;&lt; <span class="stringliteral">&quot; size:&quot;</span> &lt;&lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; wire-plane-parallel track, but need two clean views of endpoint&quot;</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div>
<div class="ttc" id="run__opflash__electron_8fcl_html_ae40184b0245025a43c56daa3261d5e3c"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a></div><div class="ttdeci">process_name opflash particleana ie ie ie z</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00092">run_opflash_electron.fcl:92</a></div></div>
<div class="ttc" id="detectorproperties__icarus_8fcl_html_acfd440223f806c44323dbd1053b99123"><div class="ttname"><a href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a></div><div class="ttdeci">second</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d33/detectorproperties__icarus_8fcl_source.html#l00008">detectorproperties_icarus.fcl:8</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a6673f03521899f7844189bcfd8ee5941"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a></div><div class="ttdeci">process_name opflash particleana ie x</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00090">run_opflash_electron.fcl:90</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_af481fa22253619167bce75a37e10ec34"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">channelDBConverter.first</a></div><div class="ttdeci">first</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00146">channelDBConverter.py:146</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ae1f5d5b73013b99163fcd53d96edecd6"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ae1f5d5b73013b99163fcd53d96edecd6">pma::Track3D::AddRefPoint</a></div><div class="ttdeci">void AddRefPoint(const TVector3 &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00262">PmaTrack3D.h:262</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a1e5aaaf25e8609a835e8c7c6fda71456"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a></div><div class="ttdeci">process_name opflash particleana ie ie y</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00091">run_opflash_electron.fcl:91</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_aed0d5fe55e605367888c245e1e94f42e"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#aed0d5fe55e605367888c245e1e94f42e">geo::GeometryCore::IntersectionPoint</a></div><div class="ttdeci">bool IntersectionPoint(geo::WireID const &amp;wid1, geo::WireID const &amp;wid2, double &amp;y, double &amp;z) const </div><div class="ttdoc">Returns the intersection point of two wires. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01657">GeometryCore.cxx:1657</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a2b26f99f9f26ad108dc56c4f7700c32b"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2b26f99f9f26ad108dc56c4f7700c32b">pma::ProjectionMatchingAlg::chkEndpointHits_</a></div><div class="ttdeci">bool chkEndpointHits_(const detinfo::DetectorPropertiesData &amp;detProp, int wire, int wdir, double drift_x, int view, unsigned int tpc, unsigned int cryo, const pma::Track3D &amp;trk, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01004">ProjectionMatchingAlg.cxx:1004</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aebf436e3c33f6a353c30b12e42182747"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::alignTracks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flip tracks to get second as a continuation of first; returns false if not possible (tracks in reversed order). </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01292">1292</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;{</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/dd2/selectors_8fcl.html#a122a7b8666811f02fba2c0fcdc485d17">k</a> = 0;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keywordtype">double</span> <span class="keyword">const</span> distFF = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d7/d6f/namespacelarg4.html#a3b23adbb58bc71f7c54806914226f1f8">dist</a> = distFF;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordtype">double</span> <span class="keyword">const</span> distFB = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">if</span> (distFB &lt; dist) {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    k = 1;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    dist = distFB;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordtype">double</span> <span class="keyword">const</span> distBF = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordflow">if</span> (distBF &lt; dist) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    k = 2;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    dist = distBF;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordtype">double</span> distBB = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span> (distBB &lt; dist) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    k = 3;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    dist = distBB;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">switch</span> (k) <span class="comment">// flip to get dst end before src start, do not merge if track&#39;s order reversed</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    first.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">Flip</a>(); <span class="comment">// detProp);</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordflow">case</span> 1: mf::LogError(<span class="stringliteral">&quot;PMAlgTrackMaker&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Tracks in reversed order.&quot;</span>; <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">case</span> 2: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    second.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">Flip</a>(); <span class="comment">// detProp);</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;pma::ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;alignTracks: should never happen.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;}</div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="namespacelarg4_html_a3b23adbb58bc71f7c54806914226f1f8"><div class="ttname"><a href="../../d7/d6f/namespacelarg4.html#a3b23adbb58bc71f7c54806914226f1f8">larg4::dist</a></div><div class="ttdeci">constexpr double dist(const TReal *x, const TReal *y, const unsigned int dimension)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8a/OpFastScintillation_8hh_source.html#l00563">OpFastScintillation.hh:563</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a0d0283611181a9548143a645be3d53f1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">pma::Track3D::back</a></div><div class="ttdeci">pma::Hit3D const * back() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00103">PmaTrack3D.h:103</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a122a7b8666811f02fba2c0fcdc485d17"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a122a7b8666811f02fba2c0fcdc485d17">k</a></div><div class="ttdeci">pdgs k</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a17c2878ac4a702eac76038d5c9d1e542"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">pma::Track3D::Flip</a></div><div class="ttdeci">bool Flip(const detinfo::DetectorPropertiesData &amp;detProp, std::vector&lt; pma::Track3D * &gt; &amp;allTracks)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00533">PmaTrack3D.cxx:533</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae8035e3fd0a8d894de853e2ecb2d5cf6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::autoFlip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#a1f6428b89518e48188e293c2c67743dd">pma::Track3D::EDirection</a>&#160;</td>
          <td class="paramname"><em>dir</em> = <code><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#a1f6428b89518e48188e293c2c67743ddaa703023c9fcc4055af46588f20785bfd">Track3D::kForward</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>thr</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to correct track direction of the stopping particle: dir: kForward - particle stop is at the end of the track; kBackward - particle stop is at the beginning of the track; dQ/dx difference has to be above thr to actually flip the track; compares dQ/dx of n hits at each end of the track (default is based on the track length). </p>

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00258">258</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ab80632e865e56cf31c7645543f5f6c83">AutoFlip</a>(<a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>, thr, <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  };</div>
<div class="ttc" id="classpma_1_1Track3D_html_ab80632e865e56cf31c7645543f5f6c83"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ab80632e865e56cf31c7645543f5f6c83">pma::Track3D::AutoFlip</a></div><div class="ttdeci">void AutoFlip(pma::Track3D::EDirection dir, double thr=0.0, unsigned int n=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00672">PmaTrack3D.cxx:672</a></div></div>
<div class="ttc" id="namespacedropbox_html_a407b5b895ba9265893768748aaa73825"><div class="ttname"><a href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dropbox.dir</a></div><div class="ttdeci">tuple dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d81/dropbox_8py_source.html#l00028">dropbox.py:28</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_ab6cfbbcbb53c275375289d47dec67f46"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">channelDBConverter.n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00249">channelDBConverter.py:249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6fc0bdf8dea419c76c4483128c4854f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildMultiTPCTrack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a track from sets of hits, multiple TPCs are OK (like taken from PFParticles), as far as hits origin from at least two wire planes. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00504">504</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  std::map&lt;unsigned int, std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt;&gt; hits_by_tpc;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : hits) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    hits_by_tpc[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().TPC].push_back(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  std::vector&lt;pma::Track3D*&gt; <a class="code" href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; hsel : hits_by_tpc) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">buildSegment</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hsel.second);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (trk) tracks.push_back(trk);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordtype">bool</span> need_reopt = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">while</span> (tracks.size() &gt; 1) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    need_reopt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a> = tracks.front();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* best = 0;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordtype">double</span> d, dmin = 1.0e12;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">size_t</span> t_best = 0, cfg = 0;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> t = 1; t &lt; tracks.size(); ++t) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* <a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a> = tracks[t];</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      d = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">if</span> (d &lt; dmin) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        dmin = d;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        best = <a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        t_best = t;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        cfg = 0;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      d = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (d &lt; dmin) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        dmin = d;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        best = <a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        t_best = t;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        cfg = 1;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      d = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">if</span> (d &lt; dmin) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        dmin = d;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        best = <a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        t_best = t;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        cfg = 2;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      d = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(first-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), second-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>());</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (d &lt; dmin) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        dmin = d;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        best = <a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        t_best = t;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        cfg = 3;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (best) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">switch</span> (cfg) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aba38c6c25868992c3c1592ab1315d234">mergeTracks</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, *best, *first, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        tracks[0] = best;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keyword">delete</span> <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">first</a>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aba38c6c25868992c3c1592ab1315d234">mergeTracks</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, *first, *best, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keyword">delete</span> best;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      tracks.erase(tracks.begin() + t_best);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// should not happen</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = 0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordflow">if</span> (!tracks.empty()) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    trk = tracks.front();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (need_reopt) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;  reopt after merging initial tpc segments: done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">int</span> nSegments = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">getSegCount_</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) - trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() + 1;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (nSegments &gt; 0) <span class="comment">// need to add segments</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordtype">double</span> g = 0.0;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordtype">size_t</span> nNodes = (size_t)(nSegments - 1); <span class="comment">// n nodes to add</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (nNodes) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  optimize trk (add &quot;</span> &lt;&lt; nSegments &lt;&lt; <span class="stringliteral">&quot; seg)&quot;</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        g = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, nNodes, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a>, <span class="keyword">false</span>, <span class="keyword">true</span>, 25,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                          10); <span class="comment">// build nodes</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  nodes done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa24c27416bcb2b7c95850af62bcfab68">SelectAllHits</a>();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      g = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>); <span class="comment">// final tuning</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  tune done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="detectorproperties__icarus_8fcl_html_acfd440223f806c44323dbd1053b99123"><div class="ttname"><a href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a></div><div class="ttdeci">second</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d33/detectorproperties__icarus_8fcl_source.html#l00008">detectorproperties_icarus.fcl:8</a></div></div>
<div class="ttc" id="trackfinderalgorithms_8fcl_html_a5204d4188eee282d2235cd231d828bd2"><div class="ttname"><a href="../../d2/dbd/trackfinderalgorithms_8fcl.html#a5204d4188eee282d2235cd231d828bd2">tracks</a></div><div class="ttdeci">ClusterModuleLabel join with tracks</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbd/trackfinderalgorithms_8fcl_source.html#l00056">trackfinderalgorithms.fcl:56</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aa24c27416bcb2b7c95850af62bcfab68"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa24c27416bcb2b7c95850af62bcfab68">pma::Track3D::SelectAllHits</a></div><div class="ttdeci">bool SelectAllHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02941">PmaTrack3D.cxx:2941</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_af481fa22253619167bce75a37e10ec34"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#af481fa22253619167bce75a37e10ec34">channelDBConverter.first</a></div><div class="ttdeci">first</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00146">channelDBConverter.py:146</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a4526427b451d4ee3f3a463ad5b306c3b"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">pma::ProjectionMatchingAlg::getSegCount_</a></div><div class="ttdeci">static size_t getSegCount_(size_t trk_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00443">ProjectionMatchingAlg.cxx:443</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a45d0ae43b2aea694cc8f517bc1505e3c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">pma::Track3D::Segments</a></div><div class="ttdeci">std::vector&lt; pma::Segment3D * &gt; const &amp; Segments() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00326">PmaTrack3D.h:326</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a919b5abb7237461d376ea12ac26e7aad"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">pma::ProjectionMatchingAlg::fOptimizationEps</a></div><div class="ttdeci">double const fOptimizationEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00313">ProjectionMatchingAlg.h:313</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a693cd31de3882f0f5a261cb5606ee592"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">pma::ProjectionMatchingAlg::buildSegment</a></div><div class="ttdeci">pma::Track3D * buildSegment(const detinfo::DetectorPropertiesData &amp;clockData, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_2={}) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00899">ProjectionMatchingAlg.cxx:899</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aba38c6c25868992c3c1592ab1315d234"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aba38c6c25868992c3c1592ab1315d234">pma::ProjectionMatchingAlg::mergeTracks</a></div><div class="ttdeci">void mergeTracks(const detinfo::DetectorPropertiesData &amp;detProp, pma::Track3D &amp;dst, pma::Track3D &amp;src, bool reopt) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01334">ProjectionMatchingAlg.cxx:1334</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a0d0283611181a9548143a645be3d53f1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">pma::Track3D::back</a></div><div class="ttdeci">pma::Hit3D const * back() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00103">PmaTrack3D.h:103</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a693cd31de3882f0f5a261cb5606ee592"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildSegment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_2</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a straight segment from two sets of hits (they should origin from two wire planes); method is intendet for short tracks or shower initial parts, where only a few hits per plane are available and there is no chance to see a curvature or any other features. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00899">899</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <span class="keyword">new</span> <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a013618dfe6938238daad3f9f8ab683c0">SetEndSegWeight</a>(0.001<a class="code" href="../../d4/daf/sbnana_2sbnana_2CAFAna_2Analysis_2Surface_8cxx.html#a2c3bf28add4b70497e6fd9070cd7dfc9">F</a>);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">AddHits</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hits_1);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">AddHits</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hits_2);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">if</span> (trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a39c3984b0f5f5ac48187ade44578df94">HasTwoViews</a>() &amp;&amp; (trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">TPCs</a>().size() == 1)) <span class="comment">// now only in single tpc</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> (!trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a994fecd95666f46cf371ecafa003fe20">Initialize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0.001F)) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;initialization failed, delete segment&quot;</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keyword">delete</span> trk;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;need at least two views in single tpc&quot;</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keyword">delete</span> trk;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ad2e2ce04eb39cad0ca47ef676306c1cb"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">pma::Track3D::AddHits</a></div><div class="ttdeci">void AddHits(detinfo::DetectorPropertiesData const &amp;detProp, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00403">PmaTrack3D.cxx:403</a></div></div>
<div class="ttc" id="sbnana_2sbnana_2CAFAna_2Analysis_2Surface_8cxx_html_a2c3bf28add4b70497e6fd9070cd7dfc9"><div class="ttname"><a href="../../d4/daf/sbnana_2sbnana_2CAFAna_2Analysis_2Surface_8cxx.html#a2c3bf28add4b70497e6fd9070cd7dfc9">F</a></div><div class="ttdeci">#define F(v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/daf/sbnana_2sbnana_2CAFAna_2Analysis_2Surface_8cxx_source.html#l00280">sbnana/sbnana/CAFAna/Analysis/Surface.cxx:280</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a994fecd95666f46cf371ecafa003fe20"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a994fecd95666f46cf371ecafa003fe20">pma::Track3D::Initialize</a></div><div class="ttdeci">bool Initialize(detinfo::DetectorPropertiesData const &amp;detProp, float initEndSegW=0.05F)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00077">PmaTrack3D.cxx:77</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a654256f331ce57a9579086acae964efd"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">pma::Track3D::TPCs</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; TPCs() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00452">PmaTrack3D.cxx:452</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a013618dfe6938238daad3f9f8ab683c0"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a013618dfe6938238daad3f9f8ab683c0">pma::Track3D::SetEndSegWeight</a></div><div class="ttdeci">void SetEndSegWeight(float value) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00398">PmaTrack3D.h:398</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a39c3984b0f5f5ac48187ade44578df94"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a39c3984b0f5f5ac48187ade44578df94">pma::Track3D::HasTwoViews</a></div><div class="ttdeci">bool HasTwoViews(size_t nmin=1) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00442">PmaTrack3D.cxx:442</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac5ca50307f21787b22ca17247c1160e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildSegment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TVector3 &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a straight segment from two sets of hits (they should origin from two wire planes), starting from a given point (like vertex known from another algorithm); method is intendet for short tracks or shower initial parts, where only a few hits per plane are available and there is no chance to see a curvature or any other features. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00929">929</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">buildSegment</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hits_1, hits_2);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">if</span> (trk) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordtype">double</span> dfront = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), point);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">double</span> dback = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), point);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (dfront &gt; dback) trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">Flip</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;SetPoint3D(point);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;SetFrozen(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a570b518d8e14a8cc0fdd4a8823553a0c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">pma::Track3D::Nodes</a></div><div class="ttdeci">std::vector&lt; pma::Node3D * &gt; const &amp; Nodes() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00335">PmaTrack3D.h:335</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a693cd31de3882f0f5a261cb5606ee592"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">pma::ProjectionMatchingAlg::buildSegment</a></div><div class="ttdeci">pma::Track3D * buildSegment(const detinfo::DetectorPropertiesData &amp;clockData, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_2={}) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00899">ProjectionMatchingAlg.cxx:899</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a0d0283611181a9548143a645be3d53f1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">pma::Track3D::back</a></div><div class="ttdeci">pma::Hit3D const * back() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00103">PmaTrack3D.h:103</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a17c2878ac4a702eac76038d5c9d1e542"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">pma::Track3D::Flip</a></div><div class="ttdeci">bool Flip(const detinfo::DetectorPropertiesData &amp;detProp, std::vector&lt; pma::Track3D * &gt; &amp;allTracks)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00533">PmaTrack3D.cxx:533</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85bfdc85028f28b8f7ccbe01e828e21b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildSegment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TVector3 &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a straight segment from set of hits (they should origin from two wire planes at least), starting from a given point. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00952">952</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;{</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">buildSegment</a>(detProp, hits);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">if</span> (trk) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordtype">double</span> dfront = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), point);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordtype">double</span> dback = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), point);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (dfront &gt; dback) trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">Flip</a>(); <span class="comment">// detProp);</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;SetPoint3D(point);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;SetFrozen(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(detProp, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a570b518d8e14a8cc0fdd4a8823553a0c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">pma::Track3D::Nodes</a></div><div class="ttdeci">std::vector&lt; pma::Node3D * &gt; const &amp; Nodes() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00335">PmaTrack3D.h:335</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a693cd31de3882f0f5a261cb5606ee592"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">pma::ProjectionMatchingAlg::buildSegment</a></div><div class="ttdeci">pma::Track3D * buildSegment(const detinfo::DetectorPropertiesData &amp;clockData, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_2={}) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00899">ProjectionMatchingAlg.cxx:899</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a0d0283611181a9548143a645be3d53f1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">pma::Track3D::back</a></div><div class="ttdeci">pma::Hit3D const * back() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00103">PmaTrack3D.h:103</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a17c2878ac4a702eac76038d5c9d1e542"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a17c2878ac4a702eac76038d5c9d1e542">pma::Track3D::Flip</a></div><div class="ttdeci">bool Flip(const detinfo::DetectorPropertiesData &amp;detProp, std::vector&lt; pma::Track3D * &gt; &amp;allTracks)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00533">PmaTrack3D.cxx:533</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3125dbd18e7460433f7e6840ac6c791b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildShowerSeg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> &amp;&#160;</td>
          <td class="paramname"><em>vtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a shower segment from sets of hits and attached to the provided vertex. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00616">616</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;{</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordtype">double</span> vtxarray[3]{vtx.X(), vtx.Y(), vtx.Z()};</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a3942e436222d0761305606d2db9ef0bb">HasTPC</a>(<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a7953310daac7f0bf2f57ceb9760e278f">FindTPCAtPosition</a>(vtxarray))) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  TVector3 vtxv3(vtx.X(), vtx.Y(), vtx.Z());</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> tpc = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a7953310daac7f0bf2f57ceb9760e278f">FindTPCAtPosition</a>(vtxarray).<a class="code" href="../../d2/d4d/structgeo_1_1TPCID.html#a4a7f86b46d9d48a040b7ef5d65973811">TPC</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> cryo = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#aa408d7049fbe1ea6c7107d778a5ba64f">FindCryostatAtPosition</a>(vtxarray);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a>&amp; tpcgeom = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">Cryostat</a>(cryo).<a class="code" href="../../de/da3/classgeo_1_1CryostatGeo.html#a15e1909a67a64f7880720a7c9ff80a64">TPC</a>(tpc);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// use only hits from tpc where the vtx is</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt; hitstpc;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> &lt; hits.size(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().TPC == tpc) hitstpc.push_back(hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">if</span> (!hitstpc.size()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt; hitstrk;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordtype">size_t</span> view = 0;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordtype">size_t</span> countviews = 0;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">while</span> (view &lt; 3) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchinAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;collecting hits from view: &quot;</span> &lt;&lt; view;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (!tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(view)) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      ++view;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// select hits only for a single view</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt; hitsview;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> h = 0; h &lt; hitstpc.size(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">if</span> (hitstpc[h]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().Plane == view) hitsview.push_back(hitstpc[h]);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (!hitsview.size()) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      ++view;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// filter our small groups of hits, far from main shower</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt; hitsfilter;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    TVector2 proj_pr = <a class="code" href="../../d8/d4a/namespacepma.html#aad8115e2b3b996a4d928d57926c7fc27">pma::GetProjectionToPlane</a>(vtxv3, view, tpc, cryo);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchinAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;start filter out: &quot;</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a18d843a2eecf1d492c267065594a2956">FilterOutSmallParts</a>(detProp, 2.0, hitsview, hitsfilter, proj_pr);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;after filter out&quot;</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> h = 0; h &lt; hitsfilter.size(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      hitstrk.push_back(hitsfilter[h]);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (hitsfilter.size() &gt;= 5) countviews++;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    ++view;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> (!hitstrk.size() || (countviews &lt; 2)) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchinAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;too few hits, segment not built&quot;</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// hits are prepared, finally segment is built</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <span class="keyword">new</span> <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  trk = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">buildSegment</a>(detProp, hitstrk, vtxv3);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// make shorter segment to estimate direction more precise</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a00e3e72f253bd01119d538ffb77dd8e7">ShortenSeg_</a>(detProp, *trk, tpcgeom);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">if</span> (trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() &lt; 10) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;too short segment, delete segment&quot;</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keyword">delete</span> trk;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a35754c166243ce6904fe1a1b6b6ae931"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">geo::TPCGeo::HasPlane</a></div><div class="ttdeci">bool HasPlane(unsigned int iplane) const </div><div class="ttdoc">Returns whether a plane with index iplane is present in this TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/TPCGeo_8h_source.html#l00175">TPCGeo.h:175</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a></div><div class="ttdoc">Geometry information for a single TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/TPCGeo_8h_source.html#l00038">TPCGeo.h:38</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a7953310daac7f0bf2f57ceb9760e278f"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a7953310daac7f0bf2f57ceb9760e278f">geo::GeometryCore::FindTPCAtPosition</a></div><div class="ttdeci">geo::TPCID FindTPCAtPosition(double const worldLoc[3]) const </div><div class="ttdoc">Returns the ID of the TPC at specified location. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02454">GeometryCore.h:2454</a></div></div>
<div class="ttc" id="namespacegeo_1_1fhicl_html_a48509e22b6681725c899fc354de43ae2"><div class="ttname"><a href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">geo::fhicl::WireID</a></div><div class="ttdeci">IDparameter&lt; geo::WireID &gt; WireID</div><div class="ttdoc">Member type of validated geo::WireID parameter. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddc/geo__types__fhicl_8h_source.html#l00407">geo_types_fhicl.h:407</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a18d843a2eecf1d492c267065594a2956"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a18d843a2eecf1d492c267065594a2956">pma::ProjectionMatchingAlg::FilterOutSmallParts</a></div><div class="ttdeci">void FilterOutSmallParts(const detinfo::DetectorPropertiesData &amp;detProp, double r2d, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_in, std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_out, const TVector2 &amp;vtx2d) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00697">ProjectionMatchingAlg.cxx:697</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a4fc7bfd4e3413fb5c25ca3c72906acac"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a4fc7bfd4e3413fb5c25ca3c72906acac">geo::GeometryCore::Cryostat</a></div><div class="ttdeci">CryostatGeo const &amp; Cryostat(geo::CryostatID const &amp;cryoid) const </div><div class="ttdoc">Returns the specified cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00321">GeometryCore.cxx:321</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a693cd31de3882f0f5a261cb5606ee592"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a693cd31de3882f0f5a261cb5606ee592">pma::ProjectionMatchingAlg::buildSegment</a></div><div class="ttdeci">pma::Track3D * buildSegment(const detinfo::DetectorPropertiesData &amp;clockData, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_1, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_2={}) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00899">ProjectionMatchingAlg.cxx:899</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a3942e436222d0761305606d2db9ef0bb"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a3942e436222d0761305606d2db9ef0bb">geo::GeometryCore::HasTPC</a></div><div class="ttdeci">bool HasTPC(geo::TPCID const &amp;tpcid) const </div><div class="ttdoc">Returns whether we have the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02397">GeometryCore.h:2397</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a00e3e72f253bd01119d538ffb77dd8e7"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a00e3e72f253bd01119d538ffb77dd8e7">pma::ProjectionMatchingAlg::ShortenSeg_</a></div><div class="ttdeci">void ShortenSeg_(const detinfo::DetectorPropertiesData &amp;detProp, pma::Track3D &amp;trk, const geo::TPCGeo &amp;tpcgeom) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00816">ProjectionMatchingAlg.cxx:816</a></div></div>
<div class="ttc" id="classgeo_1_1CryostatGeo_html_a15e1909a67a64f7880720a7c9ff80a64"><div class="ttname"><a href="../../de/da3/classgeo_1_1CryostatGeo.html#a15e1909a67a64f7880720a7c9ff80a64">geo::CryostatGeo::TPC</a></div><div class="ttdeci">const TPCGeo &amp; TPC(unsigned int itpc) const </div><div class="ttdoc">Return the itpc&amp;#39;th TPC in the cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d90/CryostatGeo_8cxx_source.html#l00093">CryostatGeo.cxx:93</a></div></div>
<div class="ttc" id="namespacepma_html_aad8115e2b3b996a4d928d57926c7fc27"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#aad8115e2b3b996a4d928d57926c7fc27">pma::GetProjectionToPlane</a></div><div class="ttdeci">TVector2 GetProjectionToPlane(const TVector3 &amp;p, unsigned int plane, unsigned int tpc, unsigned int cryo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00270">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:270</a></div></div>
<div class="ttc" id="structgeo_1_1TPCID_html_a4a7f86b46d9d48a040b7ef5d65973811"><div class="ttname"><a href="../../d2/d4d/structgeo_1_1TPCID.html#a4a7f86b46d9d48a040b7ef5d65973811">geo::TPCID::TPC</a></div><div class="ttdeci">TPCID_t TPC</div><div class="ttdoc">Index of the TPC within its cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00406">geo_types.h:406</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_aa408d7049fbe1ea6c7107d778a5ba64f"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#aa408d7049fbe1ea6c7107d778a5ba64f">geo::GeometryCore::FindCryostatAtPosition</a></div><div class="ttdeci">geo::CryostatID::CryostatID_t FindCryostatAtPosition(geo::Point_t const &amp;worldLoc) const </div><div class="ttdoc">Returns the index of the cryostat at specified location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l00393">GeometryCore.cxx:393</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4152d3baacf6e046ee610edd88adfdcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::buildTrack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_2</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a track from two sets of hits from single TPC, hits should origin from at least two wire planes; number of segments used to create the track depends on the number of hits. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00451">451</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* trk = <span class="keyword">new</span> <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>(); <span class="comment">// track candidate</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">AddHits</a>(detProp, hits_1);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">AddHits</a>(detProp, hits_2);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;track size: &quot;</span> &lt;&lt; trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  std::vector&lt;unsigned int&gt; tpcs = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">TPCs</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> t = 0; t &lt; tpcs.size(); ++t) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  tpc:&quot;</span> &lt;&lt; tpcs[t];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;  #coll:&quot;</span> &lt;&lt; trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>) &lt;&lt; <span class="stringliteral">&quot;  #ind2:&quot;</span> &lt;&lt; trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;  #ind1:&quot;</span> &lt;&lt; trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordtype">size_t</span> nSegments = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">getSegCount_</a>(trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>());</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">size_t</span> nNodes = (size_t)(nSegments - 1); <span class="comment">// n nodes to add</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  initialize trk&quot;</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">if</span> (!trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a994fecd95666f46cf371ecafa003fe20">Initialize</a>(detProp)) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  initialization failed, delete trk&quot;</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">delete</span> trk;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordtype">double</span> f = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa066184b75ec3103aa7e2e7dbdb7661b">twoViewFraction</a>(*trk);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">if</span> (f &gt; <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2fe5ab73520e1f2a0f132786200eada4">fMinTwoViewFraction</a>) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = 0.0;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  optimize trk (&quot;</span> &lt;&lt; nSegments &lt;&lt; <span class="stringliteral">&quot; seg)&quot;</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (nNodes) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      g = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(detProp, nNodes, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a>, <span class="keyword">false</span>, <span class="keyword">true</span>, 25,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        10); <span class="comment">// build nodes</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  nodes done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa24c27416bcb2b7c95850af62bcfab68">SelectAllHits</a>();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    g = trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(detProp, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>); <span class="comment">// final tuning</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  tune done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    trk-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// trk-&gt;ShiftEndsToHits(); // not sure if useful already here</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">return</span> trk;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  clusters do not match, f = &quot;</span> &lt;&lt; f;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">delete</span> trk;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ad2e2ce04eb39cad0ca47ef676306c1cb"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">pma::Track3D::AddHits</a></div><div class="ttdeci">void AddHits(detinfo::DetectorPropertiesData const &amp;detProp, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00403">PmaTrack3D.cxx:403</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aa24c27416bcb2b7c95850af62bcfab68"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa24c27416bcb2b7c95850af62bcfab68">pma::Track3D::SelectAllHits</a></div><div class="ttdeci">bool SelectAllHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02941">PmaTrack3D.cxx:2941</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a2fe5ab73520e1f2a0f132786200eada4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a2fe5ab73520e1f2a0f132786200eada4">pma::ProjectionMatchingAlg::fMinTwoViewFraction</a></div><div class="ttdeci">double const fMinTwoViewFraction</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00325">ProjectionMatchingAlg.h:325</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a></div><div class="ttdoc">Planes which measure V. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00130">geo_types.h:130</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a994fecd95666f46cf371ecafa003fe20"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a994fecd95666f46cf371ecafa003fe20">pma::Track3D::Initialize</a></div><div class="ttdeci">bool Initialize(detinfo::DetectorPropertiesData const &amp;detProp, float initEndSegW=0.05F)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00077">PmaTrack3D.cxx:77</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a></div><div class="ttdoc">Planes which measure Z direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00132">geo_types.h:132</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a654256f331ce57a9579086acae964efd"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">pma::Track3D::TPCs</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; TPCs() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00452">PmaTrack3D.cxx:452</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a4526427b451d4ee3f3a463ad5b306c3b"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">pma::ProjectionMatchingAlg::getSegCount_</a></div><div class="ttdeci">static size_t getSegCount_(size_t trk_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00443">ProjectionMatchingAlg.cxx:443</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a></div><div class="ttdoc">Planes which measure U. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00129">geo_types.h:129</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a406e522e831ec16eb527f4057e0dc216"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">pma::Track3D::NHits</a></div><div class="ttdeci">unsigned int NHits(unsigned int view) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00422">PmaTrack3D.cxx:422</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a919b5abb7237461d376ea12ac26e7aad"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">pma::ProjectionMatchingAlg::fOptimizationEps</a></div><div class="ttdeci">double const fOptimizationEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00313">ProjectionMatchingAlg.h:313</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa066184b75ec3103aa7e2e7dbdb7661b"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa066184b75ec3103aa7e2e7dbdb7661b">pma::ProjectionMatchingAlg::twoViewFraction</a></div><div class="ttdeci">double twoViewFraction(pma::Track3D &amp;trk) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00421">ProjectionMatchingAlg.cxx:421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b26f99f9f26ad108dc56c4f7700c32b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::chkEndpointHits_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wire</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>drift_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>tpc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cryo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01004">1004</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;{</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordtype">size_t</span> nCloseHits = 0;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordtype">int</span> forwWires = 3, backWires = -1;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordtype">double</span> xMargin = 0.4;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : hits)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">if</span> ((view == (<span class="keywordtype">int</span>)<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Plane) &amp;&amp; (tpc == <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().TPC) &amp;&amp;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        (cryo == <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Cryostat)) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ht = 0; ht &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(); ht++)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">if</span> (trk[ht]-&gt;Hit2DPtr().key() == <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.key()) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;          found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">if</span> (found) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordtype">int</span> dw = wdir * (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Wire - wire);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span> ((dw &lt;= forwWires) &amp;&amp; (dw &gt;= backWires)) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> = detProp.<a class="code" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">ConvertTicksToX</a>(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;PeakTime(), view, tpc, cryo);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> (fabs(x - drift_x) &lt; xMargin) nCloseHits++;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">if</span> (nCloseHits &gt; 1)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a6673f03521899f7844189bcfd8ee5941"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a></div><div class="ttdeci">process_name opflash particleana ie x</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00090">run_opflash_electron.fcl:90</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorPropertiesData_html_a8e4b4b8d755ffded5a9f956ae7c9c1ec"><div class="ttname"><a href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">detinfo::DetectorPropertiesData::ConvertTicksToX</a></div><div class="ttdeci">double ConvertTicksToX(double ticks, int p, int t, int c) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d64/DetectorPropertiesData_8cc_source.html#l00115">DetectorPropertiesData.cc:115</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae18a748cd1cdded10dd74c1dad4fea46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> * pma::ProjectionMatchingAlg::extendTrack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>add_nodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add more hits to an existing track, reoptimize, optionally add more nodes. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00974">974</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;{</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>* <a class="code" href="../../d6/dd6/RangeForWrapper__test_8cc.html#a2a47a7f29f0ddd7ff5d68f8aff63125c">copy</a> = <span class="keyword">new</span> <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a>(trk);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">AddHits</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hits);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;ext. track size: &quot;</span> &lt;&lt; copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() &lt;&lt; <span class="stringliteral">&quot;  #coll:&quot;</span> &lt;&lt; copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;  #ind2:&quot;</span> &lt;&lt; copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>) &lt;&lt; <span class="stringliteral">&quot;  #ind1:&quot;</span> &lt;&lt; copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">NHits</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">if</span> (add_nodes) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">size_t</span> nSegments = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">getSegCount_</a>(copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>());</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">int</span> nNodes = nSegments - copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().size() + 1; <span class="comment">// n nodes to add</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">if</span> (nNodes &lt; 0) nNodes = 0;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (nNodes) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  add &quot;</span> &lt;&lt; nNodes &lt;&lt; <span class="stringliteral">&quot; nodes&quot;</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, nNodes, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">fOptimizationEps</a>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = copy-&gt;<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  reopt done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d6/dd6/RangeForWrapper__test_8cc.html#a2a47a7f29f0ddd7ff5d68f8aff63125c">copy</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00037">PmaTrack3D.h:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ad2e2ce04eb39cad0ca47ef676306c1cb"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ad2e2ce04eb39cad0ca47ef676306c1cb">pma::Track3D::AddHits</a></div><div class="ttdeci">void AddHits(detinfo::DetectorPropertiesData const &amp;detProp, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00403">PmaTrack3D.cxx:403</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a></div><div class="ttdoc">Planes which measure V. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00130">geo_types.h:130</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a570b518d8e14a8cc0fdd4a8823553a0c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">pma::Track3D::Nodes</a></div><div class="ttdeci">std::vector&lt; pma::Node3D * &gt; const &amp; Nodes() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00335">PmaTrack3D.h:335</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a></div><div class="ttdoc">Planes which measure Z direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00132">geo_types.h:132</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a4526427b451d4ee3f3a463ad5b306c3b"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4526427b451d4ee3f3a463ad5b306c3b">pma::ProjectionMatchingAlg::getSegCount_</a></div><div class="ttdeci">static size_t getSegCount_(size_t trk_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00443">ProjectionMatchingAlg.cxx:443</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a></div><div class="ttdoc">Planes which measure U. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00129">geo_types.h:129</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a406e522e831ec16eb527f4057e0dc216"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a406e522e831ec16eb527f4057e0dc216">pma::Track3D::NHits</a></div><div class="ttdeci">unsigned int NHits(unsigned int view) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00422">PmaTrack3D.cxx:422</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a919b5abb7237461d376ea12ac26e7aad"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a919b5abb7237461d376ea12ac26e7aad">pma::ProjectionMatchingAlg::fOptimizationEps</a></div><div class="ttdeci">double const fOptimizationEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00313">ProjectionMatchingAlg.h:313</a></div></div>
<div class="ttc" id="RangeForWrapper__test_8cc_html_a2a47a7f29f0ddd7ff5d68f8aff63125c"><div class="ttname"><a href="../../d6/dd6/RangeForWrapper__test_8cc.html#a2a47a7f29f0ddd7ff5d68f8aff63125c">copy</a></div><div class="ttdeci">T copy(T const &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd6/RangeForWrapper__test_8cc_source.html#l00098">RangeForWrapper_test.cc:98</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a18d843a2eecf1d492c267065594a2956"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::FilterOutSmallParts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r2d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TVector2 &amp;&#160;</td>
          <td class="paramname"><em>vtx2d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get rid of small groups of hits around cascades; used to calculate cascade starting direction using the compact core cluster. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00697">697</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;{</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordtype">size_t</span> min_size = hits_in.size() / 5;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">if</span> (min_size &lt; 3) min_size = 3;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  std::vector&lt;size_t&gt; used;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  std::vector&lt;std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt;&gt; sub_groups;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  std::vector&lt;art::Ptr&lt;recob::Hit&gt;&gt; close_hits;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordtype">float</span> mindist2 = 99999.99;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordtype">size_t</span> id_sub_groups_save = 0;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordtype">size_t</span> <span class="keywordtype">id</span> = 0;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af84f1df680a549250cda2e4bdfd26e92">GetCloseHits_</a>(detProp, r2d, hits_in, used, close_hits)) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    sub_groups.emplace_back(close_hits);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> &lt; close_hits.size(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      TVector2 hi_cm = <a class="code" href="../../d8/d4a/namespacepma.html#ac06691f19da7b76a3a27c7287e3b2ff1">pma::WireDriftToCm</a>(detProp,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                          close_hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().Wire,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                          close_hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;PeakTime(),</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                          close_hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().<a class="code" href="../../d6/d5e/rawdigitfilter__icarus_8fcl.html#aa2b9cfdf9a8f294302be0cdf6affea22">Plane</a>,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                          close_hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().<a class="code" href="../../d4/d22/sbnd__flashalgo_8fcl.html#a648c7afac4085c93cd1ba4a75dfe8818">TPC</a>,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                          close_hits[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">WireID</a>().Cryostat);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordtype">float</span> dist2 = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(hi_cm, vtx2d);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">if</span> (dist2 &lt; mindist2) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        id_sub_groups_save = id;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        mindist2 = dist2;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">id</span>++;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; sub_groups.size(); ++i) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (i == id_sub_groups_save) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : sub_groups[i])</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        hits_out.push_back(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; sub_groups.size(); ++i) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> ((i != id_sub_groups_save) &amp;&amp; (hits_out.size() &lt; 10) &amp;&amp; (sub_groups[i].<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size</a>() &gt; min_size))</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : sub_groups[i])</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        hits_out.push_back(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="ttc" id="rawdigitfilter__icarus_8fcl_html_aa2b9cfdf9a8f294302be0cdf6affea22"><div class="ttname"><a href="../../d6/d5e/rawdigitfilter__icarus_8fcl.html#aa2b9cfdf9a8f294302be0cdf6affea22">Plane</a></div><div class="ttdeci">BEGIN_PROLOG true icarus_rawdigitfilter FilterTools FilterPlane1 Plane</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5e/rawdigitfilter__icarus_8fcl_source.html#l00008">rawdigitfilter_icarus.fcl:8</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_aaae74cf315284bc0f44c2e050c119781"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">icarus::ns::util::size</a></div><div class="ttdeci">std::size_t size(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/FixedBins_8h_source.html#l00561">FixedBins.h:561</a></div></div>
<div class="ttc" id="namespacepma_html_ac06691f19da7b76a3a27c7287e3b2ff1"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#ac06691f19da7b76a3a27c7287e3b2ff1">pma::WireDriftToCm</a></div><div class="ttdeci">TVector2 WireDriftToCm(detinfo::DetectorPropertiesData const &amp;detProp, unsigned int wire, float drift, unsigned int plane, unsigned int tpc, unsigned int cryo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00294">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:294</a></div></div>
<div class="ttc" id="sbnd__flashalgo_8fcl_html_a648c7afac4085c93cd1ba4a75dfe8818"><div class="ttname"><a href="../../d4/d22/sbnd__flashalgo_8fcl.html#a648c7afac4085c93cd1ba4a75dfe8818">TPC</a></div><div class="ttdeci">BEGIN_PROLOG TPC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d22/sbnd__flashalgo_8fcl_source.html#l00014">sbnd_flashalgo.fcl:14</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_af84f1df680a549250cda2e4bdfd26e92"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af84f1df680a549250cda2e4bdfd26e92">pma::ProjectionMatchingAlg::GetCloseHits_</a></div><div class="ttdeci">bool GetCloseHits_(const detinfo::DetectorPropertiesData &amp;detProp, double r2d, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_in, std::vector&lt; size_t &gt; &amp;used, std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits_out) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00752">ProjectionMatchingAlg.cxx:752</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="namespacegeo_1_1fhicl_html_a48509e22b6681725c899fc354de43ae2"><div class="ttname"><a href="../../d2/d66/namespacegeo_1_1fhicl.html#a48509e22b6681725c899fc354de43ae2">geo::fhicl::WireID</a></div><div class="ttdeci">IDparameter&lt; geo::WireID &gt; WireID</div><div class="ttdoc">Member type of validated geo::WireID parameter. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddc/geo__types__fhicl_8h_source.html#l00407">geo_types_fhicl.h:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af84f1df680a549250cda2e4bdfd26e92"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::GetCloseHits_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r2d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>used</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00752">752</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  hits_out.clear();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> gapMargin = 5.0; <span class="comment">// can be changed to f(id_tpc1, id_tpc2)</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordtype">size_t</span> idx = 0;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">while</span> ((idx &lt; hits_in.size()) &amp;&amp; <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a596e7dfa7d28d37f25c8c5922405acb5">Has_</a>(used, idx))</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    idx++;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">if</span> (idx &lt; hits_in.size()) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    hits_out.push_back(hits_in[idx]);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    used.push_back(idx);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc = hits_in[idx]-&gt;WireID().TPC;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cryo = hits_in[idx]-&gt;WireID().Cryostat;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> view = hits_in[idx]-&gt;WireID().Plane;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordtype">double</span> wirePitch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(view).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordtype">double</span> driftPitch = detProp.<a class="code" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#adf888c29bd661e0b03973b96f03b9bd9">GetXTicksCoefficient</a>(tpc, cryo);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordtype">double</span> r2d2 = r2d * r2d;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordtype">double</span> gapMargin2 = sqrt(2 * gapMargin * gapMargin);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    gapMargin2 = (gapMargin2 + r2d) * (gapMargin2 + r2d);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">bool</span> collect = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">while</span> (collect) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      collect = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; hits_in.size(); i++)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a596e7dfa7d28d37f25c8c5922405acb5">Has_</a>(used, i)) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          art::Ptr&lt;recob::Hit&gt; <span class="keyword">const</span>&amp; hi = hits_in[i];</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;          TVector2 hi_cm(wirePitch * hi-&gt;WireID().Wire, driftPitch * hi-&gt;PeakTime());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <span class="keywordtype">bool</span> accept = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; ho : hits_out) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            TVector2 ho_cm(wirePitch * ho-&gt;WireID().Wire, driftPitch * ho-&gt;PeakTime());</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordtype">double</span> d2 = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(hi_cm, ho_cm);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="keywordflow">if</span> (d2 &lt; r2d2) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;              accept = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;          <span class="keywordflow">if</span> (accept) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            collect = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            hits_out.push_back(hi);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            used.push_back(i);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a596e7dfa7d28d37f25c8c5922405acb5"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a596e7dfa7d28d37f25c8c5922405acb5">pma::ProjectionMatchingAlg::Has_</a></div><div class="ttdeci">bool Has_(const std::vector&lt; size_t &gt; &amp;v, size_t idx) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00875">ProjectionMatchingAlg.cxx:875</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorPropertiesData_html_adf888c29bd661e0b03973b96f03b9bd9"><div class="ttname"><a href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#adf888c29bd661e0b03973b96f03b9bd9">detinfo::DetectorPropertiesData::GetXTicksCoefficient</a></div><div class="ttdeci">double GetXTicksCoefficient(int t, int c) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d64/DetectorPropertiesData_8cc_source.html#l00160">DetectorPropertiesData.cc:160</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a411eea9dd765636914a618ded267558c"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">geo::TPCGeo::Plane</a></div><div class="ttdeci">PlaneGeo const &amp; Plane(geo::View_t view) const </div><div class="ttdoc">Return the plane in the tpc with View_t view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d00/TPCGeo_8cxx_source.html#l00263">TPCGeo.cxx:263</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abbb4a8a4b112ec8e24cc970a40e8b592"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">geo::PlaneGeo::WirePitch</a></div><div class="ttdeci">double WirePitch() const </div><div class="ttdoc">Return the wire pitch (in centimeters). It is assumed constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00411">PlaneGeo.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4526427b451d4ee3f3a463ad5b306c3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t pma::ProjectionMatchingAlg::getSegCount_ </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>trk_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00443">443</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordtype">int</span> <span class="keyword">const</span> nSegments = 0.8 * trk_size / sqrt(trk_size);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> std::max(<span class="keywordtype">size_t</span>{1}, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(nSegments));</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b9f19ccced2db9cb9fd416ddc24dd24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::guideEndpoints </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add 3D reference points to clean endpoints of a track (both need to be in the same TPC). </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01095">1095</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;{</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">FrontTPC</a>(), cryo = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">FrontCryo</a>();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">if</span> ((tpc != trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">BackTPC</a>()) || (cryo != trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">BackCryo</a>())) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Please, apply before TPC stitching.&quot;</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> maxCosXZ = 0.992546; <span class="comment">// 7 deg</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* segFront = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().front();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">if</span> (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() &gt; 2) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* segFront1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()[1];</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> ((segFront-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &lt; 0.8) &amp;&amp; (segFront1-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &gt; 5.0)) segFront = segFront1;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dirFront = segFront-&gt;<a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html#add8d43ed0c5973acc1de8ca764bd3523">GetDirection3D</a>();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dirFrontXZ(dirFront.X(), 0., dirFront.Z());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  dirFrontXZ *= 1.0 / dirFrontXZ.R();</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* segBack = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().back();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">if</span> (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() &gt; 2) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* segBack1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()[trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() - 2];</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> ((segBack-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &lt; 0.8) &amp;&amp; (segBack1-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &gt; 5.0)) segBack = segBack1;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dirBack = segBack-&gt;<a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html#add8d43ed0c5973acc1de8ca764bd3523">GetDirection3D</a>();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dirBackXZ(dirBack.X(), 0., dirBack.Z());</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  dirBackXZ *= 1.0 / dirBackXZ.R();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> ((fabs(dirFrontXZ.Z()) &lt; maxCosXZ) &amp;&amp; (fabs(dirBackXZ.Z()) &lt; maxCosXZ)) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// front &amp; back are not parallel to wire planes =&gt; exit</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nPlanesFront = 0, nPlanesBack = 0;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  std::pair&lt;int, int&gt; wiresFront[3], wiresBack[3]; <span class="comment">// wire index; index direction</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordtype">double</span> xFront[3], xBack[3];</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordtype">bool</span> frontPresent = <span class="keyword">false</span>, backPresent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(i)) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordtype">int</span> idxFront0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(-1, i);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordtype">int</span> idxBack0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">PrevHit</a>(trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(), i);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">if</span> ((idxFront0 &gt;= 0) &amp;&amp; (idxFront0 &lt; (int)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) &amp;&amp; (idxBack0 &gt;= 0) &amp;&amp;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          (idxBack0 &lt; (int)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>())) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keywordtype">int</span> idxFront1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(idxFront0, i);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordtype">int</span> idxBack1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">PrevHit</a>(idxBack0, i);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> ((idxFront1 &gt;= 0) &amp;&amp; (idxFront1 &lt; (<span class="keywordtype">int</span>)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) &amp;&amp; (idxBack1 &gt;= 0) &amp;&amp;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            (idxBack1 &lt; (int)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>())) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;          <span class="keywordtype">int</span> wFront0 = trk[idxFront0]-&gt;Wire();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;          <span class="keywordtype">int</span> wBack0 = trk[idxBack0]-&gt;Wire();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;          <span class="keywordtype">int</span> wFront1 = trk[idxFront1]-&gt;Wire();</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;          <span class="keywordtype">int</span> wBack1 = trk[idxBack1]-&gt;Wire();</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;          wiresFront[i].first = wFront0;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;          wiresFront[i].second = wFront0 - wFront1;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;          xFront[i] = <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>.ConvertTicksToX(trk[idxFront0]-&gt;PeakTime(), i, tpc, cryo);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;          wiresBack[i].first = wBack0;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;          wiresBack[i].second = wBack0 - wBack1;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;          xBack[i] = <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>.ConvertTicksToX(trk[idxBack0]-&gt;PeakTime(), i, tpc, cryo);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;          <span class="keywordflow">if</span> (wiresFront[i].<a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">if</span> (wiresFront[i].second &gt; 0)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;              wiresFront[i].second = 1;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;              wiresFront[i].second = -1;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            frontPresent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            nPlanesFront++;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;          }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;          <span class="keywordflow">if</span> (wiresBack[i].second) {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <span class="keywordflow">if</span> (wiresBack[i].second &gt; 0)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;              wiresBack[i].second = 1;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;              wiresBack[i].second = -1;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            backPresent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            nPlanesBack++;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;          }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (!frontPresent) { wiresFront[i].first = -1; }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (!backPresent) { wiresBack[i].first = -1; }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordtype">bool</span> refAdded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">if</span> ((nPlanesFront &gt; 1) &amp;&amp; (fabs(dirFrontXZ.Z()) &gt;= maxCosXZ)) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    refAdded |= <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">addEndpointRef_</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, trk, hits, wiresFront, xFront, tpc, cryo);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">if</span> ((nPlanesBack &gt; 1) &amp;&amp; (fabs(dirBackXZ.Z()) &gt;= maxCosXZ)) {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    refAdded |= <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">addEndpointRef_</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, trk, hits, wiresBack, xBack, tpc, cryo);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordflow">if</span> (refAdded) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;guide wire-plane-parallel track endpoints&quot;</span>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, 0.1 * <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a35754c166243ce6904fe1a1b6b6ae931"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">geo::TPCGeo::HasPlane</a></div><div class="ttdeci">bool HasPlane(unsigned int iplane) const </div><div class="ttdoc">Returns whether a plane with index iplane is present in this TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/TPCGeo_8h_source.html#l00175">TPCGeo.h:175</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a24197f0ae4486ed088dfd1ca70e2fd47"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">pma::ProjectionMatchingAlg::addEndpointRef_</a></div><div class="ttdeci">bool addEndpointRef_(const detinfo::DetectorPropertiesData &amp;detProp, pma::Track3D &amp;trk, const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt;&gt; &amp;hits, std::pair&lt; int, int &gt; const *wires, double const *xPos, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01041">ProjectionMatchingAlg.cxx:1041</a></div></div>
<div class="ttc" id="detectorproperties__icarus_8fcl_html_acfd440223f806c44323dbd1053b99123"><div class="ttname"><a href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a></div><div class="ttdeci">second</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d33/detectorproperties__icarus_8fcl_source.html#l00008">detectorproperties_icarus.fcl:8</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a1a99bfa79d240ff8cfbc6e9fe74374b3"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">pma::Track3D::PrevHit</a></div><div class="ttdeci">int PrevHit(int index, unsigned int view=geo::kZ, bool inclDisabled=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00927">PmaTrack3D.cxx:927</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classpma_1_1Segment3D_html"><div class="ttname"><a href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d22/PmaSegment3D_8h_source.html#l00028">PmaSegment3D.h:28</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9af5c8a05003a1390194f247a4efb226"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">pma::Track3D::BackTPC</a></div><div class="ttdeci">unsigned int BackTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00156">PmaTrack3D.h:156</a></div></div>
<div class="ttc" id="namespacepma_html_a3770c6a1a7dc99a26ddab01e5cec6cf5"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a></div><div class="ttdeci">recob::tracking::Vector_t Vector3D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00031">larreco/larreco/RecoAlg/PMAlg/Utilities.h:31</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a7bcf1c83eb7d10b5988093e7fa43423d"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">pma::Track3D::BackCryo</a></div><div class="ttdeci">unsigned int BackCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00161">PmaTrack3D.h:161</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a45d0ae43b2aea694cc8f517bc1505e3c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">pma::Track3D::Segments</a></div><div class="ttdeci">std::vector&lt; pma::Segment3D * &gt; const &amp; Segments() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00326">PmaTrack3D.h:326</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9368281839780a0c0dc4745b5b63b45f"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">pma::Track3D::FrontTPC</a></div><div class="ttdeci">unsigned int FrontTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00145">PmaTrack3D.h:145</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aa1b77d37fafcf4db6849167eabb0d1c8"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">pma::Track3D::FrontCryo</a></div><div class="ttdeci">unsigned int FrontCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00150">PmaTrack3D.h:150</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a64946aa8973080f604abc9eb798e9761"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">pma::Track3D::NextHit</a></div><div class="ttdeci">int NextHit(int index, unsigned int view=geo::kZ, bool inclDisabled=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00909">PmaTrack3D.cxx:909</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_ab07ba8c1da53d63756a6105a828d24be"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">pma::Element3D::Length</a></div><div class="ttdeci">double Length(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00052">PmaElement3D.h:52</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
<div class="ttc" id="classpma_1_1Segment3D_html_add8d43ed0c5973acc1de8ca764bd3523"><div class="ttname"><a href="../../d6/dd5/classpma_1_1Segment3D.html#add8d43ed0c5973acc1de8ca764bd3523">pma::Segment3D::GetDirection3D</a></div><div class="ttdeci">pma::Vector3D GetDirection3D(void) const override</div><div class="ttdoc">Get 3D direction cosines of this segment. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d04/PmaSegment3D_8cxx_source.html#l00061">PmaSegment3D.cxx:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ab269f74e0aefd86776cc5fd8ed1be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::guideEndpoints </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>clockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891">pma::Track3D::ETrackEnd</a>&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add 3D reference points to clean endpoint of a track. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01202">1202</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> maxCosXZ = 0.992546; <span class="comment">// 7 deg</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc, cryo;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* seg0 = 0;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a>* seg1 = 0;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (endpoint == <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891a1cae3b3ee031fb0bc7e852b04fe6b9e1">pma::Track3D::kBegin</a>) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    tpc = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">FrontTPC</a>(), cryo = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">FrontCryo</a>();</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    seg0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().front();</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span> (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() &gt; 2) { seg1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()[1]; }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    tpc = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">BackTPC</a>(), cryo = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">BackCryo</a>();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    seg0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().back();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() &gt; 2) { seg1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()[trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>().size() - 2]; }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (seg1 &amp;&amp; (seg0-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &lt; 0.8) &amp;&amp; (seg1-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">Length</a>() &gt; 5.0)) { seg0 = seg1; }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dir0 = seg0-&gt;<a class="code" href="../../d6/dd5/classpma_1_1Segment3D.html#add8d43ed0c5973acc1de8ca764bd3523">GetDirection3D</a>();</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dir0XZ(dir0.X(), 0., dir0.Z());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  dir0XZ *= 1.0 / dir0XZ.R();</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keywordflow">if</span> (fabs(dir0XZ.Z()) &lt; maxCosXZ) { <span class="keywordflow">return</span>; } <span class="comment">// not parallel to wire planes =&gt; exit</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nPlanes = 0;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  std::pair&lt;int, int&gt; wires[3]; <span class="comment">// wire index; index direction</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordtype">double</span> x0[3];</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordtype">bool</span> present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(i)) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordtype">int</span> idx0 = -1, idx1 = -1;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordflow">if</span> (endpoint == <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891a1cae3b3ee031fb0bc7e852b04fe6b9e1">pma::Track3D::kBegin</a>) { idx0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(-1, i); }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        idx0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">PrevHit</a>(trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(), i);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">if</span> ((idx0 &gt;= 0) &amp;&amp; (idx0 &lt; (int)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) &amp;&amp; (trk[idx0]-&gt;<a class="code" href="../../d4/d22/sbnd__flashalgo_8fcl.html#a648c7afac4085c93cd1ba4a75dfe8818">TPC</a>() == tpc) &amp;&amp;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;          (trk[idx0]-&gt;Cryo() == cryo)) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">if</span> (endpoint == <a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891a1cae3b3ee031fb0bc7e852b04fe6b9e1">pma::Track3D::kBegin</a>) { idx1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(idx0, i); }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;          idx1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">PrevHit</a>(idx0, i);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">if</span> ((idx1 &gt;= 0) &amp;&amp; (idx1 &lt; (<span class="keywordtype">int</span>)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) &amp;&amp; (trk[idx1]-&gt;<a class="code" href="../../d4/d22/sbnd__flashalgo_8fcl.html#a648c7afac4085c93cd1ba4a75dfe8818">TPC</a>() == tpc) &amp;&amp;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            (trk[idx1]-&gt;Cryo() == cryo)) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;          <span class="keywordtype">int</span> w0 = trk[idx0]-&gt;Wire();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          <span class="keywordtype">int</span> w1 = trk[idx1]-&gt;Wire();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;          wires[i].first = w0;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;          wires[i].second = w0 - w1;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          x0[i] = <a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>.ConvertTicksToX(trk[idx0]-&gt;PeakTime(), i, tpc, cryo);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;          <span class="keywordflow">if</span> (wires[i].<a class="code" href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="keywordflow">if</span> (wires[i].second &gt; 0)</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;              wires[i].second = 1;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;              wires[i].second = -1;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            nPlanes++;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;          }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> (!present) { wires[i].first = -1; }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="keywordflow">if</span> ((nPlanes &gt; 1) &amp;&amp; (fabs(dir0XZ.Z()) &gt;= maxCosXZ) &amp;&amp;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">addEndpointRef_</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, trk, hits, wires, x0, tpc, cryo)) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;guide wire-plane-parallel track endpoint&quot;</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, 0, 0.1 * <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a35754c166243ce6904fe1a1b6b6ae931"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">geo::TPCGeo::HasPlane</a></div><div class="ttdeci">bool HasPlane(unsigned int iplane) const </div><div class="ttdoc">Returns whether a plane with index iplane is present in this TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/TPCGeo_8h_source.html#l00175">TPCGeo.h:175</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a24197f0ae4486ed088dfd1ca70e2fd47"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a24197f0ae4486ed088dfd1ca70e2fd47">pma::ProjectionMatchingAlg::addEndpointRef_</a></div><div class="ttdeci">bool addEndpointRef_(const detinfo::DetectorPropertiesData &amp;detProp, pma::Track3D &amp;trk, const std::map&lt; unsigned int, std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt;&gt; &amp;hits, std::pair&lt; int, int &gt; const *wires, double const *xPos, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01041">ProjectionMatchingAlg.cxx:1041</a></div></div>
<div class="ttc" id="detectorproperties__icarus_8fcl_html_acfd440223f806c44323dbd1053b99123"><div class="ttname"><a href="../../d1/d33/detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a></div><div class="ttdeci">second</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d33/detectorproperties__icarus_8fcl_source.html#l00008">detectorproperties_icarus.fcl:8</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ae22793674e59927b9261f53332014891a1cae3b3ee031fb0bc7e852b04fe6b9e1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ae22793674e59927b9261f53332014891a1cae3b3ee031fb0bc7e852b04fe6b9e1">pma::Track3D::kBegin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00039">PmaTrack3D.h:39</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a1a99bfa79d240ff8cfbc6e9fe74374b3"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a1a99bfa79d240ff8cfbc6e9fe74374b3">pma::Track3D::PrevHit</a></div><div class="ttdeci">int PrevHit(int index, unsigned int view=geo::kZ, bool inclDisabled=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00927">PmaTrack3D.cxx:927</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classpma_1_1Segment3D_html"><div class="ttname"><a href="../../d6/dd5/classpma_1_1Segment3D.html">pma::Segment3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d22/PmaSegment3D_8h_source.html#l00028">PmaSegment3D.h:28</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9af5c8a05003a1390194f247a4efb226"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">pma::Track3D::BackTPC</a></div><div class="ttdeci">unsigned int BackTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00156">PmaTrack3D.h:156</a></div></div>
<div class="ttc" id="namespacepma_html_a3770c6a1a7dc99a26ddab01e5cec6cf5"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a></div><div class="ttdeci">recob::tracking::Vector_t Vector3D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00031">larreco/larreco/RecoAlg/PMAlg/Utilities.h:31</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="sbnd__flashalgo_8fcl_html_a648c7afac4085c93cd1ba4a75dfe8818"><div class="ttname"><a href="../../d4/d22/sbnd__flashalgo_8fcl.html#a648c7afac4085c93cd1ba4a75dfe8818">TPC</a></div><div class="ttdeci">BEGIN_PROLOG TPC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d22/sbnd__flashalgo_8fcl_source.html#l00014">sbnd_flashalgo.fcl:14</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a7bcf1c83eb7d10b5988093e7fa43423d"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">pma::Track3D::BackCryo</a></div><div class="ttdeci">unsigned int BackCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00161">PmaTrack3D.h:161</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a45d0ae43b2aea694cc8f517bc1505e3c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">pma::Track3D::Segments</a></div><div class="ttdeci">std::vector&lt; pma::Segment3D * &gt; const &amp; Segments() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00326">PmaTrack3D.h:326</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9368281839780a0c0dc4745b5b63b45f"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">pma::Track3D::FrontTPC</a></div><div class="ttdeci">unsigned int FrontTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00145">PmaTrack3D.h:145</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aa1b77d37fafcf4db6849167eabb0d1c8"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">pma::Track3D::FrontCryo</a></div><div class="ttdeci">unsigned int FrontCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00150">PmaTrack3D.h:150</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a64946aa8973080f604abc9eb798e9761"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">pma::Track3D::NextHit</a></div><div class="ttdeci">int NextHit(int index, unsigned int view=geo::kZ, bool inclDisabled=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00909">PmaTrack3D.cxx:909</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_ab07ba8c1da53d63756a6105a828d24be"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#ab07ba8c1da53d63756a6105a828d24be">pma::Element3D::Length</a></div><div class="ttdeci">double Length(void) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00052">PmaElement3D.h:52</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
<div class="ttc" id="classpma_1_1Segment3D_html_add8d43ed0c5973acc1de8ca764bd3523"><div class="ttname"><a href="../../d6/dd5/classpma_1_1Segment3D.html#add8d43ed0c5973acc1de8ca764bd3523">pma::Segment3D::GetDirection3D</a></div><div class="ttdeci">pma::Vector3D GetDirection3D(void) const override</div><div class="ttdoc">Get 3D direction cosines of this segment. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d04/PmaSegment3D_8cxx_source.html#l00061">PmaSegment3D.cxx:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a596e7dfa7d28d37f25c8c5922405acb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::Has_ </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00875">875</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : v)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> (c == idx) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a974fe899543a129da538b8a5eeff8fbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::isContained </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>margin</em> = <code>0.0F</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test if hits at the track endpoinds do not stick out of TPC which they belong to. Here one can implement some configurable margin if needed for real data imeprfections. </p>

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00160">160</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a25dce9f99d51ebc1b8ef3add8ebbe301">FirstElement</a>()-&gt;<a class="code" href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">SameTPC</a>(trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), margin) &amp;&amp;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a2e0a6c61486690e8ba80181a2bcbcad1">LastElement</a>()-&gt;<a class="code" href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">SameTPC</a>(trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">back</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), margin));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a25dce9f99d51ebc1b8ef3add8ebbe301"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a25dce9f99d51ebc1b8ef3add8ebbe301">pma::Track3D::FirstElement</a></div><div class="ttdeci">pma::Node3D * FirstElement() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00340">PmaTrack3D.h:340</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a2e0a6c61486690e8ba80181a2bcbcad1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a2e0a6c61486690e8ba80181a2bcbcad1">pma::Track3D::LastElement</a></div><div class="ttdeci">pma::Node3D * LastElement() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00345">PmaTrack3D.h:345</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html_a2ec9b7dc0c2adbb1cc253c43483dde9c"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">pma::Node3D::SameTPC</a></div><div class="ttdeci">bool SameTPC(const TVector3 &amp;p3d, float margin=0.0F) const </div><div class="ttdoc">Check if p3d is in the same TPC as the node. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da8/PmaNode3D_8cxx_source.html#l00102">PmaNode3D.cxx:102</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a0d0283611181a9548143a645be3d53f1"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a0d0283611181a9548143a645be3d53f1">pma::Track3D::back</a></div><div class="ttdeci">pma::Hit3D const * back() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00103">PmaTrack3D.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba38c6c25868992c3c1592ab1315d234"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::mergeTracks </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reopt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add src to dst as it was its continuation; nodes of src are added to dst after its own nodes, hits of src are added to hits of dst, then dst is reoptimized. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01334">1334</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;{</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aebf436e3c33f6a353c30b12e42182747">alignTracks</a>(dst, src)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc = src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">FrontTPC</a>();</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cryo = src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">FrontCryo</a>();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordtype">double</span> lmean = dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">Length</a>() / (dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().size() - 1);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().back()-&gt;Point3D(), src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;Point3D()) &gt; 0.5 * lmean) ||</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      (tpc != dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">BackTPC</a>()) || (cryo != dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">BackCryo</a>())) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a48acf1401880b32e71d59b6cd674b83d">AddNode</a>(detProp, src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;Point3D(), tpc, cryo);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">if</span> (src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().front()-&gt;IsFrozen()) dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().back()-&gt;SetFrozen(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> = 1; <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> &lt; src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().size(); <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>++) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <a class="code" href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a>* node = src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>()[<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>];</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a48acf1401880b32e71d59b6cd674b83d">AddNode</a>(detProp, src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>()[<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>]-&gt;Point3D(), node-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">TPC</a>(), node-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a479cba70e2320a1afe991d3f2df3b2ab">Cryo</a>());</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a04a6da5b5d95942da64d6675674ac927">IsFrozen</a>()) dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">Nodes</a>().back()-&gt;SetFrozen(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> &lt; src.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(); <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>++) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a9e34c6cc001b39a9ad184972ce42d094">push_back</a>(detProp, src[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;Hit2DPtr());</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (reopt) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a> = dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(detProp, 0, <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">fFineTuningEps</a>);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  reopt after merging done, g = &quot;</span> &lt;&lt; <a class="code" href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a6aeea6b76f0be4ed9101fd90a91b264f">MakeProjection</a>();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a86f8c831349f06279e0711ed3c1b884a">ShiftEndsToHits</a>();</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a6aeea6b76f0be4ed9101fd90a91b264f">MakeProjection</a>();</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  dst.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html_a6aeea6b76f0be4ed9101fd90a91b264f"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a6aeea6b76f0be4ed9101fd90a91b264f">pma::Track3D::MakeProjection</a></div><div class="ttdeci">void MakeProjection()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02952">PmaTrack3D.cxx:2952</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a570b518d8e14a8cc0fdd4a8823553a0c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a570b518d8e14a8cc0fdd4a8823553a0c">pma::Track3D::Nodes</a></div><div class="ttdeci">std::vector&lt; pma::Node3D * &gt; const &amp; Nodes() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00335">PmaTrack3D.h:335</a></div></div>
<div class="ttc" id="decoderTools__icarus_8fcl_html_a86703f8a44dd6742852257943d5a25c6"><div class="ttname"><a href="../../d5/d79/decoderTools__icarus_8fcl.html#a86703f8a44dd6742852257943d5a25c6">g</a></div><div class="ttdeci">BEGIN_PROLOG g</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/decoderTools__icarus_8fcl_source.html#l00007">decoderTools_icarus.fcl:7</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9af5c8a05003a1390194f247a4efb226"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9af5c8a05003a1390194f247a4efb226">pma::Track3D::BackTPC</a></div><div class="ttdeci">unsigned int BackTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00156">PmaTrack3D.h:156</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_ac59594fedcfd32699ac1ddfa18522c57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#ac59594fedcfd32699ac1ddfa18522c57">pma::ProjectionMatchingAlg::fFineTuningEps</a></div><div class="ttdeci">double const fFineTuningEps</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">ProjectionMatchingAlg.h:317</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a0e4d7a26f6bac4987353833d21097993"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">pma::Element3D::TPC</a></div><div class="ttdeci">int TPC(void) const </div><div class="ttdoc">TPC index or -1 if out of any TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00034">PmaElement3D.h:34</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a7bcf1c83eb7d10b5988093e7fa43423d"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a7bcf1c83eb7d10b5988093e7fa43423d">pma::Track3D::BackCryo</a></div><div class="ttdeci">unsigned int BackCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00161">PmaTrack3D.h:161</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a48acf1401880b32e71d59b6cd674b83d"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a48acf1401880b32e71d59b6cd674b83d">pma::Track3D::AddNode</a></div><div class="ttdeci">void AddNode(pma::Node3D *node)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01264">PmaTrack3D.cxx:1264</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aebf436e3c33f6a353c30b12e42182747"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aebf436e3c33f6a353c30b12e42182747">pma::ProjectionMatchingAlg::alignTracks</a></div><div class="ttdeci">bool alignTracks(pma::Track3D &amp;first, pma::Track3D &amp;second) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01292">ProjectionMatchingAlg.cxx:1292</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9368281839780a0c0dc4745b5b63b45f"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9368281839780a0c0dc4745b5b63b45f">pma::Track3D::FrontTPC</a></div><div class="ttdeci">unsigned int FrontTPC() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00145">PmaTrack3D.h:145</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aa1b77d37fafcf4db6849167eabb0d1c8"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa1b77d37fafcf4db6849167eabb0d1c8">pma::Track3D::FrontCryo</a></div><div class="ttdeci">unsigned int FrontCryo() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00150">PmaTrack3D.h:150</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a9e34c6cc001b39a9ad184972ce42d094"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a9e34c6cc001b39a9ad184972ce42d094">pma::Track3D::push_back</a></div><div class="ttdeci">void push_back(pma::Hit3D *hit)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00087">PmaTrack3D.h:87</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a479cba70e2320a1afe991d3f2df3b2ab"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a479cba70e2320a1afe991d3f2df3b2ab">pma::Element3D::Cryo</a></div><div class="ttdeci">int Cryo(void) const </div><div class="ttdoc">Cryostat index or -1 if out of any cryostat. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00036">PmaElement3D.h:36</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a954863fd516227e21a88c0228a0227f4"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">pma::Track3D::Length</a></div><div class="ttdeci">double Length(size_t step=1) const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00117">PmaTrack3D.h:117</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a04a6da5b5d95942da64d6675674ac927"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a04a6da5b5d95942da64d6675674ac927">pma::Element3D::IsFrozen</a></div><div class="ttdeci">bool IsFrozen(void) const </div><div class="ttdoc">Check if the vertex 3D position is fixed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00099">PmaElement3D.h:99</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/PmaNode3D_8h_source.html#l00034">PmaNode3D.h:34</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a86f8c831349f06279e0711ed3c1b884a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a86f8c831349f06279e0711ed3c1b884a">pma::Track3D::ShiftEndsToHits</a></div><div class="ttdeci">bool ShiftEndsToHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02479">PmaTrack3D.cxx:2479</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_ab6cfbbcbb53c275375289d47dec67f46"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">channelDBConverter.n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00249">channelDBConverter.py:249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6d09029e53d7f8d3d41912c470c53adb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::RemoveNotEnabledHits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00885">885</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;{</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">while</span> (h &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>()) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (trk[h]-&gt;IsEnabled())</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      ++h;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a5c89f8f5decd2a9873956d225f9cee6f">release_at</a>(h));</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a5c89f8f5decd2a9873956d225f9cee6f"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a5c89f8f5decd2a9873956d225f9cee6f">pma::Track3D::release_at</a></div><div class="ttdeci">pma::Hit3D * release_at(size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00343">PmaTrack3D.cxx:343</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a88b5b6bed1c3e4c22f1490211ae74ec0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pma::ProjectionMatchingAlg::selectInitialHits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>view</em> = <code><a class="el" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>nused</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Intendet to calculate dQ/dx in the initial part of EM cascade; collection view is used by default, but it works also with other projections. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01376">1376</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;{</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(); i++) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a>* <a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a> = trk[i];</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span> (hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a17c7e679774a3b252e1fe31290d9f9ba">View2D</a>() == view) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">if</span> ((hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a7cf8ff8585ff0d5ec43eab8c43aaa77c">GetDistToProj</a>() &gt; 0.5) || <span class="comment">// more than 0.5cm away away from the segment</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          (hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a19e537f142e275b28c36e2ad811602bc">GetSegFraction</a>() &lt; -1.0)) <span class="comment">// projects before segment start (to check!!!)</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a96ede0e306ccf0e090ae2ff19ae22b68">TagOutlier</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a96ede0e306ccf0e090ae2ff19ae22b68">TagOutlier</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nhits = 0;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordtype">double</span> last_x, dx = 0.0, last_q, dq = 0.0, dqdx = 0.0;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordtype">int</span> ih = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(-1, view);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a>* hit = trk[ih];</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a>* lastHit = <a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> ((ih &gt;= 0) &amp;&amp; (ih &lt; (<span class="keywordtype">int</span>)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>())) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a96ede0e306ccf0e090ae2ff19ae22b68">TagOutlier</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    ih = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(ih, view);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">while</span> ((dx &lt; 2.5) &amp;&amp; (ih &gt;= 0) &amp;&amp; (ih &lt; (<span class="keywordtype">int</span>)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>())) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      hit = trk[ih];</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d72/namespaceutil.html#aaae39c2a7066e6a24ff172e5471939ae">util::absDiff</a>(hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#aa293ec05456935fc468dcc355d52102a">Wire</a>(), lastHit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#aa293ec05456935fc468dcc355d52102a">Wire</a>()) &gt; 2) <span class="keywordflow">break</span>; <span class="comment">// break on gap in wire direction</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      last_x = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a36905110212cd6c526ab8280afca9ae7">HitDxByView</a>(ih, view);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      last_q = hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a428de59f1b3bfc6ed4134a4f174859c0">SummedADC</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">if</span> (dx + last_x &lt; 3.0) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        dq += last_q;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        dx += last_x;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        nhits++;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      lastHit = <a class="code" href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      ih = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(ih, view);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">while</span> ((ih &gt;= 0) &amp;&amp; (ih &lt; (<span class="keywordtype">int</span>)trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>())) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      hit = trk[ih];</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      hit-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#a96ede0e306ccf0e090ae2ff19ae22b68">TagOutlier</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      ih = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">NextHit</a>(ih, view);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    mf::LogError(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Initial part selection failed.&quot;</span>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">if</span> (!nhits) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    mf::LogError(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Initial part too short to select useful hits.&quot;</span>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">if</span> (dx &gt; 0.0) dqdx = dq / dx;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordflow">if</span> (nused) (*nused) = nhits;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordflow">return</span> dqdx;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Hit3D_html_a19e537f142e275b28c36e2ad811602bc"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#a19e537f142e275b28c36e2ad811602bc">pma::Hit3D::GetSegFraction</a></div><div class="ttdeci">float GetSegFraction() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00143">PmaHit3D.h:143</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_a96ede0e306ccf0e090ae2ff19ae22b68"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#a96ede0e306ccf0e090ae2ff19ae22b68">pma::Hit3D::TagOutlier</a></div><div class="ttdeci">void TagOutlier(bool state) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00177">PmaHit3D.h:177</a></div></div>
<div class="ttc" id="cheaterreco_8fcl_html_abf2e819dbf4c327e098bebd4b2dc0597"><div class="ttname"><a href="../../d2/d36/cheaterreco_8fcl.html#abf2e819dbf4c327e098bebd4b2dc0597">hit</a></div><div class="ttdeci">process_name hit</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/cheaterreco_8fcl_source.html#l00051">cheaterreco.fcl:51</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_a17c7e679774a3b252e1fe31290d9f9ba"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#a17c7e679774a3b252e1fe31290d9f9ba">pma::Hit3D::View2D</a></div><div class="ttdeci">unsigned int View2D() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00093">PmaHit3D.h:93</a></div></div>
<div class="ttc" id="namespaceutil_html_aaae39c2a7066e6a24ff172e5471939ae"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#aaae39c2a7066e6a24ff172e5471939ae">util::absDiff</a></div><div class="ttdeci">constexpr auto absDiff(A const &amp;a, B const &amp;b)</div><div class="ttdoc">Returns the absolute value of the difference between two values. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d16/NumericUtils_8h_source.html#l00043">NumericUtils.h:43</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_a7cf8ff8585ff0d5ec43eab8c43aaa77c"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#a7cf8ff8585ff0d5ec43eab8c43aaa77c">pma::Hit3D::GetDistToProj</a></div><div class="ttdeci">double GetDistToProj() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00136">PmaHit3D.h:136</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a64946aa8973080f604abc9eb798e9761"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a64946aa8973080f604abc9eb798e9761">pma::Track3D::NextHit</a></div><div class="ttdeci">int NextHit(int index, unsigned int view=geo::kZ, bool inclDisabled=false) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00909">PmaTrack3D.cxx:909</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a36905110212cd6c526ab8280afca9ae7"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a36905110212cd6c526ab8280afca9ae7">pma::Track3D::HitDxByView</a></div><div class="ttdeci">double HitDxByView(size_t index, unsigned int view) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01011">PmaTrack3D.cxx:1011</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_aa293ec05456935fc468dcc355d52102a"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#aa293ec05456935fc468dcc355d52102a">pma::Hit3D::Wire</a></div><div class="ttdeci">unsigned int Wire() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00098">PmaHit3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00031">PmaHit3D.h:31</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_a428de59f1b3bfc6ed4134a4f174859c0"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#a428de59f1b3bfc6ed4134a4f174859c0">pma::Hit3D::SummedADC</a></div><div class="ttdeci">float SummedADC() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00109">PmaHit3D.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a00e3e72f253bd01119d538ffb77dd8e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void pma::ProjectionMatchingAlg::ShortenSeg_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a> &amp;&#160;</td>
          <td class="paramname"><em>tpcgeom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00816">816</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordtype">double</span> mse = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad29667659ab4c835d8b77ed476d4a282">GetMse</a>();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;initial value of mse: &quot;</span> &lt;&lt; mse;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">while</span> ((mse &gt; 0.5) &amp;&amp; <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4d7b9c31c248a18612f31138df645b57">TestTrk_</a>(trk, tpcgeom)) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    mse = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad29667659ab4c835d8b77ed476d4a282">GetMse</a>();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span> (std::sqrt(<a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;<a class="code" href="../../d1/d4e/namespacelar_1_1fhicl_1_1geo.html#aff5db21a0b87718dbf7debb3cd62dbd0">Point3D</a>(), trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>())) &gt; 0.8 * trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">Length</a>())</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        trk[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;SetEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a6d09029e53d7f8d3d41912c470c53adb">RemoveNotEnabledHits</a>(trk);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// trk.Optimize(0.0001, false); // BUG: first argument missing; tentatively:</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">Optimize</a>(detProp, 0, 0.0001, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">SortHits</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; mse: &quot;</span> &lt;&lt; mse;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (mse == trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad29667659ab4c835d8b77ed476d4a282">GetMse</a>()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    mse = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ad29667659ab4c835d8b77ed476d4a282">GetMse</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a6d09029e53d7f8d3d41912c470c53adb">RemoveNotEnabledHits</a>(trk);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html_ad29667659ab4c835d8b77ed476d4a282"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ad29667659ab4c835d8b77ed476d4a282">pma::Track3D::GetMse</a></div><div class="ttdeci">double GetMse(unsigned int view=geo::kUnknown) const </div><div class="ttdoc">MSE of hits weighted with hit amplidudes and wire plane coefficients. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01837">PmaTrack3D.cxx:1837</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="namespacelar_1_1fhicl_1_1geo_html_aff5db21a0b87718dbf7debb3cd62dbd0"><div class="ttname"><a href="../../d1/d4e/namespacelar_1_1fhicl_1_1geo.html#aff5db21a0b87718dbf7debb3cd62dbd0">lar::fhicl::geo::Point3D</a></div><div class="ttdeci">::fhicl::TupleAs&lt; Point(::geo::Length_t,::geo::Length_t,::geo::Length_t)&gt; Point3D</div><div class="ttdoc">Atom object for reading a 3D point or vector (centimeters). </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0b/geo__vectors__fhicl_8h_source.html#l00038">geo_vectors_fhicl.h:38</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac9d585195653d02380cd7cf59c77904a"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac9d585195653d02380cd7cf59c77904a">pma::Track3D::Optimize</a></div><div class="ttdeci">double Optimize(const detinfo::DetectorPropertiesData &amp;detProp, int nNodes=-1, double eps=0.01, bool selAllHits=true, bool setAllNodes=true, size_t selSegHits=0, size_t selVtxHits=0)</div><div class="ttdoc">Main optimization method. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l01868">PmaTrack3D.cxx:1868</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a249124592b3305e473fc3428ebf4803e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a249124592b3305e473fc3428ebf4803e">pma::Track3D::SortHits</a></div><div class="ttdeci">void SortHits()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02711">PmaTrack3D.cxx:2711</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a954863fd516227e21a88c0228a0227f4"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">pma::Track3D::Length</a></div><div class="ttdeci">double Length(size_t step=1) const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00117">PmaTrack3D.h:117</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a6d09029e53d7f8d3d41912c470c53adb"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a6d09029e53d7f8d3d41912c470c53adb">pma::ProjectionMatchingAlg::RemoveNotEnabledHits</a></div><div class="ttdeci">void RemoveNotEnabledHits(pma::Track3D &amp;trk) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00885">ProjectionMatchingAlg.cxx:885</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_a4d7b9c31c248a18612f31138df645b57"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#a4d7b9c31c248a18612f31138df645b57">pma::ProjectionMatchingAlg::TestTrk_</a></div><div class="ttdeci">bool TestTrk_(pma::Track3D &amp;trk, const geo::TPCGeo &amp;tpcgeom) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00846">ProjectionMatchingAlg.cxx:846</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf4a034871638a26095c6632b6c45c57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int pma::ProjectionMatchingAlg::testHits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> const &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>eps</em> = <code>1.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count the number of hits that are closer than eps * fHitTestingDist2D to the track 2D projection. </p>

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00149">149</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aa647dbb3591dbb9d3b4f015f25bf7760">TestHits</a>(<a class="code" href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detProp</a>, hits, eps * <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa0579ff709ef808497ec91163e1718a8">fHitTestingDist2D</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div>
<div class="ttc" id="classpma_1_1Track3D_html_aa647dbb3591dbb9d3b4f015f25bf7760"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aa647dbb3591dbb9d3b4f015f25bf7760">pma::Track3D::TestHits</a></div><div class="ttdeci">unsigned int TestHits(detinfo::DetectorPropertiesData const &amp;detProp, const std::vector&lt; art::Ptr&lt; recob::Hit &gt;&gt; &amp;hits, double dist=0.4) const </div><div class="ttdoc">Count close 2D hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00858">PmaTrack3D.cxx:858</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa0579ff709ef808497ec91163e1718a8"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa0579ff709ef808497ec91163e1718a8">pma::ProjectionMatchingAlg::fHitTestingDist2D</a></div><div class="ttdeci">double const fHitTestingDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00322">ProjectionMatchingAlg.h:322</a></div></div>
<div class="ttc" id="namespacedetsim_html_a560adbb3abf95a23d45a53ed25d8c0c7"><div class="ttname"><a href="../../d2/d1a/namespacedetsim.html#a560adbb3abf95a23d45a53ed25d8c0c7">detsim::detProp</a></div><div class="ttdeci">auto const detProp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/SimWire__module_8cc_source.html#l00154">SimWire_module.cc:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d7b9c31c248a18612f31138df645b57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pma::ProjectionMatchingAlg::TestTrk_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/dff/classgeo_1_1TPCGeo.html">geo::TPCGeo</a> &amp;&#160;</td>
          <td class="paramname"><em>tpcgeom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00846">846</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d9/d41/assnschainutils__test_8fcl.html#acd68d7a64c1ae7d4e9979d5efc1c200f">test</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(0) &amp;&amp; tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(1)) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> ((trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(0) &gt; 5) &amp;&amp; (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(1) &gt; 5)) test = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(0) &amp;&amp; tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(2)) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> ((trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(0) &gt; 5) &amp;&amp; (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(2) &gt; 5)) test = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(1) &amp;&amp; tpcgeom.<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">HasPlane</a>(2)) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> ((trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(1) &gt; 5) &amp;&amp; (trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">NEnabledHits</a>(2) &gt; 5)) test = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordtype">double</span> length = 0.0;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = 0; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>(); ++<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span> (!trk[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;IsEnabled()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    length = std::sqrt(<a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>(), trk[<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>]-&gt;Point3D()));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  mf::LogWarning(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;length of segment: &quot;</span> &lt;&lt; length;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (length &lt; 3.0) test = <span class="keyword">false</span>; <span class="comment">// cm</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d9/d41/assnschainutils__test_8fcl.html#acd68d7a64c1ae7d4e9979d5efc1c200f">test</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a35754c166243ce6904fe1a1b6b6ae931"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a35754c166243ce6904fe1a1b6b6ae931">geo::TPCGeo::HasPlane</a></div><div class="ttdeci">bool HasPlane(unsigned int iplane) const </div><div class="ttdoc">Returns whether a plane with index iplane is present in this TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/de9/TPCGeo_8h_source.html#l00175">TPCGeo.h:175</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a60281b4c714aa99c93773f3608cadc13"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a60281b4c714aa99c93773f3608cadc13">pma::Track3D::NEnabledHits</a></div><div class="ttdeci">unsigned int NEnabledHits(unsigned int view=geo::kUnknown) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00432">PmaTrack3D.cxx:432</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="assnschainutils__test_8fcl_html_acd68d7a64c1ae7d4e9979d5efc1c200f"><div class="ttname"><a href="../../d9/d41/assnschainutils__test_8fcl.html#acd68d7a64c1ae7d4e9979d5efc1c200f">test</a></div><div class="ttdeci">BEGIN_PROLOG hitmakerfive clustermakerfour pfparticlemakerthree showermakertwo END_PROLOG hitmakerfive clustermakerfour pfparticlemakerthree sequence::inline_paths sequence::inline_paths sequence::inline_paths showermakers test</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d41/assnschainutils__test_8fcl_source.html#l00019">assnschainutils_test.fcl:19</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd3ecedc917738f716c035a93a4b9f0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d5/d5f/classpma_1_1Hit3D.html">pma::Hit3D</a> * &gt; pma::ProjectionMatchingAlg::trimTrackToVolume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TVector3&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TVector3&#160;</td>
          <td class="paramname"><em>p1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l01285">1285</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;{</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa066184b75ec3103aa7e2e7dbdb7661b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pma::ProjectionMatchingAlg::twoViewFraction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the fraction of trajectory seen by two 2D projections at least; even a prfect track starts/stops with the hit from one 2D view, then hits from other views come, which results with the fraction value high, but always &lt; 1.0; wrong cluster matchings or incomplete tracks give significantly lower values. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00421">421</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a6043faf9597d37bddad7860cef8a1219">SelectHits</a>();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a654c963a50f1bb2bb467369a11430edf">DisableSingleViewEnds</a>();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordtype">size_t</span> idx = 0;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">while</span> ((idx &lt; trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() - 1) &amp;&amp; !trk[idx]-&gt;IsEnabled())</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    idx++;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">double</span> l0 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">Length</a>(0, idx + 1);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  idx = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() - 1;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">while</span> ((idx &gt; 1) &amp;&amp; !trk[idx]-&gt;IsEnabled())</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    idx--;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordtype">double</span> l1 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">Length</a>(idx - 1, trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">size</a>() - 1);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a6043faf9597d37bddad7860cef8a1219">SelectHits</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">return</span> 1.0 - (l0 + l1) / trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">Length</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="ttc" id="classpma_1_1Track3D_html_a6043faf9597d37bddad7860cef8a1219"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a6043faf9597d37bddad7860cef8a1219">pma::Track3D::SelectHits</a></div><div class="ttdeci">bool SelectHits(float fraction=1.0F)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02888">PmaTrack3D.cxx:2888</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a654c963a50f1bb2bb467369a11430edf"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a654c963a50f1bb2bb467369a11430edf">pma::Track3D::DisableSingleViewEnds</a></div><div class="ttdeci">unsigned int DisableSingleViewEnds()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02749">PmaTrack3D.cxx:2749</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a954863fd516227e21a88c0228a0227f4"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a954863fd516227e21a88c0228a0227f4">pma::Track3D::Length</a></div><div class="ttdeci">double Length(size_t step=1) const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00117">PmaTrack3D.h:117</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a61676c8fb2963a14f6497d47b490296e"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a61676c8fb2963a14f6497d47b490296e">pma::Track3D::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00108">PmaTrack3D.h:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3da44b59aa1898c0f9305792f80927b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pma::ProjectionMatchingAlg::validate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;&#160;</td>
          <td class="paramname"><em>channelStatus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the fraction of the track that is closer than fTrkValidationDist2D to any hit from hits in their plane (a plane that was not used to build the track). Hits should be preselected, so all belong to the same plane. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00254">254</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (hits.empty()) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">double</span> max_d = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">fTrkValidationDist2D</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordtype">double</span> d2, max_d2 = max_d * max_d;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nAll = 0, nPassed = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> testPlane = hits.front()-&gt;WireID().Plane;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  std::vector&lt;unsigned int&gt; trkTPCs = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">TPCs</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  std::vector&lt;unsigned int&gt; trkCryos = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a4fa852d2bb7eb83f6d96c0f00da3d518">Cryos</a>();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, std::pair&lt;TVector2, TVector2&gt;&gt; ranges;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, <span class="keywordtype">double</span>&gt; wirePitch;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [t, c] : views::cartesian_product(trkTPCs, trkCryos)) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    ranges[{t, c}] = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac011feb5eade195cdb3d4bf4f0458d63">WireDriftRange</a>(detProp, testPlane, t, c);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    wirePitch[{t, c}] = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(t, c).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(testPlane).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc, cryo;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, std::vector&lt;pma::Vector2D&gt;&gt; all_close_points;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> :</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;       hits | <a class="code" href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">views::transform</a>(<a class="code" href="../../d7/d0b/namespacelar.html#ac7ad65c5dbecd0f69500e739fe324e82">to_element</a>) | <a class="code" href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl.html#ad9fbd36ae83bd91dd0be317f6be97a63">views::filter</a>(hits_on_plane{testPlane})) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    tpc = <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().TPC;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    cryo = <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Cryostat;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    std::pair&lt;unsigned int, unsigned int&gt; tpc_cryo(tpc, cryo);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    std::pair&lt;TVector2, TVector2&gt; rect = ranges[tpc_cryo];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire &gt; rect.first.X() - 10) &amp;&amp;  <span class="comment">// chceck only hits in the rectangle around</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire &lt; rect.second.X() + 10) &amp;&amp; <span class="comment">// the track projection, it is faster than</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime() &gt; rect.first.Y() - 100) &amp;&amp;    <span class="comment">// calculation of trk.Dist2(p2d, testPlane)</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime() &lt; rect.second.Y() + 100)) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      TVector2 p2d(wirePitch[tpc_cryo] * <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                   detProp.<a class="code" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">ConvertTicksToX</a>(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime(), testPlane, tpc, cryo));</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      d2 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a506e25c139891a49e29d88bab67f60c3">Dist2</a>(p2d, testPlane, tpc, cryo);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">if</span> (d2 &lt; max_d2) all_close_points[tpc_cryo].emplace_back(p2d.X(), p2d.Y());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// then check how points-close-to-the-track-projection are distributed along</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// the track, namely: are there track sections crossing empty spaces, except</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// dead wires?</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>(</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().X(), trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().Y(), trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().Z());</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>* seg : trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> (seg-&gt;TPC() &lt; 0) <span class="comment">// skip segments between tpc&#39;s, look only at those contained in tpc</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> = seg-&gt;End();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> p0 = seg-&gt;Start();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> <a class="code" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a> = seg-&gt;End();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a>* node = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a>*<span class="keyword">&gt;</span>(seg-&gt;Prev());</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    tpc = seg-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">TPC</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    cryo = seg-&gt;Cryo();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dc = step * seg-&gt;GetDirection3D();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; points = all_close_points[{tpc, cryo}];</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordtype">double</span> f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, p1);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">double</span> wirepitch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(testPlane).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">while</span> ((f &lt; 1.0) &amp;&amp; node-&gt;<a class="code" href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">SameTPC</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>)) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="../../d8/d4a/namespacepma.html#ab3d3617bbfc5e86b34a06f9f6092bc5f">pma::Vector2D</a> p2d(<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">WireCoordinate</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Y(), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Z(), testPlane, tpc, cryo), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.X());</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> wireID(cryo, tpc, testPlane, (<span class="keywordtype">int</span>)p2d.X());</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">HasWire</a>(wireID)) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a> ch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">PlaneWireToChannel</a>(wireID);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (channelStatus.<a class="code" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">IsGood</a>(ch)) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          <span class="keywordflow">if</span> (points.size()) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            p2d.SetX(wirepitch * p2d.X());</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : points) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;              d2 = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(p2d, <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;              <span class="keywordflow">if</span> (d2 &lt; max_d2) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                nPassed++;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;              }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          nAll++;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">//else mf::LogVerbatim(&quot;ProjectionMatchingAlg&quot;)</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">//      &lt;&lt; &quot;crossing BAD CHANNEL (wire #&quot; &lt;&lt; (int)p2d.X() &lt;&lt; &quot;)&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> += dc;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, p1);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> = seg-&gt;End();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (nAll &gt; 0) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordtype">double</span> v = nPassed / (double)nAll;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  trk fraction ok: &quot;</span> &lt;&lt; v;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_ae81e63f01473939eb6bc9c2cb5455906"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">geo::GeometryCore::WireCoordinate</a></div><div class="ttdeci">geo::Length_t WireCoordinate(double YPos, double ZPos, geo::PlaneID const &amp;planeid) const </div><div class="ttdoc">Returns the index of the nearest wire to the specified position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01128">GeometryCore.cxx:1128</a></div></div>
<div class="ttc" id="namespacelar_html_ac7ad65c5dbecd0f69500e739fe324e82"><div class="ttname"><a href="../../d7/d0b/namespacelar.html#ac7ad65c5dbecd0f69500e739fe324e82">lar::to_element</a></div><div class="ttdeci">constexpr to_element_t to_element</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbc/ToElement_8h_source.html#l00024">ToElement.h:24</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a506e25c139891a49e29d88bab67f60c3"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a506e25c139891a49e29d88bab67f60c3">pma::Track3D::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;p2d, unsigned int view, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02575">PmaTrack3D.cxx:2575</a></div></div>
<div class="ttc" id="namespaceicarus_1_1waveform__operations_1_1details_html_ae295d3f6cb2f9181dccdf0e3492d44e0"><div class="ttname"><a href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">icarus::waveform_operations::details::transform</a></div><div class="ttdeci">static constexpr Sample_t transform(Sample_t sample)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/WaveformOperations_8h_source.html#l00145">WaveformOperations.h:145</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a654256f331ce57a9579086acae964efd"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">pma::Track3D::TPCs</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; TPCs() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00452">PmaTrack3D.cxx:452</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00560">geo_types.h:560</a></div></div>
<div class="ttc" id="namespacepma_html_a3770c6a1a7dc99a26ddab01e5cec6cf5"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a></div><div class="ttdeci">recob::tracking::Vector_t Vector3D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00031">larreco/larreco/RecoAlg/PMAlg/Utilities.h:31</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a0e4d7a26f6bac4987353833d21097993"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">pma::Element3D::TPC</a></div><div class="ttdeci">int TPC(void) const </div><div class="ttdoc">TPC index or -1 if out of any TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00034">PmaElement3D.h:34</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a4fa852d2bb7eb83f6d96c0f00da3d518"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a4fa852d2bb7eb83f6d96c0f00da3d518">pma::Track3D::Cryos</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; Cryos() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00471">PmaTrack3D.cxx:471</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a45d0ae43b2aea694cc8f517bc1505e3c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">pma::Track3D::Segments</a></div><div class="ttdeci">std::vector&lt; pma::Segment3D * &gt; const &amp; Segments() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00326">PmaTrack3D.h:326</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_af110a4c6e8e887b1807d52868102c9e4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">pma::ProjectionMatchingAlg::fTrkValidationDist2D</a></div><div class="ttdeci">double const fTrkValidationDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00320">ProjectionMatchingAlg.h:320</a></div></div>
<div class="ttc" id="classlariov_1_1ChannelStatusProvider_html_a17471560041631ee3f09c578987141f5"><div class="ttname"><a href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">lariov::ChannelStatusProvider::IsGood</a></div><div class="ttdeci">virtual bool IsGood(raw::ChannelID_t channel) const </div><div class="ttdoc">Returns whether the specified channel is physical and good. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ded/ChannelStatusProvider_8h_source.html#l00084">ChannelStatusProvider.h:84</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html_a2ec9b7dc0c2adbb1cc253c43483dde9c"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">pma::Node3D::SameTPC</a></div><div class="ttdeci">bool SameTPC(const TVector3 &amp;p3d, float margin=0.0F) const </div><div class="ttdoc">Check if p3d is in the same TPC as the node. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da8/PmaNode3D_8cxx_source.html#l00102">PmaNode3D.cxx:102</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorPropertiesData_html_a8e4b4b8d755ffded5a9f956ae7c9c1ec"><div class="ttname"><a href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">detinfo::DetectorPropertiesData::ConvertTicksToX</a></div><div class="ttdeci">double ConvertTicksToX(double ticks, int p, int t, int c) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d64/DetectorPropertiesData_8cc_source.html#l00115">DetectorPropertiesData.cc:115</a></div></div>
<div class="ttc" id="g4__3drift__faketrigger__filter_8fcl_html_ad9fbd36ae83bd91dd0be317f6be97a63"><div class="ttname"><a href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl.html#ad9fbd36ae83bd91dd0be317f6be97a63">filter</a></div><div class="ttdeci">physics filters filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl_source.html#l00008">g4_3drift_faketrigger_filter.fcl:8</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6c38d4f2515d255850c228d937455b7b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">geo::GeometryCore::PlaneWireToChannel</a></div><div class="ttdeci">raw::ChannelID_t PlaneWireToChannel(WireID const &amp;wireid) const </div><div class="ttdoc">Returns the ID of the TPC channel connected to the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01226">GeometryCore.cxx:1226</a></div></div>
<div class="ttc" id="namespacepma_html_a19a7f50fd90218ddda527d6cb8579c67"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a></div><div class="ttdeci">double GetSegmentProjVector(const TVector2 &amp;p, const TVector2 &amp;p0, const TVector2 &amp;p1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00117">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:117</a></div></div>
<div class="ttc" id="namespacepma_html_ab3d3617bbfc5e86b34a06f9f6092bc5f"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#ab3d3617bbfc5e86b34a06f9f6092bc5f">pma::Vector2D</a></div><div class="ttdeci">ROOT::Math::DisplacementVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt; &gt; Vector2D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00030">larreco/larreco/RecoAlg/PMAlg/Utilities.h:30</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a411eea9dd765636914a618ded267558c"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">geo::TPCGeo::Plane</a></div><div class="ttdeci">PlaneGeo const &amp; Plane(geo::View_t view) const </div><div class="ttdoc">Return the plane in the tpc with View_t view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d00/TPCGeo_8cxx_source.html#l00263">TPCGeo.cxx:263</a></div></div>
<div class="ttc" id="namespaceraw_html_abfe7badfcad7fe0e9474829fbd1408b2"><div class="ttname"><a href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a></div><div class="ttdeci">unsigned int ChannelID_t</div><div class="ttdoc">Type representing the ID of a readout channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d38/RawTypes_8h_source.html#l00028">RawTypes.h:28</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/PmaNode3D_8h_source.html#l00034">PmaNode3D.h:34</a></div></div>
<div class="ttc" id="test__associatedgroupswithleft__full_8fcl_html_a4814f2598ed6acdb806473d732f33889"><div class="ttname"><a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a></div><div class="ttdeci">physics associatedGroupsWithLeft p1</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl_source.html#l00024">test_associatedgroupswithleft_full.fcl:24</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abbb4a8a4b112ec8e24cc970a40e8b592"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">geo::PlaneGeo::WirePitch</a></div><div class="ttdeci">double WirePitch() const </div><div class="ttdoc">Return the wire pitch (in centimeters). It is assumed constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00411">PlaneGeo.h:411</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac011feb5eade195cdb3d4bf4f0458d63"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac011feb5eade195cdb3d4bf4f0458d63">pma::Track3D::WireDriftRange</a></div><div class="ttdeci">std::pair&lt; TVector2, TVector2 &gt; WireDriftRange(detinfo::DetectorPropertiesData const &amp;detProp, unsigned int view, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00490">PmaTrack3D.cxx:490</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a45df0d5e161fa45e89854381f55aceb0"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">geo::GeometryCore::HasWire</a></div><div class="ttdeci">bool HasWire(geo::WireID const &amp;wireid) const </div><div class="ttdoc">Returns whether we have the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l03383">GeometryCore.h:3383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5fc71d55614091fa024f64c500400c64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pma::ProjectionMatchingAlg::validate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;&#160;</td>
          <td class="paramname"><em>channelStatus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TVector3 &amp;&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TVector3 &amp;&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>testView</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>tpc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cryo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the fraction of the 3D segment that is closer than fTrkValidationDist2D to any hit from hits in the testPlane of TPC/Cryo. Hits from the testPlane are preselected by this function among all provided (so a bit slower than fn above). </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00363">363</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordtype">double</span> max_d = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">fTrkValidationDist2D</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordtype">double</span> d2, max_d2 = max_d * max_d;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nAll = 0, nPassed = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  TVector3 <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>(p0);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  TVector3 dc(<a class="code" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  dc -= <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  dc *= step / dc.Mag();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordtype">double</span> f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, <a class="code" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordtype">double</span> wirepitch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(testPlane).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">while</span> (f &lt; 1.0) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    TVector2 p2d(<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">WireCoordinate</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Y(), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Z(), testPlane, tpc, cryo), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.X());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> wireID(cryo, tpc, testPlane, (<span class="keywordtype">int</span>)p2d.X());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">HasWire</a>(wireID)) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a> ch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">PlaneWireToChannel</a>(wireID);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (channelStatus.<a class="code" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">IsGood</a>(ch)) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        p2d.Set(wirepitch * p2d.X(), p2d.Y());</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : hits)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Plane == testPlane) &amp;&amp; (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().TPC == tpc) &amp;&amp;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;              (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Cryostat == cryo)) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            d2 = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;              p2d,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;              <a class="code" href="../../d8/d4a/namespacepma.html#ac06691f19da7b76a3a27c7287e3b2ff1">pma::WireDriftToCm</a>(detProp, <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;WireID().Wire, <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;PeakTime(), testPlane, tpc, cryo));</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> (d2 &lt; max_d2) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;              nPassed++;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        nAll++;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> += dc;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, <a class="code" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (nAll &gt; 3) <span class="comment">// validate actually only if 2D projection in testPlane has some minimum length</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">double</span> v = nPassed / (double)nAll;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  segment fraction ok: &quot;</span> &lt;&lt; v;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_ae81e63f01473939eb6bc9c2cb5455906"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">geo::GeometryCore::WireCoordinate</a></div><div class="ttdeci">geo::Length_t WireCoordinate(double YPos, double ZPos, geo::PlaneID const &amp;planeid) const </div><div class="ttdoc">Returns the index of the nearest wire to the specified position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01128">GeometryCore.cxx:1128</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="namespacepma_html_ac06691f19da7b76a3a27c7287e3b2ff1"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#ac06691f19da7b76a3a27c7287e3b2ff1">pma::WireDriftToCm</a></div><div class="ttdeci">TVector2 WireDriftToCm(detinfo::DetectorPropertiesData const &amp;detProp, unsigned int wire, float drift, unsigned int plane, unsigned int tpc, unsigned int cryo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00294">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:294</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00560">geo_types.h:560</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_af110a4c6e8e887b1807d52868102c9e4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">pma::ProjectionMatchingAlg::fTrkValidationDist2D</a></div><div class="ttdeci">double const fTrkValidationDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00320">ProjectionMatchingAlg.h:320</a></div></div>
<div class="ttc" id="classlariov_1_1ChannelStatusProvider_html_a17471560041631ee3f09c578987141f5"><div class="ttname"><a href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">lariov::ChannelStatusProvider::IsGood</a></div><div class="ttdeci">virtual bool IsGood(raw::ChannelID_t channel) const </div><div class="ttdoc">Returns whether the specified channel is physical and good. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ded/ChannelStatusProvider_8h_source.html#l00084">ChannelStatusProvider.h:84</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6c38d4f2515d255850c228d937455b7b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">geo::GeometryCore::PlaneWireToChannel</a></div><div class="ttdeci">raw::ChannelID_t PlaneWireToChannel(WireID const &amp;wireid) const </div><div class="ttdoc">Returns the ID of the TPC channel connected to the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01226">GeometryCore.cxx:1226</a></div></div>
<div class="ttc" id="namespacepma_html_a19a7f50fd90218ddda527d6cb8579c67"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a></div><div class="ttdeci">double GetSegmentProjVector(const TVector2 &amp;p, const TVector2 &amp;p0, const TVector2 &amp;p1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00117">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:117</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a411eea9dd765636914a618ded267558c"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">geo::TPCGeo::Plane</a></div><div class="ttdeci">PlaneGeo const &amp; Plane(geo::View_t view) const </div><div class="ttdoc">Return the plane in the tpc with View_t view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d00/TPCGeo_8cxx_source.html#l00263">TPCGeo.cxx:263</a></div></div>
<div class="ttc" id="namespaceraw_html_abfe7badfcad7fe0e9474829fbd1408b2"><div class="ttname"><a href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a></div><div class="ttdeci">unsigned int ChannelID_t</div><div class="ttdoc">Type representing the ID of a readout channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d38/RawTypes_8h_source.html#l00028">RawTypes.h:28</a></div></div>
<div class="ttc" id="test__associatedgroupswithleft__full_8fcl_html_a4814f2598ed6acdb806473d732f33889"><div class="ttname"><a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a></div><div class="ttdeci">physics associatedGroupsWithLeft p1</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl_source.html#l00024">test_associatedgroupswithleft_full.fcl:24</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abbb4a8a4b112ec8e24cc970a40e8b592"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">geo::PlaneGeo::WirePitch</a></div><div class="ttdeci">double WirePitch() const </div><div class="ttdoc">Return the wire pitch (in centimeters). It is assumed constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00411">PlaneGeo.h:411</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a45df0d5e161fa45e89854381f55aceb0"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">geo::GeometryCore::HasWire</a></div><div class="ttdeci">bool HasWire(geo::WireID const &amp;wireid) const </div><div class="ttdoc">Returns whether we have the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l03383">GeometryCore.h:3383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d9065279b0139c8aac662813345c9e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pma::ProjectionMatchingAlg::validate_on_adc_test </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html">detinfo::DetectorPropertiesData</a> &amp;&#160;</td>
          <td class="paramname"><em>detProp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html">lariov::ChannelStatusProvider</a> &amp;&#160;</td>
          <td class="paramname"><em>channelStatus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8e/classpma_1_1Track3D.html">pma::Track3D</a> &amp;&#160;</td>
          <td class="paramname"><em>trk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d7/dd9/classimg_1_1DataProviderAlg.html">img::DataProviderAlg</a> &amp;&#160;</td>
          <td class="paramname"><em>adcImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; art::Ptr&lt; <a class="el" href="../../db/d4e/classrecob_1_1Hit.html">recob::Hit</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TH1F *&#160;</td>
          <td class="paramname"><em>histoPassing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TH1F *&#160;</td>
          <td class="paramname"><em>histoRejected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the fraction of the track that is closer than fTrkValidationDist2D to any hit from hits in the testView (a view that was not used to build the track). Creates also histograms of values in pixels for the passing and rejected points on the track, so the threshold value for the ADC-based calibration can be estimated. </p>

<p>Definition at line <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html#l00127">127</a> of file <a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">double</span> max_d = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">fTrkValidationDist2D</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">double</span> d2, max_d2 = max_d * max_d;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nAll = 0, nPassed = 0;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> testPlane = adcImage.<a class="code" href="../../d7/dd9/classimg_1_1DataProviderAlg.html#afdf5f8b16d39986d41cf5ff0a5cf2f8a">Plane</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  std::vector&lt;unsigned int&gt; trkTPCs = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">TPCs</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  std::vector&lt;unsigned int&gt; trkCryos = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a4fa852d2bb7eb83f6d96c0f00da3d518">Cryos</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, std::pair&lt;TVector2, TVector2&gt;&gt; ranges;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, <span class="keywordtype">double</span>&gt; wirePitch;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [t, c] : views::cartesian_product(trkTPCs, trkCryos)) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    ranges[{t, c}] = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#ac011feb5eade195cdb3d4bf4f0458d63">WireDriftRange</a>(detProp, testPlane, t, c);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    wirePitch[{t, c}] = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(t, c).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(testPlane).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tpc, cryo;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  std::map&lt;std::pair&lt;unsigned int, unsigned int&gt;, std::vector&lt;pma::Vector2D&gt;&gt; all_close_points;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> :</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;       hits | <a class="code" href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">views::transform</a>(<a class="code" href="../../d7/d0b/namespacelar.html#ac7ad65c5dbecd0f69500e739fe324e82">to_element</a>) | <a class="code" href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl.html#ad9fbd36ae83bd91dd0be317f6be97a63">views::filter</a>(hits_on_plane{testPlane})) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    tpc = <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().TPC;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    cryo = <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Cryostat;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::pair&lt;unsigned int, unsigned int&gt; tpc_cryo(tpc, cryo);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::pair&lt;TVector2, TVector2&gt; rect = ranges[tpc_cryo];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire &gt; rect.first.X() - 10) &amp;&amp;  <span class="comment">// check only hits in the rectangle around</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire &lt; rect.second.X() + 10) &amp;&amp; <span class="comment">// the track projection, it is faster than</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime() &gt; rect.first.Y() - 100) &amp;&amp;    <span class="comment">// calculation of trk.Dist2(p2d, testPlane)</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        (<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime() &lt; rect.second.Y() + 100)) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      TVector2 p2d(wirePitch[tpc_cryo] * <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.WireID().Wire,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                   detProp.<a class="code" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">ConvertTicksToX</a>(<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>.PeakTime(), testPlane, tpc, cryo));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      d2 = trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a506e25c139891a49e29d88bab67f60c3">Dist2</a>(p2d, testPlane, tpc, cryo);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">if</span> (d2 &lt; max_d2) { all_close_points[tpc_cryo].emplace_back(p2d.X(), p2d.Y()); }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// then check how points-close-to-the-track-projection are distributed along</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// the track, namely: are there track sections crossing empty spaces, except</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// dead wires?</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>(</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().X(), trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().Y(), trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">front</a>()-&gt;<a class="code" href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">Point3D</a>().Z());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>* seg : trk.<a class="code" href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">Segments</a>()) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (seg-&gt;TPC() &lt; 0) <span class="comment">// skip segments between tpc&#39;s, look only at those contained in tpc</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> = seg-&gt;End();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> p0 = seg-&gt;Start();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> <a class="code" href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a> = seg-&gt;End();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a>* node = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a>*<span class="keyword">&gt;</span>(seg-&gt;Prev());</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    tpc = seg-&gt;<a class="code" href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">TPC</a>();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    cryo = seg-&gt;Cryo();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a> dc = step * seg-&gt;GetDirection3D();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; points = all_close_points[{tpc, cryo}];</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">double</span> f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, p1);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">double</span> wirepitch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">TPC</a>(tpc, cryo).<a class="code" href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">Plane</a>(testPlane).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">while</span> ((f &lt; 1.0) &amp;&amp; node-&gt;<a class="code" href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">SameTPC</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>)) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="../../d8/d4a/namespacepma.html#ab3d3617bbfc5e86b34a06f9f6092bc5f">pma::Vector2D</a> p2d(<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">WireCoordinate</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Y(), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.Z(), testPlane, tpc, cryo), <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.X());</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> wireID(cryo, tpc, testPlane, (<span class="keywordtype">int</span>)p2d.X());</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordtype">int</span> widx = (int)p2d.X();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordtype">int</span> didx = (int)detProp.<a class="code" href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a359d6255bb14f321d76e6085204ea52a">ConvertXToTicks</a>(p2d.Y(), testPlane, tpc, cryo);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">HasWire</a>(wireID)) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a> ch = <a class="code" href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">fGeom</a>-&gt;<a class="code" href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">PlaneWireToChannel</a>(wireID);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (channelStatus.<a class="code" href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">IsGood</a>(ch)) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="keywordtype">bool</span> is_close = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="keywordtype">float</span> max_adc = adcImage.<a class="code" href="../../d7/dd9/classimg_1_1DataProviderAlg.html#a101b5143c70e11b7792a4b1d756c4284">poolMax</a>(widx, didx, 2);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          <span class="keywordflow">if</span> (points.size()) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            p2d.SetX(wirepitch * p2d.X());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> : points) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;              d2 = <a class="code" href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a>(p2d, <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;              <span class="keywordflow">if</span> (d2 &lt; max_d2) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                is_close = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                nPassed++;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          nAll++;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          <span class="comment">// now fill the calibration histograms</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="keywordflow">if</span> (is_close) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">if</span> (histoPassing) histoPassing-&gt;Fill(max_adc);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">if</span> (histoRejected) histoRejected-&gt;Fill(max_adc);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">//else mf::LogVerbatim(&quot;ProjectionMatchingAlg&quot;)</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">//      &lt;&lt; &quot;crossing BAD CHANNEL (wire #&quot; &lt;&lt; (int)p2d.X() &lt;&lt; &quot;)&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> += dc;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      f = <a class="code" href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, p0, p1);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> = seg-&gt;End();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (nAll &gt; 0) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">double</span> v = nPassed / (double)nAll;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    mf::LogVerbatim(<span class="stringliteral">&quot;ProjectionMatchingAlg&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;  trk fraction ok: &quot;</span> &lt;&lt; v;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_ae81e63f01473939eb6bc9c2cb5455906"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#ae81e63f01473939eb6bc9c2cb5455906">geo::GeometryCore::WireCoordinate</a></div><div class="ttdeci">geo::Length_t WireCoordinate(double YPos, double ZPos, geo::PlaneID const &amp;planeid) const </div><div class="ttdoc">Returns the index of the nearest wire to the specified position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01128">GeometryCore.cxx:1128</a></div></div>
<div class="ttc" id="namespacelar_html_ac7ad65c5dbecd0f69500e739fe324e82"><div class="ttname"><a href="../../d7/d0b/namespacelar.html#ac7ad65c5dbecd0f69500e739fe324e82">lar::to_element</a></div><div class="ttdeci">constexpr to_element_t to_element</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbc/ToElement_8h_source.html#l00024">ToElement.h:24</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a506e25c139891a49e29d88bab67f60c3"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a506e25c139891a49e29d88bab67f60c3">pma::Track3D::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;p2d, unsigned int view, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l02575">PmaTrack3D.cxx:2575</a></div></div>
<div class="ttc" id="namespaceicarus_1_1waveform__operations_1_1details_html_ae295d3f6cb2f9181dccdf0e3492d44e0"><div class="ttname"><a href="../../d5/d45/namespaceicarus_1_1waveform__operations_1_1details.html#ae295d3f6cb2f9181dccdf0e3492d44e0">icarus::waveform_operations::details::transform</a></div><div class="ttdeci">static constexpr Sample_t transform(Sample_t sample)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8e/WaveformOperations_8h_source.html#l00145">WaveformOperations.h:145</a></div></div>
<div class="ttc" id="namespacepma_html_a6533238e57afc147ba9155b759521d20"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a6533238e57afc147ba9155b759521d20">pma::Dist2</a></div><div class="ttdeci">double Dist2(const TVector2 &amp;v1, const TVector2 &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00037">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:37</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_aa09d2eedd9b8602bd2b5a4bef917753c"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#aa09d2eedd9b8602bd2b5a4bef917753c">pma::ProjectionMatchingAlg::fGeom</a></div><div class="ttdeci">geo::GeometryCore const * fGeom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">ProjectionMatchingAlg.h:329</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_aaf6978718d7bc4fcdefa23c6ea22face"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#aaf6978718d7bc4fcdefa23c6ea22face">pma::Track3D::front</a></div><div class="ttdeci">pma::Hit3D const * front() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00098">PmaTrack3D.h:98</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classpma_1_1Hit3D_html_ac3fbfcb7dedfe1063f001c832bc64998"><div class="ttname"><a href="../../d5/d5f/classpma_1_1Hit3D.html#ac3fbfcb7dedfe1063f001c832bc64998">pma::Hit3D::Point3D</a></div><div class="ttdeci">TVector3 const &amp; Point3D() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dea/PmaHit3D_8h_source.html#l00055">PmaHit3D.h:55</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a654256f331ce57a9579086acae964efd"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a654256f331ce57a9579086acae964efd">pma::Track3D::TPCs</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; TPCs() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00452">PmaTrack3D.cxx:452</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00560">geo_types.h:560</a></div></div>
<div class="ttc" id="classimg_1_1DataProviderAlg_html_afdf5f8b16d39986d41cf5ff0a5cf2f8a"><div class="ttname"><a href="../../d7/dd9/classimg_1_1DataProviderAlg.html#afdf5f8b16d39986d41cf5ff0a5cf2f8a">img::DataProviderAlg::Plane</a></div><div class="ttdeci">unsigned int Plane() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d13/DataProviderAlg_8h_source.html#l00177">DataProviderAlg.h:177</a></div></div>
<div class="ttc" id="namespacepma_html_a3770c6a1a7dc99a26ddab01e5cec6cf5"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a3770c6a1a7dc99a26ddab01e5cec6cf5">pma::Vector3D</a></div><div class="ttdeci">recob::tracking::Vector_t Vector3D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00031">larreco/larreco/RecoAlg/PMAlg/Utilities.h:31</a></div></div>
<div class="ttc" id="classpma_1_1Element3D_html_a0e4d7a26f6bac4987353833d21097993"><div class="ttname"><a href="../../d0/dcf/classpma_1_1Element3D.html#a0e4d7a26f6bac4987353833d21097993">pma::Element3D::TPC</a></div><div class="ttdeci">int TPC(void) const </div><div class="ttdoc">TPC index or -1 if out of any TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/PmaElement3D_8h_source.html#l00034">PmaElement3D.h:34</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a4fa852d2bb7eb83f6d96c0f00da3d518"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a4fa852d2bb7eb83f6d96c0f00da3d518">pma::Track3D::Cryos</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; Cryos() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00471">PmaTrack3D.cxx:471</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_a45d0ae43b2aea694cc8f517bc1505e3c"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#a45d0ae43b2aea694cc8f517bc1505e3c">pma::Track3D::Segments</a></div><div class="ttdeci">std::vector&lt; pma::Segment3D * &gt; const &amp; Segments() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d67/PmaTrack3D_8h_source.html#l00326">PmaTrack3D.h:326</a></div></div>
<div class="ttc" id="classpma_1_1ProjectionMatchingAlg_html_af110a4c6e8e887b1807d52868102c9e4"><div class="ttname"><a href="../../d4/d06/classpma_1_1ProjectionMatchingAlg.html#af110a4c6e8e887b1807d52868102c9e4">pma::ProjectionMatchingAlg::fTrkValidationDist2D</a></div><div class="ttdeci">double const fTrkValidationDist2D</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00320">ProjectionMatchingAlg.h:320</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorPropertiesData_html_a359d6255bb14f321d76e6085204ea52a"><div class="ttname"><a href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a359d6255bb14f321d76e6085204ea52a">detinfo::DetectorPropertiesData::ConvertXToTicks</a></div><div class="ttdeci">double ConvertXToTicks(double X, int p, int t, int c) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d64/DetectorPropertiesData_8cc_source.html#l00099">DetectorPropertiesData.cc:99</a></div></div>
<div class="ttc" id="classlariov_1_1ChannelStatusProvider_html_a17471560041631ee3f09c578987141f5"><div class="ttname"><a href="../../d8/d7e/classlariov_1_1ChannelStatusProvider.html#a17471560041631ee3f09c578987141f5">lariov::ChannelStatusProvider::IsGood</a></div><div class="ttdeci">virtual bool IsGood(raw::ChannelID_t channel) const </div><div class="ttdoc">Returns whether the specified channel is physical and good. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ded/ChannelStatusProvider_8h_source.html#l00084">ChannelStatusProvider.h:84</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html_a2ec9b7dc0c2adbb1cc253c43483dde9c"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html#a2ec9b7dc0c2adbb1cc253c43483dde9c">pma::Node3D::SameTPC</a></div><div class="ttdeci">bool SameTPC(const TVector3 &amp;p3d, float margin=0.0F) const </div><div class="ttdoc">Check if p3d is in the same TPC as the node. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da8/PmaNode3D_8cxx_source.html#l00102">PmaNode3D.cxx:102</a></div></div>
<div class="ttc" id="classdetinfo_1_1DetectorPropertiesData_html_a8e4b4b8d755ffded5a9f956ae7c9c1ec"><div class="ttname"><a href="../../d1/d11/classdetinfo_1_1DetectorPropertiesData.html#a8e4b4b8d755ffded5a9f956ae7c9c1ec">detinfo::DetectorPropertiesData::ConvertTicksToX</a></div><div class="ttdeci">double ConvertTicksToX(double ticks, int p, int t, int c) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d64/DetectorPropertiesData_8cc_source.html#l00115">DetectorPropertiesData.cc:115</a></div></div>
<div class="ttc" id="g4__3drift__faketrigger__filter_8fcl_html_ad9fbd36ae83bd91dd0be317f6be97a63"><div class="ttname"><a href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl.html#ad9fbd36ae83bd91dd0be317f6be97a63">filter</a></div><div class="ttdeci">physics filters filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d74/g4__3drift__faketrigger__filter_8fcl_source.html#l00008">g4_3drift_faketrigger_filter.fcl:8</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a6c38d4f2515d255850c228d937455b7b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a6c38d4f2515d255850c228d937455b7b">geo::GeometryCore::PlaneWireToChannel</a></div><div class="ttdeci">raw::ChannelID_t PlaneWireToChannel(WireID const &amp;wireid) const </div><div class="ttdoc">Returns the ID of the TPC channel connected to the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6a/GeometryCore_8cxx_source.html#l01226">GeometryCore.cxx:1226</a></div></div>
<div class="ttc" id="namespacepma_html_a19a7f50fd90218ddda527d6cb8579c67"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#a19a7f50fd90218ddda527d6cb8579c67">pma::GetSegmentProjVector</a></div><div class="ttdeci">double GetSegmentProjVector(const TVector2 &amp;p, const TVector2 &amp;p0, const TVector2 &amp;p1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8cxx_source.html#l00117">larreco/larreco/RecoAlg/PMAlg/Utilities.cxx:117</a></div></div>
<div class="ttc" id="namespacepma_html_ab3d3617bbfc5e86b34a06f9f6092bc5f"><div class="ttname"><a href="../../d8/d4a/namespacepma.html#ab3d3617bbfc5e86b34a06f9f6092bc5f">pma::Vector2D</a></div><div class="ttdeci">ROOT::Math::DisplacementVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt; &gt; Vector2D</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de4/larreco_2larreco_2RecoAlg_2PMAlg_2Utilities_8h_source.html#l00030">larreco/larreco/RecoAlg/PMAlg/Utilities.h:30</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a84aba48f49cf9add6cf0641a4527e45b"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a84aba48f49cf9add6cf0641a4527e45b">geo::GeometryCore::TPC</a></div><div class="ttdeci">TPCGeo const &amp; TPC(unsigned int const tpc=0, unsigned int const cstat=0) const </div><div class="ttdoc">Returns the specified TPC. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l02423">GeometryCore.h:2423</a></div></div>
<div class="ttc" id="classgeo_1_1TPCGeo_html_a411eea9dd765636914a618ded267558c"><div class="ttname"><a href="../../d9/dff/classgeo_1_1TPCGeo.html#a411eea9dd765636914a618ded267558c">geo::TPCGeo::Plane</a></div><div class="ttdeci">PlaneGeo const &amp; Plane(geo::View_t view) const </div><div class="ttdoc">Return the plane in the tpc with View_t view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d00/TPCGeo_8cxx_source.html#l00263">TPCGeo.cxx:263</a></div></div>
<div class="ttc" id="namespaceraw_html_abfe7badfcad7fe0e9474829fbd1408b2"><div class="ttname"><a href="../../d9/d63/namespaceraw.html#abfe7badfcad7fe0e9474829fbd1408b2">raw::ChannelID_t</a></div><div class="ttdeci">unsigned int ChannelID_t</div><div class="ttdoc">Type representing the ID of a readout channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d38/RawTypes_8h_source.html#l00028">RawTypes.h:28</a></div></div>
<div class="ttc" id="classimg_1_1DataProviderAlg_html_a101b5143c70e11b7792a4b1d756c4284"><div class="ttname"><a href="../../d7/dd9/classimg_1_1DataProviderAlg.html#a101b5143c70e11b7792a4b1d756c4284">img::DataProviderAlg::poolMax</a></div><div class="ttdeci">float poolMax(int wire, int drift, size_t r=0) const </div><div class="ttdoc">Pool max value in a patch around the wire/drift pixel. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7b/DataProviderAlg_8cxx_source.html#l00140">DataProviderAlg.cxx:140</a></div></div>
<div class="ttc" id="classpma_1_1Node3D_html"><div class="ttname"><a href="../../d3/dfc/classpma_1_1Node3D.html">pma::Node3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/PmaNode3D_8h_source.html#l00034">PmaNode3D.h:34</a></div></div>
<div class="ttc" id="test__associatedgroupswithleft__full_8fcl_html_a4814f2598ed6acdb806473d732f33889"><div class="ttname"><a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl.html#a4814f2598ed6acdb806473d732f33889">p1</a></div><div class="ttdeci">physics associatedGroupsWithLeft p1</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/test__associatedgroupswithleft__full_8fcl_source.html#l00024">test_associatedgroupswithleft_full.fcl:24</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abbb4a8a4b112ec8e24cc970a40e8b592"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">geo::PlaneGeo::WirePitch</a></div><div class="ttdeci">double WirePitch() const </div><div class="ttdoc">Return the wire pitch (in centimeters). It is assumed constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00411">PlaneGeo.h:411</a></div></div>
<div class="ttc" id="classpma_1_1Track3D_html_ac011feb5eade195cdb3d4bf4f0458d63"><div class="ttname"><a href="../../d6/d8e/classpma_1_1Track3D.html#ac011feb5eade195cdb3d4bf4f0458d63">pma::Track3D::WireDriftRange</a></div><div class="ttdeci">std::pair&lt; TVector2, TVector2 &gt; WireDriftRange(detinfo::DetectorPropertiesData const &amp;detProp, unsigned int view, unsigned int tpc, unsigned int cryo) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/PmaTrack3D_8cxx_source.html#l00490">PmaTrack3D.cxx:490</a></div></div>
<div class="ttc" id="classgeo_1_1GeometryCore_html_a45df0d5e161fa45e89854381f55aceb0"><div class="ttname"><a href="../../d7/d63/classgeo_1_1GeometryCore.html#a45df0d5e161fa45e89854381f55aceb0">geo::GeometryCore::HasWire</a></div><div class="ttdeci">bool HasWire(geo::WireID const &amp;wireid) const </div><div class="ttdoc">Returns whether we have the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de7/GeometryCore_8h_source.html#l03383">GeometryCore.h:3383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac59594fedcfd32699ac1ddfa18522c57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const pma::ProjectionMatchingAlg::fFineTuningEps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00317">317</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa09d2eedd9b8602bd2b5a4bef917753c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d63/classgeo_1_1GeometryCore.html">geo::GeometryCore</a> const* pma::ProjectionMatchingAlg::fGeom</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00329">329</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa0579ff709ef808497ec91163e1718a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const pma::ProjectionMatchingAlg::fHitTestingDist2D</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00322">322</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2fe5ab73520e1f2a0f132786200eada4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const pma::ProjectionMatchingAlg::fMinTwoViewFraction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00325">325</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<a class="anchor" id="a919b5abb7237461d376ea12ac26e7aad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const pma::ProjectionMatchingAlg::fOptimizationEps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00313">313</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<a class="anchor" id="af110a4c6e8e887b1807d52868102c9e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double const pma::ProjectionMatchingAlg::fTrkValidationDist2D</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html#l00320">320</a> of file <a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../da/d26/ProjectionMatchingAlg_8h_source.html">ProjectionMatchingAlg.h</a></li>
<li><a class="el" href="../../d6/dc9/ProjectionMatchingAlg_8cxx_source.html">ProjectionMatchingAlg.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
