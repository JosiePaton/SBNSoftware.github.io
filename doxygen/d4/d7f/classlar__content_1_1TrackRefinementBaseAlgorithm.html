<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>lar_content::TrackRefinementBaseAlgorithm Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../db/de7/namespacelar__content.html">lar_content</a></li><li class="navelem"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html">TrackRefinementBaseAlgorithm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d6/d92/classlar__content_1_1TrackRefinementBaseAlgorithm-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lar_content::TrackRefinementBaseAlgorithm Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html" title="TrackRefinementBaseAlgorithm class. ">TrackRefinementBaseAlgorithm</a> class.  
 <a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lar_content::TrackRefinementBaseAlgorithm:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.png" usemap="#lar_content::TrackRefinementBaseAlgorithm_map" alt=""/>
  <map id="lar_content::TrackRefinementBaseAlgorithm_map" name="lar_content::TrackRefinementBaseAlgorithm_map">
<area href="../../d7/dda/classlar__content_1_1TrackMergeRefinementAlgorithm.html" title="TrackMergeRefinementAlgorithm class. " alt="lar_content::TrackMergeRefinementAlgorithm" shape="rect" coords="0,112,265,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dae/classlar__content_1_1TrackRefinementBaseAlgorithm_1_1SortByDistanceAlongLine.html">SortByDistanceAlongLine</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../db/dae/classlar__content_1_1TrackRefinementBaseAlgorithm_1_1SortByDistanceAlongLine.html" title="SortByDistanceAlongLine class. ">SortByDistanceAlongLine</a> class.  <a href="../../db/dae/classlar__content_1_1TrackRefinementBaseAlgorithm_1_1SortByDistanceAlongLine.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4accefdb1cac4b1b3ec3db1e4878d310"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4accefdb1cac4b1b3ec3db1e4878d310">TrackRefinementBaseAlgorithm</a> ()</td></tr>
<tr class="memdesc:a4accefdb1cac4b1b3ec3db1e4878d310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a4accefdb1cac4b1b3ec3db1e4878d310">More...</a><br/></td></tr>
<tr class="separator:a4accefdb1cac4b1b3ec3db1e4878d310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b42fb9ebad3f5773186acee170296ab"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a6b42fb9ebad3f5773186acee170296ab"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b42fb9ebad3f5773186acee170296ab">InitialiseContainers</a> (const ClusterList *pClusterList, const T sortFunction, ClusterVector &amp;clusterVector, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;slidingFitResultMapPair) const </td></tr>
<tr class="separator:a6b42fb9ebad3f5773186acee170296ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd2f0340062bd8709c065c58754d192"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a6cd2f0340062bd8709c065c58754d192"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6cd2f0340062bd8709c065c58754d192">UpdateContainers</a> (const ClusterList &amp;clustersToAdd, const ClusterList &amp;clustersToDelete, const T sortFunction, ClusterVector &amp;clusterVector, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;slidingFitResultMapPair) const </td></tr>
<tr class="separator:a6cd2f0340062bd8709c065c58754d192"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a33d1bea226f44a842dd2eb52027ba352"><td class="memItemLeft" align="right" valign="top">typedef std::pair<br class="typebreak"/>
&lt; <a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> <br class="typebreak"/>
*, <a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a></td></tr>
<tr class="separator:a33d1bea226f44a842dd2eb52027ba352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc43d54aea0e340ef45412611d8fb72"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map<br class="typebreak"/>
&lt; const pandora::Cluster <br class="typebreak"/>
*, pandora::CaloHitList &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a></td></tr>
<tr class="separator:a3bc43d54aea0e340ef45412611d8fb72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1d8e9cda5970e447ccd990eaced6b951"><td class="memItemLeft" align="right" valign="top">virtual pandora::StatusCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a1d8e9cda5970e447ccd990eaced6b951">Run</a> ()=0</td></tr>
<tr class="separator:a1d8e9cda5970e447ccd990eaced6b951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa19d19a9cb85f45975cfc7ea498ffd7a"><td class="memItemLeft" align="right" valign="top">virtual pandora::StatusCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa19d19a9cb85f45975cfc7ea498ffd7a">ReadSettings</a> (const pandora::TiXmlHandle xmlHandle)=0</td></tr>
<tr class="separator:aa19d19a9cb85f45975cfc7ea498ffd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d1853c5dc6aa43d82732a0d7a8d26e"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:aa8d1853c5dc6aa43d82732a0d7a8d26e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa8d1853c5dc6aa43d82732a0d7a8d26e">InitialiseContainers</a> (const pandora::ClusterList *pClusterList, const T sortFunction, pandora::ClusterVector &amp;clusterVector, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;slidingFitResultMapPair) const </td></tr>
<tr class="memdesc:aa8d1853c5dc6aa43d82732a0d7a8d26e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the cluster vector and sliding fit maps with clusters that are determined to be track-like.  <a href="#aa8d1853c5dc6aa43d82732a0d7a8d26e">More...</a><br/></td></tr>
<tr class="separator:aa8d1853c5dc6aa43d82732a0d7a8d26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52f6b30f23e49b92813bb4e03dddaa8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ac52f6b30f23e49b92813bb4e03dddaa8">GetClusterMergingCoordinates</a> (const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;clusterMicroFitResult, const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;clusterMacroFitResult, const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;associatedMacroFitResult, const bool isEndUpstream, pandora::CartesianVector &amp;clusterMergePosition, pandora::CartesianVector &amp;clusterMergeDirection) const </td></tr>
<tr class="memdesc:ac52f6b30f23e49b92813bb4e03dddaa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the merging coordinate and direction for an input cluster with respect to an associated cluster.  <a href="#ac52f6b30f23e49b92813bb4e03dddaa8">More...</a><br/></td></tr>
<tr class="separator:ac52f6b30f23e49b92813bb4e03dddaa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc955713431247230c5005be6f08681"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#abcc955713431247230c5005be6f08681">GetHitsInBoundingBox</a> (const pandora::CartesianVector &amp;firstCorner, const pandora::CartesianVector &amp;secondCorner, const pandora::ClusterList *const pClusterList, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;clusterToCaloHitListMap, const pandora::ClusterList &amp;unavailableProtectedClusters=pandora::ClusterList(), const float distanceToLine=-1.f) const </td></tr>
<tr class="memdesc:abcc955713431247230c5005be6f08681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the unprotected hits that are contained within a defined box with the option to apply a cut on the distance to the connecting line.  <a href="#abcc955713431247230c5005be6f08681">More...</a><br/></td></tr>
<tr class="separator:abcc955713431247230c5005be6f08681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8230e136b3b76f02bd1c688da5320803"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8230e136b3b76f02bd1c688da5320803">IsInBoundingBox</a> (const float minX, const float maxX, const float minZ, const float maxZ, const pandora::CartesianVector &amp;hitPosition) const </td></tr>
<tr class="memdesc:a8230e136b3b76f02bd1c688da5320803"><td class="mdescLeft">&#160;</td><td class="mdescRight">check whether a hit is contained within a defined square region  <a href="#a8230e136b3b76f02bd1c688da5320803">More...</a><br/></td></tr>
<tr class="separator:a8230e136b3b76f02bd1c688da5320803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698c1a1c033f4b418d84d8f44e830bc2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a698c1a1c033f4b418d84d8f44e830bc2">IsCloseToLine</a> (const pandora::CartesianVector &amp;hitPosition, const pandora::CartesianVector &amp;lineStart, const pandora::CartesianVector &amp;lineDirection, const float distanceToLine) const </td></tr>
<tr class="memdesc:a698c1a1c033f4b418d84d8f44e830bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a hit is close to a line.  <a href="#a698c1a1c033f4b418d84d8f44e830bc2">More...</a><br/></td></tr>
<tr class="separator:a698c1a1c033f4b418d84d8f44e830bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e7d86b5d81c6b2ab08b8d9b936594e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a27e7d86b5d81c6b2ab08b8d9b936594e">AreExtrapolatedHitsGood</a> (const <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;clusterToCaloHitListMap, <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;clusterAssociation) const </td></tr>
<tr class="memdesc:a27e7d86b5d81c6b2ab08b8d9b936594e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform topological checks on the collected hits to ensure no gaps are present.  <a href="#a27e7d86b5d81c6b2ab08b8d9b936594e">More...</a><br/></td></tr>
<tr class="separator:a27e7d86b5d81c6b2ab08b8d9b936594e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacef8a8c0ae2df044b6ba48c2b3d8ab4"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aacef8a8c0ae2df044b6ba48c2b3d8ab4">AreExtrapolatedHitsNearBoundaries</a> (const pandora::CaloHitVector &amp;extrapolatedHitVector, <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;clusterAssociation) const =0</td></tr>
<tr class="memdesc:aacef8a8c0ae2df044b6ba48c2b3d8ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the separation of the extremal extrapolated hits with the expected endpoints or, in the case of no hits, the clusterMergePoint themselves.  <a href="#aacef8a8c0ae2df044b6ba48c2b3d8ab4">More...</a><br/></td></tr>
<tr class="separator:aacef8a8c0ae2df044b6ba48c2b3d8ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2dd4a01d257348969f6a8dd0e64bb49"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae2dd4a01d257348969f6a8dd0e64bb49">IsNearBoundary</a> (const pandora::CaloHit *const pCaloHit, const pandora::CartesianVector &amp;boundaryPosition2D, const float boundaryTolerance) const </td></tr>
<tr class="memdesc:ae2dd4a01d257348969f6a8dd0e64bb49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a hit is close to a boundary point.  <a href="#ae2dd4a01d257348969f6a8dd0e64bb49">More...</a><br/></td></tr>
<tr class="separator:ae2dd4a01d257348969f6a8dd0e64bb49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fac47ed7fb0d9c7248c87bf3adc7c3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ac9fac47ed7fb0d9c7248c87bf3adc7c3">IsTrackContinuous</a> (const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;clusterAssociation, const pandora::CaloHitVector &amp;extrapolatedCaloHitVector) const </td></tr>
<tr class="memdesc:ac9fac47ed7fb0d9c7248c87bf3adc7c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the extrapolatedCaloHitVector contains a continuous line of hits between the cluster merge points.  <a href="#ac9fac47ed7fb0d9c7248c87bf3adc7c3">More...</a><br/></td></tr>
<tr class="separator:ac9fac47ed7fb0d9c7248c87bf3adc7c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f4d2c832e0c42cb6eed0f54d4827cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a08f4d2c832e0c42cb6eed0f54d4827cc">GetTrackSegmentBoundaries</a> (const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;clusterAssociation, pandora::CartesianPointVector &amp;trackSegmentBoundaries) const </td></tr>
<tr class="memdesc:a08f4d2c832e0c42cb6eed0f54d4827cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the segment boundaries of the connecting line to test whether extrapolated hits are continuous.  <a href="#a08f4d2c832e0c42cb6eed0f54d4827cc">More...</a><br/></td></tr>
<tr class="separator:a08f4d2c832e0c42cb6eed0f54d4827cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93eafc43207fee0e90e40313697588b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a93eafc43207fee0e90e40313697588b1">RepositionIfInGap</a> (const pandora::CartesianVector &amp;mergeDirection, pandora::CartesianVector &amp;trackPoint) const </td></tr>
<tr class="memdesc:a93eafc43207fee0e90e40313697588b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an input position to the higher line gap edge if it lies within a gap.  <a href="#a93eafc43207fee0e90e40313697588b1">More...</a><br/></td></tr>
<tr class="separator:a93eafc43207fee0e90e40313697588b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c47a414cf61023feff154b5ae49ae5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a98c47a414cf61023feff154b5ae49ae5">DistanceInGap</a> (const pandora::CartesianVector &amp;upstreamPoint, const pandora::CartesianVector &amp;downstreamPoint, const pandora::CartesianVector &amp;connectingLine, pandora::DetectorGapList &amp;consideredGaps) const </td></tr>
<tr class="memdesc:a98c47a414cf61023feff154b5ae49ae5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the track length between two points that lies in gaps.  <a href="#a98c47a414cf61023feff154b5ae49ae5">More...</a><br/></td></tr>
<tr class="separator:a98c47a414cf61023feff154b5ae49ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83bebe252d7bd8b1228a5b5f3cc35b84"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a83bebe252d7bd8b1228a5b5f3cc35b84">IsInLineSegment</a> (const pandora::CartesianVector &amp;lowerBoundary, const pandora::CartesianVector &amp;upperBoundary, const pandora::CartesianVector &amp;point) const </td></tr>
<tr class="memdesc:a83bebe252d7bd8b1228a5b5f3cc35b84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a position falls within a specified segment of the cluster connecting line.  <a href="#a83bebe252d7bd8b1228a5b5f3cc35b84">More...</a><br/></td></tr>
<tr class="separator:a83bebe252d7bd8b1228a5b5f3cc35b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91be3f9f2049719d7491c9eb07eae129"><td class="memItemLeft" align="right" valign="top">const pandora::Cluster *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a91be3f9f2049719d7491c9eb07eae129">RemoveOffAxisHitsFromTrack</a> (const pandora::Cluster *const pCluster, const pandora::CartesianVector &amp;splitPosition, const bool isEndUpstream, const <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;clusterToCaloHitListMap, pandora::ClusterList &amp;remnantClusterList, <a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> &amp;microSlidingFitResultMap, <a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> &amp;macroSlidingFitResultMap) const </td></tr>
<tr class="memdesc:a91be3f9f2049719d7491c9eb07eae129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove any hits in the upstream/downstream cluster that lie off of the main track axis (i.e. clustering errors)  <a href="#a91be3f9f2049719d7491c9eb07eae129">More...</a><br/></td></tr>
<tr class="separator:a91be3f9f2049719d7491c9eb07eae129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2c5ebf804384c93ed0a415439ce039"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2f2c5ebf804384c93ed0a415439ce039">AddHitsToMainTrack</a> (const pandora::Cluster *const pMainTrackCluster, const pandora::Cluster *const pShowerTrackCluster, const pandora::CaloHitList &amp;caloHitsToMerge, const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;clusterAssociation, pandora::ClusterList &amp;remnantClusterList) const </td></tr>
<tr class="memdesc:a2f2c5ebf804384c93ed0a415439ce039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the hits from a shower cluster that belong to the main track and add them into the main track cluster.  <a href="#a2f2c5ebf804384c93ed0a415439ce039">More...</a><br/></td></tr>
<tr class="separator:a2f2c5ebf804384c93ed0a415439ce039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa1dcb7f097daf166c861e6ceb63790"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aefa1dcb7f097daf166c861e6ceb63790">ProcessRemnantClusters</a> (const pandora::ClusterList &amp;remnantClusterList, const pandora::Cluster *const pMainTrackCluster, const pandora::ClusterList *const pClusterList, pandora::ClusterList &amp;createdClusters) const </td></tr>
<tr class="memdesc:aefa1dcb7f097daf166c861e6ceb63790"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the remnant clusters separating those that stradle the main track.  <a href="#aefa1dcb7f097daf166c861e6ceb63790">More...</a><br/></td></tr>
<tr class="separator:aefa1dcb7f097daf166c861e6ceb63790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04eb93f7a4dca2fb1cbdc679de32f29c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a04eb93f7a4dca2fb1cbdc679de32f29c">AddToNearestCluster</a> (const pandora::Cluster *const pClusterToMerge, const pandora::Cluster *const pMainTrackCluster, const pandora::ClusterList *const pClusterList) const </td></tr>
<tr class="memdesc:a04eb93f7a4dca2fb1cbdc679de32f29c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a cluster to the nearest cluster satisfying separation distance thresholds.  <a href="#a04eb93f7a4dca2fb1cbdc679de32f29c">More...</a><br/></td></tr>
<tr class="separator:a04eb93f7a4dca2fb1cbdc679de32f29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5af72ffcc18f890c94fc40a702cdfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#adc5af72ffcc18f890c94fc40a702cdfc">IsClusterRemnantDisconnected</a> (const pandora::Cluster *const pRemnantCluster) const </td></tr>
<tr class="memdesc:adc5af72ffcc18f890c94fc40a702cdfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a remnant cluster is considered to be disconnected and therefore should undergo further fragmentation.  <a href="#adc5af72ffcc18f890c94fc40a702cdfc">More...</a><br/></td></tr>
<tr class="separator:adc5af72ffcc18f890c94fc40a702cdfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57492730c68fc657af2ca71202ecd0f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a57492730c68fc657af2ca71202ecd0f6">FragmentRemnantCluster</a> (const pandora::Cluster *const pRemnantCluster, pandora::ClusterList &amp;fragmentedClusterList) const </td></tr>
<tr class="memdesc:a57492730c68fc657af2ca71202ecd0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fragment a cluster using simple hit separation logic.  <a href="#a57492730c68fc657af2ca71202ecd0f6">More...</a><br/></td></tr>
<tr class="separator:a57492730c68fc657af2ca71202ecd0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6fca19fff0ff1a650021b0fecead89"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:abf6fca19fff0ff1a650021b0fecead89"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#abf6fca19fff0ff1a650021b0fecead89">UpdateContainers</a> (const pandora::ClusterList &amp;clustersToAdd, const pandora::ClusterList &amp;clustersToDelete, const T sortFunction, pandora::ClusterVector &amp;clusterVector, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;slidingFitResultMapPair) const </td></tr>
<tr class="memdesc:abf6fca19fff0ff1a650021b0fecead89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove deleted clusters from the cluster vector and sliding fit maps and add in created clusters that are determined to be track-like.  <a href="#abf6fca19fff0ff1a650021b0fecead89">More...</a><br/></td></tr>
<tr class="separator:abf6fca19fff0ff1a650021b0fecead89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87b67fe8bcca57ad0f6bb3fb2186ea4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#af87b67fe8bcca57ad0f6bb3fb2186ea4">RemoveClusterFromContainers</a> (const pandora::Cluster *const pClustertoRemove, pandora::ClusterVector &amp;clusterVector, <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;slidingFitResultMapPair) const </td></tr>
<tr class="memdesc:af87b67fe8bcca57ad0f6bb3fb2186ea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a cluster from the cluster vector and sliding fit maps.  <a href="#af87b67fe8bcca57ad0f6bb3fb2186ea4">More...</a><br/></td></tr>
<tr class="separator:af87b67fe8bcca57ad0f6bb3fb2186ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae18b897281503fcd8c3a0925fbaa47b4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a></td></tr>
<tr class="memdesc:ae18b897281503fcd8c3a0925fbaa47b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The minimum length of a considered cluster.  <a href="#ae18b897281503fcd8c3a0925fbaa47b4">More...</a><br/></td></tr>
<tr class="separator:ae18b897281503fcd8c3a0925fbaa47b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6a82996f57ad1d3d0345fdf1bda049"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">m_microSlidingFitWindow</a></td></tr>
<tr class="memdesc:a6a6a82996f57ad1d3d0345fdf1bda049"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sliding fit window used in the fits contained within the microSlidingFitResultMap.  <a href="#a6a6a82996f57ad1d3d0345fdf1bda049">More...</a><br/></td></tr>
<tr class="separator:a6a6a82996f57ad1d3d0345fdf1bda049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e26a391dad9e2a59be790c03fa323d2"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">m_macroSlidingFitWindow</a></td></tr>
<tr class="memdesc:a8e26a391dad9e2a59be790c03fa323d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sliding fit window used in the fits contained within the macroSlidingFitResultMap.  <a href="#a8e26a391dad9e2a59be790c03fa323d2">More...</a><br/></td></tr>
<tr class="separator:a8e26a391dad9e2a59be790c03fa323d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b1509ebc13e6483b80f3dc4f7ef6a71"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">m_stableRegionClusterFraction</a></td></tr>
<tr class="memdesc:a6b1509ebc13e6483b80f3dc4f7ef6a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold fraction of fit contributing layers which defines the stable region.  <a href="#a6b1509ebc13e6483b80f3dc4f7ef6a71">More...</a><br/></td></tr>
<tr class="separator:a6b1509ebc13e6483b80f3dc4f7ef6a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770a38cd0cf7d43462cddb3b5c3afbcc"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">m_mergePointMinCosAngleDeviation</a></td></tr>
<tr class="memdesc:a770a38cd0cf7d43462cddb3b5c3afbcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold cos opening angle between the cluster local gradient and the associated cluster global gradient used to determine merge points.  <a href="#a770a38cd0cf7d43462cddb3b5c3afbcc">More...</a><br/></td></tr>
<tr class="separator:a770a38cd0cf7d43462cddb3b5c3afbcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c0d1d304ce9306859f39fdfa19f6aa"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">m_minHitFractionForHitRemoval</a></td></tr>
<tr class="memdesc:aa3c0d1d304ce9306859f39fdfa19f6aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold fraction of hits to be removed from the cluster for hit removal to proceed.  <a href="#aa3c0d1d304ce9306859f39fdfa19f6aa">More...</a><br/></td></tr>
<tr class="separator:aa3c0d1d304ce9306859f39fdfa19f6aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15c7c206da85d9b9749d9066091c121"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">m_maxDistanceFromMainTrack</a></td></tr>
<tr class="memdesc:aa15c7c206da85d9b9749d9066091c121"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold distance for a hit to be added to the main track.  <a href="#aa15c7c206da85d9b9749d9066091c121">More...</a><br/></td></tr>
<tr class="separator:aa15c7c206da85d9b9749d9066091c121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fef26117a1203e30ea452565e56e31"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">m_maxHitDistanceFromCluster</a></td></tr>
<tr class="memdesc:a47fef26117a1203e30ea452565e56e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold separation between a hit and cluster for the hit to be merged into the cluster.  <a href="#a47fef26117a1203e30ea452565e56e31">More...</a><br/></td></tr>
<tr class="separator:a47fef26117a1203e30ea452565e56e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8fdf0c22b9d440c4c55e30453c47c5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">m_maxHitSeparationForConnectedCluster</a></td></tr>
<tr class="memdesc:a2d8fdf0c22b9d440c4c55e30453c47c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum separation between two adjacent (in z) hits in a connected cluster.  <a href="#a2d8fdf0c22b9d440c4c55e30453c47c5">More...</a><br/></td></tr>
<tr class="separator:a2d8fdf0c22b9d440c4c55e30453c47c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc73defb1407fd0470460234dd77b41"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">m_maxTrackGaps</a></td></tr>
<tr class="memdesc:a4bc73defb1407fd0470460234dd77b41"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of graps allowed in the extrapolated hit vector.  <a href="#a4bc73defb1407fd0470460234dd77b41">More...</a><br/></td></tr>
<tr class="separator:a4bc73defb1407fd0470460234dd77b41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d38366c2cd34aa389236895bcf8be7b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a></td></tr>
<tr class="memdesc:a4d38366c2cd34aa389236895bcf8be7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The length of a track gap.  <a href="#a4d38366c2cd34aa389236895bcf8be7b">More...</a><br/></td></tr>
<tr class="separator:a4d38366c2cd34aa389236895bcf8be7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aade36d2016eb7138a1caf2d0f52053b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a></td></tr>
<tr class="memdesc:aade36d2016eb7138a1caf2d0f52053b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to consider the width of hits.  <a href="#aade36d2016eb7138a1caf2d0f52053b9">More...</a><br/></td></tr>
<tr class="separator:aade36d2016eb7138a1caf2d0f52053b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html" title="TrackRefinementBaseAlgorithm class. ">TrackRefinementBaseAlgorithm</a> class. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00021">21</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a3bc43d54aea0e340ef45412611d8fb72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt;const pandora::Cluster *, pandora::CaloHitList&gt; <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">lar_content::TrackRefinementBaseAlgorithm::ClusterToCaloHitListMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00031">31</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a33d1bea226f44a842dd2eb52027ba352"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;<a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> *, <a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> *&gt; <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">lar_content::TrackRefinementBaseAlgorithm::SlidingFitResultMapPair</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00030">30</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4accefdb1cac4b1b3ec3db1e4878d310"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lar_content::TrackRefinementBaseAlgorithm::TrackRefinementBaseAlgorithm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00021">21</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                                           :</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a>(15.f),</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">m_microSlidingFitWindow</a>(20),</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">m_macroSlidingFitWindow</a>(1000),</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">m_stableRegionClusterFraction</a>(0.05f),</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">m_mergePointMinCosAngleDeviation</a>(0.999f),</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">m_minHitFractionForHitRemoval</a>(0.05f),</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">m_maxDistanceFromMainTrack</a>(0.75f),</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">m_maxHitDistanceFromCluster</a>(4.f),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">m_maxHitSeparationForConnectedCluster</a>(4.f),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">m_maxTrackGaps</a>(3),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a>(3.f),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a>(<span class="keyword">false</span>)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a8e26a391dad9e2a59be790c03fa323d2"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">lar_content::TrackRefinementBaseAlgorithm::m_macroSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_macroSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the macroSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00309">TrackRefinementBaseAlgorithm.h:309</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aade36d2016eb7138a1caf2d0f52053b9"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</a></div><div class="ttdeci">bool m_hitWidthMode</div><div class="ttdoc">Whether to consider the width of hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">TrackRefinementBaseAlgorithm.h:318</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_ae18b897281503fcd8c3a0925fbaa47b4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">lar_content::TrackRefinementBaseAlgorithm::m_minClusterLength</a></div><div class="ttdeci">float m_minClusterLength</div><div class="ttdoc">The minimum length of a considered cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00307">TrackRefinementBaseAlgorithm.h:307</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4bc73defb1407fd0470460234dd77b41"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">lar_content::TrackRefinementBaseAlgorithm::m_maxTrackGaps</a></div><div class="ttdeci">unsigned int m_maxTrackGaps</div><div class="ttdoc">The maximum number of graps allowed in the extrapolated hit vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00316">TrackRefinementBaseAlgorithm.h:316</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa3c0d1d304ce9306859f39fdfa19f6aa"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">lar_content::TrackRefinementBaseAlgorithm::m_minHitFractionForHitRemoval</a></div><div class="ttdeci">float m_minHitFractionForHitRemoval</div><div class="ttdoc">The threshold fraction of hits to be removed from the cluster for hit removal to proceed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00312">TrackRefinementBaseAlgorithm.h:312</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a47fef26117a1203e30ea452565e56e31"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">lar_content::TrackRefinementBaseAlgorithm::m_maxHitDistanceFromCluster</a></div><div class="ttdeci">float m_maxHitDistanceFromCluster</div><div class="ttdoc">The threshold separation between a hit and cluster for the hit to be merged into the cluster...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00314">TrackRefinementBaseAlgorithm.h:314</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a2d8fdf0c22b9d440c4c55e30453c47c5"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">lar_content::TrackRefinementBaseAlgorithm::m_maxHitSeparationForConnectedCluster</a></div><div class="ttdeci">float m_maxHitSeparationForConnectedCluster</div><div class="ttdoc">The maximum separation between two adjacent (in z) hits in a connected cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00315">TrackRefinementBaseAlgorithm.h:315</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6b1509ebc13e6483b80f3dc4f7ef6a71"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">lar_content::TrackRefinementBaseAlgorithm::m_stableRegionClusterFraction</a></div><div class="ttdeci">float m_stableRegionClusterFraction</div><div class="ttdoc">The threshold fraction of fit contributing layers which defines the stable region. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00310">TrackRefinementBaseAlgorithm.h:310</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4d38366c2cd34aa389236895bcf8be7b"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">lar_content::TrackRefinementBaseAlgorithm::m_lineSegmentLength</a></div><div class="ttdeci">float m_lineSegmentLength</div><div class="ttdoc">The length of a track gap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00317">TrackRefinementBaseAlgorithm.h:317</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa15c7c206da85d9b9749d9066091c121"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">lar_content::TrackRefinementBaseAlgorithm::m_maxDistanceFromMainTrack</a></div><div class="ttdeci">float m_maxDistanceFromMainTrack</div><div class="ttdoc">The threshold distance for a hit to be added to the main track. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00313">TrackRefinementBaseAlgorithm.h:313</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6a6a82996f57ad1d3d0345fdf1bda049"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">lar_content::TrackRefinementBaseAlgorithm::m_microSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_microSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the microSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00308">TrackRefinementBaseAlgorithm.h:308</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a770a38cd0cf7d43462cddb3b5c3afbcc"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">lar_content::TrackRefinementBaseAlgorithm::m_mergePointMinCosAngleDeviation</a></div><div class="ttdeci">float m_mergePointMinCosAngleDeviation</div><div class="ttdoc">The threshold cos opening angle between the cluster local gradient and the associated cluster global ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00311">TrackRefinementBaseAlgorithm.h:311</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2f2c5ebf804384c93ed0a415439ce039"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::AddHitsToMainTrack </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pMainTrackCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pShowerTrackCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CaloHitList &amp;&#160;</td>
          <td class="paramname"><em>caloHitsToMerge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterAssociation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>remnantClusterList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the hits from a shower cluster that belong to the main track and add them into the main track cluster. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMainTrackCluster</td><td>the main track cluster </td></tr>
    <tr><td class="paramname">pShowerCluster</td><td>the input shower cluster </td></tr>
    <tr><td class="paramname">caloHitsToMerge</td><td>the list of calo hits to remove from the shower cluster </td></tr>
    <tr><td class="paramname">clusterAssociation</td><td>the clusterAssociation </td></tr>
    <tr><td class="paramname">remnantClusterList</td><td>the input list to store the remnant clusters </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00573">573</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;{</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// To ignore crossing CR muon or test beam tracks</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (((static_cast&lt;float&gt;(caloHitsToMerge.size()) / static_cast&lt;float&gt;(pShowerCluster-&gt;GetNCaloHits())) &lt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">m_minHitFractionForHitRemoval</a>) &amp;&amp;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        (<a class="code" href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ad25a3f6ab4539b67890161352e50bf1c">LArClusterHelper::GetLengthSquared</a>(pShowerCluster) &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a>))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (pShowerCluster-&gt;GetNCaloHits() == caloHitsToMerge.size())</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::MergeAndDeleteClusters(*<span class="keyword">this</span>, pMainTrackCluster, pShowerCluster));</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// Fragmentation initialisation</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    std::string originalListName, fragmentListName;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keyword">const</span> ClusterList originalClusterList(1, pShowerCluster);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    PANDORA_THROW_RESULT_IF(</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        STATUS_CODE_SUCCESS, !=, PandoraContentApi::InitializeFragmentation(*<span class="keyword">this</span>, originalClusterList, originalListName, fragmentListName));</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keyword">const</span> Cluster *pAboveCluster(<span class="keyword">nullptr</span>), *pBelowCluster(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> isVertical(std::fabs(clusterAssociation.GetConnectingLineDirection().GetX()) &lt; std::numeric_limits&lt;float&gt;::epsilon());</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> connectingLineGradient(</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        isVertical ? 0.f : clusterAssociation.GetConnectingLineDirection().GetZ() / clusterAssociation.GetConnectingLineDirection().GetX());</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> connectingLineIntercept(isVertical ? clusterAssociation.GetUpstreamMergePoint().GetX()</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                                   : clusterAssociation.GetUpstreamMergePoint().GetZ() -</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                         (connectingLineGradient * clusterAssociation.GetUpstreamMergePoint().GetX()));</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keyword">const</span> OrderedCaloHitList orderedCaloHitList(pShowerCluster-&gt;GetOrderedCaloHitList());</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> OrderedCaloHitList::value_type &amp;mapEntry : orderedCaloHitList)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : *mapEntry.second)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> isAnExtrapolatedHit(std::find(caloHitsToMerge.begin(), caloHitsToMerge.end(), pCaloHit) != caloHitsToMerge.end());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">if</span> (isAnExtrapolatedHit)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::RemoveFromCluster(*<span class="keyword">this</span>, pShowerCluster, pCaloHit));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::AddToCluster(*<span class="keyword">this</span>, pMainTrackCluster, pCaloHit));</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keyword">const</span> CartesianVector &amp;hitPosition(pCaloHit-&gt;GetPositionVector());</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> isAbove(((connectingLineGradient * hitPosition.GetX()) + connectingLineIntercept) &lt;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                   (isVertical ? hitPosition.GetX() : hitPosition.GetZ()));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="keyword">const</span> Cluster *&amp;pClusterToModify(isAbove ? pAboveCluster : pBelowCluster);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="keywordflow">if</span> (pClusterToModify)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::AddToCluster(*<span class="keyword">this</span>, pClusterToModify, pCaloHit));</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <a class="code" href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">PandoraContentApi::Cluster::Parameters</a> parameters;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    parameters.m_caloHitList.push_back(pCaloHit);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::Cluster::Create(*<span class="keyword">this</span>, parameters, pClusterToModify));</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    remnantClusterList.push_back(pClusterToModify);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::EndFragmentation(*<span class="keyword">this</span>, fragmentListName, originalListName));</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_ae18b897281503fcd8c3a0925fbaa47b4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">lar_content::TrackRefinementBaseAlgorithm::m_minClusterLength</a></div><div class="ttdeci">float m_minClusterLength</div><div class="ttdoc">The minimum length of a considered cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00307">TrackRefinementBaseAlgorithm.h:307</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa3c0d1d304ce9306859f39fdfa19f6aa"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">lar_content::TrackRefinementBaseAlgorithm::m_minHitFractionForHitRemoval</a></div><div class="ttdeci">float m_minHitFractionForHitRemoval</div><div class="ttdoc">The threshold fraction of hits to be removed from the cluster for hit removal to proceed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00312">TrackRefinementBaseAlgorithm.h:312</a></div></div>
<div class="ttc" id="crt__detsimalg__test_8cxx_html_a53bd0b5c76b5bae4277c01b9208521ba"><div class="ttname"><a href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">Parameters</a></div><div class="ttdeci">fhicl::Table&lt; sbnd::crt::CRTDetSimParams &gt; Parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/crt__detsimalg__test_8cxx_source.html#l00022">crt_detsimalg_test.cxx:22</a></div></div>
<div class="ttc" id="classlar__content_1_1LArClusterHelper_html_ad25a3f6ab4539b67890161352e50bf1c"><div class="ttname"><a href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ad25a3f6ab4539b67890161352e50bf1c">lar_content::LArClusterHelper::GetLengthSquared</a></div><div class="ttdeci">static float GetLengthSquared(const pandora::Cluster *const pCluster)</div><div class="ttdoc">Get length squared of cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d12/LArClusterHelper_8cc_source.html#l00065">LArClusterHelper.cc:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a04eb93f7a4dca2fb1cbdc679de32f29c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::AddToNearestCluster </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pClusterToMerge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pMainTrackCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::ClusterList *const&#160;</td>
          <td class="paramname"><em>pClusterList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a cluster to the nearest cluster satisfying separation distance thresholds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pClusterToMerge</td><td>the cluster to merge </td></tr>
    <tr><td class="paramname">pMainTrackCluster</td><td>the main track cluster </td></tr>
    <tr><td class="paramname">pClusterList</td><td>the list of all clusters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether cluster was added to a nearby cluster </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00668">668</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keyword">const</span> Cluster *pClosestCluster(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a>(std::numeric_limits&lt;float&gt;::max());</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pCluster : *pClusterList)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">if</span> (pCluster == pClusterToMerge)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> separationDistance(<a class="code" href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ab497c7920ac690eab1e4d195c6cb9e50">LArClusterHelper::GetClosestDistance</a>(pClusterToMerge, pCluster));</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (separationDistance &lt; <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a>)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">if</span> ((pCluster == pMainTrackCluster) &amp;&amp; (separationDistance &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">m_maxDistanceFromMainTrack</a>))</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            pClosestCluster = pCluster;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a> = separationDistance;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a> &lt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">m_maxHitDistanceFromCluster</a>)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::MergeAndDeleteClusters(*<span class="keyword">this</span>, pClosestCluster, pClusterToMerge));</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="namespaceana_1_1SBNOsc_html_a554dcefb3915564914a229ee77872470"><div class="ttname"><a href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">ana::SBNOsc::closestDistance</a></div><div class="ttdeci">double closestDistance(const TVector3 &amp;line0, const TVector3 &amp;line1, const TVector3 &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/sbnana_2sbnanalysis_2ana_2SBNOsc_2Utilities_8cxx_source.html#l00490">sbnana/sbnanalysis/ana/SBNOsc/Utilities.cxx:490</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a47fef26117a1203e30ea452565e56e31"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">lar_content::TrackRefinementBaseAlgorithm::m_maxHitDistanceFromCluster</a></div><div class="ttdeci">float m_maxHitDistanceFromCluster</div><div class="ttdoc">The threshold separation between a hit and cluster for the hit to be merged into the cluster...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00314">TrackRefinementBaseAlgorithm.h:314</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa15c7c206da85d9b9749d9066091c121"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">lar_content::TrackRefinementBaseAlgorithm::m_maxDistanceFromMainTrack</a></div><div class="ttdeci">float m_maxDistanceFromMainTrack</div><div class="ttdoc">The threshold distance for a hit to be added to the main track. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00313">TrackRefinementBaseAlgorithm.h:313</a></div></div>
<div class="ttc" id="classlar__content_1_1LArClusterHelper_html_ab497c7920ac690eab1e4d195c6cb9e50"><div class="ttname"><a href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ab497c7920ac690eab1e4d195c6cb9e50">lar_content::LArClusterHelper::GetClosestDistance</a></div><div class="ttdeci">static float GetClosestDistance(const pandora::ClusterList &amp;clusterList1, const pandora::ClusterList &amp;clusterList2)</div><div class="ttdoc">Get closest distance between clusters in a pair of cluster lists. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a27e7d86b5d81c6b2ab08b8d9b936594e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::AreExtrapolatedHitsGood </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterToCaloHitListMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterAssociation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform topological checks on the collected hits to ensure no gaps are present. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clusterToCaloHitListMap</td><td>the input map [parent cluster -&gt; list of hits which belong to the main track] </td></tr>
    <tr><td class="paramname">clusterAssociation</td><td>the clusterAssociation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the checks pass </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00188">188</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    CaloHitVector extrapolatedHitVector;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : clusterToCaloHitListMap)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        extrapolatedHitVector.insert(extrapolatedHitVector.begin(), entry.second.begin(), entry.second.end());</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// ATTN: Extrapolated hit checks require extrapolatedHitVector to be ordered from upstream -&gt; downstream merge point</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    std::sort(extrapolatedHitVector.begin(), extrapolatedHitVector.end(),</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        SortByDistanceAlongLine(clusterAssociation.GetUpstreamMergePoint(), clusterAssociation.GetConnectingLineDirection(), <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a>));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aacef8a8c0ae2df044b6ba48c2b3d8ab4">AreExtrapolatedHitsNearBoundaries</a>(extrapolatedHitVector, clusterAssociation))</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (clusterToCaloHitListMap.empty())</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ac9fac47ed7fb0d9c7248c87bf3adc7c3">IsTrackContinuous</a>(clusterAssociation, extrapolatedHitVector))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aade36d2016eb7138a1caf2d0f52053b9"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</a></div><div class="ttdeci">bool m_hitWidthMode</div><div class="ttdoc">Whether to consider the width of hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">TrackRefinementBaseAlgorithm.h:318</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aacef8a8c0ae2df044b6ba48c2b3d8ab4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aacef8a8c0ae2df044b6ba48c2b3d8ab4">lar_content::TrackRefinementBaseAlgorithm::AreExtrapolatedHitsNearBoundaries</a></div><div class="ttdeci">virtual bool AreExtrapolatedHitsNearBoundaries(const pandora::CaloHitVector &amp;extrapolatedHitVector, ClusterAssociation &amp;clusterAssociation) const =0</div><div class="ttdoc">Check the separation of the extremal extrapolated hits with the expected endpoints or...</div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_ac9fac47ed7fb0d9c7248c87bf3adc7c3"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ac9fac47ed7fb0d9c7248c87bf3adc7c3">lar_content::TrackRefinementBaseAlgorithm::IsTrackContinuous</a></div><div class="ttdeci">bool IsTrackContinuous(const ClusterAssociation &amp;clusterAssociation, const pandora::CaloHitVector &amp;extrapolatedCaloHitVector) const </div><div class="ttdoc">Check whether the extrapolatedCaloHitVector contains a continuous line of hits between the cluster me...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00221">TrackRefinementBaseAlgorithm.cc:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aacef8a8c0ae2df044b6ba48c2b3d8ab4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool lar_content::TrackRefinementBaseAlgorithm::AreExtrapolatedHitsNearBoundaries </td>
          <td>(</td>
          <td class="paramtype">const pandora::CaloHitVector &amp;&#160;</td>
          <td class="paramname"><em>extrapolatedHitVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterAssociation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the separation of the extremal extrapolated hits with the expected endpoints or, in the case of no hits, the clusterMergePoint themselves. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">extrapolatedHitVector</td><td>the extrapolated hit vector (ordered closest hit to the upstream merge point -&gt; furthest hit) </td></tr>
    <tr><td class="paramname">clusterAssociation</td><td>the clusterAssociation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the check passes </dd></dl>

<p>Implemented in <a class="el" href="../../d7/dda/classlar__content_1_1TrackMergeRefinementAlgorithm.html#ab5085fec56067b83017ff67830cea87a">lar_content::TrackMergeRefinementAlgorithm</a>.</p>

</div>
</div>
<a class="anchor" id="a98c47a414cf61023feff154b5ae49ae5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::DistanceInGap </td>
          <td>(</td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>upstreamPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>downstreamPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>connectingLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::DetectorGapList &amp;&#160;</td>
          <td class="paramname"><em>consideredGaps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the track length between two points that lies in gaps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upstreamPoint</td><td>the upstream point </td></tr>
    <tr><td class="paramname">downstreamPoint</td><td>the downstream point </td></tr>
    <tr><td class="paramname">connectingLine</td><td>the track direction </td></tr>
    <tr><td class="paramname">consideredGaps</td><td>the list of gaps to ignore </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00385">385</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keyword">const</span> CartesianVector &amp;lowerXPoint(upstreamPoint.GetX() &lt; downstreamPoint.GetX() ? upstreamPoint : downstreamPoint);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">const</span> CartesianVector &amp;higherXPoint(upstreamPoint.GetX() &lt; downstreamPoint.GetX() ? downstreamPoint : upstreamPoint);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> cosAngleToX(std::fabs(connectingLine.GetDotProduct(CartesianVector(1.f, 0.f, 0.f))));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> cosAngleToZ(std::fabs(connectingLine.GetDotProduct(CartesianVector(0.f, 0.f, 1.f))));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordtype">float</span> distanceInGaps(0.f);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">const</span> DetectorGapList detectorGapList(this-&gt;GetPandora().GetGeometry()-&gt;GetDetectorGapList());</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> DetectorGap *<span class="keyword">const</span> pDetectorGap : detectorGapList)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (std::find(consideredGaps.begin(), consideredGaps.end(), pDetectorGap) != consideredGaps.end())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keyword">const</span> LineGap *<span class="keyword">const</span> pLineGap(dynamic_cast&lt;const LineGap *&gt;(pDetectorGap));</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">if</span> (pLineGap)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keyword">const</span> LineGapType lineGapType(pLineGap-&gt;GetLineGapType());</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> (lineGapType == TPC_DRIFT_GAP)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordtype">float</span> xDistanceInGap(0.f);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartX() &gt; lowerXPoint.GetX()) &amp;&amp; (pLineGap-&gt;GetLineEndX() &lt; higherXPoint.GetX()))</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    xDistanceInGap = (pLineGap-&gt;GetLineEndX() - pLineGap-&gt;GetLineStartX());</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartX() &lt; lowerXPoint.GetX()) &amp;&amp; (pLineGap-&gt;GetLineEndX() &gt; lowerXPoint.GetX()))</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    xDistanceInGap = (pLineGap-&gt;GetLineEndX() - lowerXPoint.GetX());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartX() &lt; higherXPoint.GetX()) &amp;&amp; (pLineGap-&gt;GetLineEndX() &gt; higherXPoint.GetX()))</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    xDistanceInGap = (higherXPoint.GetX() - pLineGap-&gt;GetLineStartX());</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">if</span> (std::fabs(cosAngleToX) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_FAILURE);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                distanceInGaps += (xDistanceInGap / cosAngleToX);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                consideredGaps.push_back(pDetectorGap);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">if</span> ((lineGapType == TPC_WIRE_GAP_VIEW_U) || (lineGapType == TPC_WIRE_GAP_VIEW_V) || (lineGapType == TPC_WIRE_GAP_VIEW_W))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordtype">float</span> zDistanceInGap(0.f);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartZ() &gt; upstreamPoint.GetZ()) &amp;&amp; (pLineGap-&gt;GetLineEndZ() &lt; downstreamPoint.GetZ()))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    zDistanceInGap = pLineGap-&gt;GetLineEndZ() - pLineGap-&gt;GetLineStartZ();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartZ() &lt; upstreamPoint.GetZ()) &amp;&amp; (pLineGap-&gt;GetLineEndZ() &gt; upstreamPoint.GetZ()))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    zDistanceInGap = pLineGap-&gt;GetLineEndZ() - upstreamPoint.GetZ();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartZ() &lt; downstreamPoint.GetZ()) &amp;&amp; (pLineGap-&gt;GetLineEndZ() &gt; downstreamPoint.GetZ()))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    zDistanceInGap = downstreamPoint.GetZ() - pLineGap-&gt;GetLineStartZ();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="keywordflow">if</span> (std::fabs(cosAngleToZ) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_FAILURE);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                distanceInGaps += (zDistanceInGap / cosAngleToZ);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                consideredGaps.push_back(pDetectorGap);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">return</span> distanceInGaps;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57492730c68fc657af2ca71202ecd0f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::FragmentRemnantCluster </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pRemnantCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>fragmentedClusterList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fragment a cluster using simple hit separation logic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pRemnantCluster</td><td>the input remnant cluster to fragment </td></tr>
    <tr><td class="paramname">fragmentedClusterList</td><td>the input list to store the final remnant clusters </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00731">731</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;{</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// Fragmentation initialisation</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    std::string originalListName, fragmentListName;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keyword">const</span> ClusterList originalClusterList(1, pRemnantCluster);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    PANDORA_THROW_RESULT_IF(</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        STATUS_CODE_SUCCESS, !=, PandoraContentApi::InitializeFragmentation(*<span class="keyword">this</span>, originalClusterList, originalListName, fragmentListName));</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    ClusterList createdClusters;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">const</span> OrderedCaloHitList &amp;orderedCaloHitList(pRemnantCluster-&gt;GetOrderedCaloHitList());</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> OrderedCaloHitList::value_type &amp;mapEntry : orderedCaloHitList)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : *mapEntry.second)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keyword">const</span> Cluster *pClosestCluster(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">if</span> (!createdClusters.empty())</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <span class="keywordtype">float</span> <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a>(std::numeric_limits&lt;float&gt;::max());</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pCreatedCluster : createdClusters)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span> separationDistance(<a class="code" href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ab497c7920ac690eab1e4d195c6cb9e50">LArClusterHelper::GetClosestDistance</a>(pCaloHit-&gt;GetPositionVector(), pCreatedCluster));</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <span class="keywordflow">if</span> ((separationDistance &lt; <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a>) &amp;&amp; (separationDistance &lt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">m_maxHitDistanceFromCluster</a>))</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                        <a class="code" href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">closestDistance</a> = separationDistance;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        pClosestCluster = pCreatedCluster;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> (pClosestCluster)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::AddToCluster(*<span class="keyword">this</span>, pClosestCluster, pCaloHit));</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <a class="code" href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">PandoraContentApi::Cluster::Parameters</a> parameters;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                parameters.m_caloHitList.push_back(pCaloHit);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::Cluster::Create(*<span class="keyword">this</span>, parameters, pClosestCluster));</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                createdClusters.push_back(pClosestCluster);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// End fragmentation</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (createdClusters.empty())</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::EndFragmentation(*<span class="keyword">this</span>, originalListName, fragmentListName));</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        fragmentedClusterList.push_back(pRemnantCluster);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::EndFragmentation(*<span class="keyword">this</span>, fragmentListName, originalListName));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        fragmentedClusterList.insert(fragmentedClusterList.begin(), createdClusters.begin(), createdClusters.end());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div>
<div class="ttc" id="namespaceana_1_1SBNOsc_html_a554dcefb3915564914a229ee77872470"><div class="ttname"><a href="../../da/d73/namespaceana_1_1SBNOsc.html#a554dcefb3915564914a229ee77872470">ana::SBNOsc::closestDistance</a></div><div class="ttdeci">double closestDistance(const TVector3 &amp;line0, const TVector3 &amp;line1, const TVector3 &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d16/sbnana_2sbnanalysis_2ana_2SBNOsc_2Utilities_8cxx_source.html#l00490">sbnana/sbnanalysis/ana/SBNOsc/Utilities.cxx:490</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a47fef26117a1203e30ea452565e56e31"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">lar_content::TrackRefinementBaseAlgorithm::m_maxHitDistanceFromCluster</a></div><div class="ttdeci">float m_maxHitDistanceFromCluster</div><div class="ttdoc">The threshold separation between a hit and cluster for the hit to be merged into the cluster...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00314">TrackRefinementBaseAlgorithm.h:314</a></div></div>
<div class="ttc" id="crt__detsimalg__test_8cxx_html_a53bd0b5c76b5bae4277c01b9208521ba"><div class="ttname"><a href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">Parameters</a></div><div class="ttdeci">fhicl::Table&lt; sbnd::crt::CRTDetSimParams &gt; Parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/crt__detsimalg__test_8cxx_source.html#l00022">crt_detsimalg_test.cxx:22</a></div></div>
<div class="ttc" id="classlar__content_1_1LArClusterHelper_html_ab497c7920ac690eab1e4d195c6cb9e50"><div class="ttname"><a href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ab497c7920ac690eab1e4d195c6cb9e50">lar_content::LArClusterHelper::GetClosestDistance</a></div><div class="ttdeci">static float GetClosestDistance(const pandora::ClusterList &amp;clusterList1, const pandora::ClusterList &amp;clusterList2)</div><div class="ttdoc">Get closest distance between clusters in a pair of cluster lists. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac52f6b30f23e49b92813bb4e03dddaa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::GetClusterMergingCoordinates </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterMicroFitResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterMacroFitResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html">TwoDSlidingFitResult</a> &amp;&#160;</td>
          <td class="paramname"><em>associatedMacroFitResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>isEndUpstream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>clusterMergePosition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>clusterMergeDirection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the merging coordinate and direction for an input cluster with respect to an associated cluster. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clusterMicroFitResult</td><td>the local <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a> of the cluster </td></tr>
    <tr><td class="paramname">clusterMacroFitResult</td><td>the global <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a> of the cluster </td></tr>
    <tr><td class="paramname">associatedMacroFitReult</td><td>the global <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a> of the associated cluster </td></tr>
    <tr><td class="paramname">isEndUpstream</td><td>whether the sought cluster merge point is the upstream </td></tr>
    <tr><td class="paramname">clusterMergePosition</td><td>the merge position of the cluster </td></tr>
    <tr><td class="paramname">clusterMergeDirection</td><td>the merge direction of the cluster</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether it was possible to find a suitable merge position </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00069">69</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    CartesianVector clusterAverageDirection(0.f, 0.f, 0.f), associatedAverageDirection(0.f, 0.f, 0.f);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    clusterMacroFitResult.GetGlobalDirection(clusterMacroFitResult.GetLayerFitResultMap().begin()-&gt;second.GetGradient(), clusterAverageDirection);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    associatedMacroFitResult.GetGlobalDirection(associatedMacroFitResult.GetLayerFitResultMap().begin()-&gt;second.GetGradient(), associatedAverageDirection);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/de7/namespacelar__content.html#ac69b9f748ffe2918a4a0e46579b159d4">LayerFitResultMap</a> &amp;clusterMicroLayerFitResultMap(clusterMicroFitResult.GetLayerFitResultMap());</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> startLayer(isEndUpstream ? clusterMicroFitResult.GetMinLayer() : clusterMicroFitResult.GetMaxLayer());</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> endLayer(isEndUpstream ? clusterMicroFitResult.GetMaxLayer() : clusterMicroFitResult.GetMinLayer());</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> loopTerminationLayer(endLayer + (isEndUpstream ? 1 : -1));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> step(isEndUpstream ? 1 : -1);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// ATTN: Search for stable region for which the local layer gradient agrees well with associated cluster global gradient</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gradientStabilityWindow(std::ceil(clusterMicroLayerFitResultMap.size() * <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">m_stableRegionClusterFraction</a>));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> goodLayerCount(0);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    clusterMicroLayerFitResultMap.at(endLayer);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = startLayer; i != loopTerminationLayer; i += step)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> microIter(clusterMicroLayerFitResultMap.find(i));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (microIter == clusterMicroLayerFitResultMap.end())</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        CartesianVector microDirection(0.f, 0.f, 0.f);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        clusterMicroFitResult.GetGlobalDirection(microIter-&gt;second.GetGradient(), microDirection);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> cosDirectionOpeningAngle(microDirection.GetCosOpeningAngle(associatedAverageDirection));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span> (cosDirectionOpeningAngle &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">m_mergePointMinCosAngleDeviation</a>)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="comment">// ATTN: Set merge point and direction as that at the first layer in the stable region</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">if</span> (goodLayerCount == 0)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                clusterMergeDirection = clusterAverageDirection;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                PANDORA_THROW_RESULT_IF(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    STATUS_CODE_SUCCESS, !=, clusterMicroFitResult.GetGlobalFitPosition(microIter-&gt;second.GetL(), clusterMergePosition));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            ++goodLayerCount;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            goodLayerCount = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (goodLayerCount &gt; gradientStabilityWindow)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="comment">// ATTN: Abort merging process have not found a stable region</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> (i == endLayer)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6b1509ebc13e6483b80f3dc4f7ef6a71"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">lar_content::TrackRefinementBaseAlgorithm::m_stableRegionClusterFraction</a></div><div class="ttdeci">float m_stableRegionClusterFraction</div><div class="ttdoc">The threshold fraction of fit contributing layers which defines the stable region. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00310">TrackRefinementBaseAlgorithm.h:310</a></div></div>
<div class="ttc" id="namespacelar__content_html_ac69b9f748ffe2918a4a0e46579b159d4"><div class="ttname"><a href="../../db/de7/namespacelar__content.html#ac69b9f748ffe2918a4a0e46579b159d4">lar_content::LayerFitResultMap</a></div><div class="ttdeci">std::map&lt; int, LayerFitResult &gt; LayerFitResultMap</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d9f/LArTwoDSlidingFitObjects_8h_source.html#l00084">LArTwoDSlidingFitObjects.h:84</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a770a38cd0cf7d43462cddb3b5c3afbcc"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">lar_content::TrackRefinementBaseAlgorithm::m_mergePointMinCosAngleDeviation</a></div><div class="ttdeci">float m_mergePointMinCosAngleDeviation</div><div class="ttdoc">The threshold cos opening angle between the cluster local gradient and the associated cluster global ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00311">TrackRefinementBaseAlgorithm.h:311</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abcc955713431247230c5005be6f08681"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::GetHitsInBoundingBox </td>
          <td>(</td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>firstCorner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>secondCorner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::ClusterList *const&#160;</td>
          <td class="paramname"><em>pClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterToCaloHitListMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>unavailableProtectedClusters</em> = <code>pandora::ClusterList()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>distanceToLine</em> = <code>-1.f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the unprotected hits that are contained within a defined box with the option to apply a cut on the distance to the connecting line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstCorner</td><td>the position of one corner </td></tr>
    <tr><td class="paramname">secondCorner</td><td>the position of the opposite corner </td></tr>
    <tr><td class="paramname">pClusterList</td><td>the list of all clusters </td></tr>
    <tr><td class="paramname">clusterToCaloHitListMap</td><td>the output map [parent cluster -&gt; list of hits which belong to the main track] </td></tr>
    <tr><td class="paramname">unavailableProtectedClusters</td><td>the list of clusters whose hits are protected </td></tr>
    <tr><td class="paramname">distanceToLine</td><td>the maximum perpendicular distance of a collected hit from the connecting line </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00130">130</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> minX(std::min(firstCorner.GetX(), secondCorner.GetX())), maxX(std::max(firstCorner.GetX(), secondCorner.GetX()));</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> minZ(std::min(firstCorner.GetZ(), secondCorner.GetZ())), maxZ(std::max(firstCorner.GetZ(), secondCorner.GetZ()));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    CartesianVector connectingLineDirection(firstCorner - secondCorner);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    connectingLineDirection = connectingLineDirection.GetUnitVector();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pCluster : *pClusterList)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> (std::find(unavailableProtectedClusters.begin(), unavailableProtectedClusters.end(), pCluster) != unavailableProtectedClusters.end())</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keyword">const</span> OrderedCaloHitList &amp;orderedCaloHitList(pCluster-&gt;GetOrderedCaloHitList());</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> OrderedCaloHitList::value_type &amp;mapEntry : orderedCaloHitList)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : *mapEntry.second)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                CartesianVector hitPosition(<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a> ? <a class="code" href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#a8a9bef12ad5931fc5d2834805dfae895">LArHitWidthHelper::GetClosestPointToLine2D</a>(firstCorner, connectingLineDirection, pCaloHit)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                                           : pCaloHit-&gt;GetPositionVector());</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8230e136b3b76f02bd1c688da5320803">IsInBoundingBox</a>(minX, maxX, minZ, maxZ, hitPosition))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">if</span> (distanceToLine &gt; 0.f)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a698c1a1c033f4b418d84d8f44e830bc2">IsCloseToLine</a>(hitPosition, firstCorner, connectingLineDirection, distanceToLine))</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                clusterToCaloHitListMap[pCluster].push_back(pCaloHit);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aade36d2016eb7138a1caf2d0f52053b9"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</a></div><div class="ttdeci">bool m_hitWidthMode</div><div class="ttdoc">Whether to consider the width of hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">TrackRefinementBaseAlgorithm.h:318</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a698c1a1c033f4b418d84d8f44e830bc2"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a698c1a1c033f4b418d84d8f44e830bc2">lar_content::TrackRefinementBaseAlgorithm::IsCloseToLine</a></div><div class="ttdeci">bool IsCloseToLine(const pandora::CartesianVector &amp;hitPosition, const pandora::CartesianVector &amp;lineStart, const pandora::CartesianVector &amp;lineDirection, const float distanceToLine) const </div><div class="ttdoc">Check whether a hit is close to a line. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00178">TrackRefinementBaseAlgorithm.cc:178</a></div></div>
<div class="ttc" id="classlar__content_1_1LArHitWidthHelper_html_a8a9bef12ad5931fc5d2834805dfae895"><div class="ttname"><a href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#a8a9bef12ad5931fc5d2834805dfae895">lar_content::LArHitWidthHelper::GetClosestPointToLine2D</a></div><div class="ttdeci">static pandora::CartesianVector GetClosestPointToLine2D(const pandora::CartesianVector &amp;lineStart, const pandora::CartesianVector &amp;lineDirection, const pandora::CaloHit *const pCaloHit)</div><div class="ttdoc">Consider the hit width to find the closest position of a calo hit to a specified line. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/LArHitWidthHelper_8cc_source.html#l00281">LArHitWidthHelper.cc:281</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a8230e136b3b76f02bd1c688da5320803"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8230e136b3b76f02bd1c688da5320803">lar_content::TrackRefinementBaseAlgorithm::IsInBoundingBox</a></div><div class="ttdeci">bool IsInBoundingBox(const float minX, const float maxX, const float minZ, const float maxZ, const pandora::CartesianVector &amp;hitPosition) const </div><div class="ttdoc">check whether a hit is contained within a defined square region </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00170">TrackRefinementBaseAlgorithm.cc:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08f4d2c832e0c42cb6eed0f54d4827cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::GetTrackSegmentBoundaries </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterAssociation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::CartesianPointVector &amp;&#160;</td>
          <td class="paramname"><em>trackSegmentBoundaries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtain the segment boundaries of the connecting line to test whether extrapolated hits are continuous. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clusterAssociation</td><td>the clusterAssociation </td></tr>
    <tr><td class="paramname">trackSegmentBoundaries</td><td>the output vector of segment boundaries </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00275">275</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a> &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;TrackInEMShowerAlgorithm: Line segment length must be positive and nonzero&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">throw</span> STATUS_CODE_INVALID_PARAMETER;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">const</span> CartesianVector &amp;trackDirection(clusterAssociation.GetConnectingLineDirection());</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">float</span> trackLength((clusterAssociation.GetUpstreamMergePoint() - clusterAssociation.GetDownstreamMergePoint()).GetMagnitude());</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// ATTN: Consider the existence of gaps where no hits will be found</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    DetectorGapList consideredGaps;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    trackLength -= this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a98c47a414cf61023feff154b5ae49ae5">DistanceInGap</a>(</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        clusterAssociation.GetUpstreamMergePoint(), clusterAssociation.GetDownstreamMergePoint(), trackDirection, consideredGaps);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    consideredGaps.clear();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> fullSegments(std::floor(trackLength / <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a>));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (fullSegments == 0)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        trackSegmentBoundaries = {clusterAssociation.GetUpstreamMergePoint(), clusterAssociation.GetDownstreamMergePoint()};</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// ATTN: To handle final segment merge track remainder with preceding segment and if track remainder was more than half of the segment length split into two</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> lengthOfTrackRemainder(trackLength - (fullSegments * <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a>));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> splitFinalSegment(lengthOfTrackRemainder &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a> * 0.5f);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> numberOfBoundaries(fullSegments + (splitFinalSegment ? 2 : 1));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    CartesianVector segmentUpstreamBoundary(clusterAssociation.GetUpstreamMergePoint()), segmentDownstreamBoundary(segmentUpstreamBoundary);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a93eafc43207fee0e90e40313697588b1">RepositionIfInGap</a>(trackDirection, segmentUpstreamBoundary);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    trackSegmentBoundaries.push_back(segmentUpstreamBoundary);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; numberOfBoundaries; ++i)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> (i &lt; fullSegments)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            segmentDownstreamBoundary += trackDirection * <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> (splitFinalSegment)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                segmentDownstreamBoundary += trackDirection * (<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a> + lengthOfTrackRemainder) * 0.5f;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                segmentDownstreamBoundary += trackDirection * (<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a> + lengthOfTrackRemainder);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordtype">float</span> distanceInGap(this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a98c47a414cf61023feff154b5ae49ae5">DistanceInGap</a>(segmentUpstreamBoundary, segmentDownstreamBoundary, trackDirection, consideredGaps));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">while</span> (distanceInGap &gt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a93eafc43207fee0e90e40313697588b1">RepositionIfInGap</a>(trackDirection, segmentDownstreamBoundary);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            segmentDownstreamBoundary += trackDirection * distanceInGap;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            distanceInGap = this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a98c47a414cf61023feff154b5ae49ae5">DistanceInGap</a>(segmentUpstreamBoundary, segmentDownstreamBoundary, trackDirection, consideredGaps);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        trackSegmentBoundaries.push_back(segmentDownstreamBoundary);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a98c47a414cf61023feff154b5ae49ae5"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a98c47a414cf61023feff154b5ae49ae5">lar_content::TrackRefinementBaseAlgorithm::DistanceInGap</a></div><div class="ttdeci">float DistanceInGap(const pandora::CartesianVector &amp;upstreamPoint, const pandora::CartesianVector &amp;downstreamPoint, const pandora::CartesianVector &amp;connectingLine, pandora::DetectorGapList &amp;consideredGaps) const </div><div class="ttdoc">Calculate the track length between two points that lies in gaps. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00385">TrackRefinementBaseAlgorithm.cc:385</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a93eafc43207fee0e90e40313697588b1"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a93eafc43207fee0e90e40313697588b1">lar_content::TrackRefinementBaseAlgorithm::RepositionIfInGap</a></div><div class="ttdeci">void RepositionIfInGap(const pandora::CartesianVector &amp;mergeDirection, pandora::CartesianVector &amp;trackPoint) const </div><div class="ttdoc">Move an input position to the higher line gap edge if it lies within a gap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00341">TrackRefinementBaseAlgorithm.cc:341</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4d38366c2cd34aa389236895bcf8be7b"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">lar_content::TrackRefinementBaseAlgorithm::m_lineSegmentLength</a></div><div class="ttdeci">float m_lineSegmentLength</div><div class="ttdoc">The length of a track gap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00317">TrackRefinementBaseAlgorithm.h:317</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b42fb9ebad3f5773186acee170296ab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::InitialiseContainers </td>
          <td>(</td>
          <td class="paramtype">const ClusterList *&#160;</td>
          <td class="paramname"><em>pClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&#160;</td>
          <td class="paramname"><em>sortFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClusterVector &amp;&#160;</td>
          <td class="paramname"><em>clusterVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;&#160;</td>
          <td class="paramname"><em>slidingFitResultMapPair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00040">40</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> slidingFitPitch(<a class="code" href="../../df/df1/classlar__content_1_1LArGeometryHelper.html#a90a571d65107eedd480a692c166c5bfe">LArGeometryHelper::GetWireZPitch</a>(this-&gt;GetPandora()));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pCluster : *pClusterList)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ad25a3f6ab4539b67890161352e50bf1c">LArClusterHelper::GetLengthSquared</a>(pCluster) &lt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a> * <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a>)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <span class="keyword">const</span> TwoDSlidingFitResult microSlidingFitResult(pCluster, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">m_microSlidingFitWindow</a>, slidingFitPitch);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <span class="keyword">const</span> TwoDSlidingFitResult macroSlidingFitResult(pCluster, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">m_macroSlidingFitWindow</a>, slidingFitPitch);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            slidingFitResultMapPair.first-&gt;insert(TwoDSlidingFitResultMap::value_type(pCluster, microSlidingFitResult));</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            slidingFitResultMapPair.second-&gt;insert(TwoDSlidingFitResultMap::value_type(pCluster, macroSlidingFitResult));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            clusterVector.push_back(pCluster);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">catch</span> (<span class="keyword">const</span> StatusCodeException &amp;)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    std::sort(clusterVector.begin(), clusterVector.end(), sortFunction);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a8e26a391dad9e2a59be790c03fa323d2"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">lar_content::TrackRefinementBaseAlgorithm::m_macroSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_macroSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the macroSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00309">TrackRefinementBaseAlgorithm.h:309</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_ae18b897281503fcd8c3a0925fbaa47b4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">lar_content::TrackRefinementBaseAlgorithm::m_minClusterLength</a></div><div class="ttdeci">float m_minClusterLength</div><div class="ttdoc">The minimum length of a considered cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00307">TrackRefinementBaseAlgorithm.h:307</a></div></div>
<div class="ttc" id="classlar__content_1_1LArGeometryHelper_html_a90a571d65107eedd480a692c166c5bfe"><div class="ttname"><a href="../../df/df1/classlar__content_1_1LArGeometryHelper.html#a90a571d65107eedd480a692c166c5bfe">lar_content::LArGeometryHelper::GetWireZPitch</a></div><div class="ttdeci">static float GetWireZPitch(const pandora::Pandora &amp;pandora, const float maxWirePitchDiscrepancy=0.01)</div><div class="ttdoc">Return the wire pitch. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de8/LArGeometryHelper_8h_source.html#l00273">LArGeometryHelper.h:273</a></div></div>
<div class="ttc" id="classlar__content_1_1LArClusterHelper_html_ad25a3f6ab4539b67890161352e50bf1c"><div class="ttname"><a href="../../d8/d71/classlar__content_1_1LArClusterHelper.html#ad25a3f6ab4539b67890161352e50bf1c">lar_content::LArClusterHelper::GetLengthSquared</a></div><div class="ttdeci">static float GetLengthSquared(const pandora::Cluster *const pCluster)</div><div class="ttdoc">Get length squared of cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d12/LArClusterHelper_8cc_source.html#l00065">LArClusterHelper.cc:65</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6a6a82996f57ad1d3d0345fdf1bda049"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">lar_content::TrackRefinementBaseAlgorithm::m_microSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_microSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the microSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00308">TrackRefinementBaseAlgorithm.h:308</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8d1853c5dc6aa43d82732a0d7a8d26e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::InitialiseContainers </td>
          <td>(</td>
          <td class="paramtype">const pandora::ClusterList *&#160;</td>
          <td class="paramname"><em>pClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&#160;</td>
          <td class="paramname"><em>sortFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterVector &amp;&#160;</td>
          <td class="paramname"><em>clusterVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;&#160;</td>
          <td class="paramname"><em>slidingFitResultMapPair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fill the cluster vector and sliding fit maps with clusters that are determined to be track-like. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pClusterList</td><td>the list of input clusters </td></tr>
    <tr><td class="paramname">sortFunction</td><td>the sort class or function used to sort the clusterVector </td></tr>
    <tr><td class="paramname">clusterVector</td><td>the input vector to store clusters considered within the algorithm </td></tr>
    <tr><td class="paramname">slidingFitResultMapPair</td><td>the {micro, macro} pair of [cluster -&gt; <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a>] maps </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a698c1a1c033f4b418d84d8f44e830bc2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsCloseToLine </td>
          <td>(</td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>hitPosition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>lineStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>lineDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>distanceToLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a hit is close to a line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hitPosition</td><td>the position of the hit </td></tr>
    <tr><td class="paramname">lineStart</td><td>the start point of the line (can actually be any point on the line) </td></tr>
    <tr><td class="paramname">lineDirection</td><td>the unit vector of the line direction </td></tr>
    <tr><td class="paramname">distanceToLine</td><td>the definition of 'close'</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the hit is close to the line </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00178">178</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> transverseDistanceFromLine(lineDirection.GetCrossProduct(hitPosition - lineStart).GetMagnitude());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> (transverseDistanceFromLine &lt; distanceToLine);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc5af72ffcc18f890c94fc40a702cdfc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsClusterRemnantDisconnected </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pRemnantCluster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether a remnant cluster is considered to be disconnected and therefore should undergo further fragmentation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pRemnantCluster</td><td>the input remnant cluster</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the remnant cluster is disconnected </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00702">702</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (pRemnantCluster-&gt;GetNCaloHits() == 1)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keyword">const</span> OrderedCaloHitList &amp;orderedCaloHitList(pRemnantCluster-&gt;GetOrderedCaloHitList());</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keyword">const</span> CaloHit *pPreviousCaloHit(orderedCaloHitList.begin()-&gt;second-&gt;front());</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> OrderedCaloHitList::value_type &amp;mapEntry : orderedCaloHitList)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : *mapEntry.second)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">if</span> (pCaloHit == pPreviousCaloHit)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> separationDistanceSquared(pCaloHit-&gt;GetPositionVector().GetDistanceSquared(pPreviousCaloHit-&gt;GetPositionVector()));</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span> (separationDistanceSquared &gt; (<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">m_maxHitSeparationForConnectedCluster</a> * <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">m_maxHitSeparationForConnectedCluster</a>))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            pPreviousCaloHit = pCaloHit;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a2d8fdf0c22b9d440c4c55e30453c47c5"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">lar_content::TrackRefinementBaseAlgorithm::m_maxHitSeparationForConnectedCluster</a></div><div class="ttdeci">float m_maxHitSeparationForConnectedCluster</div><div class="ttdoc">The maximum separation between two adjacent (in z) hits in a connected cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00315">TrackRefinementBaseAlgorithm.h:315</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8230e136b3b76f02bd1c688da5320803"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsInBoundingBox </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>minX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>maxX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>minZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>maxZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>hitPosition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>check whether a hit is contained within a defined square region </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">minX</td><td>the minimum x coordinate of the square region </td></tr>
    <tr><td class="paramname">maxX</td><td>the maximum x coordinate of the square region </td></tr>
    <tr><td class="paramname">minZ</td><td>the minimum z coordinate of the square region </td></tr>
    <tr><td class="paramname">maxZ</td><td>the maximum z coordinate of the square region </td></tr>
    <tr><td class="paramname">hitPosition</td><td>the position of the hit</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the hit is contained within the square region </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00170">170</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> !((hitPosition.GetX() &lt; minX) || (hitPosition.GetX() &gt; maxX) || (hitPosition.GetZ() &lt; minZ) || (hitPosition.GetZ() &gt; maxZ));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a83bebe252d7bd8b1228a5b5f3cc35b84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsInLineSegment </td>
          <td>(</td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>lowerBoundary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>upperBoundary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether a position falls within a specified segment of the cluster connecting line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lowerBoundary</td><td>the lower boundary of the segment </td></tr>
    <tr><td class="paramname">upperBoundary</td><td>the upper boundary of the segment </td></tr>
    <tr><td class="paramname">point</td><td>the position</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the position falls within segment </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00472">472</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> segmentBoundaryGradient = (-1.f) * (upperBoundary.GetX() - lowerBoundary.GetX()) / (upperBoundary.GetZ() - lowerBoundary.GetZ());</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> xPointOnUpperLine((point.GetZ() - upperBoundary.GetZ()) / segmentBoundaryGradient + upperBoundary.GetX());</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> xPointOnLowerLine((point.GetZ() - lowerBoundary.GetZ()) / segmentBoundaryGradient + lowerBoundary.GetX());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (std::fabs(xPointOnUpperLine - point.GetX()) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (std::fabs(xPointOnLowerLine - point.GetX()) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> ((point.GetX() &gt; xPointOnUpperLine) &amp;&amp; (point.GetX() &gt; xPointOnLowerLine))</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> ((point.GetX() &lt; xPointOnUpperLine) &amp;&amp; (point.GetX() &lt; xPointOnLowerLine))</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae2dd4a01d257348969f6a8dd0e64bb49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsNearBoundary </td>
          <td>(</td>
          <td class="paramtype">const pandora::CaloHit *const&#160;</td>
          <td class="paramname"><em>pCaloHit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>boundaryPosition2D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>boundaryTolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a hit is close to a boundary point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pCaloHit</td><td>the input calo hit </td></tr>
    <tr><td class="paramname">boundaryPosition2D</td><td>the position of the 2D boundary point </td></tr>
    <tr><td class="paramname">boundaryTolerance</td><td>the definition of close</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the check passes </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00212">212</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> distanceToBoundary(<a class="code" href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#ae28649969057467eed3e7635a4db7223">LArHitWidthHelper::GetClosestDistanceToPoint2D</a>(pCaloHit, boundaryPosition2D));</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> (distanceToBoundary &lt; boundaryTolerance);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArHitWidthHelper_html_ae28649969057467eed3e7635a4db7223"><div class="ttname"><a href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#ae28649969057467eed3e7635a4db7223">lar_content::LArHitWidthHelper::GetClosestDistanceToPoint2D</a></div><div class="ttdeci">static float GetClosestDistanceToPoint2D(const pandora::CaloHit *const pCaloHit, const pandora::CartesianVector &amp;point2D)</div><div class="ttdoc">Consider the hit width to find the smallest distance between a calo hit and a given point...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/LArHitWidthHelper_8cc_source.html#l00306">LArHitWidthHelper.cc:306</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9fac47ed7fb0d9c7248c87bf3adc7c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::IsTrackContinuous </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/d5e/classlar__content_1_1ClusterAssociation.html">ClusterAssociation</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterAssociation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CaloHitVector &amp;&#160;</td>
          <td class="paramname"><em>extrapolatedCaloHitVector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether the extrapolatedCaloHitVector contains a continuous line of hits between the cluster merge points. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clusterAssociation</td><td>the clusterAssociation </td></tr>
    <tr><td class="paramname">extrapolatedCaloHitVector</td><td>the vector of extrapolated calo hits</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the calo hits are continuous </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00221">221</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    CartesianPointVector trackSegmentBoundaries;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a08f4d2c832e0c42cb6eed0f54d4827cc">GetTrackSegmentBoundaries</a>(clusterAssociation, trackSegmentBoundaries);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (trackSegmentBoundaries.size() &lt; 2)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;TrackInEMShowerAlgorithm: Less than two track segment boundaries&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">throw</span> STATUS_CODE_NOT_ALLOWED;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> segmentsWithoutHits(0);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    CaloHitVector::const_iterator caloHitIter(extrapolatedCaloHitVector.begin());</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    CartesianVector hitPosition(<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a> ? <a class="code" href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#a8a9bef12ad5931fc5d2834805dfae895">LArHitWidthHelper::GetClosestPointToLine2D</a>(clusterAssociation.GetUpstreamMergePoint(),</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                                     clusterAssociation.GetConnectingLineDirection(), *caloHitIter)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                               : (*caloHitIter)-&gt;GetPositionVector());</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; (trackSegmentBoundaries.size() - 1); ++i)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span> (caloHitIter == extrapolatedCaloHitVector.end())</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            ++segmentsWithoutHits;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span> (segmentsWithoutHits &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">m_maxTrackGaps</a>)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hitsInSegment(0);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">while</span> (this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a83bebe252d7bd8b1228a5b5f3cc35b84">IsInLineSegment</a>(trackSegmentBoundaries.at(i), trackSegmentBoundaries.at(i + 1), hitPosition))</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            ++hitsInSegment;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            ++caloHitIter;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">if</span> (caloHitIter == extrapolatedCaloHitVector.end())</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            hitPosition = <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a> ? <a class="code" href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#a8a9bef12ad5931fc5d2834805dfae895">LArHitWidthHelper::GetClosestPointToLine2D</a>(clusterAssociation.GetUpstreamMergePoint(),</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                               clusterAssociation.GetConnectingLineDirection(), *caloHitIter)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                         : (*caloHitIter)-&gt;GetPositionVector();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        segmentsWithoutHits = hitsInSegment ? 0 : segmentsWithoutHits + 1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (segmentsWithoutHits &gt; <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">m_maxTrackGaps</a>)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aade36d2016eb7138a1caf2d0f52053b9"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</a></div><div class="ttdeci">bool m_hitWidthMode</div><div class="ttdoc">Whether to consider the width of hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">TrackRefinementBaseAlgorithm.h:318</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a83bebe252d7bd8b1228a5b5f3cc35b84"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a83bebe252d7bd8b1228a5b5f3cc35b84">lar_content::TrackRefinementBaseAlgorithm::IsInLineSegment</a></div><div class="ttdeci">bool IsInLineSegment(const pandora::CartesianVector &amp;lowerBoundary, const pandora::CartesianVector &amp;upperBoundary, const pandora::CartesianVector &amp;point) const </div><div class="ttdoc">Whether a position falls within a specified segment of the cluster connecting line. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00472">TrackRefinementBaseAlgorithm.cc:472</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4bc73defb1407fd0470460234dd77b41"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">lar_content::TrackRefinementBaseAlgorithm::m_maxTrackGaps</a></div><div class="ttdeci">unsigned int m_maxTrackGaps</div><div class="ttdoc">The maximum number of graps allowed in the extrapolated hit vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00316">TrackRefinementBaseAlgorithm.h:316</a></div></div>
<div class="ttc" id="classlar__content_1_1LArHitWidthHelper_html_a8a9bef12ad5931fc5d2834805dfae895"><div class="ttname"><a href="../../d6/dbb/classlar__content_1_1LArHitWidthHelper.html#a8a9bef12ad5931fc5d2834805dfae895">lar_content::LArHitWidthHelper::GetClosestPointToLine2D</a></div><div class="ttdeci">static pandora::CartesianVector GetClosestPointToLine2D(const pandora::CartesianVector &amp;lineStart, const pandora::CartesianVector &amp;lineDirection, const pandora::CaloHit *const pCaloHit)</div><div class="ttdoc">Consider the hit width to find the closest position of a calo hit to a specified line. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d70/LArHitWidthHelper_8cc_source.html#l00281">LArHitWidthHelper.cc:281</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a08f4d2c832e0c42cb6eed0f54d4827cc"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a08f4d2c832e0c42cb6eed0f54d4827cc">lar_content::TrackRefinementBaseAlgorithm::GetTrackSegmentBoundaries</a></div><div class="ttdeci">void GetTrackSegmentBoundaries(const ClusterAssociation &amp;clusterAssociation, pandora::CartesianPointVector &amp;trackSegmentBoundaries) const </div><div class="ttdoc">Obtain the segment boundaries of the connecting line to test whether extrapolated hits are continuous...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00275">TrackRefinementBaseAlgorithm.cc:275</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aefa1dcb7f097daf166c861e6ceb63790"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::ProcessRemnantClusters </td>
          <td>(</td>
          <td class="paramtype">const pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>remnantClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pMainTrackCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::ClusterList *const&#160;</td>
          <td class="paramname"><em>pClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>createdClusters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the remnant clusters separating those that stradle the main track. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">remnantClusterList</td><td>the list of remnant clusters to process </td></tr>
    <tr><td class="paramname">pMainTrackCluster</td><td>the main track cluster </td></tr>
    <tr><td class="paramname">pClusterList</td><td>the list of all clusters </td></tr>
    <tr><td class="paramname">createdClusters</td><td>the input list to store the final remnant clusters </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00641">641</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    ClusterList fragmentedClusters;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pRemnantCluster : remnantClusterList)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#adc5af72ffcc18f890c94fc40a702cdfc">IsClusterRemnantDisconnected</a>(pRemnantCluster))</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a57492730c68fc657af2ca71202ecd0f6">FragmentRemnantCluster</a>(pRemnantCluster, fragmentedClusters);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            fragmentedClusters.push_back(pRemnantCluster);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pFragmentedCluster : fragmentedClusters)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span> ((pFragmentedCluster-&gt;GetNCaloHits() == 1) &amp;&amp; (this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a04eb93f7a4dca2fb1cbdc679de32f29c">AddToNearestCluster</a>(pFragmentedCluster, pMainTrackCluster, pClusterList)))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        createdClusters.push_back(pFragmentedCluster);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a04eb93f7a4dca2fb1cbdc679de32f29c"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a04eb93f7a4dca2fb1cbdc679de32f29c">lar_content::TrackRefinementBaseAlgorithm::AddToNearestCluster</a></div><div class="ttdeci">bool AddToNearestCluster(const pandora::Cluster *const pClusterToMerge, const pandora::Cluster *const pMainTrackCluster, const pandora::ClusterList *const pClusterList) const </div><div class="ttdoc">Add a cluster to the nearest cluster satisfying separation distance thresholds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00668">TrackRefinementBaseAlgorithm.cc:668</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_adc5af72ffcc18f890c94fc40a702cdfc"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#adc5af72ffcc18f890c94fc40a702cdfc">lar_content::TrackRefinementBaseAlgorithm::IsClusterRemnantDisconnected</a></div><div class="ttdeci">bool IsClusterRemnantDisconnected(const pandora::Cluster *const pRemnantCluster) const </div><div class="ttdoc">Whether a remnant cluster is considered to be disconnected and therefore should undergo further fragm...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00702">TrackRefinementBaseAlgorithm.cc:702</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a57492730c68fc657af2ca71202ecd0f6"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a57492730c68fc657af2ca71202ecd0f6">lar_content::TrackRefinementBaseAlgorithm::FragmentRemnantCluster</a></div><div class="ttdeci">void FragmentRemnantCluster(const pandora::Cluster *const pRemnantCluster, pandora::ClusterList &amp;fragmentedClusterList) const </div><div class="ttdoc">Fragment a cluster using simple hit separation logic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00731">TrackRefinementBaseAlgorithm.cc:731</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa19d19a9cb85f45975cfc7ea498ffd7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode lar_content::TrackRefinementBaseAlgorithm::ReadSettings </td>
          <td>(</td>
          <td class="paramtype">const pandora::TiXmlHandle&#160;</td>
          <td class="paramname"><em>xmlHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="../../d7/dda/classlar__content_1_1TrackMergeRefinementAlgorithm.html#afd5aed884a6b6ac4ce2309758c8af35e">lar_content::TrackMergeRefinementAlgorithm</a>.</p>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00823">823</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;{</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinClusterLength&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">m_minClusterLength</a>));</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MicroSlidingFitWindow&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">m_microSlidingFitWindow</a>));</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MacroSlidingFitWindow&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">m_macroSlidingFitWindow</a>));</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;StableRegionClusterFraction&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">m_stableRegionClusterFraction</a>));</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MergePointMinCosAngleDeviation&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">m_mergePointMinCosAngleDeviation</a>));</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinHitFractionForHitRemoval&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">m_minHitFractionForHitRemoval</a>));</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaxDistanceFromMainTrack&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">m_maxDistanceFromMainTrack</a>));</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaxHitDistanceFromCluster&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">m_maxHitDistanceFromCluster</a>));</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaxHitSeparationForConnectedCluster&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">m_maxHitSeparationForConnectedCluster</a>));</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaxTrackGaps&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">m_maxTrackGaps</a>));</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;LineSegmentLength&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a>));</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">m_lineSegmentLength</a> &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;TrackInEMShowerAlgorithm: Line segment length must be positive and nonzero&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">throw</span> STATUS_CODE_INVALID_PARAMETER;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;HitWidthMode&quot;</span>, <a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">m_hitWidthMode</a>));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a8e26a391dad9e2a59be790c03fa323d2"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a8e26a391dad9e2a59be790c03fa323d2">lar_content::TrackRefinementBaseAlgorithm::m_macroSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_macroSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the macroSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00309">TrackRefinementBaseAlgorithm.h:309</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aade36d2016eb7138a1caf2d0f52053b9"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aade36d2016eb7138a1caf2d0f52053b9">lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</a></div><div class="ttdeci">bool m_hitWidthMode</div><div class="ttdoc">Whether to consider the width of hits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">TrackRefinementBaseAlgorithm.h:318</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_ae18b897281503fcd8c3a0925fbaa47b4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#ae18b897281503fcd8c3a0925fbaa47b4">lar_content::TrackRefinementBaseAlgorithm::m_minClusterLength</a></div><div class="ttdeci">float m_minClusterLength</div><div class="ttdoc">The minimum length of a considered cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00307">TrackRefinementBaseAlgorithm.h:307</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4bc73defb1407fd0470460234dd77b41"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4bc73defb1407fd0470460234dd77b41">lar_content::TrackRefinementBaseAlgorithm::m_maxTrackGaps</a></div><div class="ttdeci">unsigned int m_maxTrackGaps</div><div class="ttdoc">The maximum number of graps allowed in the extrapolated hit vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00316">TrackRefinementBaseAlgorithm.h:316</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa3c0d1d304ce9306859f39fdfa19f6aa"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa3c0d1d304ce9306859f39fdfa19f6aa">lar_content::TrackRefinementBaseAlgorithm::m_minHitFractionForHitRemoval</a></div><div class="ttdeci">float m_minHitFractionForHitRemoval</div><div class="ttdoc">The threshold fraction of hits to be removed from the cluster for hit removal to proceed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00312">TrackRefinementBaseAlgorithm.h:312</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a47fef26117a1203e30ea452565e56e31"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a47fef26117a1203e30ea452565e56e31">lar_content::TrackRefinementBaseAlgorithm::m_maxHitDistanceFromCluster</a></div><div class="ttdeci">float m_maxHitDistanceFromCluster</div><div class="ttdoc">The threshold separation between a hit and cluster for the hit to be merged into the cluster...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00314">TrackRefinementBaseAlgorithm.h:314</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a2d8fdf0c22b9d440c4c55e30453c47c5"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a2d8fdf0c22b9d440c4c55e30453c47c5">lar_content::TrackRefinementBaseAlgorithm::m_maxHitSeparationForConnectedCluster</a></div><div class="ttdeci">float m_maxHitSeparationForConnectedCluster</div><div class="ttdoc">The maximum separation between two adjacent (in z) hits in a connected cluster. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00315">TrackRefinementBaseAlgorithm.h:315</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6b1509ebc13e6483b80f3dc4f7ef6a71"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6b1509ebc13e6483b80f3dc4f7ef6a71">lar_content::TrackRefinementBaseAlgorithm::m_stableRegionClusterFraction</a></div><div class="ttdeci">float m_stableRegionClusterFraction</div><div class="ttdoc">The threshold fraction of fit contributing layers which defines the stable region. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00310">TrackRefinementBaseAlgorithm.h:310</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a4d38366c2cd34aa389236895bcf8be7b"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a4d38366c2cd34aa389236895bcf8be7b">lar_content::TrackRefinementBaseAlgorithm::m_lineSegmentLength</a></div><div class="ttdeci">float m_lineSegmentLength</div><div class="ttdoc">The length of a track gap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00317">TrackRefinementBaseAlgorithm.h:317</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa15c7c206da85d9b9749d9066091c121"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa15c7c206da85d9b9749d9066091c121">lar_content::TrackRefinementBaseAlgorithm::m_maxDistanceFromMainTrack</a></div><div class="ttdeci">float m_maxDistanceFromMainTrack</div><div class="ttdoc">The threshold distance for a hit to be added to the main track. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00313">TrackRefinementBaseAlgorithm.h:313</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a6a6a82996f57ad1d3d0345fdf1bda049"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a6a6a82996f57ad1d3d0345fdf1bda049">lar_content::TrackRefinementBaseAlgorithm::m_microSlidingFitWindow</a></div><div class="ttdeci">unsigned int m_microSlidingFitWindow</div><div class="ttdoc">The sliding fit window used in the fits contained within the microSlidingFitResultMap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00308">TrackRefinementBaseAlgorithm.h:308</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_a770a38cd0cf7d43462cddb3b5c3afbcc"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a770a38cd0cf7d43462cddb3b5c3afbcc">lar_content::TrackRefinementBaseAlgorithm::m_mergePointMinCosAngleDeviation</a></div><div class="ttdeci">float m_mergePointMinCosAngleDeviation</div><div class="ttdoc">The threshold cos opening angle between the cluster local gradient and the associated cluster global ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00311">TrackRefinementBaseAlgorithm.h:311</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af87b67fe8bcca57ad0f6bb3fb2186ea4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::RemoveClusterFromContainers </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pClustertoRemove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterVector &amp;&#160;</td>
          <td class="paramname"><em>clusterVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;&#160;</td>
          <td class="paramname"><em>slidingFitResultMapPair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a cluster from the cluster vector and sliding fit maps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pClustertoRemove</td><td>the clusters to remove from the containers </td></tr>
    <tr><td class="paramname">clusterVector</td><td>the vector to store clusters considered within the algorithm </td></tr>
    <tr><td class="paramname">slidingFitResultMapPair</td><td>the {micro, macro} pair of [cluster -&gt; <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a>] maps </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00805">805</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;{</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keyword">const</span> TwoDSlidingFitResultMap::const_iterator microFitToDelete(slidingFitResultMapPair.first-&gt;find(pClusterToRemove));</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> (microFitToDelete != slidingFitResultMapPair.first-&gt;end())</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        slidingFitResultMapPair.first-&gt;erase(microFitToDelete);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keyword">const</span> TwoDSlidingFitResultMap::const_iterator macroFitToDelete(slidingFitResultMapPair.second-&gt;find(pClusterToRemove));</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">if</span> (macroFitToDelete != slidingFitResultMapPair.second-&gt;end())</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        slidingFitResultMapPair.second-&gt;erase(macroFitToDelete);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keyword">const</span> ClusterVector::const_iterator clusterToDelete(std::find(clusterVector.begin(), clusterVector.end(), pClusterToRemove));</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (clusterToDelete != clusterVector.end())</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        clusterVector.erase(clusterToDelete);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91be3f9f2049719d7491c9eb07eae129"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Cluster * lar_content::TrackRefinementBaseAlgorithm::RemoveOffAxisHitsFromTrack </td>
          <td>(</td>
          <td class="paramtype">const pandora::Cluster *const&#160;</td>
          <td class="paramname"><em>pCluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>splitPosition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>isEndUpstream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a3bc43d54aea0e340ef45412611d8fb72">ClusterToCaloHitListMap</a> &amp;&#160;</td>
          <td class="paramname"><em>clusterToCaloHitListMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>remnantClusterList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> &amp;&#160;</td>
          <td class="paramname"><em>microSlidingFitResultMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/de7/namespacelar__content.html#aa3693a8c27ea4a8376ef484e6e91f819">TwoDSlidingFitResultMap</a> &amp;&#160;</td>
          <td class="paramname"><em>macroSlidingFitResultMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove any hits in the upstream/downstream cluster that lie off of the main track axis (i.e. clustering errors) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pCluster</td><td>the input cluster </td></tr>
    <tr><td class="paramname">splitPosition</td><td>the position after which hits are considered for removal </td></tr>
    <tr><td class="paramname">isEndUpstream</td><td>whether the upstream end is to be refined </td></tr>
    <tr><td class="paramname">clusterToCaloHitListMap</td><td>the map [parent cluster -&gt; list of hits which belong to the main track] </td></tr>
    <tr><td class="paramname">remnantClusterList</td><td>the input list to store the remnant clusters </td></tr>
    <tr><td class="paramname">microSlidingFitResultMap</td><td>the mapping [cluster -&gt; <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a>] where fits correspond to local gradients </td></tr>
    <tr><td class="paramname">macroSlidingFitResultMap</td><td>the mapping [cluster -&gt; <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a>] where fits correspond to global cluster gradients</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address of the (possibly) modified cluster </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00496">496</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">float</span> rL(0.f), rT(0.f);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keyword">const</span> TwoDSlidingFitResult &amp;microFitResult(microSlidingFitResultMap.at(pCluster));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    microFitResult.GetLocalPosition(splitPosition, rL, rT);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">const</span> TwoDSlidingFitResult &amp;macroFitResult(macroSlidingFitResultMap.at(pCluster));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    CartesianVector averageDirection(0.f, 0.f, 0.f);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    macroFitResult.GetGlobalDirection(macroFitResult.GetLayerFitResultMap().begin()-&gt;second.GetGradient(), averageDirection);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> isVertical(std::fabs(averageDirection.GetX()) &lt; std::numeric_limits&lt;float&gt;::epsilon());</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> clusterGradient(isVertical ? 0.f : averageDirection.GetZ() / averageDirection.GetX());</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> clusterIntercept(isVertical ? splitPosition.GetX() : splitPosition.GetZ() - (clusterGradient * splitPosition.GetX()));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// Fragmentation initialisation</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    std::string originalListName, fragmentListName;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">const</span> ClusterList originalClusterList(1, pCluster);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    PANDORA_THROW_RESULT_IF(</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        STATUS_CODE_SUCCESS, !=, PandoraContentApi::InitializeFragmentation(*<span class="keyword">this</span>, originalClusterList, originalListName, fragmentListName));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keyword">const</span> Cluster *pMainTrackCluster(<span class="keyword">nullptr</span>), *pAboveCluster(<span class="keyword">nullptr</span>), *pBelowCluster(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keyword">const</span> OrderedCaloHitList &amp;orderedCaloHitList(pCluster-&gt;GetOrderedCaloHitList());</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> OrderedCaloHitList::value_type &amp;mapEntry : orderedCaloHitList)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : *mapEntry.second)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keyword">const</span> CartesianVector &amp;hitPosition(pCaloHit-&gt;GetPositionVector());</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordtype">float</span> thisL(0.f), thisT(0.f);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            microFitResult.GetLocalPosition(pCaloHit-&gt;GetPositionVector(), thisL, thisT);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordtype">bool</span> isAnExtrapolatedHit(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> extrapolatedCaloHitIter(clusterToCaloHitListMap.find(pCluster));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">if</span> (extrapolatedCaloHitIter != clusterToCaloHitListMap.end())</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                isAnExtrapolatedHit = std::find(extrapolatedCaloHitIter-&gt;second.begin(), extrapolatedCaloHitIter-&gt;second.end(), pCaloHit) !=</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                      extrapolatedCaloHitIter-&gt;second.end();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> isAbove(((clusterGradient * hitPosition.GetX()) + clusterIntercept) &lt; (isVertical ? hitPosition.GetX() : hitPosition.GetZ()));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> isToRemove(!isAnExtrapolatedHit &amp;&amp; (((thisL &lt; rL) &amp;&amp; isEndUpstream) || ((thisL &gt; rL) &amp;&amp; !isEndUpstream)));</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keyword">const</span> Cluster *&amp;pClusterToModify(isToRemove ? (isAbove ? pAboveCluster : pBelowCluster) : pMainTrackCluster);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">if</span> (pClusterToModify)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::AddToCluster(*<span class="keyword">this</span>, pClusterToModify, pCaloHit));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <a class="code" href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">PandoraContentApi::Cluster::Parameters</a> parameters;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                parameters.m_caloHitList.push_back(pCaloHit);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::Cluster::Create(*<span class="keyword">this</span>, parameters, pClusterToModify));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span> (pClusterToModify != pMainTrackCluster)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    remnantClusterList.push_back(pClusterToModify);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// End fragmentation</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (pAboveCluster || pBelowCluster)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::EndFragmentation(*<span class="keyword">this</span>, fragmentListName, originalListName));</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">return</span> pMainTrackCluster;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::EndFragmentation(*<span class="keyword">this</span>, originalListName, fragmentListName));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> pCluster;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div>
<div class="ttc" id="crt__detsimalg__test_8cxx_html_a53bd0b5c76b5bae4277c01b9208521ba"><div class="ttname"><a href="../../d1/d01/crt__detsimalg__test_8cxx.html#a53bd0b5c76b5bae4277c01b9208521ba">Parameters</a></div><div class="ttdeci">fhicl::Table&lt; sbnd::crt::CRTDetSimParams &gt; Parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/crt__detsimalg__test_8cxx_source.html#l00022">crt_detsimalg_test.cxx:22</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93eafc43207fee0e90e40313697588b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::RepositionIfInGap </td>
          <td>(</td>
          <td class="paramtype">const pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>mergeDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::CartesianVector &amp;&#160;</td>
          <td class="paramname"><em>trackPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move an input position to the higher line gap edge if it lies within a gap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mergeDirection</td><td>the direction of the track </td></tr>
    <tr><td class="paramname">trackPoint</td><td>the input position </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00341">341</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">const</span> DetectorGapList detectorGapList(this-&gt;GetPandora().GetGeometry()-&gt;GetDetectorGapList());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> DetectorGap *<span class="keyword">const</span> pDetectorGap : detectorGapList)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">const</span> LineGap *<span class="keyword">const</span> pLineGap(dynamic_cast&lt;const LineGap *&gt;(pDetectorGap));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> (pLineGap)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keyword">const</span> LineGapType lineGapType(pLineGap-&gt;GetLineGapType());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">if</span> (lineGapType == TPC_DRIFT_GAP)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartX() &lt; trackPoint.GetX()) &amp;&amp; (pLineGap-&gt;GetLineEndX() &gt; trackPoint.GetX()))</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <span class="keywordflow">if</span> (std::fabs(mergeDirection.GetX()) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                        <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_FAILURE);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span> gradient(mergeDirection.GetZ() / mergeDirection.GetX());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    trackPoint = CartesianVector(</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        pLineGap-&gt;GetLineEndX(), 0.f, trackPoint.GetZ() + (gradient * (pLineGap-&gt;GetLineEndX() - trackPoint.GetX())));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">if</span> ((lineGapType == TPC_WIRE_GAP_VIEW_U) || (lineGapType == TPC_WIRE_GAP_VIEW_V) || (lineGapType == TPC_WIRE_GAP_VIEW_W))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">if</span> ((pLineGap-&gt;GetLineStartZ() &lt; trackPoint.GetZ()) &amp;&amp; (pLineGap-&gt;GetLineEndZ() &gt; trackPoint.GetZ()))</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <span class="keywordflow">if</span> (std::fabs(mergeDirection.GetZ()) &lt; std::numeric_limits&lt;float&gt;::epsilon())</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_FAILURE);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span> gradient(mergeDirection.GetX() / mergeDirection.GetZ());</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    trackPoint = CartesianVector(</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                        trackPoint.GetX() + (gradient * (pLineGap-&gt;GetLineEndZ() - trackPoint.GetZ())), 0.f, pLineGap-&gt;GetLineEndZ());</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1d8e9cda5970e447ccd990eaced6b951"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual pandora::StatusCode lar_content::TrackRefinementBaseAlgorithm::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="../../d7/dda/classlar__content_1_1TrackMergeRefinementAlgorithm.html#aa4fc20068d9fdd50c3c43a9e2396a664">lar_content::TrackMergeRefinementAlgorithm</a>.</p>

</div>
</div>
<a class="anchor" id="abf6fca19fff0ff1a650021b0fecead89"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::UpdateContainers </td>
          <td>(</td>
          <td class="paramtype">const pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>clustersToAdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::ClusterList &amp;&#160;</td>
          <td class="paramname"><em>clustersToDelete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&#160;</td>
          <td class="paramname"><em>sortFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::ClusterVector &amp;&#160;</td>
          <td class="paramname"><em>clusterVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;&#160;</td>
          <td class="paramname"><em>slidingFitResultMapPair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove deleted clusters from the cluster vector and sliding fit maps and add in created clusters that are determined to be track-like. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clustersToAdd</td><td>the list of clusters to add to the containers </td></tr>
    <tr><td class="paramname">clustersToDelete</td><td>the list of clusters to remove from the containers </td></tr>
    <tr><td class="paramname">sortFunction</td><td>the sort class or function used to sort the clusterVector </td></tr>
    <tr><td class="paramname">clusterVector</td><td>the vector to store clusters considered within the algorithm </td></tr>
    <tr><td class="paramname">slidingFitResultMapPair</td><td>the {micro, macro} pair of [cluster -&gt; <a class="el" href="../../de/de3/classlar__content_1_1TwoDSlidingFitResult.html" title="TwoDSlidingFitResult class. ">TwoDSlidingFitResult</a>] maps </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6cd2f0340062bd8709c065c58754d192"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void lar_content::TrackRefinementBaseAlgorithm::UpdateContainers </td>
          <td>(</td>
          <td class="paramtype">const ClusterList &amp;&#160;</td>
          <td class="paramname"><em>clustersToAdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ClusterList &amp;&#160;</td>
          <td class="paramname"><em>clustersToDelete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&#160;</td>
          <td class="paramname"><em>sortFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClusterVector &amp;&#160;</td>
          <td class="paramname"><em>clusterVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#a33d1bea226f44a842dd2eb52027ba352">SlidingFitResultMapPair</a> &amp;&#160;</td>
          <td class="paramname"><em>slidingFitResultMapPair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00793">793</a> of file <a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">//ATTN: Very important to first delete pointers from containers</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> Cluster *<span class="keyword">const</span> pClusterToDelete : clustersToDelete)</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#af87b67fe8bcca57ad0f6bb3fb2186ea4">RemoveClusterFromContainers</a>(pClusterToDelete, clusterVector, slidingFitResultMapPair);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    this-&gt;<a class="code" href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa8d1853c5dc6aa43d82732a0d7a8d26e">InitialiseContainers</a>(&amp;clustersToAdd, sortFunction, clusterVector, slidingFitResultMapPair);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_aa8d1853c5dc6aa43d82732a0d7a8d26e"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#aa8d1853c5dc6aa43d82732a0d7a8d26e">lar_content::TrackRefinementBaseAlgorithm::InitialiseContainers</a></div><div class="ttdeci">void InitialiseContainers(const pandora::ClusterList *pClusterList, const T sortFunction, pandora::ClusterVector &amp;clusterVector, SlidingFitResultMapPair &amp;slidingFitResultMapPair) const </div><div class="ttdoc">Fill the cluster vector and sliding fit maps with clusters that are determined to be track-like...</div></div>
<div class="ttc" id="classlar__content_1_1TrackRefinementBaseAlgorithm_html_af87b67fe8bcca57ad0f6bb3fb2186ea4"><div class="ttname"><a href="../../d4/d7f/classlar__content_1_1TrackRefinementBaseAlgorithm.html#af87b67fe8bcca57ad0f6bb3fb2186ea4">lar_content::TrackRefinementBaseAlgorithm::RemoveClusterFromContainers</a></div><div class="ttdeci">void RemoveClusterFromContainers(const pandora::Cluster *const pClustertoRemove, pandora::ClusterVector &amp;clusterVector, SlidingFitResultMapPair &amp;slidingFitResultMapPair) const </div><div class="ttdoc">Remove a cluster from the cluster vector and sliding fit maps. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html#l00805">TrackRefinementBaseAlgorithm.cc:805</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aade36d2016eb7138a1caf2d0f52053b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool lar_content::TrackRefinementBaseAlgorithm::m_hitWidthMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to consider the width of hits. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00318">318</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4d38366c2cd34aa389236895bcf8be7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_lineSegmentLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The length of a track gap. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00317">317</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8e26a391dad9e2a59be790c03fa323d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lar_content::TrackRefinementBaseAlgorithm::m_macroSlidingFitWindow</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The sliding fit window used in the fits contained within the macroSlidingFitResultMap. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00309">309</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa15c7c206da85d9b9749d9066091c121"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_maxDistanceFromMainTrack</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold distance for a hit to be added to the main track. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00313">313</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a47fef26117a1203e30ea452565e56e31"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_maxHitDistanceFromCluster</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold separation between a hit and cluster for the hit to be merged into the cluster. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00314">314</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2d8fdf0c22b9d440c4c55e30453c47c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_maxHitSeparationForConnectedCluster</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum separation between two adjacent (in z) hits in a connected cluster. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00315">315</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4bc73defb1407fd0470460234dd77b41"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lar_content::TrackRefinementBaseAlgorithm::m_maxTrackGaps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum number of graps allowed in the extrapolated hit vector. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00316">316</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a770a38cd0cf7d43462cddb3b5c3afbcc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_mergePointMinCosAngleDeviation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold cos opening angle between the cluster local gradient and the associated cluster global gradient used to determine merge points. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00311">311</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6a6a82996f57ad1d3d0345fdf1bda049"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lar_content::TrackRefinementBaseAlgorithm::m_microSlidingFitWindow</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The sliding fit window used in the fits contained within the microSlidingFitResultMap. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00308">308</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae18b897281503fcd8c3a0925fbaa47b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_minClusterLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The minimum length of a considered cluster. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00307">307</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3c0d1d304ce9306859f39fdfa19f6aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_minHitFractionForHitRemoval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold fraction of hits to be removed from the cluster for hit removal to proceed. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00312">312</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6b1509ebc13e6483b80f3dc4f7ef6a71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lar_content::TrackRefinementBaseAlgorithm::m_stableRegionClusterFraction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold fraction of fit contributing layers which defines the stable region. </p>

<p>Definition at line <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html#l00310">310</a> of file <a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d1/d62/TrackRefinementBaseAlgorithm_8h_source.html">TrackRefinementBaseAlgorithm.h</a></li>
<li><a class="el" href="../../d7/d13/TrackRefinementBaseAlgorithm_8cc_source.html">TrackRefinementBaseAlgorithm.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
