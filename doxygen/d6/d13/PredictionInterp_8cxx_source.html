<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PredictionInterp.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_607631e62e9a0bd3594c73aa619e3f2e.html">sbnana</a></li><li class="navelem"><a class="el" href="../../dir_a5c37560a791aae8879036327be57c99.html">sbnana</a></li><li class="navelem"><a class="el" href="../../dir_305f101192e33e865c4c8e0d3c5c3dd2.html">CAFAna</a></li><li class="navelem"><a class="el" href="../../dir_148658a7d838dfa88677353eb88b8d19.html">Prediction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PredictionInterp.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d6/d13/PredictionInterp_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/df0/PredictionInterp_8h.html">sbnana/CAFAna/Prediction/PredictionInterp.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dbc/HistCache_8h.html">sbnana/CAFAna/Core/HistCache.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d8b/LoadFromFile_8h.html">sbnana/CAFAna/Core/LoadFromFile.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d68/Ratio_8h.html">sbnana/CAFAna/Core/Ratio.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/dcd/SystRegistry_8h.html">sbnana/CAFAna/Core/SystRegistry.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d84/sbnana_2sbnana_2CAFAna_2Core_2Utilities_8h.html">sbnana/CAFAna/Core/Utilities.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;TDirectory.h&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;TH2.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;TMatrixD.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;TObjString.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;TVectorD.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// For debug plots</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;TGraph.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;TCanvas.h&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;OscLib/IOscCalc.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d5b/MathUtil_8h.html">sbnana/CAFAna/Core/MathUtil.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d57/Loaders_8h.html">sbnana/CAFAna/Core/Loaders.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;malloc.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d9/dad/cosmictagger_8fcl.html#a9816817880cad9de914dd1e3a94b6483">ana</a></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a73c2ed9bdfde4d2c475e52d727f87dcb">   29</a></span>&#160;  <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6403cbce97350121cb8214310655cff0">PredictionInterp::PredictionInterp</a>(std::vector&lt;const ISyst*&gt; systs,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                     <a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* osc,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="../../df/d95/classana_1_1IPredictionGenerator.html">IPredictionGenerator</a>&amp; predGen,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                     <a class="code" href="../../d5/d54/classana_1_1Loaders.html">Loaders</a>&amp; loaders,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a>&amp; shiftMC,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                     <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9ef84eefbd2c9d747bcc1c8c534d2911">EMode_t</a> <a class="code" href="../../d4/d03/noise__ana_8cxx.html#a222d3b8ef60c65e6230c8dfb4c64a9b4">mode</a>)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    : fOscOrigin(osc ? osc-&gt;Copy() : 0),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      fBinning(0, {}, {}, 0, 0),</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d7/d63/namespaceana.html#a7e4d9eac350bec156a6d119f72f8c972">   37</a></span>&#160;      <a class="code" href="../../d7/d63/namespaceana.html#a7e4d9eac350bec156a6d119f72f8c972">fSplitBySign</a>(<a class="code" href="../../d4/d03/noise__ana_8cxx.html#a222d3b8ef60c65e6230c8dfb4c64a9b4">mode</a> == kSplitBySign)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst: systs){</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      ShiftedPreds sp;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      sp.systName = syst-&gt;ShortName();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> = -syst-&gt;PredInterpMaxNSigma(); <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> &lt;= +syst-&gt;PredInterpMaxNSigma(); ++<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a>){</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        sp.shifts.push_back(<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> sigma: sp.shifts){</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a> shiftHere = shiftMC;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        shiftHere.<a class="code" href="../../de/d09/classana_1_1SystShifts.html#a8df5182845e1b3b970f5b990ef286ba4">SetShift</a>(syst, sigma);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        sp.preds.push_back(predGen.Generate(loaders, shiftHere).release());</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      fPreds.emplace(syst, sp);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    } <span class="comment">// end for syst</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    fPredNom = predGen.Generate(loaders, shiftMC);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9a0676ada70c97784eeba531758d6251">   60</a></span>&#160;  <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9a0676ada70c97784eeba531758d6251">PredictionInterp::~PredictionInterp</a>()</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">//    for(auto it: fPreds) for(IPrediction* p: it.second.preds) delete p;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">//    delete fOscOrigin;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// It isn&#39;t really a unique ptr when we use PredictionInterpTemplates</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>.release();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  std::vector&lt;std::vector&lt;PredictionInterp::Coeffs&gt;&gt; <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#affa955c5763157585f9d9b67f1dbb533">PredictionInterp::</a></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#affa955c5763157585f9d9b67f1dbb533">   71</a></span>&#160;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#affa955c5763157585f9d9b67f1dbb533">  FitRatios</a>(<span class="keyword">const</span> std::vector&lt;double&gt;&amp; shifts,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">std::vector</a>&lt;std::unique_ptr&lt;TH1&gt;&gt;&amp; ratios)<span class="keyword"> const</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    assert(shifts.size() == ratios.size());</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    std::vector&lt;std::vector&lt;Coeffs&gt;&gt; ret;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> binMax = ratios[0]-&gt;GetNbinsX();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// Linear interpolation</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span>(ratios.size() == 2){</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> binIdx = 0; binIdx &lt; binMax+2; ++binIdx){</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        ret.push_back({});</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y1 = ratios[0]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = ratios[1]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        ret.back().emplace_back(0, 0, y2-y1, y1);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> binIdx = 0; binIdx &lt; binMax+2; ++binIdx){</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      ret.push_back({});</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="comment">// This is cubic interpolation. For each adjacent set of four points we</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment">// determine coefficients for a cubic which will be the curve between the</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// center two. We constrain the function to match the two center points</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// and to have the right mean gradient at them. This causes this patch to</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">// match smoothly with the next one along. The resulting function is</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="comment">// continuous and first and second differentiable. At the ends of the</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">// range we fit a quadratic instead with only one constraint on the</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// slope. The coordinate conventions are that point y1 sits at x=0 and y2</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">// at x=1. The matrices are simply the inverses of writing out the</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="comment">// constraints expressed above.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y1 = ratios[0]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = ratios[1]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y3 = ratios[2]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> v[3] = {y1, y2, (y3-y1)/2};</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a>[9] = { 1, -1,  1,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                             -2,  2, -1,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                              1,  0,  0};</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keyword">const</span> TVectorD res = TMatrixD(3, 3, m) * TVectorD(3, v);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        ret.back().emplace_back(0, res(0), res(1), res(2));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="comment">// We&#39;re assuming here that the shifts are separated by exactly 1 sigma.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> shiftIdx = 1; shiftIdx &lt; ratios.size()-2; ++shiftIdx){</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y0 = ratios[shiftIdx-1]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y1 = ratios[shiftIdx  ]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = ratios[shiftIdx+1]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y3 = ratios[shiftIdx+2]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> v[4] = {y1, y2, (y2-y0)/2, (y3-y1)/2};</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a>[16] = { 2, -2,  1,  1,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                              -3,  3, -2, -1,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                               0,  0,  1,  0,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                               1,  0,  0,  0};</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keyword">const</span> TVectorD res = TMatrixD(4, 4, m) * TVectorD(4, v);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ret.back().emplace_back(res(0), res(1), res(2), res(3));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      } <span class="comment">// end for shiftIdx</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a> = ratios.size()-3;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y0 = ratios[<a class="code" href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a>  ]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y1 = ratios[N+1]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = ratios[N+2]-&gt;GetBinContent(binIdx);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> v[3] = {y1, y2, (y2-y0)/2};</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a>[9] = {-1,  1, -1,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                              0,  0,  1,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                              1,  0,  0};</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keyword">const</span> TVectorD res = TMatrixD(3, 3, m) * TVectorD(3, v);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        ret.back().emplace_back(0, res(0), res(1), res(2));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    } <span class="comment">// end for binIdx</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">double</span> stride = -1;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; shifts.size()-1; ++i){</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> newStride = shifts[i+1]-shifts[i];</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      assert((stride &lt; 0 || fabs(stride-newStride) &lt; 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-3) &amp;&amp;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;             <span class="stringliteral">&quot;Variably-spaced syst templates are unsupported&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      stride = newStride;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// If the stride is actually not 1, need to rescale all the coefficients</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">for</span>(std::vector&lt;Coeffs&gt;&amp; cs: ret)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">for</span>(<a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html">Coeffs</a>&amp; c: cs){</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        c = <a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html">Coeffs</a>(c.a/<a class="code" href="../../d6/d72/namespaceutil.html#a51e536f1d793a874fa1e25c4012cd071">util::cube</a>(stride),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                   c.b/<a class="code" href="../../d6/d72/namespaceutil.html#a204cc1fffeab061e648e9d93b2488c44">util::sqr</a>(stride),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                   c.c/stride,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                   c.d);}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  std::vector&lt;std::vector&lt;PredictionInterp::Coeffs&gt;&gt; <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">PredictionInterp::</a></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">  167</a></span>&#160;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">  FitComponent</a>(<span class="keyword">const</span> std::vector&lt;double&gt;&amp; shifts,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;               <span class="keyword">const</span> std::vector&lt;IPrediction*&gt;&amp; preds,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;               <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;               <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;               <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;               <span class="keyword">const</span> std::string&amp; shortName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d5/d0f/classana_1_1IPrediction.html">IPrediction</a>* pNom = 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; shifts.size(); ++i){</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">if</span>(shifts[i] == 0) pNom = preds[i];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    assert(pNom);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// Do it this way rather than via fPredNom so that systematics evaluated</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// relative to some alternate nominal (eg Birks C where the appropriate</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// nominal is no-rock) can work.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> nom = pNom-&gt;<a class="code" href="../../d5/d0f/classana_1_1IPrediction.html#a3fdec7fb382930f3adb1e77819ff47f3">PredictComponent</a>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                flav, curr, sign);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    std::vector&lt;std::unique_ptr&lt;TH1&gt;&gt; ratios;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>: preds){</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      ratios.emplace_back(<a class="code" href="../../d2/d53/classana_1_1Ratio.html">Ratio</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>-&gt;PredictComponent(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                    flav, curr, sign),</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                nom).ToTH1());</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="comment">// Check none of the ratio values is utterly crazy</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      std::unique_ptr&lt;TH1&gt;&amp; <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> = ratios.back();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; r-&gt;GetNbinsX()+2; ++i){</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a> = r-&gt;GetBinContent(i);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span>(y &gt; 500){</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;          <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;PredictionInterp: WARNING, ratio in bin &quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; y</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; for &#39;&quot;</span> &lt;&lt; shortName &lt;&lt; <span class="stringliteral">&quot;&#39;. Ignoring.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;          r-&gt;SetBinContent(i, 1);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#affa955c5763157585f9d9b67f1dbb533">FitRatios</a>(shifts, ratios);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">  209</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">PredictionInterp::InitFitsHelper</a>(<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html">ShiftedPreds</a>&amp; sp,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                        <a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">std::vector</a>&lt;<a class="code" href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">std::vector</a>&lt;std::vector&lt;Coeffs&gt;&gt;&gt;&amp; fits,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                        <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    fits.resize(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa2862583cf501a3cc08a1aad46bde3526">kNCoeffTypes</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    fits[<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daaa175e58e736949b83285ca4604fb5a6c">kNueApp</a>]   = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">FitComponent</a>(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eac2c4cb8edc58823ef704c6a662aa8bd5">Flavors::kNuMuToNuE</a>,  <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">Current::kCC</a>, sign, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    fits[<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daab40049c8d41a2c5ea717b0f52746c2cb">kNueSurv</a>]  = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">FitComponent</a>(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eaf6d7acd93b8a01cbaf2d7a86a7858124">Flavors::kNuEToNuE</a>,   <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">Current::kCC</a>, sign, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    fits[<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa3f1b5285b457dfa9804c6b2310081e85">kNumuSurv</a>] = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">FitComponent</a>(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea1df17cd909854db8a154cdc3034b9982">Flavors::kNuMuToNuMu</a>, <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">Current::kCC</a>, sign, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    fits[<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa55f492ee67276e71fa27bc0fa761cbce">kNC</a>]       = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">FitComponent</a>(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96">Flavors::kAll</a>, <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873a8dfd674732696fbd9dc4a9687be5038f">Current::kNC</a>, sign, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    fits[<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5">kOther</a>] = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">FitComponent</a>(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea5768244c735eb550f177f3b5792fbe94">Flavors::kNuEToNuMu</a> | <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eac46e2f894c19ddbaa26be2dae73f2970">Flavors::kAllNuTau</a>, <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">Current::kCC</a>, sign, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">  225</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">PredictionInterp::InitFits</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// No systs</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.empty()){</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">fBinning</a>.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">POT</a>() &gt; 0 || <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">fBinning</a>.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#ae8b1127ab83e3b04885cb3bc860dfabc">Livetime</a>() &gt; 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// Already initialized</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.empty() &amp;&amp; !<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.begin()-&gt;second.fits.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html">ShiftedPreds</a>&amp; sp = it.second;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">fSplitBySign</a>){</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">InitFitsHelper</a>(sp, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a28c270d025406ded99df85fac08fab10">fits</a>, <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea73b14c972ba9a5f8b6540a5f4c22b0b3">Sign::kNu</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">InitFitsHelper</a>(sp, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a6ee4f49152c01fc1388102e1085eb8eb">fitsNubar</a>, <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea0cbec9a5136e6831d34f333d485cfd1b">Sign::kAntiNu</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">InitFitsHelper</a>(sp, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a28c270d025406ded99df85fac08fab10">fits</a>, <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea905651cbf87809ccf829cd18901c36db">Sign::kBoth</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a164eced1f5f8e106611b02110ad83f19">nCoeffs</a> = sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a28c270d025406ded99df85fac08fab10">fits</a>[0][0].size();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Predict something, anything, so that we can know what binning to use</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">fBinning</a> = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;Predict(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">fBinning</a>.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a1157022d3bbb22eb37464f5405aebee0">Clear</a>();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a2d1175f2b38305f2415ab63e890c8da8">  253</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a2d1175f2b38305f2415ab63e890c8da8">PredictionInterp::SetOscSeed</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* oscSeed){</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a> = oscSeed-&gt;Copy();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>) it.second.fits.clear();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a10881a3e8ea47c983cdf8365368651b8">  259</a></span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a10881a3e8ea47c983cdf8365368651b8">PredictionInterp::Predict</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc)<span class="keyword"> const</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;Predict(calc);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9e8cd2dd3774723b3809e38ea4a19106">  265</a></span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9e8cd2dd3774723b3809e38ea4a19106">PredictionInterp::PredictComponent</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                              <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                              <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                              <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;PredictComponent(calc, flav, curr, sign);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#ad434a5eebf20bb19570349af26be48bc">  274</a></span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ad434a5eebf20bb19570349af26be48bc">PredictionInterp::PredictSyst</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a>&amp; <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">PredictComponentSyst</a>(calc, shift,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96">Flavors::kAll</a>,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873aff1e2714c16231b324adf67ba7eb0ec0">Current::kBoth</a>,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea905651cbf87809ccf829cd18901c36db">Sign::kBoth</a>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">PredictionInterp::</a></div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">  287</a></span>&#160;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">  ShiftSpectrum</a>(<span class="keyword">const</span> <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a>&amp; <a class="code" href="../../d0/dea/file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458da">CoeffsType</a> <a class="code" href="../../d9/da0/structtype.html">type</a>,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <span class="keywordtype">bool</span> nubar,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a>&amp; <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Save time by not shifting a spectrum that is all zeros anyway</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span>(s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">POT</a>() == 0 &amp;&amp; s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#ae8b1127ab83e3b04885cb3bc860dfabc">Livetime</a>() == 0) <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span>(nubar) assert(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">fSplitBySign</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// TODO histogram operations could be too slow</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    TH1D* <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a> = s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a43bbfb2f4d0e0d6c2ad9c984b34d4da9">ToTH1</a>(s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">POT</a>());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a> = h-&gt;GetNbinsX()+2;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    std::vector&lt;double&gt; corr(N,1.0);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst = it.first;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html">ShiftedPreds</a>&amp; sp = it.second;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keyword">auto</span>&amp; fits = nubar ? sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a6ee4f49152c01fc1388102e1085eb8eb">fitsNubar</a> : sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a28c270d025406ded99df85fac08fab10">fits</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> = shift.<a class="code" href="../../de/d09/classana_1_1SystShifts.html#a59165652e655dc5c9f43611a24e4a22a">GetShift</a>(syst);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span>(x == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordtype">int</span> shiftBin = (x - sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>[0])/sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a5b1c7fd9457fe9d886ac0b880a039b6f">Stride</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      shiftBin = <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">std::max</a>(0, shiftBin);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      shiftBin = std::min(shiftBin, sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a164eced1f5f8e106611b02110ad83f19">nCoeffs</a>-1);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      x -= sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>[shiftBin];</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> x_cube = <a class="code" href="../../d6/d72/namespaceutil.html#a51e536f1d793a874fa1e25c4012cd071">util::cube</a>(x);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> x_sqr = <a class="code" href="../../d6/d72/namespaceutil.html#a204cc1fffeab061e648e9d93b2488c44">util::sqr</a>(x);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> = 0; <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> &lt; <a class="code" href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a>; ++<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>){</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">// Uncomment to debug crashes in this function</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// assert(type &lt; fits.size());</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// assert(n &lt; sp.fits[type].size());</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">// assert(shiftBin &lt; int(sp.fits[type][n].size()));</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html">Coeffs</a>&amp; f = fits[<a class="code" href="../../d0/d8f/runFilesFromSAM_8sh.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>][<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>][shiftBin];</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        corr[<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>] *= f.<a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#a5811ab6826c993604f49acb180320ab9">a</a>*x_cube + f.<a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#af15ed007ecc8b7adde1d0b66e43e2a3d">b</a>*x_sqr + f.<a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#ad99ea97bd79fa7829b664360e8e8dc71">c</a>*x + f.<a class="code" href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#ae253dc63b5fa1ed71611c9ce0668857a">d</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      } <span class="comment">// end for n</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="comment">// end for syst</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">double</span>* arr = h-&gt;GetArray();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> = 0; <a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> &lt; <a class="code" href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a>; ++<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>){</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      arr[<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>] *= <a class="code" href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">std::max</a>(corr[<a class="code" href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>], 0.);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a>(std::unique_ptr&lt;TH1D&gt;(h), s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a966d106cb269574fa2c38f84178aba7d">GetLabels</a>(), s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#aafd63214c0fd845bc90ed7bedf6029b5">GetBinnings</a>(), s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">POT</a>(), s.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#ae8b1127ab83e3b04885cb3bc860dfabc">Livetime</a>());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">PredictionInterp::</a></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">  345</a></span>&#160;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">  ShiftedComponent</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                   <span class="keyword">const</span> TMD5* hash,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                   <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a>&amp; <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                   <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                   <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                   <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                   <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458da">CoeffsType</a> <a class="code" href="../../d9/da0/structtype.html">type</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">fSplitBySign</a> &amp;&amp; sign == <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea905651cbf87809ccf829cd18901c36db">Sign::kBoth</a>){</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, flav, curr, <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea0cbec9a5136e6831d34f333d485cfd1b">Sign::kAntiNu</a>, type)+</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;              <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, flav, curr, <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea73b14c972ba9a5f8b6540a5f4c22b0b3">Sign::kNu</a>,     type));</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// Must be the base case of the recursion to use the cache. Otherwise we</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// can cache systematically shifted versions of our children, which is</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// wrong. Also, some calcs won&#39;t hash themselves.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> canCache = (hash != 0);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d96/structana_1_1PredictionInterp_1_1Key__t.html">Key_t</a> key = {flav, curr, sign};</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8627c22e56057e8e891ebe6eae7b141b">fNomCache</a>.find(key);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// Should the interpolation use the nubar fits?</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> nubar = (<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">fSplitBySign</a> &amp;&amp; sign == <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea0cbec9a5136e6831d34f333d485cfd1b">Sign::kAntiNu</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// We have the nominal for this exact combination of flav, curr, sign, calc</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// stored.  Shift it and return.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span>(canCache &amp;&amp; it != <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8627c22e56057e8e891ebe6eae7b141b">fNomCache</a>.end() &amp;&amp; it-&gt;second.hash == *hash){</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">ShiftSpectrum</a>(it-&gt;second.nom, type, nubar, shift);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// We need to compute the nominal again for whatever reason</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> nom = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;PredictComponent(calc, flav, curr, sign);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span>(canCache){</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// Insert into the cache if not already there, or update if there but</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// with old oscillation parameters.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span>(it == <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8627c22e56057e8e891ebe6eae7b141b">fNomCache</a>.end())</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8627c22e56057e8e891ebe6eae7b141b">fNomCache</a>.emplace(key, <a class="code" href="../../d8/de9/structana_1_1PredictionInterp_1_1Val__t.html">Val_t</a>({*hash, nom}));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        it-&gt;second = {*hash, nom};</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">ShiftSpectrum</a>(nom, type, nubar, shift);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">  391</a></span>&#160;  <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">PredictionInterp::PredictComponentSyst</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a>&amp; <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                                  <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                                  <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                                  <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="../../d9/dfa/classana_1_1Spectrum.html">Spectrum</a>&amp; ret = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">fBinning</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    ret.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a1157022d3bbb22eb37464f5405aebee0">Clear</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span>(ret.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">POT</a>()==0) ret.<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a76dd1fbee2d125d7725be31e4c509100">OverridePOT</a>(1e24);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Check that we&#39;re able to handle all the systs we were passed</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst: shift.<a class="code" href="../../de/d09/classana_1_1SystShifts.html#a67e36d5e3afc70e25deef65cedef8559">ActiveSysts</a>()){</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.find(syst) == <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.end()){</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">std::cerr</a> &lt;&lt; <span class="stringliteral">&quot;This PredictionInterp is not set up to handle the requested systematic: &quot;</span> &lt;&lt; syst-&gt;ShortName() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        abort();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    } <span class="comment">// end for syst</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keyword">const</span> TMD5* hash = calc ? calc-&gt;GetParamsHash() : 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span>(curr &amp; <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">Current::kCC</a>){</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eaf6d7acd93b8a01cbaf2d7a86a7858124">Flavors::kNuEToNuE</a>)    ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuEToNuE,    Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daab40049c8d41a2c5ea717b0f52746c2cb">kNueSurv</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea5768244c735eb550f177f3b5792fbe94">Flavors::kNuEToNuMu</a>)   ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuEToNuMu,   Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5">kOther</a>  );</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea3c24e9567ab45b987a88f481eb57dac1">Flavors::kNuEToNuTau</a>)  ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuEToNuTau,  Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5">kOther</a>  );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eac2c4cb8edc58823ef704c6a662aa8bd5">Flavors::kNuMuToNuE</a>)   ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuMuToNuE,   Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daaa175e58e736949b83285ca4604fb5a6c">kNueApp</a>  );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea1df17cd909854db8a154cdc3034b9982">Flavors::kNuMuToNuMu</a>)  ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuMuToNuMu,  Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa3f1b5285b457dfa9804c6b2310081e85">kNumuSurv</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span>(flav &amp; <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea243e1577afa5807282ef771009fbb27d">Flavors::kNuMuToNuTau</a>) ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, Flavors::kNuMuToNuTau, Current::kCC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5">kOther</a>   );</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span>(curr &amp; <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873a8dfd674732696fbd9dc4a9687be5038f">Current::kNC</a>){</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      assert(flav == <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96">Flavors::kAll</a>); <span class="comment">// Don&#39;t know how to calculate anything else</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      ret += <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ShiftedComponent</a>(calc, hash, shift, <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96">Flavors::kAll</a>, Current::kNC, sign, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa55f492ee67276e71fa27bc0fa761cbce">kNC</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keyword">delete</span> hash;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a63197ab2ac7515a56a61142a9e4c98a2">  436</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a63197ab2ac7515a56a61142a9e4c98a2">PredictionInterp::SaveTo</a>(TDirectory* <a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    TDirectory* tmp = gDirectory;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    dir-&gt;cd();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    TObjString(<span class="stringliteral">&quot;PredictionInterp&quot;</span>).Write(<span class="stringliteral">&quot;type&quot;</span>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;SaveTo(dir-&gt;mkdir(<span class="stringliteral">&quot;pred_nom&quot;</span>));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html">ShiftedPreds</a>&amp; sp = it.second;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>.size(); ++i){</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span>(!sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>[i]){</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Can&#39;t save a PredictionInterp after MinimizeMemory()&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          abort();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">preds</a>[i]-&gt;SaveTo(dir-&gt;mkdir(TString::Format(<span class="stringliteral">&quot;pred_%s_%+d&quot;</span>,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                                       sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">systName</a>.c_str(),</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                                       int(sp.<a class="code" href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">shifts</a>[i])).<a class="code" href="../../d4/ddc/structData.html">Data</a>()));</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      } <span class="comment">// end for i</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    } <span class="comment">// end for it</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="../../d7/d63/namespaceana.html#af11defa9aab6c8e5a83e3fe8cec9681f">ana::SaveTo</a>(*<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a>, dir-&gt;mkdir(<span class="stringliteral">&quot;osc_origin&quot;</span>));</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span>(!fPreds.empty()){</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      TH1F hSystNames(<span class="stringliteral">&quot;syst_names&quot;</span>, <span class="stringliteral">&quot;;Syst names&quot;</span>, fPreds.size(), 0, fPreds.size());</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordtype">int</span> binIdx = 1;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> it: fPreds){</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        hSystNames.GetXaxis()-&gt;SetBinLabel(binIdx++, it.second.systName.c_str());</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      hSystNames.Write(<span class="stringliteral">&quot;syst_names&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    TObjString split_sign = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">fSplitBySign</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    split_sign.Write(<span class="stringliteral">&quot;split_sign&quot;</span>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    tmp-&gt;cd();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a3e01bda74a0279f4851aa1534face9bd">  479</a></span>&#160;  std::unique_ptr&lt;PredictionInterp&gt; <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a3e01bda74a0279f4851aa1534face9bd">PredictionInterp::LoadFrom</a>(TDirectory* <a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    TObjString* tag = (TObjString*)dir-&gt;Get(<span class="stringliteral">&quot;type&quot;</span>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    assert(tag);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    assert(tag-&gt;GetString() == <span class="stringliteral">&quot;PredictionInterp&quot;</span> ||</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;           tag-&gt;GetString() == <span class="stringliteral">&quot;PredictionInterp2&quot;</span>); <span class="comment">// backwards compatibility</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    std::unique_ptr&lt;PredictionInterp&gt; ret(<span class="keyword">new</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html">PredictionInterp</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    LoadFromBody(dir, ret.get());</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    TObjString* split_sign = (TObjString*)dir-&gt;Get(<span class="stringliteral">&quot;split_sign&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// Can be missing from old files</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    ret-&gt;fSplitBySign = (split_sign &amp;&amp; split_sign-&gt;String() == <span class="stringliteral">&quot;yes&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordtype">void</span> PredictionInterp::LoadFromBody(TDirectory* <a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>, <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html">PredictionInterp</a>* ret,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                      std::vector&lt;const ISyst*&gt; veto)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    ret-&gt;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a> = <a class="code" href="../../d7/d63/namespaceana.html#a2696ca48a1e7118642a10f4ac1042d2c">ana::LoadFrom&lt;IPrediction&gt;</a>(dir-&gt;GetDirectory(<span class="stringliteral">&quot;pred_nom&quot;</span>));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    TH1* hSystNames = (TH1*)dir-&gt;Get(<span class="stringliteral">&quot;syst_names&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span>(hSystNames){</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> systIdx = 0; systIdx &lt; hSystNames-&gt;GetNbinsX(); ++systIdx){</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        ShiftedPreds sp;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        sp.systName = hSystNames-&gt;GetXaxis()-&gt;GetBinLabel(systIdx+1);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst = <a class="code" href="../../de/dae/classana_1_1SystRegistry.html#a40ab58a2917b6b8a06f68cb85399e2ac">SystRegistry::ShortNameToSyst</a>(sp.systName);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">if</span>(std::find(veto.begin(), veto.end(), syst) != veto.end()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> = -3; <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> &lt;= +3; ++<a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>){</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          TDirectory* preddir = dir-&gt;GetDirectory(TString::Format(<span class="stringliteral">&quot;pred_%s_%+d&quot;</span>, sp.systName.c_str(), <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>).<a class="code" href="../../d4/ddc/structData.html">Data</a>());</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          <span class="keywordflow">if</span>(!preddir) <span class="keywordflow">continue</span>; <span class="comment">// Can happen for genie systs</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <a class="code" href="../../d5/d0f/classana_1_1IPrediction.html">IPrediction</a>* pred = <a class="code" href="../../d7/d63/namespaceana.html#a2696ca48a1e7118642a10f4ac1042d2c">ana::LoadFrom&lt;IPrediction&gt;</a>(preddir).release();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          sp.shifts.push_back(<a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          sp.preds.push_back(pred);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        } <span class="comment">// end for shift</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        ret-&gt;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.emplace(syst, sp);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      } <span class="comment">// end for systIdx</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    } <span class="comment">// end if hSystNames</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    ret-&gt;<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">fOscOrigin</a> = ana::LoadFrom&lt;osc::IOscCalc&gt;(dir-&gt;GetDirectory(<span class="stringliteral">&quot;osc_origin&quot;</span>)).release();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a298268662848b80156687a26886c10c5">  531</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a298268662848b80156687a26886c10c5">PredictionInterp::MinimizeMemory</a>()</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    std::set&lt;IPrediction*&gt; todel;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      std::vector&lt;IPrediction*&gt;&amp; preds = it.second.preds;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; preds.size(); ++i){</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span>(preds[i] != <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>.get()){</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          todel.insert(preds[i]);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          preds[i] = 0;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="../../d5/d0f/classana_1_1IPrediction.html">IPrediction</a>* <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>: todel) <span class="keyword">delete</span> <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// We probably just freed up a lot of memory, but malloc by default hangs</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// on to all of it as cache.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">    #ifndef DARWINBUILD</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor"></span>    malloc_trim(0);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a67447009d0d2ccbf8352db95fa30d7b8">  556</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a67447009d0d2ccbf8352db95fa30d7b8">PredictionInterp::DebugPlot</a>(<span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                   <a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                   <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                   <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                   <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="../../df/dc0/classana_1_1DontAddDirectory.html">DontAddDirectory</a> guard;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.find(syst);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span>(it == <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>.end()){</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;PredictionInterp::DebugPlots(): &quot;</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                &lt;&lt; syst-&gt;<a class="code" href="../../d6/ddf/classana_1_1ISyst.html#a061845930f17ca8ef6fa490b571456da">ShortName</a>() &lt;&lt; <span class="stringliteral">&quot; not found&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    std::unique_ptr&lt;TH1&gt; nom(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;PredictComponent(calc, flav, curr, sign).ToTH1(18e20));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> nbins = nom-&gt;GetNbinsX();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    std::vector&lt;TGraph*&gt; curves(nbins);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    std::vector&lt;TGraph*&gt; points(nbins);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt;= 80; ++i){</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a> = .1*i-4;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a> ss(it-&gt;first, x);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      std::unique_ptr&lt;TH1&gt; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">PredictComponentSyst</a>(calc, ss, flav, curr, sign).ToTH1(18e20));</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = 0; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; nbins; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>){</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span>(i == 0){</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>] = <span class="keyword">new</span> TGraph;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>] = <span class="keyword">new</span> TGraph;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = h-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1)/nom-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span>(!std::isnan(ratio)) curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;SetPoint(curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;GetN(), x, ratio);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">else</span> curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;SetPoint(curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;GetN(), x, 1);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      } <span class="comment">// end for bin</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    } <span class="comment">// end for i (x)</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// As elswhere, to allow BirksC etc that need a different nominal to plot</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// right.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="../../d5/d0f/classana_1_1IPrediction.html">IPrediction</a>* pNom = 0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> shiftIdx = 0; shiftIdx &lt; it-&gt;second.shifts.size(); ++shiftIdx){</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">if</span>(it-&gt;second.shifts[shiftIdx] == 0) pNom = it-&gt;second.preds[shiftIdx];</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    assert(pNom);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    std::unique_ptr&lt;TH1&gt; hnom(pNom-&gt;<a class="code" href="../../d5/d0f/classana_1_1IPrediction.html#a3fdec7fb382930f3adb1e77819ff47f3">PredictComponent</a>(calc, flav, curr, sign).<a class="code" href="../../d9/dfa/classana_1_1Spectrum.html#a43bbfb2f4d0e0d6c2ad9c984b34d4da9">ToTH1</a>(18e20));</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> shiftIdx = 0; shiftIdx &lt; it-&gt;second.shifts.size(); ++shiftIdx){</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">if</span>(!it-&gt;second.preds[shiftIdx]) <span class="keywordflow">continue</span>; <span class="comment">// Probably MinimizeMemory()</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      std::unique_ptr&lt;TH1&gt; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>(it-&gt;second.preds[shiftIdx]-&gt;PredictComponent(calc, flav, curr, sign).ToTH1(18e20));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = 0; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; nbins; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>){</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1)/hnom-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span>(!std::isnan(ratio)) points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;SetPoint(points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;GetN(), it-&gt;second.shifts[shiftIdx], ratio);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">else</span> points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;SetPoint(points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;GetN(), it-&gt;second.shifts[shiftIdx], 1);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    } <span class="comment">// end for shiftIdx</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordtype">int</span> nx = int(sqrt(nbins));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordtype">int</span> ny = int(sqrt(nbins));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span>(nx*ny &lt; nbins) ++nx;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span>(nx*ny &lt; nbins) ++ny;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    TCanvas* c = <span class="keyword">new</span> TCanvas;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    c-&gt;Divide(nx, ny);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = 0; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; nbins; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>){</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      c-&gt;cd(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      (<span class="keyword">new</span> TH2F(<a class="code" href="../../d7/d63/namespaceana.html#a9a10d1a70c4431c5ae2a504612a15e7b">UniqueName</a>().c_str(),</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                TString::Format(<span class="stringliteral">&quot;%s %g &lt; %s &lt; %g;Shift;Ratio&quot;</span>,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                it-&gt;second.systName.c_str(),</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                nom-&gt;GetXaxis()-&gt;GetBinLowEdge(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1),</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                nom-&gt;GetXaxis()-&gt;GetTitle(),</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                nom-&gt;GetXaxis()-&gt;GetBinUpEdge(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1)),</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                100, -4, +4, 100, .5, 1.5))-&gt;Draw();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      curves[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;Draw(<span class="stringliteral">&quot;l same&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;SetMarkerStyle(kFullDotMedium);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      points[<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>]-&gt;Draw(<span class="stringliteral">&quot;p same&quot;</span>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    } <span class="comment">// end for bin</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    c-&gt;cd(0);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#af7a8947a69ec56e5f332d1afc4947d8c">  644</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#af7a8947a69ec56e5f332d1afc4947d8c">PredictionInterp::DebugPlots</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                    <span class="keyword">const</span> std::string&amp; savePattern,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                    <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                    <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                    <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> save = !savePattern.empty();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> multiFile = savePattern.find(<span class="stringliteral">&quot;%s&quot;</span>) != std::string::npos;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span>(save &amp;&amp; !multiFile){</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keyword">new</span> TCanvas;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      gPad-&gt;Print((savePattern+<span class="stringliteral">&quot;[&quot;</span>).c_str());</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a67447009d0d2ccbf8352db95fa30d7b8">DebugPlot</a>(it.first, calc, flav, curr, sign);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span>(save){</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">if</span>(multiFile){</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          gPad-&gt;Print(TString::Format(savePattern.c_str(), it.second.systName.c_str()).<a class="code" href="../../d4/ddc/structData.html">Data</a>());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          gPad-&gt;Print(savePattern.c_str());</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    } <span class="comment">// end for it</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span>(save &amp;&amp; !multiFile){</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      gPad-&gt;Print((savePattern+<span class="stringliteral">&quot;]&quot;</span>).c_str());</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6c47df14981a08eb49393eb0ade75453">  677</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6c47df14981a08eb49393eb0ade75453">PredictionInterp::DebugPlotColz</a>(<span class="keyword">const</span> <a class="code" href="../../d6/ddf/classana_1_1ISyst.html">ISyst</a>* syst,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                       <a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                       <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                       <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                       <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">InitFits</a>();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    std::unique_ptr&lt;TH1&gt; nom(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">fPredNom</a>-&gt;PredictComponent(calc, flav, curr, sign).ToTH1(18e20));</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> nbins = nom-&gt;GetNbinsX();</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    TH2* h2 = <span class="keyword">new</span> TH2F(<span class="stringliteral">&quot;&quot;</span>, (syst-&gt;<a class="code" href="../../d6/ddf/classana_1_1ISyst.html#a11a0d93c747b212410cb276f9d8861d2">LatexName</a>()+<span class="stringliteral">&quot;;;#sigma&quot;</span>).c_str(),</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                       nbins, nom-&gt;GetXaxis()-&gt;GetXmin(), nom-&gt;GetXaxis()-&gt;GetXmax(),</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                       80, -4, +4);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    h2-&gt;GetXaxis()-&gt;SetTitle(nom-&gt;GetXaxis()-&gt;GetTitle());</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= 80; ++i){</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a> = h2-&gt;GetYaxis()-&gt;GetBinCenter(i);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../de/d09/classana_1_1SystShifts.html">SystShifts</a> ss(syst, y);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      std::unique_ptr&lt;TH1&gt; <a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>(<a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">PredictComponentSyst</a>(calc, ss, flav, curr, sign).ToTH1(18e20));</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> = 0; <a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a> &lt; nbins; ++<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>){</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = h-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1)/nom-&gt;GetBinContent(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>+1);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">if</span>(!isnan(ratio) &amp;&amp; !isinf(ratio))</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          h2-&gt;Fill(h2-&gt;GetXaxis()-&gt;GetBinCenter(<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">bin</a>), <a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a>, ratio);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      } <span class="comment">// end for bin</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    } <span class="comment">// end for i (x)</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    h2-&gt;Draw(<span class="stringliteral">&quot;colz&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    h2-&gt;SetMinimum(0.5);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    h2-&gt;SetMaximum(1.5);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="../../dd/d9a/classana_1_1PredictionInterp.html#ae5a2e9e46e516b806be7ba87797ccd87">  712</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#ae5a2e9e46e516b806be7ba87797ccd87">PredictionInterp::DebugPlotsColz</a>(<a class="code" href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::IOscCalc</a>* calc,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                        <span class="keyword">const</span> std::string&amp; savePattern,</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                        <a class="code" href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">Flavors::Flavors_t</a> flav,</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                        <a class="code" href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">Current::Current_t</a> curr,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                        <a class="code" href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">Sign::Sign_t</a> <a class="code" href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">sign</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> save = !savePattern.empty();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> multiFile = savePattern.find(<span class="stringliteral">&quot;%s&quot;</span>) != std::string::npos;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span>(save &amp;&amp; !multiFile){</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keyword">new</span> TCanvas;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      gPad-&gt;Print((savePattern+<span class="stringliteral">&quot;[&quot;</span>).c_str());</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span> it: <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">fPreds</a>){</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keyword">new</span> TCanvas;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../dd/d9a/classana_1_1PredictionInterp.html#a6c47df14981a08eb49393eb0ade75453">DebugPlotColz</a>(it.first, calc, flav, curr, sign);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">if</span>(save){</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span>(multiFile){</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          gPad-&gt;Print(TString::Format(savePattern.c_str(), it.second.systName.c_str()).<a class="code" href="../../d4/ddc/structData.html">Data</a>());</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          gPad-&gt;Print(savePattern.c_str());</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    } <span class="comment">// end for it</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span>(save &amp;&amp; !multiFile){</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      gPad-&gt;Print((savePattern+<span class="stringliteral">&quot;]&quot;</span>).c_str());</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;} <span class="comment">// namespace</span></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a9e8cd2dd3774723b3809e38ea4a19106"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a9e8cd2dd3774723b3809e38ea4a19106">ana::PredictionInterp::PredictComponent</a></div><div class="ttdeci">virtual Spectrum PredictComponent(osc::IOscCalc *calc, Flavors::Flavors_t flav, Current::Current_t curr, Sign::Sign_t sign) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00265">PredictionInterp.cxx:265</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_a5b1c7fd9457fe9d886ac0b880a039b6f"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a5b1c7fd9457fe9d886ac0b880a039b6f">ana::PredictionInterp::ShiftedPreds::Stride</a></div><div class="ttdeci">double Stride() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00150">PredictionInterp.h:150</a></div></div>
<div class="ttc" id="cosmictagger_8fcl_html_a9816817880cad9de914dd1e3a94b6483"><div class="ttname"><a href="../../d9/dad/cosmictagger_8fcl.html#a9816817880cad9de914dd1e3a94b6483">ana</a></div><div class="ttdeci">process_name flashTrackMatchBezier ana</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dad/cosmictagger_8fcl_source.html#l00062">cosmictagger.fcl:62</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_a43bbfb2f4d0e0d6c2ad9c984b34d4da9"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#a43bbfb2f4d0e0d6c2ad9c984b34d4da9">ana::Spectrum::ToTH1</a></div><div class="ttdeci">TH1D * ToTH1(double exposure, Color_t col=kBlack, Style_t style=kSolid, EExposureType expotype=kPOT, EBinType bintype=kBinContent) const </div><div class="ttdoc">Histogram made from this Spectrum, scaled to some exposure. </div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html">ana::PredictionInterp</a></div><div class="ttdoc">Implements systematic errors by interpolation between shifted templates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00022">PredictionInterp.h:22</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a9ef84eefbd2c9d747bcc1c8c534d2911"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a9ef84eefbd2c9d747bcc1c8c534d2911">ana::PredictionInterp::EMode_t</a></div><div class="ttdeci">EMode_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00025">PredictionInterp.h:25</a></div></div>
<div class="ttc" id="namespaceana_1_1Sign_html_a3d14716877899fcd1d2dc0f7aefce2aea0cbec9a5136e6831d34f333d485cfd1b"><div class="ttname"><a href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea0cbec9a5136e6831d34f333d485cfd1b">ana::Sign::kAntiNu</a></div><div class="ttdoc">Antineutrinos-only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00049">IPrediction.h:49</a></div></div>
<div class="ttc" id="classana_1_1SystShifts_html_a8df5182845e1b3b970f5b990ef286ba4"><div class="ttname"><a href="../../de/d09/classana_1_1SystShifts.html#a8df5182845e1b3b970f5b990ef286ba4">ana::SystShifts::SetShift</a></div><div class="ttdeci">void SetShift(const ISyst *syst, double shift)</div><div class="ttdoc">Shifts are 0=nominal, -1,+1 = 1 sigma shifts. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddf/SystShifts_8cxx_source.html#l00047">SystShifts.cxx:47</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a6a886a61070c4359b403eb7835f3d2ae"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a6a886a61070c4359b403eb7835f3d2ae">ana::PredictionInterp::InitFits</a></div><div class="ttdeci">void InitFits() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00225">PredictionInterp.cxx:225</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daa55f492ee67276e71fa27bc0fa761cbce"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa55f492ee67276e71fa27bc0fa761cbce">ana::PredictionInterp::kNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00102">PredictionInterp.h:102</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daa3f1b5285b457dfa9804c6b2310081e85"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa3f1b5285b457dfa9804c6b2310081e85">ana::PredictionInterp::kNumuSurv</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00102">PredictionInterp.h:102</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_ad434a5eebf20bb19570349af26be48bc"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#ad434a5eebf20bb19570349af26be48bc">ana::PredictionInterp::PredictSyst</a></div><div class="ttdeci">virtual Spectrum PredictSyst(osc::IOscCalc *calc, const SystShifts &amp;shift) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00274">PredictionInterp.cxx:274</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_ab5b5482a73903ef2e241ce44b747118e"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#ab5b5482a73903ef2e241ce44b747118e">ana::PredictionInterp::ShiftedPreds::systName</a></div><div class="ttdeci">std::string systName</div><div class="ttdoc">What systematic we&amp;#39;re interpolating. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00152">PredictionInterp.h:152</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a6673f03521899f7844189bcfd8ee5941"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a6673f03521899f7844189bcfd8ee5941">x</a></div><div class="ttdeci">process_name opflash particleana ie x</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00090">run_opflash_electron.fcl:90</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26eac2c4cb8edc58823ef704c6a662aa8bd5"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eac2c4cb8edc58823ef704c6a662aa8bd5">ana::Flavors::kNuMuToNuE</a></div><div class="ttdoc"> (&amp;#39;  appearance&amp;#39;) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00017">IPrediction.h:17</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a8d1a8a85a0b2a30cac1090ea528dd015"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a8d1a8a85a0b2a30cac1090ea528dd015">cerr</a></div><div class="ttdeci">BEGIN_PROLOG could also be cerr</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="structData_html"><div class="ttname"><a href="../../d4/ddc/structData.html">Data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd6/RangeForWrapper__test_8cc_source.html#l00073">RangeForWrapper_test.cc:73</a></div></div>
<div class="ttc" id="classana_1_1SystShifts_html"><div class="ttname"><a href="../../de/d09/classana_1_1SystShifts.html">ana::SystShifts</a></div><div class="ttdoc">Simple record of shifts applied to systematic parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d71/SystShifts_8h_source.html#l00016">SystShifts.h:16</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_a76dd1fbee2d125d7725be31e4c509100"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#a76dd1fbee2d125d7725be31e4c509100">ana::Spectrum::OverridePOT</a></div><div class="ttdeci">void OverridePOT(double newpot)</div><div class="ttdoc">DO NOT USE UNLESS YOU ARE 110% CERTAIN THERE ISN&amp;#39;T A BETTER WAY! </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00245">Spectrum.h:245</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a298268662848b80156687a26886c10c5"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a298268662848b80156687a26886c10c5">ana::PredictionInterp::MinimizeMemory</a></div><div class="ttdeci">void MinimizeMemory()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00531">PredictionInterp.cxx:531</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26eaf6d7acd93b8a01cbaf2d7a86a7858124"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eaf6d7acd93b8a01cbaf2d7a86a7858124">ana::Flavors::kNuEToNuE</a></div><div class="ttdoc"> (&amp;#39;beam &amp;#39;) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00014">IPrediction.h:14</a></div></div>
<div class="ttc" id="PredictionInterp_8h_html"><div class="ttname"><a href="../../d3/df0/PredictionInterp_8h.html">PredictionInterp.h</a></div></div>
<div class="ttc" id="classana_1_1Loaders_html"><div class="ttname"><a href="../../d5/d54/classana_1_1Loaders.html">ana::Loaders</a></div><div class="ttdoc">Collection of SpectrumLoaders for many configurations. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d57/Loaders_8h_source.html#l00012">Loaders.h:12</a></div></div>
<div class="ttc" id="classosc_1_1__IOscCalc_html"><div class="ttname"><a href="../../d6/d63/classosc_1_1__IOscCalc.html">osc::_IOscCalc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dba/Plots_8h_source.html#l00017">Plots.h:17</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26ea3c24e9567ab45b987a88f481eb57dac1"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea3c24e9567ab45b987a88f481eb57dac1">ana::Flavors::kNuEToNuTau</a></div><div class="ttdoc"> </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00016">IPrediction.h:16</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html">ana::PredictionInterp::ShiftedPreds</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00148">PredictionInterp.h:148</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458da"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458da">ana::PredictionInterp::CoeffsType</a></div><div class="ttdeci">CoeffsType</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00101">PredictionInterp.h:101</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daaa175e58e736949b83285ca4604fb5a6c"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daaa175e58e736949b83285ca4604fb5a6c">ana::PredictionInterp::kNueApp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00102">PredictionInterp.h:102</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_a6ee4f49152c01fc1388102e1085eb8eb"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a6ee4f49152c01fc1388102e1085eb8eb">ana::PredictionInterp::ShiftedPreds::fitsNubar</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; Coeffs &gt; &gt; &gt; fitsNubar</div><div class="ttdoc">Will be filled if signs are separated, otherwise not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00161">PredictionInterp.h:161</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Coeffs_html_a5811ab6826c993604f49acb180320ab9"><div class="ttname"><a href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#a5811ab6826c993604f49acb180320ab9">ana::PredictionInterp::Coeffs::a</a></div><div class="ttdeci">double a</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00115">PredictionInterp.h:115</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a63197ab2ac7515a56a61142a9e4c98a2"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a63197ab2ac7515a56a61142a9e4c98a2">ana::PredictionInterp::SaveTo</a></div><div class="ttdeci">virtual void SaveTo(TDirectory *dir) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00436">PredictionInterp.cxx:436</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a2d1175f2b38305f2415ab63e890c8da8"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a2d1175f2b38305f2415ab63e890c8da8">ana::PredictionInterp::SetOscSeed</a></div><div class="ttdeci">void SetOscSeed(osc::IOscCalc *oscSeed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00253">PredictionInterp.cxx:253</a></div></div>
<div class="ttc" id="pmttriggerproducer_8fcl_html_a527d89be40c3c20ca8162df059180fd9"><div class="ttname"><a href="../../d7/d5a/pmttriggerproducer_8fcl.html#a527d89be40c3c20ca8162df059180fd9">max</a></div><div class="ttdeci">BEGIN_PROLOG pmt_uncoated ideal single PE test page of manual option are OR or AND window for pmt trigger time start window for pmt trigger time end etc then what events all hists are saved for max</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5a/pmttriggerproducer_8fcl_source.html#l00023">pmttriggerproducer.fcl:23</a></div></div>
<div class="ttc" id="Ratio_8h_html"><div class="ttname"><a href="../../d6/d68/Ratio_8h.html">Ratio.h</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_affa955c5763157585f9d9b67f1dbb533"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#affa955c5763157585f9d9b67f1dbb533">ana::PredictionInterp::FitRatios</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Coeffs &gt; &gt; FitRatios(const std::vector&lt; double &gt; &amp;shifts, const std::vector&lt; std::unique_ptr&lt; TH1 &gt;&gt; &amp;ratios) const </div><div class="ttdoc">Find coefficients describing this set of shifts. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00071">PredictionInterp.cxx:71</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_a1157022d3bbb22eb37464f5405aebee0"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#a1157022d3bbb22eb37464f5405aebee0">ana::Spectrum::Clear</a></div><div class="ttdeci">void Clear()</div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_a164eced1f5f8e106611b02110ad83f19"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a164eced1f5f8e106611b02110ad83f19">ana::PredictionInterp::ShiftedPreds::nCoeffs</a></div><div class="ttdeci">int nCoeffs</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00156">PredictionInterp.h:156</a></div></div>
<div class="ttc" id="namespaceutil_html_a51e536f1d793a874fa1e25c4012cd071"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#a51e536f1d793a874fa1e25c4012cd071">util::cube</a></div><div class="ttdeci">T cube(T x)</div><div class="ttdoc">More efficient cube function than pow(x,3) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d5b/MathUtil_8h_source.html#l00026">MathUtil.h:26</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_ae5a2e9e46e516b806be7ba87797ccd87"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#ae5a2e9e46e516b806be7ba87797ccd87">ana::PredictionInterp::DebugPlotsColz</a></div><div class="ttdeci">void DebugPlotsColz(osc::IOscCalc *calc, const std::string &amp;savePattern=&quot;&quot;, Flavors::Flavors_t flav=Flavors::kAll, Current::Current_t curr=Current::kBoth, Sign::Sign_t sign=Sign::kBoth) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00712">PredictionInterp.cxx:712</a></div></div>
<div class="ttc" id="fcl__checks_8sh_html_ab3c44a76dd678c93affe68a1f8a980ab"><div class="ttname"><a href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a></div><div class="ttdeci">shift</div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddd/fcl__checks_8sh_source.html#l00026">fcl_checks.sh:26</a></div></div>
<div class="ttc" id="namespaceutil_html_a204cc1fffeab061e648e9d93b2488c44"><div class="ttname"><a href="../../d6/d72/namespaceutil.html#a204cc1fffeab061e648e9d93b2488c44">util::sqr</a></div><div class="ttdeci">T sqr(T x)</div><div class="ttdoc">More efficient square function than pow(x,2) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d5b/MathUtil_8h_source.html#l00023">MathUtil.h:23</a></div></div>
<div class="ttc" id="classana_1_1ISyst_html"><div class="ttname"><a href="../../d6/ddf/classana_1_1ISyst.html">ana::ISyst</a></div><div class="ttdoc">Encapsulate code to systematically shift a caf::StandardRecord. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d7c/ISyst_8h_source.html#l00014">ISyst.h:14</a></div></div>
<div class="ttc" id="classana_1_1ISyst_html_a061845930f17ca8ef6fa490b571456da"><div class="ttname"><a href="../../d6/ddf/classana_1_1ISyst.html#a061845930f17ca8ef6fa490b571456da">ana::ISyst::ShortName</a></div><div class="ttdeci">virtual std::string ShortName() const final</div><div class="ttdoc">The name printed out to the screen. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d7c/ISyst_8h_source.html#l00030">ISyst.h:30</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a55a56854d78e363691470c7297fde77c"><div class="ttname"><a href="../../d8/ddf/namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">gen_crt_frags.m</a></div><div class="ttdeci">tuple m</div><div class="ttdoc">now if test mode generate materials, CRT shell, world, gdml header else just generate CRT shell for u...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8c/gen__crt__frags_8py_source.html#l01347">gen_crt_frags.py:1347</a></div></div>
<div class="ttc" id="namespaceana_html_a7e4d9eac350bec156a6d119f72f8c972"><div class="ttname"><a href="../../d7/d63/namespaceana.html#a7e4d9eac350bec156a6d119f72f8c972">ana::fSplitBySign</a></div><div class="ttdeci">fSplitBySign(mode==kSplitBySign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00037">PredictionInterp.cxx:37</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html">ana::Spectrum</a></div><div class="ttdoc">Representation of a spectrum in any variable, with associated POT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00029">Spectrum.h:29</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Val__t_html"><div class="ttname"><a href="../../d8/de9/structana_1_1PredictionInterp_1_1Val__t.html">ana::PredictionInterp::Val_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00183">PredictionInterp.h:183</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_a512aa20fb28b8c00f3d290ba176b40e1"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#a512aa20fb28b8c00f3d290ba176b40e1">icarus::ns::util::bin</a></div><div class="ttdeci">constexpr details::BinObj&lt; T &gt; bin(T value)</div><div class="ttdoc">Returns a wrapper to print the specified data in binary format. </div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a8bdb7c25c1679340238e76d0439ac575"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a8bdb7c25c1679340238e76d0439ac575">ana::PredictionInterp::fPredNom</a></div><div class="ttdeci">std::unique_ptr&lt; IPrediction &gt; fPredNom</div><div class="ttdoc">The nominal prediction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00146">PredictionInterp.h:146</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a8627c22e56057e8e891ebe6eae7b141b"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a8627c22e56057e8e891ebe6eae7b141b">ana::PredictionInterp::fNomCache</a></div><div class="ttdeci">std::map&lt; Key_t, Val_t &gt; fNomCache</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00188">PredictionInterp.h:188</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="namespacelar_1_1dump_html_a71d4403edbac4d265176f8677118194f"><div class="ttname"><a href="../../db/dfa/namespacelar_1_1dump.html#a71d4403edbac4d265176f8677118194f">lar::dump::vector</a></div><div class="ttdeci">auto vector(Vector const &amp;v)</div><div class="ttdoc">Returns a manipulator which will print the specified array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da9/DumpUtils_8h_source.html#l00265">DumpUtils.h:265</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Coeffs_html_ae253dc63b5fa1ed71611c9ce0668857a"><div class="ttname"><a href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#ae253dc63b5fa1ed71611c9ce0668857a">ana::PredictionInterp::Coeffs::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00115">PredictionInterp.h:115</a></div></div>
<div class="ttc" id="namespaceana_1_1Current_html_a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad"><div class="ttname"><a href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873af9f37ae1299b9b253572ac1de34dc4ad">ana::Current::kCC</a></div><div class="ttdoc">Charged-current interactions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00038">IPrediction.h:38</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Coeffs_html_ad99ea97bd79fa7829b664360e8e8dc71"><div class="ttname"><a href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#ad99ea97bd79fa7829b664360e8e8dc71">ana::PredictionInterp::Coeffs::c</a></div><div class="ttdeci">double c</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00115">PredictionInterp.h:115</a></div></div>
<div class="ttc" id="namespaceana_1_1Current_html_a0284685bc4ae90572e7c9ac760ec6873aff1e2714c16231b324adf67ba7eb0ec0"><div class="ttname"><a href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873aff1e2714c16231b324adf67ba7eb0ec0">ana::Current::kBoth</a></div><div class="ttdoc">Interactions of both types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00041">IPrediction.h:41</a></div></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_a1e5aaaf25e8609a835e8c7c6fda71456"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#a1e5aaaf25e8609a835e8c7c6fda71456">y</a></div><div class="ttdeci">process_name opflash particleana ie ie y</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00091">run_opflash_electron.fcl:91</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a9a0676ada70c97784eeba531758d6251"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a9a0676ada70c97784eeba531758d6251">ana::PredictionInterp::~PredictionInterp</a></div><div class="ttdeci">virtual ~PredictionInterp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00060">PredictionInterp.cxx:60</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_aa92bb84920e56e9327d8d872d5a63e24"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#aa92bb84920e56e9327d8d872d5a63e24">ana::PredictionInterp::ShiftedPreds::shifts</a></div><div class="ttdeci">std::vector&lt; double &gt; shifts</div><div class="ttdoc">Shift values sampled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00153">PredictionInterp.h:153</a></div></div>
<div class="ttc" id="structtype_html"><div class="ttname"><a href="../../d9/da0/structtype.html">type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9e/ShowerProducedPtrsHolder_8hh_source.html#l00036">ShowerProducedPtrsHolder.hh:36</a></div></div>
<div class="ttc" id="LoadFromFile_8h_html"><div class="ttname"><a href="../../d3/d8b/LoadFromFile_8h.html">LoadFromFile.h</a></div></div>
<div class="ttc" id="SystRegistry_8h_html"><div class="ttname"><a href="../../d2/dcd/SystRegistry_8h.html">SystRegistry.h</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daab40049c8d41a2c5ea717b0f52746c2cb"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daab40049c8d41a2c5ea717b0f52746c2cb">ana::PredictionInterp::kNueSurv</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00102">PredictionInterp.h:102</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_afc3658177fb371064b6c7fcc30275f52"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#afc3658177fb371064b6c7fcc30275f52">ana::PredictionInterp::ShiftedPreds::preds</a></div><div class="ttdeci">std::vector&lt; IPrediction * &gt; preds</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00154">PredictionInterp.h:154</a></div></div>
<div class="ttc" id="Loaders_8h_html"><div class="ttname"><a href="../../d0/d57/Loaders_8h.html">Loaders.h</a></div></div>
<div class="ttc" id="MathUtil_8h_html"><div class="ttname"><a href="../../d4/d5b/MathUtil_8h.html">MathUtil.h</a></div></div>
<div class="ttc" id="classana_1_1SystShifts_html_a59165652e655dc5c9f43611a24e4a22a"><div class="ttname"><a href="../../de/d09/classana_1_1SystShifts.html#a59165652e655dc5c9f43611a24e4a22a">ana::SystShifts::GetShift</a></div><div class="ttdeci">double GetShift(const ISyst *syst) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddf/SystShifts_8cxx_source.html#l00056">SystShifts.cxx:56</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a4b9fcecfad75dcaead3b8a8e86d455a3"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a4b9fcecfad75dcaead3b8a8e86d455a3">ana::PredictionInterp::fBinning</a></div><div class="ttdeci">Spectrum fBinning</div><div class="ttdoc">Dummy spectrum to provide binning. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00170">PredictionInterp.h:170</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_a69bde2b9881b3c972ab9d50236f0d307"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#a69bde2b9881b3c972ab9d50236f0d307">ana::Spectrum::POT</a></div><div class="ttdeci">double POT() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00239">Spectrum.h:239</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_af7a8947a69ec56e5f332d1afc4947d8c"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#af7a8947a69ec56e5f332d1afc4947d8c">ana::PredictionInterp::DebugPlots</a></div><div class="ttdeci">void DebugPlots(osc::IOscCalc *calc, const std::string &amp;savePattern=&quot;&quot;, Flavors::Flavors_t flav=Flavors::kAll, Current::Current_t curr=Current::kBoth, Sign::Sign_t sign=Sign::kBoth) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00644">PredictionInterp.cxx:644</a></div></div>
<div class="ttc" id="classana_1_1Ratio_html"><div class="ttname"><a href="../../d2/d53/classana_1_1Ratio.html">ana::Ratio</a></div><div class="ttdoc">Represent the ratio between two spectra. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/Ratio_8h_source.html#l00008">Ratio.h:8</a></div></div>
<div class="ttc" id="namespaceana_1_1Sign_html_a3d14716877899fcd1d2dc0f7aefce2aea73b14c972ba9a5f8b6540a5f4c22b0b3"><div class="ttname"><a href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea73b14c972ba9a5f8b6540a5f4c22b0b3">ana::Sign::kNu</a></div><div class="ttdoc">Neutrinos-only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00048">IPrediction.h:48</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a3e01bda74a0279f4851aa1534face9bd"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a3e01bda74a0279f4851aa1534face9bd">ana::PredictionInterp::LoadFrom</a></div><div class="ttdeci">static std::unique_ptr&lt; PredictionInterp &gt; LoadFrom(TDirectory *dir)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00479">PredictionInterp.cxx:479</a></div></div>
<div class="ttc" id="namespaceana_1_1Sign_html_a3d14716877899fcd1d2dc0f7aefce2ae"><div class="ttname"><a href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2ae">ana::Sign::Sign_t</a></div><div class="ttdeci">Sign_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00047">IPrediction.h:47</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26ea1df17cd909854db8a154cdc3034b9982"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea1df17cd909854db8a154cdc3034b9982">ana::Flavors::kNuMuToNuMu</a></div><div class="ttdoc"> (&amp;#39;  survival&amp;#39;) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00018">IPrediction.h:18</a></div></div>
<div class="ttc" id="namespacedropbox_html_a407b5b895ba9265893768748aaa73825"><div class="ttname"><a href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dropbox.dir</a></div><div class="ttdeci">tuple dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d81/dropbox_8py_source.html#l00028">dropbox.py:28</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa7cc9ed858f1bbe3e5a2dd1085cda7fb5">ana::PredictionInterp::kOther</a></div><div class="ttdoc">Taus, numu appearance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00103">PredictionInterp.h:103</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Coeffs_html"><div class="ttname"><a href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html">ana::PredictionInterp::Coeffs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00112">PredictionInterp.h:112</a></div></div>
<div class="ttc" id="classana_1_1SystRegistry_html_a40ab58a2917b6b8a06f68cb85399e2ac"><div class="ttname"><a href="../../de/dae/classana_1_1SystRegistry.html#a40ab58a2917b6b8a06f68cb85399e2ac">ana::SystRegistry::ShortNameToSyst</a></div><div class="ttdeci">static const ISyst * ShortNameToSyst(const std::string &amp;s, bool allowFail=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df6/SystRegistry_8cxx_source.html#l00054">SystRegistry.cxx:54</a></div></div>
<div class="ttc" id="namespacepmtana_html_aa5455e08961ba0792ec6befbddf89d84"><div class="ttname"><a href="../../da/dc9/namespacepmtana.html#aa5455e08961ba0792ec6befbddf89d84">pmtana::sign</a></div><div class="ttdeci">int sign(double val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de4/UtilFunc_8cxx_source.html#l00104">UtilFunc.cxx:104</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a6c47df14981a08eb49393eb0ade75453"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a6c47df14981a08eb49393eb0ade75453">ana::PredictionInterp::DebugPlotColz</a></div><div class="ttdeci">void DebugPlotColz(const ISyst *syst, osc::IOscCalc *calc, Flavors::Flavors_t flav=Flavors::kAll, Current::Current_t curr=Current::kBoth, Sign::Sign_t sign=Sign::kBoth) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00677">PredictionInterp.cxx:677</a></div></div>
<div class="ttc" id="runFilesFromSAM_8sh_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="../../d0/d8f/runFilesFromSAM_8sh.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8f/runFilesFromSAM_8sh_source.html#l00251">runFilesFromSAM.sh:251</a></div></div>
<div class="ttc" id="namespaceana_html_a2696ca48a1e7118642a10f4ac1042d2c"><div class="ttname"><a href="../../d7/d63/namespaceana.html#a2696ca48a1e7118642a10f4ac1042d2c">ana::LoadFrom&lt; IPrediction &gt;</a></div><div class="ttdeci">std::unique_ptr&lt; IPrediction &gt; LoadFrom&lt; IPrediction &gt;(TDirectory *dir)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da0/IPrediction_8cxx_source.html#l00026">IPrediction.cxx:26</a></div></div>
<div class="ttc" id="namespaceana_1_1Current_html_a0284685bc4ae90572e7c9ac760ec6873"><div class="ttname"><a href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873">ana::Current::Current_t</a></div><div class="ttdeci">Current_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00037">IPrediction.h:37</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a13e42110b2cfff60432ed887d5f458daa2862583cf501a3cc08a1aad46bde3526"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a13e42110b2cfff60432ed887d5f458daa2862583cf501a3cc08a1aad46bde3526">ana::PredictionInterp::kNCoeffTypes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00104">PredictionInterp.h:104</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a096ad3d3698082826189c839d7a6e46f"><div class="ttname"><a href="../../d0/dea/file__to__url_8sh.html#a096ad3d3698082826189c839d7a6e46f">s</a></div><div class="ttdeci">then echo File list $list not found else cat $list while read file do echo $file sed s</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dea/file__to__url_8sh_source.html#l00060">file_to_url.sh:60</a></div></div>
<div class="ttc" id="sbnana_2sbnana_2CAFAna_2Core_2Utilities_8h_html"><div class="ttname"><a href="../../df/d84/sbnana_2sbnana_2CAFAna_2Core_2Utilities_8h.html">Utilities.h</a></div></div>
<div class="ttc" id="prova__source_8fcl_html_ab58e1ede8542ac672a1c146fb3870f2e"><div class="ttname"><a href="../../d7/ded/prova__source_8fcl.html#ab58e1ede8542ac672a1c146fb3870f2e">N</a></div><div class="ttdeci">process_name largeant stream1 can override from command line with o or output physics producers generator N</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ded/prova__source_8fcl_source.html#l00033">prova_source.fcl:33</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="namespaceana_1_1Current_html_a0284685bc4ae90572e7c9ac760ec6873a8dfd674732696fbd9dc4a9687be5038f"><div class="ttname"><a href="../../d8/d8d/namespaceana_1_1Current.html#a0284685bc4ae90572e7c9ac760ec6873a8dfd674732696fbd9dc4a9687be5038f">ana::Current::kNC</a></div><div class="ttdoc">Neutral-current interactions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00039">IPrediction.h:39</a></div></div>
<div class="ttc" id="classana_1_1IPrediction_html_a3fdec7fb382930f3adb1e77819ff47f3"><div class="ttname"><a href="../../d5/d0f/classana_1_1IPrediction.html#a3fdec7fb382930f3adb1e77819ff47f3">ana::IPrediction::PredictComponent</a></div><div class="ttdeci">virtual Spectrum PredictComponent(osc::IOscCalc *calc, Flavors::Flavors_t flav, Current::Current_t curr, Sign::Sign_t sign) const =0</div></div>
<div class="ttc" id="namespaceana_1_1Sign_html_a3d14716877899fcd1d2dc0f7aefce2aea905651cbf87809ccf829cd18901c36db"><div class="ttname"><a href="../../db/d37/namespaceana_1_1Sign.html#a3d14716877899fcd1d2dc0f7aefce2aea905651cbf87809ccf829cd18901c36db">ana::Sign::kBoth</a></div><div class="ttdoc">Both neutrinos and antineutrinos. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00051">IPrediction.h:51</a></div></div>
<div class="ttc" id="classana_1_1IPrediction_html"><div class="ttname"><a href="../../d5/d0f/classana_1_1IPrediction.html">ana::IPrediction</a></div><div class="ttdoc">Standard interface to all prediction techniques. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00058">IPrediction.h:58</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_adb591d8c76f84e8c8c881d93e104d6e7"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#adb591d8c76f84e8c8c881d93e104d6e7">ana::PredictionInterp::fSplitBySign</a></div><div class="ttdeci">bool fSplitBySign</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00190">PredictionInterp.h:190</a></div></div>
<div class="ttc" id="classana_1_1SystShifts_html_a67e36d5e3afc70e25deef65cedef8559"><div class="ttname"><a href="../../de/d09/classana_1_1SystShifts.html#a67e36d5e3afc70e25deef65cedef8559">ana::SystShifts::ActiveSysts</a></div><div class="ttdeci">std::vector&lt; const ISyst * &gt; ActiveSysts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddf/SystShifts_8cxx_source.html#l00120">SystShifts.cxx:120</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a67447009d0d2ccbf8352db95fa30d7b8"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a67447009d0d2ccbf8352db95fa30d7b8">ana::PredictionInterp::DebugPlot</a></div><div class="ttdeci">void DebugPlot(const ISyst *syst, osc::IOscCalc *calc, Flavors::Flavors_t flav=Flavors::kAll, Current::Current_t curr=Current::kBoth, Sign::Sign_t sign=Sign::kBoth) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00556">PredictionInterp.cxx:556</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_aa2d1086786b5f19e203808427ff0bcc6"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#aa2d1086786b5f19e203808427ff0bcc6">ana::PredictionInterp::InitFitsHelper</a></div><div class="ttdeci">void InitFitsHelper(ShiftedPreds &amp;sp, std::vector&lt; std::vector&lt; std::vector&lt; Coeffs &gt;&gt;&gt; &amp;fits, Sign::Sign_t sign) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00209">PredictionInterp.cxx:209</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26e"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26e">ana::Flavors::Flavors_t</a></div><div class="ttdeci">Flavors_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00013">IPrediction.h:13</a></div></div>
<div class="ttc" id="classana_1_1ISyst_html_a11a0d93c747b212410cb276f9d8861d2"><div class="ttname"><a href="../../d6/ddf/classana_1_1ISyst.html#a11a0d93c747b212410cb276f9d8861d2">ana::ISyst::LatexName</a></div><div class="ttdeci">virtual std::string LatexName() const final</div><div class="ttdoc">The name used on plots (ROOT&amp;#39;s TLatex syntax) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d7c/ISyst_8h_source.html#l00033">ISyst.h:33</a></div></div>
<div class="ttc" id="classana_1_1IPredictionGenerator_html"><div class="ttname"><a href="../../df/d95/classana_1_1IPredictionGenerator.html">ana::IPredictionGenerator</a></div><div class="ttdoc">Given loaders and an MC shift, Generate() generates an IPrediction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd9/PredictionGenerator_8h_source.html#l00019">PredictionGenerator.h:19</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_a966d106cb269574fa2c38f84178aba7d"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#a966d106cb269574fa2c38f84178aba7d">ana::Spectrum::GetLabels</a></div><div class="ttdeci">std::vector&lt; std::string &gt; GetLabels() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00274">Spectrum.h:274</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_afaaf626bc243b92ae256197eddda8ab5"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#afaaf626bc243b92ae256197eddda8ab5">ana::PredictionInterp::fPreds</a></div><div class="ttdeci">std::unordered_map&lt; const ISyst *, ShiftedPreds &gt; fPreds</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00165">PredictionInterp.h:165</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a1aa4ee5eb9de42702e9f4b9342d9d48b"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a1aa4ee5eb9de42702e9f4b9342d9d48b">ana::PredictionInterp::fOscOrigin</a></div><div class="ttdeci">osc::IOscCalc * fOscOrigin</div><div class="ttdoc">The oscillation values we assume when evaluating the coefficients. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00168">PredictionInterp.h:168</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Key__t_html"><div class="ttname"><a href="../../d5/d96/structana_1_1PredictionInterp_1_1Key__t.html">ana::PredictionInterp::Key_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00172">PredictionInterp.h:172</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26ea243e1577afa5807282ef771009fbb27d"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea243e1577afa5807282ef771009fbb27d">ana::Flavors::kNuMuToNuTau</a></div><div class="ttdoc"> </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00019">IPrediction.h:19</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea4ccd157c7dd20fb96f66cb78c2606b96">ana::Flavors::kAll</a></div><div class="ttdoc">All neutrinos, any flavor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00025">IPrediction.h:25</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26ea5768244c735eb550f177f3b5792fbe94"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26ea5768244c735eb550f177f3b5792fbe94">ana::Flavors::kNuEToNuMu</a></div><div class="ttdoc"> (&amp;#39;  appearance&amp;#39;) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00015">IPrediction.h:15</a></div></div>
<div class="ttc" id="classana_1_1DontAddDirectory_html"><div class="ttname"><a href="../../df/dc0/classana_1_1DontAddDirectory.html">ana::DontAddDirectory</a></div><div class="ttdoc">Prevent histograms being added to the current directory. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/sbnana_2sbnana_2CAFAna_2Core_2Utilities_8h_source.html#l00056">sbnana/sbnana/CAFAna/Core/Utilities.h:56</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a6403cbce97350121cb8214310655cff0"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a6403cbce97350121cb8214310655cff0">ana::PredictionInterp::PredictionInterp</a></div><div class="ttdeci">PredictionInterp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00107">PredictionInterp.h:107</a></div></div>
<div class="ttc" id="namespaceana_1_1Flavors_html_aa60f64652048d17d131d9da6e38df26eac46e2f894c19ddbaa26be2dae73f2970"><div class="ttname"><a href="../../d2/da8/namespaceana_1_1Flavors.html#aa60f64652048d17d131d9da6e38df26eac46e2f894c19ddbaa26be2dae73f2970">ana::Flavors::kAllNuTau</a></div><div class="ttdoc">All . </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dec/IPrediction_8h_source.html#l00023">IPrediction.h:23</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a5b0f379b16efba5386186eb0b6297270"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a5b0f379b16efba5386186eb0b6297270">ana::PredictionInterp::FitComponent</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Coeffs &gt; &gt; FitComponent(const std::vector&lt; double &gt; &amp;shifts, const std::vector&lt; IPrediction * &gt; &amp;preds, Flavors::Flavors_t flav, Current::Current_t curr, Sign::Sign_t sign, const std::string &amp;shortName) const </div><div class="ttdoc">Find coefficients describing the ratios from this component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00167">PredictionInterp.cxx:167</a></div></div>
<div class="ttc" id="condor__lar__pubs_8sh_html_aace24c54f354f24f1dec3b4fd3a15d10"><div class="ttname"><a href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a></div><div class="ttdeci">esac echo uname r</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/condor__lar__pubs_8sh_source.html#l00698">condor_lar_pubs.sh:698</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a9243b4e74fcbf338f3e0460dc5353a9d"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a9243b4e74fcbf338f3e0460dc5353a9d">ana::PredictionInterp::PredictComponentSyst</a></div><div class="ttdeci">virtual Spectrum PredictComponentSyst(osc::IOscCalc *calc, const SystShifts &amp;shift, Flavors::Flavors_t flav, Current::Current_t curr, Sign::Sign_t sign) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00391">PredictionInterp.cxx:391</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_ae8b1127ab83e3b04885cb3bc860dfabc"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#ae8b1127ab83e3b04885cb3bc860dfabc">ana::Spectrum::Livetime</a></div><div class="ttdeci">double Livetime() const </div><div class="ttdoc">Seconds. For informational purposes only. No calculations use this. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00242">Spectrum.h:242</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_a10881a3e8ea47c983cdf8365368651b8"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#a10881a3e8ea47c983cdf8365368651b8">ana::PredictionInterp::Predict</a></div><div class="ttdeci">virtual Spectrum Predict(osc::IOscCalc *calc) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00259">PredictionInterp.cxx:259</a></div></div>
<div class="ttc" id="noise__ana_8cxx_html_a222d3b8ef60c65e6230c8dfb4c64a9b4"><div class="ttname"><a href="../../d4/d03/noise__ana_8cxx.html#a222d3b8ef60c65e6230c8dfb4c64a9b4">mode</a></div><div class="ttdeci">const char mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d03/noise__ana_8cxx_source.html#l00020">noise_ana.cxx:20</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_aef647456e4882c9c42eccb1b0a52565c"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#aef647456e4882c9c42eccb1b0a52565c">ana::PredictionInterp::ShiftedComponent</a></div><div class="ttdeci">Spectrum ShiftedComponent(osc::IOscCalc *calc, const TMD5 *hash, const SystShifts &amp;shift, Flavors::Flavors_t flav, Current::Current_t curr, Sign::Sign_t sign, CoeffsType type) const </div><div class="ttdoc">Helper for PredictComponentSyst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00345">PredictionInterp.cxx:345</a></div></div>
<div class="ttc" id="namespaceana_html_a9a10d1a70c4431c5ae2a504612a15e7b"><div class="ttname"><a href="../../d7/d63/namespaceana.html#a9a10d1a70c4431c5ae2a504612a15e7b">ana::UniqueName</a></div><div class="ttdeci">std::string UniqueName()</div><div class="ttdoc">Return a different string each time, for creating histograms. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcc/sbnana_2sbnana_2CAFAna_2Core_2Utilities_8cxx_source.html#l00032">sbnana/sbnana/CAFAna/Core/Utilities.cxx:32</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1Coeffs_html_af15ed007ecc8b7adde1d0b66e43e2a3d"><div class="ttname"><a href="../../d5/d7c/structana_1_1PredictionInterp_1_1Coeffs.html#af15ed007ecc8b7adde1d0b66e43e2a3d">ana::PredictionInterp::Coeffs::b</a></div><div class="ttdeci">double b</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00115">PredictionInterp.h:115</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_ab6cfbbcbb53c275375289d47dec67f46"><div class="ttname"><a href="../../d4/d43/namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">channelDBConverter.n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/channelDBConverter_8py_source.html#l00249">channelDBConverter.py:249</a></div></div>
<div class="ttc" id="namespaceana_html_af11defa9aab6c8e5a83e3fe8cec9681f"><div class="ttname"><a href="../../d7/d63/namespaceana.html#af11defa9aab6c8e5a83e3fe8cec9681f">ana::SaveTo</a></div><div class="ttdeci">void SaveTo(const osc::IOscCalc &amp;x, TDirectory *dir)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/LoadFromFile_8cxx_source.html#l00091">LoadFromFile.cxx:91</a></div></div>
<div class="ttc" id="classana_1_1PredictionInterp_html_ab89837da145d944403abb57523baed57"><div class="ttname"><a href="../../dd/d9a/classana_1_1PredictionInterp.html#ab89837da145d944403abb57523baed57">ana::PredictionInterp::ShiftSpectrum</a></div><div class="ttdeci">Spectrum ShiftSpectrum(const Spectrum &amp;s, CoeffsType type, bool nubar, const SystShifts &amp;shift) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/PredictionInterp_8cxx_source.html#l00287">PredictionInterp.cxx:287</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
<div class="ttc" id="classana_1_1Spectrum_html_aafd63214c0fd845bc90ed7bedf6029b5"><div class="ttname"><a href="../../d9/dfa/classana_1_1Spectrum.html#aafd63214c0fd845bc90ed7bedf6029b5">ana::Spectrum::GetBinnings</a></div><div class="ttdeci">std::vector&lt; Binning &gt; GetBinnings() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d3c/Spectrum_8h_source.html#l00275">Spectrum.h:275</a></div></div>
<div class="ttc" id="structana_1_1PredictionInterp_1_1ShiftedPreds_html_a28c270d025406ded99df85fac08fab10"><div class="ttname"><a href="../../d2/dad/structana_1_1PredictionInterp_1_1ShiftedPreds.html#a28c270d025406ded99df85fac08fab10">ana::PredictionInterp::ShiftedPreds::fits</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; Coeffs &gt; &gt; &gt; fits</div><div class="ttdoc">Indices: [type][histogram bin][shift bin]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/PredictionInterp_8h_source.html#l00159">PredictionInterp.h:159</a></div></div>
<div class="ttc" id="HistCache_8h_html"><div class="ttname"><a href="../../d8/dbc/HistCache_8h.html">HistCache.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
