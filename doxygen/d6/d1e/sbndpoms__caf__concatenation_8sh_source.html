<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>sbndpoms_caf_concatenation.sh Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_ea49f252080159709efd620873052cfe.html">sbndutil</a></li><li class="navelem"><a class="el" href="../../dir_0d14dd34e8d758fc6a3a172f1bf87eff.html">scripts</a></li><li class="navelem"><a class="el" href="../../dir_bbae1fcf447401b6b925236c979f06a1.html">poms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">sbndpoms_caf_concatenation.sh</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#!/bin/bash</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"># Define the output directories</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span><span class="preprocessor"># These will be appended with metadata info</span></div>
<div class="line"><a name="l00005"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a89f8b77f52dfa0b8805c8aba99d241c7">    5</a></span>&#160;<span class="preprocessor"></span><a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a0d4349df01c3e44f7f93b0e50faedc0d">WORKDIR</a>=<span class="stringliteral">&quot;/pnfs/sbnd/scratch/$USER/mcp&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a7e4430272f87205808f374a1d5250f40">OUTDIR</a>=<span class="stringliteral">&quot;/pnfs/sbnd/persistent/$USER/mcp&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"># Concatenate files together up to 1GB</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor"></span><a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#acb7e7030c09df353a77476d982080069">MAXSIZE</a>=1000000000</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keywordflow">while</span> :; <span class="keywordflow">do</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  <span class="keywordflow">case</span> $1 <a class="code" href="../../d2/df7/quiet__Math__Functor__test_8sh.html#adfac98fbd1e85554d2cf0454cdcbc717">in</a></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    -<a class="code" href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a>|-\?|--<a class="code" href="../../dc/d08/namespaceICARUSservices.html#a97ed1d3692b0f3f6293e9c8779f6ee79">help</a>)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;      show_help    # Display <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a> <a class="code" href="../../d6/da2/doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a> synopsis.</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;      <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a0e1411c506beb7bbbacb91d04a3f06e0">   15</a></span>&#160;      ;;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    --defname)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      <span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$2&quot;</span> ]</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      then</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a363beb274d5ba240991ecf4c5f29764b">   19</a></span>&#160;        <a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a363beb274d5ba240991ecf4c5f29764b">DEFNAME</a>=<span class="stringliteral">&quot;$2&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> 2</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        echo <span class="stringliteral">&quot;$0 ERROR: defname requires a non-empty option argument.&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 1</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      ;;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    --workdir)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      <span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$2&quot;</span> ]</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;      then</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a0d4349df01c3e44f7f93b0e50faedc0d">WORKDIR</a>=<span class="stringliteral">&quot;$2&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> 2</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        echo <span class="stringliteral">&quot;$0 ERROR: workdir requires a non-empty option argument.&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 1</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      ;;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    --outdir)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$2&quot;</span> ]</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      then</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#aa5ee3bb9d65d595d7e1682bf63b8d18d">   39</a></span>&#160;        <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a7e4430272f87205808f374a1d5250f40">OUTDIR</a>=<span class="stringliteral">&quot;$2&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> 2</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        echo <span class="stringliteral">&quot;$0 ERROR: outdir requires a non-empty option argument.&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 1</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      ;;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    --<a class="code" href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size</a>)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$2&quot;</span> ]</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      then</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#acb7e7030c09df353a77476d982080069">   49</a></span>&#160;        <a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#acb7e7030c09df353a77476d982080069">MAXSIZE</a>=<span class="stringliteral">&quot;$2&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a> 2</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        echo <span class="stringliteral">&quot;$0 ERROR: size requires a non-empty option argument.&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 1</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      ;;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    --flatten)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#aaebe0a3205a4fedf703d655b9ef8dda9">   57</a></span>&#160;      <a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#aaebe0a3205a4fedf703d655b9ef8dda9">FLATTEN</a>=<span class="keyword">true</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      ;;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    --clean)       # Takes an <a class="code" href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a> argument; ensure it has been <a class="code" href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a>.</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a301189a2ec8d7edf650b2fa10220a316">   61</a></span>&#160;      <a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a301189a2ec8d7edf650b2fa10220a316">CLEAN</a>=<span class="keyword">true</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <a class="code" href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#ac28870ba8a9e9cbda0449ba82285d3b2">   63</a></span>&#160;      ;;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    *) <span class="keywordflow">break</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  esac</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;done</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keywordflow">if</span>  [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$DEFNAME&quot;</span> ]</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;then</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  echo <span class="stringliteral">&quot;$0 ERROR: defname is mandatory&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 2</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordflow">if</span>  [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$WORKDIR&quot;</span> ]</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;then</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  echo <span class="stringliteral">&quot;$0 ERROR: workdir is mandatory&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 2</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordflow">if</span>  [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$OUTDIR&quot;</span> ]</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;then</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  echo <span class="stringliteral">&quot;$0 ERROR: outdir is mandatory&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 2</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keywordflow">if</span>  [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$MAXSIZE&quot;</span> ]</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;then</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  echo <span class="stringliteral">&quot;$0 ERROR: size is mandatory&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 2</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;echo <span class="stringliteral">&quot;Running with settings:&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;echo <span class="stringliteral">&quot;  Definition: $DEFNAME&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;echo <span class="stringliteral">&quot;  Workdir: $WORKDIR&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;echo <span class="stringliteral">&quot;  Outdir: $OUTDIR&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;echo <span class="stringliteral">&quot;  Max Size: $(numfmt --to=si $MAXSIZE)&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$FLATTEN&quot;</span> ]</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;then</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  echo <span class="stringliteral">&quot;  Making Flat CAFS&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$CLEAN&quot;</span> ]</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;then</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  echo <span class="stringliteral">&quot;  Cleaning all outputs&quot;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;prepare()</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">  # Assume that the metadata is roughly the same in all files, so take the first</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor"></span>  FILENAME=$(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-files <span class="stringliteral">&quot;defname: $DEFNAME with limit 1&quot;</span>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <span class="keyword">get</span>-metadata $FILENAME --<a class="code" href="../../d3/d9b/namespacenlohmann.html#a2bfd99e845a2e5cd90aeaf1b1431f474">json</a> &gt; base.json</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  # Lets change <span class="stringliteral">&quot;caf&quot;</span> to <span class="stringliteral">&quot;concat_caf&quot;</span> <span class="keywordflow">for</span> <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#a09c6b60bb7451f9136e25140ffdff6bd">the</a> <a class="code" href="../../d0/d8f/runFilesFromSAM_8sh.html#ad7668fe49909e0598d75380816eba577">stage</a> <a class="code" href="../../d9/dd2/selectors_8fcl.html#aadc113fa4af9aeff01481eed2a98e7cc">and</a> defname</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  MDPRODUCTIONDEFNAME=${<a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a363beb274d5ba240991ecf4c5f29764b">DEFNAME</a>/caf/concat_caf}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">  # Now we want to set some global vars to define the ouput path</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor"></span>  <a class="code" href="../../d7/d86/sbndpoms__metadata__injector_8sh.html#a71d9ff5f5a3087bdeebd754f1b0b46dc">MDFILETYPE</a>=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;file_type&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#aa06008df2e519c7ef8dbabab158fa94c">MDPRODUCTIONTYPE</a>=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;production.type&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a4fc8dd6b2cf66645ce4cfd61bc79297e">MDPRODUCTIONNAME</a>=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;production.name&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  MDSBNDPROJECTNAME=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;sbnd_project.name&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a607b1fc82bd2e74c6371d6aaade1797d">MDSBNDPROJECTVERSION</a>=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;sbnd_project.version&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  MDSBNDPROJECTSTAGE=$(jq -<a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> <span class="stringliteral">&#39;.&quot;sbnd_project.stage&quot;&#39;</span> base.json)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">if</span> [ $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-definitions | grep <span class="stringliteral">&quot;$MDPRODUCTIONDEFNAME&quot;</span>) ]</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  then</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> $CLEAN ]</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    then</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      echo <span class="stringliteral">&quot;Deleting SAM Definition $MDPRODUCTIONDEFNAME&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">for</span> FILE <a class="code" href="../../d2/df7/quiet__Math__Functor__test_8sh.html#adfac98fbd1e85554d2cf0454cdcbc717">in</a> $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-definition-files $MDPRODUCTIONDEFNAME);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ifdh rm $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> locate-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $FILE | sed <span class="stringliteral">&#39;s/enstore://&#39;</span>)/$FILE</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> retire-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $FILE</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      done</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> <span class="keyword">delete</span>-definition $MDPRODUCTIONDEFNAME</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      echo <span class="stringliteral">&quot;SAM Definition $MDPRODUCTIONDEFNAME already present&quot;</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    echo <span class="stringliteral">&quot;Creating SAM Definition $MDPRODUCTIONDEFNAME&quot;</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$FLATTEN&quot;</span> ]</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  then</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    FLATMDPRODUCTIONDEFNAME=${MDPRODUCTIONDEFNAME/concat_caf/flat_caf}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> [ $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-definitions | grep <span class="stringliteral">&quot;$FLATMDPRODUCTIONDEFNAME&quot;</span>) ]</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    then</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> $CLEAN ]</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      then</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        echo <span class="stringliteral">&quot;Deleting SAM Definition $FLATMDPRODUCTIONDEFNAME&quot;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">for</span> FILE <a class="code" href="../../d2/df7/quiet__Math__Functor__test_8sh.html#adfac98fbd1e85554d2cf0454cdcbc717">in</a> $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-definition-files $FLATMDPRODUCTIONDEFNAME);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          ifdh rm $(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> locate-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $FILE | sed <span class="stringliteral">&#39;s/enstore://&#39;</span>)/$FILE</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;          <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> retire-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $FILE</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        done</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> <span class="keyword">delete</span>-definition $FLATMDPRODUCTIONDEFNAME</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        echo <span class="stringliteral">&quot;SAM Definition $FLATMDPRODUCTIONDEFNAME already present&quot;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      echo <span class="stringliteral">&quot;Creating SAM Definition $FLATMDPRODUCTIONDEFNAME&quot;</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a7e4430272f87205808f374a1d5250f40">OUTDIR</a>=<span class="stringliteral">&quot;$OUTDIR/$MDFILETYPE/$MDPRODUCTIONTYPE/$MDPRODUCTIONNAME/$MDSBNDPROJECTNAME/$MDSBNDPROJECTVERSION/$MDSBNDPROJECTSTAGE&quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a0d4349df01c3e44f7f93b0e50faedc0d">WORKDIR</a>=<span class="stringliteral">&quot;$WORKDIR/$MDFILETYPE/$MDPRODUCTIONTYPE/$MDPRODUCTIONNAME/$MDSBNDPROJECTNAME/$MDSBNDPROJECTVERSION/$MDSBNDPROJECTSTAGE&quot;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="../../d9/d4d/namespacepython_1_1larbatch__posix.html#a5691a311aad1dcf190c8700f455a5935">mkdir</a> -<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> $OUTDIR</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="../../d9/d4d/namespacepython_1_1larbatch__posix.html#a5691a311aad1dcf190c8700f455a5935">mkdir</a> -<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> $WORKDIR</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$(ls -A $WORKDIR)&quot;</span> ]</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  then</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    echo <span class="stringliteral">&quot;WORKDIR: $WORKDIR&quot;</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../d6/d2d/build-dunepdsprce_8sh.html#a67297dd2c14a12b51604362f866d9bcc">elif</a> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$CLEAN&quot;</span> ]</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  then</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    echo <span class="stringliteral">&quot;Deleting WORKDIR: $WORKDIR&quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    ifdh <a class="code" href="../../d9/d74/namespacepython_1_1emptydir.html#ae1557cd7fb0a7f727f2f0f3b9799a6d3">rmdir</a> $WORKDIR --force=srm</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    echo <span class="stringliteral">&quot;Not Empty: $WORKDIR&quot;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> [ -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$(ls -A $OUTDIR)&quot;</span> ]</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  then</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    echo <span class="stringliteral">&quot;OUTDIR: $OUTDIR&quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="../../d6/d2d/build-dunepdsprce_8sh.html#a67297dd2c14a12b51604362f866d9bcc">elif</a> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$CLEAN&quot;</span> ]</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  then</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    echo <span class="stringliteral">&quot;Deleting OUTDIR: $OUTDIR&quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    ifdh <a class="code" href="../../d9/d74/namespacepython_1_1emptydir.html#ae1557cd7fb0a7f727f2f0f3b9799a6d3">rmdir</a> $OUTDIR --force=srm</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    echo <span class="stringliteral">&quot;Not Empty: $OUTDIR&quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;# TODO put <span class="keyword">this</span> into <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a> proper script <a class="code" href="../../d9/dd2/selectors_8fcl.html#aadc113fa4af9aeff01481eed2a98e7cc">and</a> pass arguments rather than rely on global variables</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;# This would allow us to run <span class="keyword">this</span> <a class="code" href="../../d2/df7/quiet__Math__Functor__test_8sh.html#adfac98fbd1e85554d2cf0454cdcbc717">in</a> <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a> background process <a class="code" href="../../d9/dd2/selectors_8fcl.html#aadc113fa4af9aeff01481eed2a98e7cc">and</a> multithread <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#a09c6b60bb7451f9136e25140ffdff6bd">the</a> process</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;# Or submit <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a> <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a7bfec595ccd8f049fc53a0501572c671">grid</a> <a class="code" href="../../d0/d18/run__job_8sh.html#aa029bfbc855c3791b60370435d2fb274">job</a> etc.</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;doConcat()</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">  # Create the output</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor"></span>  CONCATNAME=<span class="stringliteral">&quot;concat_caf_${SLICENUM}.root&quot;</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  CONCATFILE=<span class="stringliteral">&quot;$WORKDIR/$CONCATNAME&quot;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  JSONFILE=<span class="stringliteral">&quot;${CONCATFILE}.json&quot;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  echo <span class="stringliteral">&quot;Creating $CONCATNAME&quot;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">  # Let ROOT run its magic</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor"></span>  concat_cafs $SLICEDEFNAME $WORKDIR/$CONCATNAME</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  extractCAFMetadata <span class="stringliteral">&quot;$CONCATFILE&quot;</span> &gt; $JSONFILE</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">  # Steal the ifdh and sam commands from sbndpoms_genfclwithrunnumber_maker.sh (Thanks Dom)</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor"></span><span class="preprocessor">  # SAM needs the file to have a unique name</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor"></span>  ifdh addOutputFile $CONCATFILE</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  ifdh renameOutput unique</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">  # Bit annoying but we now need to find the fcl file again as ifdh doesn&#39;t tell us what the unique name is</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> [[ `find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${CONCATNAME%.*}*.root&quot;</span> | wc -l` -ne 1 ]]</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  then</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    echo <span class="stringliteral">&quot;Found incorrect number of matching files for pattern: ${CONCATNAME%.*}*.root&quot;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${CONCATNAME%.*}*.root&quot;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    echo <span class="stringliteral">&quot;Exiting&quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    UNIQUEOUTCONCATNAME=`find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${CONCATNAME%.*}*.root&quot;</span>`</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    UNIQUEOUTCONCATNAME=`basename $UNIQUEOUTCONCATNAME`</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    echo <span class="stringliteral">&quot;$CONCATNAME renamed to $UNIQUEOUTCONCATNAME&quot;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">  # OK so it looks like there is exactly one pattern match, so assume that is the correct one</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor"></span><span class="preprocessor">  #Copy the file to the output directory (most likely dcache)</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor"></span>  ifdh copyBackOutput $OUTDIR</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">  #Clear up</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor"></span>  ifdh cleanup</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  sbndpoms_metadata_extractor.sh <span class="stringliteral">&quot;$WORKDIR/$UNIQUEOUTCONCATNAME&quot;</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> declare-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> $JSONFILE</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> add-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a>-location ${UNIQUEOUTCONCATNAME} $OUTDIR</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">  # Check that we find the output file, this will tell us if SAM actually crea</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span> [[ ! -f <span class="stringliteral">&quot;$(samweb -e sbnd locate-file $UNIQUEOUTCONCATNAME | sed &#39;s/enstore://&#39;)/$UNIQUEOUTCONCATNAME&quot;</span> ]]</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  then</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    echo <span class="stringliteral">&quot;Output file $UNIQUEOUTCONCATNAME not found in outdir $OUTDIR&quot;</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  echo <span class="stringliteral">&quot;$UNIQUEOUTCONCATNAME declared and located by SAM&quot;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$FLATTEN&quot;</span> ]</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  then</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    echo <span class="stringliteral">&quot;Flattening $UNIQUEOUTCONCATNAME&quot;</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    FLATNAME=<span class="stringliteral">&quot;flat_caf_${SLICENUM}.root&quot;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    FLATFILE=<span class="stringliteral">&quot;$WORKDIR/$FLATNAME&quot;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    FLATJSONFILE=<span class="stringliteral">&quot;${FLATFILE}.json&quot;</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    flatten_caf $OUTDIR/$UNIQUEOUTCONCATNAME $FLATFILE</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    extractCAFMetadata <span class="stringliteral">&quot;$FLATFILE&quot;</span> &gt; <span class="stringliteral">&quot;$FLATJSONFILE&quot;</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">    # Steal the ifdh and sam commands from sbndpoms_genfclwithrunnumber_maker.sh (Thanks Dom)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    # SAM needs the file to have a unique name</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor"></span>    ifdh addOutputFile $FLATFILE</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    ifdh renameOutput unique</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">    # Bit annoying but we now need to find the fcl file again as ifdh doesn&#39;t tell us what the unique name is</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> [[ `find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${FLATNAME%.*}*.root&quot;</span> | wc -l` -ne 1 ]]</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    then</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      echo <span class="stringliteral">&quot;Found incorrect number of matching files for pattern: ${FLATNAME%.*}*.root&quot;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${FLATNAME%.*}*.root&quot;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      echo <span class="stringliteral">&quot;Exiting&quot;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      UNIQUEOUTFLATNAME=`find $WORKDIR -<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a> <span class="stringliteral">&quot;${FLATNAME%.*}*.root&quot;</span>`</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      UNIQUEOUTFLATNAME=`basename $UNIQUEOUTFLATNAME`</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      echo <span class="stringliteral">&quot;$FLATNAME renamed to $UNIQUEOUTFLATNAME&quot;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">    # OK so it looks like there it exactly one pattern match, so assume that is the correct one</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #Copy the file to the output directory (most likely dcache)</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor"></span>    ifdh copyBackOutput $OUTDIR</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">    #Clear up</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor"></span>    ifdh cleanup</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    sbndpoms_metadata_extractor.sh <span class="stringliteral">&quot;$WORKDIR/$UNIQUEOUTFLATNAME&quot;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> declare-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a> <span class="stringliteral">&quot;$FLATJSONFILE&quot;</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> add-<a class="code" href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a>-location ${UNIQUEOUTFLATNAME} $OUTDIR</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">    # Check that we find the output file, this will tell us if SAM actually crea</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> [[ ! -f <span class="stringliteral">&quot;$(samweb -e sbnd locate-file $UNIQUEOUTFLATNAME | sed &#39;s/enstore://&#39;)/$UNIQUEOUTFLATNAME&quot;</span> ]]</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    then</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      echo <span class="stringliteral">&quot;Output file $UNIQUEOUTFLATNAME not found in outdir $OUTDIR&quot;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 3</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    echo <span class="stringliteral">&quot;$UNIQUEOUTFLATNAME declared and located by SAM&quot;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;prepare</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> $CLEAN ]</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;then</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a> 0</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;declare -i CONCATCOUNT=0</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;declare -i SLICENUM=0</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;declare -i FILECOUNTER=0</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor"># Loop over all of the files in the dataset</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor"></span>DEFSIZE=$(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a>-definition-files --summary $DEFNAME | grep <span class="stringliteral">&quot;Total size&quot;</span> | tr -dc <span class="stringliteral">&#39;0-9&#39;</span>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;FILECOUNT=$(<a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> <a class="code" href="../../db/df5/IntegerRanges__test_8cc.html#abbc7e5f346bfa932ca51b4b07ccef76d">count</a>-definition-files $DEFNAME)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor"># Work out the size of each file</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor"></span>FILESIZE=$(( $DEFSIZE / $FILECOUNT ))</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor"># Work out the max number of file to concat together</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor"></span>SLICELIMIT=$(( $MAXSIZE / $FILESIZE ))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor"># Work out the number of concats this will result in</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor"></span>CONCATCOUNT=$(( $FILECOUNT / $SLICELIMIT ))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;CONCATCOUNT=$(( CONCATCOUNT + 1 ))</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor"># Spread the files evenly between the CONCATS</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor"></span>FILELIMIT=$(( $FILECOUNT / $CONCATCOUNT ))</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;FILELIMIT=$(( FILELIMIT + 1 ))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;echo <span class="stringliteral">&quot;DefSize: $DEFSIZE and FileCount: $FILECOUNT&quot;</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;echo <span class="stringliteral">&quot;FileSize: $FILESIZE and FileLimit: $FILELIMIT&quot;</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;echo <span class="stringliteral">&quot;ConcatCount: $CONCATCOUNT&quot;</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordflow">while</span> [[ $SLICENUM -lt $CONCATCOUNT ]]</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keywordflow">do</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  FILECOUNTER=$(( $SLICENUM * $FILELIMIT ))</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  echo <span class="stringliteral">&quot;Creating Slice: $SLICENUM, starting from file: $FILECOUNTER&quot;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  SLICEDEFNAME=${<a class="code" href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a363beb274d5ba240991ecf4c5f29764b">DEFNAME</a>}_Slice${SLICENUM}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> create-definition <span class="stringliteral">&quot;$SLICEDEFNAME&quot;</span> <span class="stringliteral">&quot;defname: $DEFNAME with limit $FILELIMIT with offset $FILECOUNTER&quot;</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  doConcat</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  SLICENUM+=1</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;done</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor"># Create a definition with the output files</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor"></span><a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> create-definition $MDPRODUCTIONDEFNAME <span class="stringliteral">&quot;file_name like concat_caf_%.root and file_type $MDFILETYPE and production.type $MDPRODUCTIONTYPE and production.name $MDPRODUCTIONNAME and sbnd_project.name $MDSBNDPROJECTNAME and sbnd_project.version $MDSBNDPROJECTVERSION and sbnd_project.stage $MDSBNDPROJECTSTAGE and ischildof: ( defname: $DEFNAME ) and file_format concat_caf&quot;</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;echo <span class="stringliteral">&quot;Created Concat SAM definition: $MDPRODUCTIONDEFNAME: $(samweb -e sbnd list-definition-files --summary $MDPRODUCTIONDEFNAME)&quot;</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keywordflow">if</span> [ ! -<a class="code" href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a> <span class="stringliteral">&quot;$FLATTEN&quot;</span> ]</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;then</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">samweb</a> -<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a> <a class="code" href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a> create-definition $FLATMDPRODUCTIONDEFNAME <span class="stringliteral">&quot;file_name like flat_caf_%.root and file_type $MDFILETYPE and production.type $MDPRODUCTIONTYPE and production.name $MDPRODUCTIONNAME and sbnd_project.name $MDSBNDPROJECTNAME and sbnd_project.version $MDSBNDPROJECTVERSION and sbnd_project.stage $MDSBNDPROJECTSTAGE and ischildof: ( defname: $DEFNAME ) and file_format flat_caf&quot;</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  echo <span class="stringliteral">&quot;Created Flat SAM definition: $FLATMDPRODUCTIONDEFNAME: $(samweb -e sbnd list-definition-files --summary $FLATMDPRODUCTIONDEFNAME)&quot;</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<a class="code" href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div>
<div class="ttc" id="run__opflash__electron_8fcl_html_ae40184b0245025a43c56daa3261d5e3c"><div class="ttname"><a href="../../d0/d84/run__opflash__electron_8fcl.html#ae40184b0245025a43c56daa3261d5e3c">z</a></div><div class="ttdeci">process_name opflash particleana ie ie ie z</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d84/run__opflash__electron_8fcl_source.html#l00092">run_opflash_electron.fcl:92</a></div></div>
<div class="ttc" id="condor__hadd__sam_8sh_html_a7e4430272f87205808f374a1d5250f40"><div class="ttname"><a href="../../da/dcd/condor__hadd__sam_8sh.html#a7e4430272f87205808f374a1d5250f40">OUTDIR</a></div><div class="ttdeci">then OUTDIR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcd/condor__hadd__sam_8sh_source.html#l00361">condor_hadd_sam.sh:361</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_accc237606badc0385cb717703091fb61"><div class="ttname"><a href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#accc237606badc0385cb717703091fb61">exit</a></div><div class="ttdeci">exit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/ddc/generate__icarus__geometry__splitwire_8pl_source.html#l00430">generate_icarus_geometry_splitwire.pl:430</a></div></div>
<div class="ttc" id="condor__hadd__sam_8sh_html_a0d4349df01c3e44f7f93b0e50faedc0d"><div class="ttname"><a href="../../da/dcd/condor__hadd__sam_8sh.html#a0d4349df01c3e44f7f93b0e50faedc0d">WORKDIR</a></div><div class="ttdeci">then WORKDIR</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcd/condor__hadd__sam_8sh_source.html#l00353">condor_hadd_sam.sh:353</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a79854d43ae87cec96a59d17fc4141bf0"><div class="ttname"><a href="../../d0/dea/file__to__url_8sh.html#a79854d43ae87cec96a59d17fc4141bf0">file</a></div><div class="ttdeci">* file</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dea/file__to__url_8sh_source.html#l00069">file_to_url.sh:69</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="generate__icarus__geometry__splitwire_8pl_html_a09c6b60bb7451f9136e25140ffdff6bd"><div class="ttname"><a href="../../de/ddc/generate__icarus__geometry__splitwire_8pl.html#a09c6b60bb7451f9136e25140ffdff6bd">the</a></div><div class="ttdeci">#define the</div></div>
<div class="ttc" id="namespacepython_1_1emptydir_html_ae1557cd7fb0a7f727f2f0f3b9799a6d3"><div class="ttname"><a href="../../d9/d74/namespacepython_1_1emptydir.html#ae1557cd7fb0a7f727f2f0f3b9799a6d3">python.emptydir.rmdir</a></div><div class="ttdeci">def rmdir</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d31/emptydir_8py_source.html#l00158">emptydir.py:158</a></div></div>
<div class="ttc" id="build-dunepdsprce_8sh_html_a67297dd2c14a12b51604362f866d9bcc"><div class="ttname"><a href="../../d6/d2d/build-dunepdsprce_8sh.html#a67297dd2c14a12b51604362f866d9bcc">elif</a></div><div class="ttdeci">then source cvmfs dune opensciencegrid org products dune setup_dune sh exit elif[-f/grid/fermiapp/products/dune/setup_dune_fermiapp.sh]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d2d/build-dunepdsprce_8sh_source.html#l00068">build-dunepdsprce.sh:68</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_aaae74cf315284bc0f44c2e050c119781"><div class="ttname"><a href="../../d5/d62/namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">icarus::ns::util::size</a></div><div class="ttdeci">std::size_t size(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/FixedBins_8h_source.html#l00561">FixedBins.h:561</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a607b1fc82bd2e74c6371d6aaade1797d"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a607b1fc82bd2e74c6371d6aaade1797d">MDSBNDPROJECTVERSION</a></div><div class="ttdeci">then MDSBNDPROJECTVERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00057">sbndpoms_genfclwithrunnumber_maker.sh:57</a></div></div>
<div class="ttc" id="fcl__checks_8sh_html_ab3c44a76dd678c93affe68a1f8a980ab"><div class="ttname"><a href="../../db/ddd/fcl__checks_8sh.html#ab3c44a76dd678c93affe68a1f8a980ab">shift</a></div><div class="ttdeci">shift</div><div class="ttdef"><b>Definition:</b> <a href="../../db/ddd/fcl__checks_8sh_source.html#l00026">fcl_checks.sh:26</a></div></div>
<div class="ttc" id="doGit_8sh_html_a5684f219761d78b4f98e7b2869dd1726"><div class="ttname"><a href="../../d6/da2/doGit_8sh.html#a5684f219761d78b4f98e7b2869dd1726">usage</a></div><div class="ttdeci">usage</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da2/doGit_8sh_source.html#l00021">doGit.sh:21</a></div></div>
<div class="ttc" id="condor__start__project_8sh_html_a05f7ab2d17dcce0fc108a6e699cadd16"><div class="ttname"><a href="../../dd/d71/condor__start__project_8sh.html#a05f7ab2d17dcce0fc108a6e699cadd16">specified</a></div><div class="ttdeci">then echo Sam station was not specified(use option--sam_station).&quot; exit 1 fi if [ x$SAM_GROUP </div></div>
<div class="ttc" id="sbndpoms__caf__concatenation_8sh_html_a301189a2ec8d7edf650b2fa10220a316"><div class="ttname"><a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a301189a2ec8d7edf650b2fa10220a316">CLEAN</a></div><div class="ttdeci">clean CLEAN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh_source.html#l00061">sbndpoms_caf_concatenation.sh:61</a></div></div>
<div class="ttc" id="decode__signalprocess__icarus_8fcl_html_a2a105cb669129f9c63eb7a4c15bf2d9b"><div class="ttname"><a href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a></div><div class="ttdeci">process_name gaushit a</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8f/decode__signalprocess__icarus_8fcl_source.html#l00037">decode_signalprocess_icarus.fcl:37</a></div></div>
<div class="ttc" id="getStatistics_8sh_html_a04d4c2131ccb24cc78386597e8a21c5b"><div class="ttname"><a href="../../dd/de2/getStatistics_8sh.html#a04d4c2131ccb24cc78386597e8a21c5b">h</a></div><div class="ttdeci">while getopts h</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de2/getStatistics_8sh_source.html#l00013">getStatistics.sh:13</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a4fc8dd6b2cf66645ce4cfd61bc79297e"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a4fc8dd6b2cf66645ce4cfd61bc79297e">MDPRODUCTIONNAME</a></div><div class="ttdeci">then MDPRODUCTIONNAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00066">sbndpoms_genfclwithrunnumber_maker.sh:66</a></div></div>
<div class="ttc" id="selectors_8fcl_html_aadc113fa4af9aeff01481eed2a98e7cc"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#aadc113fa4af9aeff01481eed2a98e7cc">and</a></div><div class="ttdeci">return match has_match and(match.match_pdg==11 or match.match_pdg==-11)</div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_aa06008df2e519c7ef8dbabab158fa94c"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#aa06008df2e519c7ef8dbabab158fa94c">MDPRODUCTIONTYPE</a></div><div class="ttdeci">then MDPRODUCTIONTYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00075">sbndpoms_genfclwithrunnumber_maker.sh:75</a></div></div>
<div class="ttc" id="condor__hadd__sam_8sh_html_a4761c2071128814f9800e0b1f6953e86"><div class="ttname"><a href="../../da/dcd/condor__hadd__sam_8sh.html#a4761c2071128814f9800e0b1f6953e86">fi</a></div><div class="ttdeci">then shift fi</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcd/condor__hadd__sam_8sh_source.html#l00174">condor_hadd_sam.sh:174</a></div></div>
<div class="ttc" id="condor__hadd__sam_8sh_html_a7bfec595ccd8f049fc53a0501572c671"><div class="ttname"><a href="../../da/dcd/condor__hadd__sam_8sh.html#a7bfec595ccd8f049fc53a0501572c671">grid</a></div><div class="ttdeci">g grid</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcd/condor__hadd__sam_8sh_source.html#l00336">condor_hadd_sam.sh:336</a></div></div>
<div class="ttc" id="namespacepython_1_1larbatch__posix_html_a5691a311aad1dcf190c8700f455a5935"><div class="ttname"><a href="../../d9/d4d/namespacepython_1_1larbatch__posix.html#a5691a311aad1dcf190c8700f455a5935">python.larbatch_posix.mkdir</a></div><div class="ttdeci">def mkdir</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db8/larbatch__posix_8py_source.html#l00642">larbatch_posix.py:642</a></div></div>
<div class="ttc" id="run__job_8sh_html_aa029bfbc855c3791b60370435d2fb274"><div class="ttname"><a href="../../d0/d18/run__job_8sh.html#aa029bfbc855c3791b60370435d2fb274">job</a></div><div class="ttdeci">esac voms proxy info all source grid fermiapp products common etc setups sh source cvmfs oasis opensciencegrid org fermilab products larsoft setup setup ifdhc echo Here is the your environment in this job</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/run__job_8sh_source.html#l00029">run_job.sh:29</a></div></div>
<div class="ttc" id="quiet__Math__Functor__test_8sh_html_adfac98fbd1e85554d2cf0454cdcbc717"><div class="ttname"><a href="../../d2/df7/quiet__Math__Functor__test_8sh.html#adfac98fbd1e85554d2cf0454cdcbc717">in</a></div><div class="ttdeci">if &amp;&amp;[-z&quot;$BASH_VERSION&quot;] then echo Attempting to switch to bash bash shellSwitch exit fi &amp;&amp;[&quot;$1&quot;= 'shellSwitch'] shift declare a IncludeDirectives for Dir in</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df7/quiet__Math__Functor__test_8sh_source.html#l00023">quiet_Math_Functor_test.sh:23</a></div></div>
<div class="ttc" id="namespaceproject_html_ac91a16eebf34acc1405933eb479f5560"><div class="ttname"><a href="../../d1/d2c/namespaceproject.html#ac91a16eebf34acc1405933eb479f5560">project.samweb</a></div><div class="ttdeci">samweb</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daa/project_8py_source.html#l00496">project.py:496</a></div></div>
<div class="ttc" id="runFilesFromSAM_8sh_html_ad7668fe49909e0598d75380816eba577"><div class="ttname"><a href="../../d0/d8f/runFilesFromSAM_8sh.html#ad7668fe49909e0598d75380816eba577">stage</a></div><div class="ttdeci">stage</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8f/runFilesFromSAM_8sh_source.html#l00252">runFilesFromSAM.sh:252</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="sbndpoms__caf__concatenation_8sh_html_aaebe0a3205a4fedf703d655b9ef8dda9"><div class="ttname"><a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#aaebe0a3205a4fedf703d655b9ef8dda9">FLATTEN</a></div><div class="ttdeci">flatten FLATTEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh_source.html#l00057">sbndpoms_caf_concatenation.sh:57</a></div></div>
<div class="ttc" id="prodgenie__sbnd__proj_8fcl_html_a4759b28134d1657b0ea170d98f1ce9b4"><div class="ttname"><a href="../../de/d17/prodgenie__sbnd__proj_8fcl.html#a4759b28134d1657b0ea170d98f1ce9b4">sbnd</a></div><div class="ttdeci">stream1 can override from command line with o or output services user sbnd</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d17/prodgenie__sbnd__proj_8fcl_source.html#l00101">prodgenie_sbnd_proj.fcl:101</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a19dd16849ed641adb2aff777fdc4bd8b"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a></div><div class="ttdeci">then echo fcl name</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00220">sbndpoms_genfclwithrunnumber_maker.sh:220</a></div></div>
<div class="ttc" id="TrainMVA_8sh_html_ac338fc7dbe8683aa888c4e5ce17c212d"><div class="ttname"><a href="../../d8/d12/TrainMVA_8sh.html#ac338fc7dbe8683aa888c4e5ce17c212d">option</a></div><div class="ttdeci">echo Invalid option</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d12/TrainMVA_8sh_source.html#l00017">TrainMVA.sh:17</a></div></div>
<div class="ttc" id="sbndpoms__caf__concatenation_8sh_html_acb7e7030c09df353a77476d982080069"><div class="ttname"><a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#acb7e7030c09df353a77476d982080069">MAXSIZE</a></div><div class="ttdeci">size if[&quot;$2&quot;] then MAXSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh_source.html#l00049">sbndpoms_caf_concatenation.sh:49</a></div></div>
<div class="ttc" id="sbndpoms__caf__concatenation_8sh_html_a363beb274d5ba240991ecf4c5f29764b"><div class="ttname"><a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh.html#a363beb274d5ba240991ecf4c5f29764b">DEFNAME</a></div><div class="ttdeci">defname if[&quot;$2&quot;] then DEFNAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/sbndpoms__caf__concatenation_8sh_source.html#l00019">sbndpoms_caf_concatenation.sh:19</a></div></div>
<div class="ttc" id="namespacenlohmann_html_a2bfd99e845a2e5cd90aeaf1b1431f474"><div class="ttname"><a href="../../d3/d9b/namespacenlohmann.html#a2bfd99e845a2e5cd90aeaf1b1431f474">nlohmann::json</a></div><div class="ttdeci">basic_json&lt;&gt; json</div><div class="ttdoc">default JSON class </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db8/json_8hpp_source.html#l02445">json.hpp:2445</a></div></div>
<div class="ttc" id="IntegerRanges__test_8cc_html_abbc7e5f346bfa932ca51b4b07ccef76d"><div class="ttname"><a href="../../db/df5/IntegerRanges__test_8cc.html#abbc7e5f346bfa932ca51b4b07ccef76d">count</a></div><div class="ttdeci">std::size_t count(Cont const &amp;cont)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df5/IntegerRanges__test_8cc_source.html#l00029">IntegerRanges_test.cc:29</a></div></div>
<div class="ttc" id="namespaceICARUSservices_html_a97ed1d3692b0f3f6293e9c8779f6ee79"><div class="ttname"><a href="../../dc/d08/namespaceICARUSservices.html#a97ed1d3692b0f3f6293e9c8779f6ee79">ICARUSservices.help</a></div><div class="ttdeci">string help</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d23/ICARUSservices_8py_source.html#l00124">ICARUSservices.py:124</a></div></div>
<div class="ttc" id="condor__lar__pubs_8sh_html_aace24c54f354f24f1dec3b4fd3a15d10"><div class="ttname"><a href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a></div><div class="ttdeci">esac echo uname r</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/condor__lar__pubs_8sh_source.html#l00698">condor_lar_pubs.sh:698</a></div></div>
<div class="ttc" id="sbndpoms__metadata__injector_8sh_html_a71d9ff5f5a3087bdeebd754f1b0b46dc"><div class="ttname"><a href="../../d7/d86/sbndpoms__metadata__injector_8sh.html#a71d9ff5f5a3087bdeebd754f1b0b46dc">MDFILETYPE</a></div><div class="ttdeci">then MDFILETYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/sbndpoms__metadata__injector_8sh_source.html#l00042">sbndpoms_metadata_injector.sh:42</a></div></div>
<div class="ttc" id="file__to__url_8sh_html_a66bd5563ea501595a0740b7c7635ba48"><div class="ttname"><a href="../../d0/dea/file__to__url_8sh.html#a66bd5563ea501595a0740b7c7635ba48">list</a></div><div class="ttdeci">list</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dea/file__to__url_8sh_source.html#l00028">file_to_url.sh:28</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
