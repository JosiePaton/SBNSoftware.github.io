<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>phot::IPhotonMappingTransformations Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacephot.html">phot</a></li><li class="navelem"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html">IPhotonMappingTransformations</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classphot_1_1IPhotonMappingTransformations-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">phot::IPhotonMappingTransformations Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Collection of functions to transform photon mapping data.  
 <a href="classphot_1_1IPhotonMappingTransformations.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for phot::IPhotonMappingTransformations:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classphot_1_1IPhotonMappingTransformations.png" usemap="#phot::IPhotonMappingTransformations_map" alt=""/>
  <map id="phot::IPhotonMappingTransformations_map" name="phot::IPhotonMappingTransformations_map">
<area href="classphot_1_1ICARUSPhotonMappingTransformations.html" title="Photon library mapping for ICARUS geometry. " alt="phot::ICARUSPhotonMappingTransformations" shape="rect" coords="0,56,265,80"/>
<area href="classphot_1_1PhotonMappingIdentityTransformations.html" title="Trivial photon mapping transformation. " alt="phot::PhotonMappingIdentityTransformations" shape="rect" coords="275,56,540,80"/>
<area href="classphot_1_1PhotonMappingXMirrorTransformations.html" title="Photon mapping transformation with reflection at x = 0. " alt="phot::PhotonMappingXMirrorTransformations" shape="rect" coords="275,112,540,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:adecfee9f922d0146508eca98b7abe276"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> = int</td></tr>
<tr class="memdesc:adecfee9f922d0146508eca98b7abe276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing a optical detector ID.  <a href="#adecfee9f922d0146508eca98b7abe276">More...</a><br/></td></tr>
<tr class="separator:adecfee9f922d0146508eca98b7abe276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e5eb707bf6f054d9f0139a73011e58"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> = <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a></td></tr>
<tr class="memdesc:ac7e5eb707bf6f054d9f0139a73011e58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing a library index. FIXME former LibraryOpDetID_t.  <a href="#ac7e5eb707bf6f054d9f0139a73011e58">More...</a><br/></td></tr>
<tr class="separator:ac7e5eb707bf6f054d9f0139a73011e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314ea62c58d853ad59c2ec90636eafb7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> = std::vector&lt; <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> &gt;</td></tr>
<tr class="memdesc:a314ea62c58d853ad59c2ec90636eafb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing the mapping of optical detectors into library indices.  <a href="#a314ea62c58d853ad59c2ec90636eafb7">More...</a><br/></td></tr>
<tr class="separator:a314ea62c58d853ad59c2ec90636eafb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81ee7a7d599b286db861862ee953f11"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> = std::vector&lt; <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> &gt;</td></tr>
<tr class="memdesc:ae81ee7a7d599b286db861862ee953f11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type describing the mapping of library indices into optical detectors.  <a href="#ae81ee7a7d599b286db861862ee953f11">More...</a><br/></td></tr>
<tr class="separator:ae81ee7a7d599b286db861862ee953f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0864b89488045a318188f98af9d10640"><td class="memTemplParams" colspan="2">template&lt;typename LibDataColl &gt; </td></tr>
<tr class="memitem:a0864b89488045a318188f98af9d10640"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a> = <a class="el" href="classphot_1_1OpDetVisibilityData.html">phot::OpDetVisibilityData</a>&lt; <a class="el" href="group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt; LibDataColl &gt;, <a class="el" href="group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt; <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const  &gt; &gt;</td></tr>
<tr class="memdesc:a0864b89488045a318188f98af9d10640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of optical detector data collection.  <a href="#a0864b89488045a318188f98af9d10640">More...</a><br/></td></tr>
<tr class="separator:a0864b89488045a318188f98af9d10640"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2507e88faca7e9fa6019b214f9cd1781"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a2507e88faca7e9fa6019b214f9cd1781">~IPhotonMappingTransformations</a> ()=<a class="el" href="crtt0matchingalg__sbnd_8fcl.html#a6c2384a9e3f7a8c21ae6f762a8ee0ece">default</a></td></tr>
<tr class="separator:a2507e88faca7e9fa6019b214f9cd1781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ed0b05cd8d3cea8f5952b549df868d"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:ad3ed0b05cd8d3cea8f5952b549df868d"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad3ed0b05cd8d3cea8f5952b549df868d">applyOpDetMapping</a> (<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;opDetToLibraryMap, Coll &amp;&amp;<a class="el" href="condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue) const -&gt; <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt; Coll &gt;</td></tr>
<tr class="separator:ad3ed0b05cd8d3cea8f5952b549df868d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Geometry mapping interface</div></td></tr>
<tr class="memitem:ad8ccf8d8e4730cc0bbe89067368ed3ad"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad8ccf8d8e4730cc0bbe89067368ed3ad">detectorToLibrary</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const =0</td></tr>
<tr class="memdesc:ad8ccf8d8e4730cc0bbe89067368ed3ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the representation within the library of a detector location.  <a href="#ad8ccf8d8e4730cc0bbe89067368ed3ad">More...</a><br/></td></tr>
<tr class="separator:ad8ccf8d8e4730cc0bbe89067368ed3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Optical detector mapping interface</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Here the mapping is provided between optical detectors (<code>OpDetID_t</code>) and library indices (<code>LibraryIndex_t</code>).</p>
<p>Terms and roles of the various concepts involved in the mapping may be confusing: see the <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#PhotonMappingTransformations_Glossary">glossary</a> in <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html" title="Collection of functions to transform photon mapping data. ">phot::IPhotonMappingTransformations</a></code> class description for their definition. </p>
</div></td></tr>
<tr class="memitem:ad3a11e0ae4aa027d74cdfa9933562572"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad3a11e0ae4aa027d74cdfa9933562572">opDetToLibraryIndex</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> opDetID) const =0</td></tr>
<tr class="memdesc:ad3a11e0ae4aa027d74cdfa9933562572"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the library index for the specified optical detector.  <a href="#ad3a11e0ae4aa027d74cdfa9933562572">More...</a><br/></td></tr>
<tr class="separator:ad3a11e0ae4aa027d74cdfa9933562572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74d60b4a6f1c4a7cd665858c8c0bb2e"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae74d60b4a6f1c4a7cd665858c8c0bb2e">libraryIndexToOpDet</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> libIndex) const =0</td></tr>
<tr class="memdesc:ae74d60b4a6f1c4a7cd665858c8c0bb2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the optical detector ID for the specified library index.  <a href="#ae74d60b4a6f1c4a7cd665858c8c0bb2e">More...</a><br/></td></tr>
<tr class="separator:ae74d60b4a6f1c4a7cd665858c8c0bb2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3e00f745e8776803f0a4256a618be1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> <br class="typebreak"/>
const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1">opDetsToLibraryIndices</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const =0</td></tr>
<tr class="memdesc:afe3e00f745e8776803f0a4256a618be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of library indices as function of optical detectors.  <a href="#afe3e00f745e8776803f0a4256a618be1">More...</a><br/></td></tr>
<tr class="separator:afe3e00f745e8776803f0a4256a618be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d80dc2504dc87335a4f8fbdda02469"><td class="memItemLeft" align="right" valign="top">virtual std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a52d80dc2504dc87335a4f8fbdda02469">opDetMappingSize</a> () const =0</td></tr>
<tr class="memdesc:a52d80dc2504dc87335a4f8fbdda02469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected number of mappings of optical detector into library index.  <a href="#a52d80dc2504dc87335a4f8fbdda02469">More...</a><br/></td></tr>
<tr class="separator:a52d80dc2504dc87335a4f8fbdda02469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf3a2d9301e530840413d1cef0a7bd4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> <br class="typebreak"/>
const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4">libraryIndicesToOpDets</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const =0</td></tr>
<tr class="memdesc:a8bf3a2d9301e530840413d1cef0a7bd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of optical detectors identifiers, one for each library index.  <a href="#a8bf3a2d9301e530840413d1cef0a7bd4">More...</a><br/></td></tr>
<tr class="separator:a8bf3a2d9301e530840413d1cef0a7bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6842cb66a6c3dd95da821b92137ff1"><td class="memItemLeft" align="right" valign="top">virtual std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0a6842cb66a6c3dd95da821b92137ff1">libraryMappingSize</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location) const =0</td></tr>
<tr class="memdesc:a0a6842cb66a6c3dd95da821b92137ff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected size of the mapping from library to optical detectors.  <a href="#a0a6842cb66a6c3dd95da821b92137ff1">More...</a><br/></td></tr>
<tr class="separator:a0a6842cb66a6c3dd95da821b92137ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility methods</div></td></tr>
<tr class="memitem:a2a61d5974efeedb30784a8cbff59e04d"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:a2a61d5974efeedb30784a8cbff59e04d"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt; Coll &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a2a61d5974efeedb30784a8cbff59e04d">applyOpDetMapping</a> (<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;opDetToLibraryMap, Coll &amp;&amp;<a class="el" href="condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue={}) const </td></tr>
<tr class="memdesc:a2a61d5974efeedb30784a8cbff59e04d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaps a collection indexed by library index into one indexed by optical detector IDs.  <a href="#a2a61d5974efeedb30784a8cbff59e04d">More...</a><br/></td></tr>
<tr class="separator:a2a61d5974efeedb30784a8cbff59e04d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dcb61501eed216ef646b1db689c744e"><td class="memTemplParams" colspan="2">template&lt;typename Coll &gt; </td></tr>
<tr class="memitem:a3dcb61501eed216ef646b1db689c744e"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a3dcb61501eed216ef646b1db689c744e">applyOpDetMapping</a> (<a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;location, Coll &amp;&amp;<a class="el" href="condor__stop__project_8sh.html#a97e1f07713f796fdf1ef266b43236328">source</a>, <a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt; defaultValue={}) const </td></tr>
<tr class="memdesc:a3dcb61501eed216ef646b1db689c744e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaps a collection indexed by library index into one indexed by optical detector IDs according to the mapping at <code>location</code>.  <a href="#a3dcb61501eed216ef646b1db689c744e">More...</a><br/></td></tr>
<tr class="separator:a3dcb61501eed216ef646b1db689c744e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae40cb9cf601d9fec5382200a71a2fd63"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae40cb9cf601d9fec5382200a71a2fd63">InvalidOpDetID</a> = std::numeric_limits&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&gt;::max()</td></tr>
<tr class="memdesc:ae40cb9cf601d9fec5382200a71a2fd63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value used to identify an invalid optical detector.  <a href="#ae40cb9cf601d9fec5382200a71a2fd63">More...</a><br/></td></tr>
<tr class="separator:ae40cb9cf601d9fec5382200a71a2fd63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e0fb1c8e5aa956c428ff08414dab0e"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#aa7e0fb1c8e5aa956c428ff08414dab0e">InvalidLibraryIndex</a> = std::numeric_limits&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&gt;::max()</td></tr>
<tr class="memdesc:aa7e0fb1c8e5aa956c428ff08414dab0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value used for an invalid library index.  <a href="#aa7e0fb1c8e5aa956c428ff08414dab0e">More...</a><br/></td></tr>
<tr class="separator:aa7e0fb1c8e5aa956c428ff08414dab0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Collection of functions to transform photon mapping data. </p>
<p>If the optical detectors of an experiment sport some symmetry, it may be convenient to exploit that symmetry to reduce the actual size of the internal mapping to a basic volume, and using the symmetry rules to convert between that basic volume and the world volume where the entire detector is represented. It is common that the symmetries require also a logic rearrangement of the actual optical detectors: a hook for that type of mapping is also provided, bidirectional.</p>
<p>This interface expresses the following transformations:</p>
<ul>
<li><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad8ccf8d8e4730cc0bbe89067368ed3ad" title="Returns the representation within the library of a detector location. ">detectorToLibrary()</a></code> transform a point in the detector space to a point in the library space</li>
<li><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad3a11e0ae4aa027d74cdfa9933562572" title="Returns the library index for the specified optical detector. ">opDetToLibraryIndex()</a></code> transforms a optical detector ID into the corresponding library index</li>
<li><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae74d60b4a6f1c4a7cd665858c8c0bb2e" title="Returns the optical detector ID for the specified library index. ">libraryIndexToOpDet()</a></code> transforms a library index into the corresponding global optical detector ID</li>
</ul>
<h1>Glossary </h1>
<p><a class="anchor" id="PhotonMappingTransformations_Glossary"></a> In this class and its documentation the following terms are in use:</p>
<ul>
<li><em>library</em> is a source of data; our libraries mapping the real space into some parametrization, and store the data as function of the parametrization values. In particular, they usually parametrize the covered space into tiny boxes ("voxels") and they address the data with a voxel index; and for each voxel index they store a collection of data values, addressed by another independent index that we call...</li>
<li><em>detector space</em> or <em>world</em> is the physical space where the whole detector is represented; in LArSoft this space is described in the global (or world) coordinate system, and the geometry description (provided by <code><a class="el" href="classgeo_1_1GeometryCore.html" title="Description of geometry of one entire detector. ">geo::GeometryCore</a></code>) works in this space</li>
<li><em>library space</em> is a representation of the physical space covered by the library; it may effectively be a subset of the world space (e.g. a single drift volume) or it may be a completely local representation, that needs a mapping with the world space in order to be of any use</li>
<li><em>library identifier</em> or <em>library ID</em> or <em>library index</em> is the index used to access a single value of the library (after having chosen the voxel to get data for); note that the "library identifier" does not actually identify a library, but rather some specific data within the a library. This mapping class uses this concept to identify and select library data values, and uses the type <code>LibraryIndex_t</code> to represent it in the code</li>
<li><em>optical detector</em> is a LArSoft concept, representing a physical detector with a presence in the real world; in LArSoft, they may be represented by...</li>
<li><em>optical detector number</em> or <em>optical detector ID</em> is a unique identifier in the form of either an integral number or as a location structure, <code><a class="el" href="structgeo_1_1OpDetID.html" title="The data type to uniquely identify a optical detector. ">geo::OpDetID</a></code>; this concept is also used, e.g., as argument of <code><a class="el" href="classgeo_1_1GeometryCore.html#a03c3be304c290d57f8909c25e70cfd81" title="Returns the geo::OpDetGeo object for the given detector number. ">geo::GeometryCore::OpDetGeoFromOpDet()</a></code>. This mapping class uses the concept and the single unique number representation to identify the optical detector, and uses the local type <code>OpDetID_t</code> to represent it in the code;</li>
<li><em>optical detector readout channel</em> or just <em>channel</em> is a LArSoft</li>
<li>concept, representing a data single source from optical detectors, and associated with optical detector readout. In most detectors, there is one channel per optical detector and vice versa. It may be described in LArSoft by...</li>
<li><em>optical detector channel number</em> or <em>channel number</em> or (again) <em>channel</em> is a unique numeric identifier for a optical detector readout channel; this is used, e.g., as argument of <code><a class="el" href="classgeo_1_1GeometryCore.html#a03c3be304c290d57f8909c25e70cfd81" title="Returns the geo::OpDetGeo object for the given detector number. ">geo::GeometryCore::OpDetGeoFromOpDet()</a></code>)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>While optical detector and optical detector channels are different concepts, nothing this class is currently dealing with relies on any difference between the two. Nevertheless, given the nature of the library of providing visibility information based on the geometry of the detectors, using the concept of physical optical detector is more appropriate than using the one of readout channel.</dd></dl>
<h1>Technical notes </h1>
<h2>Mapping </h2>
<p>Currently the mapping is expressed with a specific type. If more flexibility is needed, the mapping might use run time polymorphism. This case is not supported right now. If need arose, something might be designed on top of what is here now. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00116">116</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ac7e5eb707bf6f054d9f0139a73011e58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">phot::IPhotonMappingTransformations::LibraryIndex_t</a> =  <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type describing a library index. FIXME former LibraryOpDetID_t. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00126">126</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a314ea62c58d853ad59c2ec90636eafb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">phot::IPhotonMappingTransformations::LibraryIndexToOpDetMap</a> =  std::vector&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type describing the mapping of optical detectors into library indices. </p>
<p>This type of mapping allows querying data values by optical detector ID, fetching them from library data source.</p>
<p>This type guarantees:</p>
<ul>
<li><code>operator[](OpDetID_t)</code> to fetch the library index associated to the specified optical detector</li>
<li><code><a class="el" href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size()</a></code> to report how many optical detectors are supported </li>
</ul>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00141">141</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0864b89488045a318188f98af9d10640"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename LibDataColl &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">phot::IPhotonMappingTransformations::MappedOpDetData_t</a> =  <a class="el" href="classphot_1_1OpDetVisibilityData.html">phot::OpDetVisibilityData</a> &lt; <a class="el" href="group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt;LibDataColl&gt;, <a class="el" href="group__ContainerMetaprogramming.html#gade1c763b1a3ce738e20d3e6e1273f307">util::collection_reference_t</a>&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of optical detector data collection. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">LibDataColl</td><td>type of the original library data container</td></tr>
  </table>
  </dd>
</dl>
<p>This type behaves like a random access collection with as index the optical detector ID and as value the data corresponding to that optical detector. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00174">174</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="adecfee9f922d0146508eca98b7abe276"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">phot::IPhotonMappingTransformations::OpDetID_t</a> =  int</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type describing a optical detector ID. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00123">123</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae81ee7a7d599b286db861862ee953f11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">phot::IPhotonMappingTransformations::OpDetToLibraryIndexMap</a> =  std::vector&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type describing the mapping of library indices into optical detectors. </p>
<p>This type of mapping allows querying data values by library index, fetching them from an optical-detector-based data source.</p>
<p>This type guarantees:</p>
<ul>
<li><code>operator[](LibraryIndex_t)</code> to access the optical detector ID of the specified library index</li>
<li><code><a class="el" href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size()</a></code> to report how many library optical detectors are supported</li>
<li>either conversion to <code>bool</code>, response to <code><a class="el" href="namespaceicarus_1_1ns_1_1util.html#a74da18d4f0023feee71c1352a99b3910">empty()</a></code> or to <code><a class="el" href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">std::size()</a></code> to determine if the contained data is valid (actually, just response to <code><a class="el" href="namespacephot.html#a6ffeec57ed095a4c622d914a2d7a6ea2" title="Returns the validity of content of library data in the container. ">phot::isValidLibraryData()</a></code>) </li>
</ul>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00159">159</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2507e88faca7e9fa6019b214f9cd1781"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual phot::IPhotonMappingTransformations::~IPhotonMappingTransformations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2a61d5974efeedb30784a8cbff59e04d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Coll &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt;Coll&gt; phot::IPhotonMappingTransformations::applyOpDetMapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;&#160;</td>
          <td class="paramname"><em>opDetToLibraryMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Coll &amp;&amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt;&#160;</td>
          <td class="paramname"><em>defaultValue</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remaps a collection indexed by library index into one indexed by optical detector IDs. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Coll</td><td>type of collection of data from the library, to be mapped </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opDetToLibraryMap</td><td>the mapping to be applied </td></tr>
    <tr><td class="paramname">source</td><td>collection of library data to be mapped </td></tr>
    <tr><td class="paramname">defaultValue</td><td>value returned for unmapped optical detector IDs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a random access collection providing data by optical detector ID</dd></dl>
<p>This method returns a collection proxy that dynamically applies the specified mapping. The original data is not copied.</p>
<p>The format of the map (<code>opDetMap</code>) is an object with a indexing operator where the index is <em>the one in the destination collection</em> (i.e. the optical detector ID) and the mapped value is the index in the source collection (the libary index). Each valid optical detector ID must be mapped. If the library index mapped to an optical detector is <code>InvalidLibraryIndex</code>, that optical detector is not mapped anywhere and its entry in the mapped collection is assigned the value <code>defaultValue</code>. Otherwise, the library index must be valid (which means, up to the result of <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0a6842cb66a6c3dd95da821b92137ff1" title="Expected size of the mapping from library to optical detectors. ">libraryMappingSize()</a></code> applied to the location where <code>opDetMap</code> is valid). </p>

</div>
</div>
<a class="anchor" id="a3dcb61501eed216ef646b1db689c744e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Coll &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto phot::IPhotonMappingTransformations::applyOpDetMapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Coll &amp;&amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt;&#160;</td>
          <td class="paramname"><em>defaultValue</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remaps a collection indexed by library index into one indexed by optical detector IDs according to the mapping at <code>location</code>. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Coll</td><td>type of collection of data from the library, to be mapped </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a world reference point to provide global context </td></tr>
    <tr><td class="paramname">source</td><td>collection of library data to be mapped </td></tr>
    <tr><td class="paramname">defaultValue</td><td>value returned for unmapped optical detector IDs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a random access collection providing data by optical detector ID </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a2a61d5974efeedb30784a8cbff59e04d" title="Remaps a collection indexed by library index into one indexed by optical detector IDs...">applyOpDetMapping()</a></code></dd></dl>
<p>This method applies a mapping (see <code>applyOpDetMapping(OpDetToLibraryIndexMap const&amp;, Coll&amp;&amp;, <a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0" title="Type contained in the collection Coll. ">util::collection_value_t</a>&lt;Coll&gt;)</code>) that is obtained via <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4" title="Returns a map of optical detectors identifiers, one for each library index. ">libraryIndicesToOpDets()</a></code>. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00403">403</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                                  {}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      ) <span class="keyword">const</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classphot_1_1IPhotonMappingTransformations.html#a2a61d5974efeedb30784a8cbff59e04d">applyOpDetMapping</a>(</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          <a class="code" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1">opDetsToLibraryIndices</a>(location), std::forward&lt;Coll&gt;(<a class="code" href="updateVersionList_8sh.html#a105d60ff52767c8ff2f42edb14ca79a4">source</a>),</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          defaultValue</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      }</div>
<div class="ttc" id="updateVersionList_8sh_html_a105d60ff52767c8ff2f42edb14ca79a4"><div class="ttname"><a href="updateVersionList_8sh.html#a105d60ff52767c8ff2f42edb14ca79a4">source</a></div><div class="ttdeci">do source</div><div class="ttdef"><b>Definition:</b> <a href="updateVersionList_8sh_source.html#l00032">updateVersionList.sh:32</a></div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_afe3e00f745e8776803f0a4256a618be1"><div class="ttname"><a href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1">phot::IPhotonMappingTransformations::opDetsToLibraryIndices</a></div><div class="ttdeci">virtual OpDetToLibraryIndexMap const &amp; opDetsToLibraryIndices(geo::Point_t const &amp;location) const =0</div><div class="ttdoc">Returns a map of library indices as function of optical detectors. </div></div>
<div class="ttc" id="classphot_1_1IPhotonMappingTransformations_html_a2a61d5974efeedb30784a8cbff59e04d"><div class="ttname"><a href="classphot_1_1IPhotonMappingTransformations.html#a2a61d5974efeedb30784a8cbff59e04d">phot::IPhotonMappingTransformations::applyOpDetMapping</a></div><div class="ttdeci">MappedOpDetData_t&lt; Coll &gt; applyOpDetMapping(OpDetToLibraryIndexMap const &amp;opDetToLibraryMap, Coll &amp;&amp;source, util::collection_value_t&lt; Coll &gt; defaultValue={}) const </div><div class="ttdoc">Remaps a collection indexed by library index into one indexed by optical detector IDs...</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad3ed0b05cd8d3cea8f5952b549df868d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Coll &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto phot::IPhotonMappingTransformations::applyOpDetMapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const &amp;&#160;</td>
          <td class="paramname"><em>opDetToLibraryMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Coll &amp;&amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ContainerMetaprogramming.html#gaa4df4a53b59d80b5d8b688bbb2fd6bd0">util::collection_value_t</a>&lt; Coll &gt;&#160;</td>
          <td class="paramname"><em>defaultValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a0864b89488045a318188f98af9d10640">MappedOpDetData_t</a>&lt;Coll&gt;
</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00429">429</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">std::size</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// number of available destination slots (i.e. how many optical detectors)</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a> = <a class="code" href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">size</a>(opDetToLibraryMap);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> MappedOpDetData_t&lt;Coll&gt;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="group__ContainerMetaprogramming.html#ga905d3846eb20504eee9d539b96af3f44">util::make_collection_reference</a>(std::forward&lt;Coll&gt;(<a class="code" href="updateVersionList_8sh.html#a105d60ff52767c8ff2f42edb14ca79a4">source</a>))</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    , std::cref(opDetToLibraryMap) <span class="comment">// mapping is referenced</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    , <a class="code" href="namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">n</a>                            <span class="comment">// size</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    , defaultValue</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    };</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;} <span class="comment">// phot::IPhotonMappingTransformations::applyOpDetMapping()</span></div>
<div class="ttc" id="group__ContainerMetaprogramming_html_ga905d3846eb20504eee9d539b96af3f44"><div class="ttname"><a href="group__ContainerMetaprogramming.html#ga905d3846eb20504eee9d539b96af3f44">util::make_collection_reference</a></div><div class="ttdeci">auto make_collection_reference(Coll &amp;&amp;coll)</div><div class="ttdoc">Returns an object referencing to the data contained in coll. </div><div class="ttdef"><b>Definition:</b> <a href="ContainerMeta_8h_source.html#l00413">ContainerMeta.h:413</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a105d60ff52767c8ff2f42edb14ca79a4"><div class="ttname"><a href="updateVersionList_8sh.html#a105d60ff52767c8ff2f42edb14ca79a4">source</a></div><div class="ttdeci">do source</div><div class="ttdef"><b>Definition:</b> <a href="updateVersionList_8sh_source.html#l00032">updateVersionList.sh:32</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_aaae74cf315284bc0f44c2e050c119781"><div class="ttname"><a href="namespaceicarus_1_1ns_1_1util.html#aaae74cf315284bc0f44c2e050c119781">icarus::ns::util::size</a></div><div class="ttdeci">std::size_t size(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="FixedBins_8h_source.html#l00561">FixedBins.h:561</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_ab6cfbbcbb53c275375289d47dec67f46"><div class="ttname"><a href="namespacechannelDBConverter.html#ab6cfbbcbb53c275375289d47dec67f46">channelDBConverter.n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="channelDBConverter_8py_source.html#l00249">channelDBConverter.py:249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad8ccf8d8e4730cc0bbe89067368ed3ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> phot::IPhotonMappingTransformations::detectorToLibrary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the representation within the library of a detector location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>position in world coordinates [cm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector expressing <code>location</code> in the library space </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if the function can't handle <code>location</code></td></tr>
  </table>
  </dd>
</dl>
<p>The units and meaning of the returned location are library-dependent.</p>
<p>Example: assuming that <code>fVoxelDef</code> contains the description of the voxelization of the library, the ID of the voxel at <code>location</code> can be obtained from a <code>mapping</code> as: </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <span class="keyword">const</span> voxelID</div>
<div class="line">  = fVoxelDef.GetVoxelID(mapping-&gt;detectorToLibrary(location));</div>
</div><!-- fragment --><p> where <code>mapping</code> points to an object implementing the <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html" title="Collection of functions to transform photon mapping data. ">phot::IPhotonMappingTransformations</a></code> interface. Note that the caller here has no business with the translated location, beside propagating it to the library: caller simply is not explained the meaning of that translated location. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#adc542d50517909e2fa6b8b38c381005c">phot::ICARUSPhotonMappingTransformations</a>, <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#ada32277cc7319803d85b2bfe28a70d3b">phot::PhotonMappingIdentityTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingXMirrorTransformations.html#af61cba3472f806d3cb4a967d66613723">phot::PhotonMappingXMirrorTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="ae74d60b4a6f1c4a7cd665858c8c0bb2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> phot::IPhotonMappingTransformations::libraryIndexToOpDet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&#160;</td>
          <td class="paramname"><em>libIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the optical detector ID for the specified library index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a point in detector space to provide global context </td></tr>
    <tr><td class="paramname">libIndex</td><td>library index to be mapped </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>optical detector corresponding to <code>libIndex</code>, or <code>InvalidOpDetID</code> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if input index can't be handled </td></tr>
    <tr><td class="paramname">std::domain_error</td><td>if location can't be handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad3a11e0ae4aa027d74cdfa9933562572" title="Returns the library index for the specified optical detector. ">opDetToLibraryIndex()</a></code>, <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4" title="Returns a map of optical detectors identifiers, one for each library index. ">libraryIndicesToOpDets()</a></code></dd></dl>
<p>The library index <code>libIndex</code> is converted into a optical detector ID. If the library does not include information for this optical detector, the value <code>InvalidLibraryIndex</code> is returned instead.</p>
<p>The specified <code>location</code> is used to inform the conversion, and it is usually pointing to the source of scintillation. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#a52663cbda87fa69209240d778940a98b">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#a0dea3baf8d53acfcc58584666bd0b600">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="a8bf3a2d9301e530840413d1cef0a7bd4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a314ea62c58d853ad59c2ec90636eafb7">LibraryIndexToOpDetMap</a> const&amp; phot::IPhotonMappingTransformations::libraryIndicesToOpDets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a map of optical detectors identifiers, one for each library index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a world reference point to provide global context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>optical detector identifiers for all library indices </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if location can't be handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code>, <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae74d60b4a6f1c4a7cd665858c8c0bb2e" title="Returns the optical detector ID for the specified library index. ">libraryIndexToOpDet()</a></code></dd></dl>
<p>The returned value is a mapping object (see <code>LibraryIndexToOpDetMap</code> documentation for the interface). If a library index does not map to any optical detector in the library at <code>location</code> (which is unusual!), the optical detector ID corresponding to it is <code>InvalidOpDetID</code>.</p>
<p>The specified <code>location</code> is used to provide context in a similar fashion as <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad8ccf8d8e4730cc0bbe89067368ed3ad" title="Returns the representation within the library of a detector location. ">detectorToLibrary()</a></code> does. It can be used to choose the correct mapping among the available ones. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#aa5f39118f8fc6f1724c7caac5527a0e8">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#a821bf7e7d937c76468af1c51cf5145ff">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="a0a6842cb66a6c3dd95da821b92137ff1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::size_t phot::IPhotonMappingTransformations::libraryMappingSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expected size of the mapping from library to optical detectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a world reference point to provide global context </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if location can't be handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the expected size of the mapping from library indices to optical detectors </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4" title="Returns a map of optical detectors identifiers, one for each library index. ">libraryIndicesToOpDets()</a></code></dd></dl>
<p>This is effectively the size of the mapping returned by <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#a8bf3a2d9301e530840413d1cef0a7bd4" title="Returns a map of optical detectors identifiers, one for each library index. ">libraryIndicesToOpDets()</a></code>. It represents how many library indices are provided by the library for the specified <code>location</code>. For example, in an implementation exploiting the modularity of a detector with <em>N</em> channels and made of <em>M</em> modules, this value might be <em>N / M</em>. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#a3acbb47f3c62ad3f2a23697f6fe3a05a">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#aaa2550118617b1d37ff20c11dec1401d">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="a52d80dc2504dc87335a4f8fbdda02469"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::size_t phot::IPhotonMappingTransformations::opDetMappingSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expected number of mappings of optical detector into library index. </p>
<dl class="section return"><dt>Returns</dt><dd>the expected size of the mapping of optical detectors </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code></dd></dl>
<p>This is effectively the number of available optical detectors, as well as the size of the mapping as returned by <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code>. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#ad43475a025d8d857cd6ec425245ded34">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#aed095d6296a24fba9c42daab2fb1ef61">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="afe3e00f745e8776803f0a4256a618be1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae81ee7a7d599b286db861862ee953f11">OpDetToLibraryIndexMap</a> const&amp; phot::IPhotonMappingTransformations::opDetsToLibraryIndices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a map of library indices as function of optical detectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a world reference point to provide global context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>library indices for all optical detectors </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if location can't be handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ad3a11e0ae4aa027d74cdfa9933562572" title="Returns the library index for the specified optical detector. ">opDetToLibraryIndex()</a></code>, <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code></dd></dl>
<p>The returned value is a mapping object (see <code>OpDetToLibraryIndexMap</code> documentation for the interface). If an optical detector has no representation in the library at <code>location</code>, the index value corresponding to it is <code>InvalidLibraryIndex</code>.</p>
<p>The specified <code>location</code> is used to inform the conversion, and it is usually pointing to the source of scintillation. It may be left unused. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#a44383e622cd6f364a110d956f3696980">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#abc346baf3ba0088acbcf2c737793c920">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<a class="anchor" id="ad3a11e0ae4aa027d74cdfa9933562572"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> phot::IPhotonMappingTransformations::opDetToLibraryIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> const &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&#160;</td>
          <td class="paramname"><em>opDetID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the library index for the specified optical detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>a point in detector space to provide global context </td></tr>
    <tr><td class="paramname">opDetID</td><td>optical detector identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index corresponding to <code>opDetID</code>, or <code>InvalidLibraryIndex</code> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if input optical detector can't be handled </td></tr>
    <tr><td class="paramname">std::domain_error</td><td>if location can't be handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ae74d60b4a6f1c4a7cd665858c8c0bb2e" title="Returns the optical detector ID for the specified library index. ">libraryIndexToOpDet()</a></code>, <code><a class="el" href="classphot_1_1IPhotonMappingTransformations.html#afe3e00f745e8776803f0a4256a618be1" title="Returns a map of library indices as function of optical detectors. ">opDetsToLibraryIndices()</a></code></dd></dl>
<p>The specified global identifier <code>opDetID</code> of an optical detector is converted into an index for the library.</p>
<p>If the library does not include information for this optical detector, the value <code>InvalidLibraryIndex</code> is returned instead.</p>
<p>The specified <code>location</code> is used to inform the conversion, and it is usually pointing to the source of scintillation. </p>

<p>Implemented in <a class="el" href="classphot_1_1ICARUSPhotonMappingTransformations.html#ad544ae1d740230de5c98066ce7062822">phot::ICARUSPhotonMappingTransformations</a>, and <a class="el" href="classphot_1_1PhotonMappingIdentityTransformations.html#a58183f1afb254b457e9cda02210fe26b">phot::PhotonMappingIdentityTransformations</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aa7e0fb1c8e5aa956c428ff08414dab0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a> phot::IPhotonMappingTransformations::InvalidLibraryIndex = std::numeric_limits&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#ac7e5eb707bf6f054d9f0139a73011e58">LibraryIndex_t</a>&gt;::max()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Value used for an invalid library index. </p>
<p>It may be used as value of the detector-to-library mapping. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00193">193</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae40cb9cf601d9fec5382200a71a2fd63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a> phot::IPhotonMappingTransformations::InvalidOpDetID = std::numeric_limits&lt;<a class="el" href="classphot_1_1IPhotonMappingTransformations.html#adecfee9f922d0146508eca98b7abe276">OpDetID_t</a>&gt;::max()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Value used to identify an invalid optical detector. </p>
<p>It may be used as value of the library-to-detector mapping. </p>

<p>Definition at line <a class="el" href="IPhotonMappingTransformations_8h_source.html#l00185">185</a> of file <a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>larsim/larsim/PhotonPropagation/LibraryMappingTools/<a class="el" href="IPhotonMappingTransformations_8h_source.html">IPhotonMappingTransformations.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
