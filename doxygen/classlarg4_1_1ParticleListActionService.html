<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>larg4::ParticleListActionService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelarg4.html">larg4</a></li><li class="navelem"><a class="el" href="classlarg4_1_1ParticleListActionService.html">ParticleListActionService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classlarg4_1_1ParticleListActionService-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">larg4::ParticleListActionService Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for larg4::ParticleListActionService:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classlarg4_1_1ParticleListActionService.png" usemap="#larg4::ParticleListActionService_map" alt=""/>
  <map id="larg4::ParticleListActionService_map" name="larg4::ParticleListActionService_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html">ParticleInfo_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a834c59921d7904efdabadb7c81cfce66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a834c59921d7904efdabadb7c81cfce66">ParticleListActionService</a> (fhicl::ParameterSet const &amp;)</td></tr>
<tr class="separator:a834c59921d7904efdabadb7c81cfce66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b3626009c7ceda55731bc5df671a17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a57b3626009c7ceda55731bc5df671a17">preUserTrackingAction</a> (const G4Track *) override</td></tr>
<tr class="separator:a57b3626009c7ceda55731bc5df671a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1206a15eb083e2a1f6c45464beb5b697"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a1206a15eb083e2a1f6c45464beb5b697">postUserTrackingAction</a> (const G4Track *) override</td></tr>
<tr class="separator:a1206a15eb083e2a1f6c45464beb5b697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a735e182e6ef0822f33cbc5fa30730840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a735e182e6ef0822f33cbc5fa30730840">userSteppingAction</a> (const G4Step *) override</td></tr>
<tr class="separator:a735e182e6ef0822f33cbc5fa30730840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d9f01c5c0375d8022e2a69996a378f"><td class="memItemLeft" align="right" valign="top">simb::GeneratedParticleIndex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a10d9f01c5c0375d8022e2a69996a378f">GetPrimaryTruthIndex</a> (int trackId) const </td></tr>
<tr class="memdesc:a10d9f01c5c0375d8022e2a69996a378f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the index of primary truth (<code>sim::NoGeneratorIndex</code> if none).  <a href="#a10d9f01c5c0375d8022e2a69996a378f">More...</a><br/></td></tr>
<tr class="separator:a10d9f01c5c0375d8022e2a69996a378f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6112ed2bacbbaa09f919533fa8c07a11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a6112ed2bacbbaa09f919533fa8c07a11">beginOfEventAction</a> (const G4Event *) override</td></tr>
<tr class="separator:a6112ed2bacbbaa09f919533fa8c07a11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1f653149c2a963df7cd90a4bda0e627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#af1f653149c2a963df7cd90a4bda0e627">endOfEventAction</a> (const G4Event *) override</td></tr>
<tr class="separator:af1f653149c2a963df7cd90a4bda0e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaeb15b28b8f28ed785ffecf28d0768e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#acaeb15b28b8f28ed785ffecf28d0768e">setInputCollections</a> (std::vector&lt; art::Handle&lt; std::vector&lt; simb::MCTruth &gt;&gt;&gt; const &amp;mclists)</td></tr>
<tr class="separator:acaeb15b28b8f28ed785ffecf28d0768e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf816001f5fdbfc97a9b964f9791c309"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#adf816001f5fdbfc97a9b964f9791c309">setPtrInfo</a> (art::ProductID pid, art::EDProductGetter const *productGetter)</td></tr>
<tr class="separator:adf816001f5fdbfc97a9b964f9791c309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75d715a5c34f5abb39d33feac3d271f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; std::vector<br class="typebreak"/>
&lt; simb::MCParticle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ac75d715a5c34f5abb39d33feac3d271f">ParticleCollection</a> ()</td></tr>
<tr class="separator:ac75d715a5c34f5abb39d33feac3d271f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bcbd651b7a3605186db460a23a93683"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; art::Assns<br class="typebreak"/>
&lt; simb::MCTruth, <br class="typebreak"/>
simb::MCParticle, <br class="typebreak"/>
<a class="el" href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a6bcbd651b7a3605186db460a23a93683">AssnsMCTruthToMCParticle</a> ()</td></tr>
<tr class="separator:a6bcbd651b7a3605186db460a23a93683"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa88e795de2dd234ff145ebd4cb83ade5"><td class="memItemLeft" align="right" valign="top">sim::ParticleList &amp;&amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#aa88e795de2dd234ff145ebd4cb83ade5">YieldList</a> ()</td></tr>
<tr class="separator:aa88e795de2dd234ff145ebd4cb83ade5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f5919a0ac6b27c60192b1c7ca66923"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ae0f5919a0ac6b27c60192b1c7ca66923">GetParentage</a> (int trackid) const </td></tr>
<tr class="separator:ae0f5919a0ac6b27c60192b1c7ca66923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad573d861f6b2a1a720ffbc4108d08679"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">AddPointToCurrentParticle</a> (TLorentzVector const &amp;pos, TLorentzVector const &amp;mom, std::string const &amp;process)</td></tr>
<tr class="memdesc:ad573d861f6b2a1a720ffbc4108d08679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a trajectory point to the current particle, and runs the filter.  <a href="#ad573d861f6b2a1a720ffbc4108d08679">More...</a><br/></td></tr>
<tr class="separator:ad573d861f6b2a1a720ffbc4108d08679"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a221fda7268947395f3789b83f8b1cc61"><td class="memItemLeft" align="right" valign="top">G4double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a221fda7268947395f3789b83f8b1cc61">fenergyCut</a></td></tr>
<tr class="separator:a221fda7268947395f3789b83f8b1cc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c04e140e82ead36cb3812ca38148a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html">ParticleInfo_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a></td></tr>
<tr class="separator:a1c04e140e82ead36cb3812ca38148a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01872428875cace5d1d3e2752f041faa"><td class="memItemLeft" align="right" valign="top">sim::ParticleList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a></td></tr>
<tr class="separator:a01872428875cace5d1d3e2752f041faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc38037c6226f980663d2396ee12ef7b"><td class="memItemLeft" align="right" valign="top">G4bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a></td></tr>
<tr class="memdesc:adc38037c6226f980663d2396ee12ef7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to store particle trajectories with each particle.  <a href="#adc38037c6226f980663d2396ee12ef7b">More...</a><br/></td></tr>
<tr class="separator:adc38037c6226f980663d2396ee12ef7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb64558ef3d0c7602ace45b9b37d2efc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">fkeepGenTrajectories</a></td></tr>
<tr class="separator:abb64558ef3d0c7602ace45b9b37d2efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af358a6f10565846a8a208ac4c0b5e7c1"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a></td></tr>
<tr class="memdesc:af358a6f10565846a8a208ac4c0b5e7c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">key is current track ID, value is parent ID  <a href="#af358a6f10565846a8a208ac4c0b5e7c1">More...</a><br/></td></tr>
<tr class="separator:af358a6f10565846a8a208ac4c0b5e7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1e115646fccbf82d9d254971e5d4fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a></td></tr>
<tr class="separator:a9d1e115646fccbf82d9d254971e5d4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82eadd5f395a1029e1beee05f8d43e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a></td></tr>
<tr class="separator:aa82eadd5f395a1029e1beee05f8d43e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4ad667694602c583a440241924bafd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ad4ad667694602c583a440241924bafd6">fKeepEMShowerDaughters</a></td></tr>
<tr class="memdesc:ad4ad667694602c583a440241924bafd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">whether to keep EM shower secondaries, tertiaries, etc  <a href="#ad4ad667694602c583a440241924bafd6">More...</a><br/></td></tr>
<tr class="separator:ad4ad667694602c583a440241924bafd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b68e141cbd076ce6a038775f292961"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a16b68e141cbd076ce6a038775f292961">fNotStoredPhysics</a></td></tr>
<tr class="memdesc:a16b68e141cbd076ce6a038775f292961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Physics processes that will not be stored.  <a href="#a16b68e141cbd076ce6a038775f292961">More...</a><br/></td></tr>
<tr class="separator:a16b68e141cbd076ce6a038775f292961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca7cf76669c521dda351de097b4db46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a6ca7cf76669c521dda351de097b4db46">fkeepOnlyPrimaryFullTraj</a></td></tr>
<tr class="separator:a6ca7cf76669c521dda351de097b4db46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dbe53104392b54165aef6c9669b01f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a26dbe53104392b54165aef6c9669b01f">fSparsifyTrajectories</a></td></tr>
<tr class="memdesc:a26dbe53104392b54165aef6c9669b01f"><td class="mdescLeft">&#160;</td><td class="mdescRight">help reduce the number of trajectory points.  <a href="#a26dbe53104392b54165aef6c9669b01f">More...</a><br/></td></tr>
<tr class="separator:a26dbe53104392b54165aef6c9669b01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f76e481562c1a737add36169a82234f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a5f76e481562c1a737add36169a82234f">fSparsifyMargin</a></td></tr>
<tr class="memdesc:a5f76e481562c1a737add36169a82234f"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the sparsification margin  <a href="#a5f76e481562c1a737add36169a82234f">More...</a><br/></td></tr>
<tr class="separator:a5f76e481562c1a737add36169a82234f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79ba8a05b5dedd662bb5d6d1c7174a8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a79ba8a05b5dedd662bb5d6d1c7174a8d">fKeepTransportation</a></td></tr>
<tr class="memdesc:a79ba8a05b5dedd662bb5d6d1c7174a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">tell whether or not to keep the transportation process  <a href="#a79ba8a05b5dedd662bb5d6d1c7174a8d">More...</a><br/></td></tr>
<tr class="separator:a79ba8a05b5dedd662bb5d6d1c7174a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9aefc0425517fdcf23898803ce35ebc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ab9aefc0425517fdcf23898803ce35ebc">fKeepSecondToLast</a></td></tr>
<tr class="memdesc:ab9aefc0425517fdcf23898803ce35ebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">tell whether or not to force keeping the second to last point  <a href="#ab9aefc0425517fdcf23898803ce35ebc">More...</a><br/></td></tr>
<tr class="separator:ab9aefc0425517fdcf23898803ce35ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; art::Handle<br class="typebreak"/>
&lt; std::vector&lt; simb::MCTruth &gt;<br class="typebreak"/>
 &gt; &gt; const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">fMCLists</a></td></tr>
<tr class="memdesc:a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">MCTruthCollection input lists.  <a href="#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">More...</a><br/></td></tr>
<tr class="separator:a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3687a0b04c384c04f23ee87bff8fb76"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <br class="typebreak"/>
simb::GeneratedParticleIndex_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">fPrimaryTruthMap</a></td></tr>
<tr class="memdesc:af3687a0b04c384c04f23ee87bff8fb76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map: particle track ID -&gt; index of primary information in MC truth.  <a href="#af3687a0b04c384c04f23ee87bff8fb76">More...</a><br/></td></tr>
<tr class="separator:af3687a0b04c384c04f23ee87bff8fb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a478f26624fc0fbf431a348402db7d44c"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a></td></tr>
<tr class="memdesc:a478f26624fc0fbf431a348402db7d44c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map: particle track ID -&gt; index of primary parent in std::vector&lt;simb::MCTruth&gt; object.  <a href="#a478f26624fc0fbf431a348402db7d44c">More...</a><br/></td></tr>
<tr class="separator:a478f26624fc0fbf431a348402db7d44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a014523f52862136fec5351ad90862887"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">fMCTPrimProcessKeepMap</a></td></tr>
<tr class="memdesc:a014523f52862136fec5351ad90862887"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map: particle trakc ID -&gt; boolean decision to keep or not full trajectory points.  <a href="#a014523f52862136fec5351ad90862887">More...</a><br/></td></tr>
<tr class="separator:a014523f52862136fec5351ad90862887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813e1823e4b0cb16c4c4c56f416440a1"><td class="memItemLeft" align="right" valign="top">std::map&lt; size_t, std::pair<br class="typebreak"/>
&lt; std::string, G4bool &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">fMCTIndexToGeneratorMap</a></td></tr>
<tr class="memdesc:a813e1823e4b0cb16c4c4c56f416440a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map: MCTruthIndex -&gt; generator, input label of generator and keepGenerator decision.  <a href="#a813e1823e4b0cb16c4c4c56f416440a1">More...</a><br/></td></tr>
<tr class="separator:a813e1823e4b0cb16c4c4c56f416440a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c90f2943319e795818543e5595feaa9"><td class="memItemLeft" align="right" valign="top">std::unordered_map<br class="typebreak"/>
&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a></td></tr>
<tr class="memdesc:a7c90f2943319e795818543e5595feaa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map: not stored process and counter.  <a href="#a7c90f2943319e795818543e5595feaa9">More...</a><br/></td></tr>
<tr class="separator:a7c90f2943319e795818543e5595feaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7cf914b7ec32a8091ad73a01b5448c5"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; std::vector<br class="typebreak"/>
&lt; simb::MCParticle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">partCol_</a></td></tr>
<tr class="separator:ab7cf914b7ec32a8091ad73a01b5448c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc969aa88c21210804e3390dd164fa0"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; art::Assns<br class="typebreak"/>
&lt; simb::MCTruth, <br class="typebreak"/>
simb::MCParticle, <br class="typebreak"/>
<a class="el" href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#aabc969aa88c21210804e3390dd164fa0">tpassn_</a></td></tr>
<tr class="separator:aabc969aa88c21210804e3390dd164fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26565b300dde7b137cbe6766121ad059"><td class="memItemLeft" align="right" valign="top">art::ProductID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#a26565b300dde7b137cbe6766121ad059">pid_</a> {art::ProductID::invalid()}</td></tr>
<tr class="separator:a26565b300dde7b137cbe6766121ad059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb003e652a5d582737430824ba649153"><td class="memItemLeft" align="right" valign="top">art::EDProductGetter const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlarg4_1_1ParticleListActionService.html#afb003e652a5d582737430824ba649153">productGetter_</a> {nullptr}</td></tr>
<tr class="separator:afb003e652a5d582737430824ba649153"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00044">44</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a834c59921d7904efdabadb7c81cfce66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">larg4::ParticleListActionService::ParticleListActionService </td>
          <td>(</td>
          <td class="paramtype">fhicl::ParameterSet const &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00068">68</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    : artg4tk::EventActionBase(<span class="stringliteral">&quot;PLASEventActionBase&quot;</span>)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    , artg4tk::TrackingActionBase(<span class="stringliteral">&quot;PLASTrackingActionBase&quot;</span>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    , artg4tk::SteppingActionBase(<span class="stringliteral">&quot;PLASSteppingActionBase&quot;</span>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    , <a class="code" href="classlarg4_1_1ParticleListActionService.html#a221fda7268947395f3789b83f8b1cc61">fenergyCut</a>(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;EnergyCut&quot;</span>, 0.0 * <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>))</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    , <a class="code" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a>(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;storeTrajectories&quot;</span>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    , <a class="code" href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">fkeepGenTrajectories</a>(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>.get&lt;std::vector&lt;std::string&gt;&gt;(<span class="stringliteral">&quot;keepGenTrajectories&quot;</span>, {}))</div>
<div class="ttc" id="TriggerEfficiencyPlots__module_8cc_html_a9b9a9849202763819111e555ade76102"><div class="ttname"><a href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">GeV</a></div><div class="ttdeci">util::quantities::gigaelectronvolt GeV</div><div class="ttdef"><b>Definition:</b> <a href="TriggerEfficiencyPlots__module_8cc_source.html#l00090">TriggerEfficiencyPlots_module.cc:90</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a221fda7268947395f3789b83f8b1cc61"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a221fda7268947395f3789b83f8b1cc61">larg4::ParticleListActionService::fenergyCut</a></div><div class="ttdeci">G4double fenergyCut</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00143">ParticleListAction_service.h:143</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_abb64558ef3d0c7602ace45b9b37d2efc"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">larg4::ParticleListActionService::fkeepGenTrajectories</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fkeepGenTrajectories</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00151">ParticleListAction_service.h:151</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_adc38037c6226f980663d2396ee12ef7b"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">larg4::ParticleListActionService::fstoreTrajectories</a></div><div class="ttdeci">G4bool fstoreTrajectories</div><div class="ttdoc">Whether to store particle trajectories with each particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00149">ParticleListAction_service.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad573d861f6b2a1a720ffbc4108d08679"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::AddPointToCurrentParticle </td>
          <td>(</td>
          <td class="paramtype">TLorentzVector const &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TLorentzVector const &amp;&#160;</td>
          <td class="paramname"><em>mom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a trajectory point to the current particle, and runs the filter. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00691">691</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// Add the first point in the trajectory.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;AddTrajectoryPoint(pos, mom, process, <a class="code" href="classlarg4_1_1ParticleListActionService.html#a79ba8a05b5dedd662bb5d6d1c7174a8d">fKeepTransportation</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  }</div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a17d73395d8ef48a32d16d857ebb5e4a7"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">larg4::ParticleListActionService::ParticleInfo_t::particle</a></div><div class="ttdeci">simb::MCParticle * particle</div><div class="ttdoc">simple structure representing particle </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00098">ParticleListAction_service.h:98</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a79ba8a05b5dedd662bb5d6d1c7174a8d"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a79ba8a05b5dedd662bb5d6d1c7174a8d">larg4::ParticleListActionService::fKeepTransportation</a></div><div class="ttdeci">bool fKeepTransportation</div><div class="ttdoc">tell whether or not to keep the transportation process </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00167">ParticleListAction_service.h:167</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1c04e140e82ead36cb3812ca38148a75"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">larg4::ParticleListActionService::fCurrentParticle</a></div><div class="ttdeci">ParticleInfo_t fCurrentParticle</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00145">ParticleListAction_service.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6bcbd651b7a3605186db460a23a93683"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;art::Assns&lt;simb::MCTruth, simb::MCParticle, <a class="el" href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a>&gt; &gt; larg4::ParticleListActionService::AssnsMCTruthToMCParticle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00091">91</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> std::move(<a class="code" href="classlarg4_1_1ParticleListActionService.html#aabc969aa88c21210804e3390dd164fa0">tpassn_</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aabc969aa88c21210804e3390dd164fa0"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aabc969aa88c21210804e3390dd164fa0">larg4::ParticleListActionService::tpassn_</a></div><div class="ttdeci">std::unique_ptr&lt; art::Assns&lt; simb::MCTruth, simb::MCParticle, sim::GeneratedParticleInfo &gt; &gt; tpassn_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00190">ParticleListAction_service.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6112ed2bacbbaa09f919533fa8c07a11"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::beginOfEventAction </td>
          <td>(</td>
          <td class="paramtype">const G4Event *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00132">132</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// Clear any previous particle information.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">clear</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.clear();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>.clear();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a>.clear();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">fMCTPrimProcessKeepMap</a>.clear();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> = <a class="code" href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a> = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">fPrimaryTruthMap</a>.clear();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">fMCTIndexToGeneratorMap</a>.clear();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>.clear();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// -- D.R. If a custom list of keepGenTrajectories is provided, use it, otherwise</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">//    keep or drop decision made based storeTrajectories parameter. This preserves</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">//    the behavior of the storeTrajectories fhicl param</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">bool</span> customKeepTraj = not <a class="code" href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">fkeepGenTrajectories</a>.empty();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a>) { <span class="comment">// -- fstoreTrajectories : false</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      mf::LogDebug(<span class="stringliteral">&quot;beginOfEventAction::Generator&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Trajectory points will not be stored.&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!customKeepTraj) { <span class="comment">// -- fstoretrajectories : true and empty keepGenTrajectories list</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      mf::LogDebug(<span class="stringliteral">&quot;beginOfEventAction::Generator&quot;</span>)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;keepGenTrajectories list is empty. Will&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; store trajectory points for all generators&quot;</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// -- D.R. determine mapping between MCTruthIndex(s) and generator(s) for later reference</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">size_t</span> nKeep = 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    std::string generator_name = <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> mcti = 0; mcti &lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">fMCLists</a>-&gt;size(); ++mcti) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      std::stringstream sskeepgen;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      sskeepgen &lt;&lt; <span class="stringliteral">&quot;MCTruth object summary :&quot;</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      sskeepgen &lt;&lt; <span class="stringliteral">&quot;\n\tPrimary MCTIndex : &quot;</span> &lt;&lt; mcti;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// -- Obtain the generator (provenance) corresponding to the mctruth index:</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; mclistHandle = (*fMCLists)[mcti];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      generator_name = mclistHandle.provenance()-&gt;inputTag().label();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      sskeepgen &lt;&lt; <span class="stringliteral">&quot;\n\tProvenance/Generator : &quot;</span> &lt;&lt; generator_name;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      G4bool keepGen = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a>) <span class="comment">// -- storeTrajectories set to true; check which</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (!customKeepTraj) { <span class="comment">// -- no custom list, so keep all</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          keepGen = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          nKeep++;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">else</span> { <span class="comment">// -- custom list, so check the ones in the event against provided keep list</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> keepableGen : <a class="code" href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">fkeepGenTrajectories</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">if</span> (generator_name == keepableGen) { <span class="comment">// -- exit upon finding match; false by default</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;              keepGen = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;              nKeep++;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">fMCTIndexToGeneratorMap</a>.emplace(mcti, std::make_pair(generator_name, keepGen));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      sskeepgen &lt;&lt; <span class="stringliteral">&quot;\n\tTrajectory points storable : &quot;</span> &lt;&lt; (keepGen ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      mf::LogDebug(<span class="stringliteral">&quot;beginOfEventAction::Generator&quot;</span>) &lt;&lt; sskeepgen.str();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (nKeep == 0 &amp;&amp; customKeepTraj &amp;&amp; <a class="code" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a>) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      mf::LogWarning(<span class="stringliteral">&quot;beginOfEventAction::keepableGenerators&quot;</span>)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;storeTrajectories&quot;</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; set to true and a non-empty keepGenTrajectories list provided in configuration file, &quot;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;           <span class="stringliteral">&quot;but&quot;</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; none of the generators in this list are present in the event! Double check list or &quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;           <span class="stringliteral">&quot;don&#39;t&quot;</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; provide keepGenTrajectories in the configuration to keep all trajectories from all&quot;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; generator labels. This may be expected for generators that have a nonzero probability &quot;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;           <span class="stringliteral">&quot;of&quot;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; producing no particles (e.g. some radiologicals)&quot;</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a9d1e115646fccbf82d9d254971e5d4fa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">larg4::ParticleListActionService::fCurrentTrackID</a></div><div class="ttdeci">int fCurrentTrackID</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00157">ParticleListAction_service.h:157</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aa82eadd5f395a1029e1beee05f8d43e5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">larg4::ParticleListActionService::fTrackIDOffset</a></div><div class="ttdeci">int fTrackIDOffset</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00159">ParticleListAction_service.h:159</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a478f26624fc0fbf431a348402db7d44c"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">larg4::ParticleListActionService::fMCTIndexMap</a></div><div class="ttdeci">std::map&lt; int, size_t &gt; fMCTIndexMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary parent in std::vector&amp;lt;simb::MCTruth&amp;gt; object. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00177">ParticleListAction_service.h:177</a></div></div>
<div class="ttc" id="namespacesim_html_a48dadad6801cca82aa98f10fda7b4754"><div class="ttname"><a href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a></div><div class="ttdeci">static const int NoParticleId</div><div class="ttdef"><b>Definition:</b> <a href="sim_8h_source.html#l00028">sim.h:28</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a813e1823e4b0cb16c4c4c56f416440a1"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">larg4::ParticleListActionService::fMCTIndexToGeneratorMap</a></div><div class="ttdeci">std::map&lt; size_t, std::pair&lt; std::string, G4bool &gt; &gt; fMCTIndexToGeneratorMap</div><div class="ttdoc">Map: MCTruthIndex -&amp;gt; generator, input label of generator and keepGenerator decision. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00183">ParticleListAction_service.h:183</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a7c90f2943319e795818543e5595feaa9"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">larg4::ParticleListActionService::fNotStoredCounterUMap</a></div><div class="ttdeci">std::unordered_map&lt; std::string, int &gt; fNotStoredCounterUMap</div><div class="ttdoc">Map: not stored process and counter. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00186">ParticleListAction_service.h:186</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af358a6f10565846a8a208ac4c0b5e7c1"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">larg4::ParticleListActionService::fParentIDMap</a></div><div class="ttdeci">std::map&lt; int, int &gt; fParentIDMap</div><div class="ttdoc">key is current track ID, value is parent ID </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00156">ParticleListAction_service.h:156</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a380ea2dfe5275d9f81ef17f654789a55"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">larg4::ParticleListActionService::ParticleInfo_t::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Resets the information (does not release memory it does not own) </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00106">ParticleListAction_service.h:106</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_abb64558ef3d0c7602ace45b9b37d2efc"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#abb64558ef3d0c7602ace45b9b37d2efc">larg4::ParticleListActionService::fkeepGenTrajectories</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fkeepGenTrajectories</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00151">ParticleListAction_service.h:151</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a014523f52862136fec5351ad90862887"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">larg4::ParticleListActionService::fMCTPrimProcessKeepMap</a></div><div class="ttdeci">std::map&lt; int, bool &gt; fMCTPrimProcessKeepMap</div><div class="ttdoc">Map: particle trakc ID -&amp;gt; boolean decision to keep or not full trajectory points. ...</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00180">ParticleListAction_service.h:180</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a01872428875cace5d1d3e2752f041faa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">larg4::ParticleListActionService::fParticleList</a></div><div class="ttdeci">sim::ParticleList fParticleList</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00147">ParticleListAction_service.h:147</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_adc38037c6226f980663d2396ee12ef7b"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">larg4::ParticleListActionService::fstoreTrajectories</a></div><div class="ttdeci">G4bool fstoreTrajectories</div><div class="ttdoc">Whether to store particle trajectories with each particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00149">ParticleListAction_service.h:149</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af3687a0b04c384c04f23ee87bff8fb76"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">larg4::ParticleListActionService::fPrimaryTruthMap</a></div><div class="ttdeci">std::map&lt; int, simb::GeneratedParticleIndex_t &gt; fPrimaryTruthMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary information in MC truth. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00174">ParticleListAction_service.h:174</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1c04e140e82ead36cb3812ca38148a75"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">larg4::ParticleListActionService::fCurrentParticle</a></div><div class="ttdeci">ParticleInfo_t fCurrentParticle</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00145">ParticleListAction_service.h:145</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">larg4::ParticleListActionService::fMCLists</a></div><div class="ttdeci">std::vector&lt; art::Handle&lt; std::vector&lt; simb::MCTruth &gt; &gt; &gt; const * fMCLists</div><div class="ttdoc">MCTruthCollection input lists. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00171">ParticleListAction_service.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af1f653149c2a963df7cd90a4bda0e627"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::endOfEventAction </td>
          <td>(</td>
          <td class="paramtype">const G4Event *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00702">702</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// -- End of Run Report</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>.empty()) { <span class="comment">// -- Only if there is something to report</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      std::stringstream sscounter;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      sscounter &lt;&lt; <span class="stringliteral">&quot;Not Stored Process summary:&quot;</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [process, <a class="code" href="IntegerRanges__test_8cc.html#abbc7e5f346bfa932ca51b4b07ccef76d">count</a>] : <a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        sscounter &lt;&lt; <span class="stringliteral">&quot;\n\t&quot;</span> &lt;&lt; process &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; <a class="code" href="IntegerRanges__test_8cc.html#abbc7e5f346bfa932ca51b4b07ccef76d">count</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      mf::LogInfo(<span class="stringliteral">&quot;ParticleListActionService&quot;</span>) &lt;&lt; sscounter.str();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">partCol_</a> = std::make_unique&lt;std::vector&lt;simb::MCParticle&gt;&gt;();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#aabc969aa88c21210804e3390dd164fa0">tpassn_</a> =</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      std::make_unique&lt;art::Assns&lt;simb::MCTruth, simb::MCParticle, sim::GeneratedParticleInfo&gt;&gt;();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Set up the utility class for the &quot;for_each&quot; algorithm.  (We only</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// need a separate set-up for the utility class because we need to</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// give it the pointer to the particle list.  We&#39;re using the STL</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// &quot;for_each&quot; instead of the C++ &quot;for loop&quot; because it&#39;s supposed</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// to be faster.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    std::for_each(</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.begin(), <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.end(), UpdateDaughterInformation{<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>});</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    MF_LOG_INFO(<span class="stringliteral">&quot;endOfEventAction&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;MCTruth Handles Size: &quot;</span> &lt;&lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">fMCLists</a>-&gt;size();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nGeneratedParticles = 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMCTruths = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    sim::ParticleList particleList = <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa88e795de2dd234ff145ebd4cb83ade5">YieldList</a>();</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> mcl = 0; mcl &lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">fMCLists</a>-&gt;size(); ++mcl) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keyword">auto</span> <span class="keyword">const</span>&amp; mclistHandle = (*fMCLists)[mcl];</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      MF_LOG_INFO(<span class="stringliteral">&quot;endOfEventAction&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;mclistHandle Size: &quot;</span> &lt;&lt; mclistHandle-&gt;size();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a> = 0; <a class="code" href="namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a> &lt; mclistHandle-&gt;size(); ++<a class="code" href="namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a>) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        art::Ptr&lt;simb::MCTruth&gt; mct(mclistHandle, <a class="code" href="namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">m</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        MF_LOG_INFO(<span class="stringliteral">&quot;endOfEventAction&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Found &quot;</span> &lt;&lt; mct-&gt;NParticles() &lt;&lt; <span class="stringliteral">&quot; particles&quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">for</span> (simb::MCParticle* <a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> : particleList | <a class="code" href="namespacechannelDBConverter.html#a5db4217e69ac7c2d95856da42b13f8e5">ranges::views::values</a>) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          <span class="keyword">auto</span> gen_index = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a>[<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>-&gt;TrackId()];</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;          <span class="keywordflow">if</span> (gen_index != nMCTruths) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          assert(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>-&gt;NumberTrajectoryPoints() != 0ull);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;          ++nGeneratedParticles;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;          <a class="code" href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a> <span class="keyword">const</span> truthInfo{<a class="code" href="classlarg4_1_1ParticleListActionService.html#a10d9f01c5c0375d8022e2a69996a378f">GetPrimaryTruthIndex</a>(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>-&gt;TrackId())};</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;          <span class="keywordflow">if</span> (!truthInfo.hasGeneratedParticleIndex() &amp;&amp; <a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>-&gt;Mother() == 0) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <a class="code" href="namespacedetsim.html#ac17a92de25bbd84bdd320811fff947c6">MF_LOG_WARNING</a>(<span class="stringliteral">&quot;endOfEventAction&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;No GeneratedParticleIndex()!&quot;</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="comment">// this means it&#39;s primary but with no information; logic error!!</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">throw</span> art::Exception(art::errors::LogicError)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;Failed to match primary particle:\n&quot;</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;\nwith particles from the truth record &#39;&quot;</span> &lt;&lt; mclistHandle.provenance()-&gt;inputTag()</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;&#39;:\n\n&quot;</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;          }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;          <a class="code" href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">partCol_</a>-&gt;push_back(std::move(*<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>));</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;          art::Ptr&lt;simb::MCParticle&gt; mcp_ptr{<a class="code" href="classlarg4_1_1ParticleListActionService.html#a26565b300dde7b137cbe6766121ad059">pid_</a>, <a class="code" href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">partCol_</a>-&gt;size() - 1, <a class="code" href="classlarg4_1_1ParticleListActionService.html#afb003e652a5d582737430824ba649153">productGetter_</a>};</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;          tpassn_-&gt;addSingle(mct, mcp_ptr, truthInfo);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        mf::LogDebug(<span class="stringliteral">&quot;Offset&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;nGeneratedParticles = &quot;</span> &lt;&lt; nGeneratedParticles;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        ++nMCTruths;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a> = 0;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aa88e795de2dd234ff145ebd4cb83ade5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aa88e795de2dd234ff145ebd4cb83ade5">larg4::ParticleListActionService::YieldList</a></div><div class="ttdeci">sim::ParticleList &amp;&amp; YieldList()</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8cxx_source.html#l00670">ParticleListAction_service.cxx:670</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aabc969aa88c21210804e3390dd164fa0"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aabc969aa88c21210804e3390dd164fa0">larg4::ParticleListActionService::tpassn_</a></div><div class="ttdeci">std::unique_ptr&lt; art::Assns&lt; simb::MCTruth, simb::MCParticle, sim::GeneratedParticleInfo &gt; &gt; tpassn_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00190">ParticleListAction_service.h:190</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a10d9f01c5c0375d8022e2a69996a378f"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a10d9f01c5c0375d8022e2a69996a378f">larg4::ParticleListActionService::GetPrimaryTruthIndex</a></div><div class="ttdeci">simb::GeneratedParticleIndex_t GetPrimaryTruthIndex(int trackId) const </div><div class="ttdoc">Returns the index of primary truth (sim::NoGeneratorIndex if none). </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8cxx_source.html#l00661">ParticleListAction_service.cxx:661</a></div></div>
<div class="ttc" id="namespacegen__crt__frags_html_a55a56854d78e363691470c7297fde77c"><div class="ttname"><a href="namespacegen__crt__frags.html#a55a56854d78e363691470c7297fde77c">gen_crt_frags.m</a></div><div class="ttdeci">tuple m</div><div class="ttdoc">now if test mode generate materials, CRT shell, world, gdml header else just generate CRT shell for u...</div><div class="ttdef"><b>Definition:</b> <a href="gen__crt__frags_8py_source.html#l01347">gen_crt_frags.py:1347</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aa82eadd5f395a1029e1beee05f8d43e5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">larg4::ParticleListActionService::fTrackIDOffset</a></div><div class="ttdeci">int fTrackIDOffset</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00159">ParticleListAction_service.h:159</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ab7cf914b7ec32a8091ad73a01b5448c5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">larg4::ParticleListActionService::partCol_</a></div><div class="ttdeci">std::unique_ptr&lt; std::vector&lt; simb::MCParticle &gt; &gt; partCol_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00188">ParticleListAction_service.h:188</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a478f26624fc0fbf431a348402db7d44c"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">larg4::ParticleListActionService::fMCTIndexMap</a></div><div class="ttdeci">std::map&lt; int, size_t &gt; fMCTIndexMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary parent in std::vector&amp;lt;simb::MCTruth&amp;gt; object. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00177">ParticleListAction_service.h:177</a></div></div>
<div class="ttc" id="namespacedetsim_html_ac17a92de25bbd84bdd320811fff947c6"><div class="ttname"><a href="namespacedetsim.html#ac17a92de25bbd84bdd320811fff947c6">detsim::MF_LOG_WARNING</a></div><div class="ttdeci">MF_LOG_WARNING(&quot;SimWire&quot;)&lt;&lt; &quot;SimWire is an example module that works for the &quot;&lt;&lt; &quot;MicroBooNE detector. Each experiment should implement &quot;&lt;&lt; &quot;its own version of this module to simulate electronics &quot;&lt;&lt; &quot;response.&quot;</div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a7c90f2943319e795818543e5595feaa9"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">larg4::ParticleListActionService::fNotStoredCounterUMap</a></div><div class="ttdeci">std::unordered_map&lt; std::string, int &gt; fNotStoredCounterUMap</div><div class="ttdoc">Map: not stored process and counter. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00186">ParticleListAction_service.h:186</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a26565b300dde7b137cbe6766121ad059"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a26565b300dde7b137cbe6766121ad059">larg4::ParticleListActionService::pid_</a></div><div class="ttdeci">art::ProductID pid_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00191">ParticleListAction_service.h:191</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_afb003e652a5d582737430824ba649153"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#afb003e652a5d582737430824ba649153">larg4::ParticleListActionService::productGetter_</a></div><div class="ttdeci">art::EDProductGetter const * productGetter_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00192">ParticleListAction_service.h:192</a></div></div>
<div class="ttc" id="namespacechannelDBConverter_html_a5db4217e69ac7c2d95856da42b13f8e5"><div class="ttname"><a href="namespacechannelDBConverter.html#a5db4217e69ac7c2d95856da42b13f8e5">channelDBConverter.values</a></div><div class="ttdeci">list values</div><div class="ttdef"><b>Definition:</b> <a href="channelDBConverter_8py_source.html#l00248">channelDBConverter.py:248</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a01872428875cace5d1d3e2752f041faa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">larg4::ParticleListActionService::fParticleList</a></div><div class="ttdeci">sim::ParticleList fParticleList</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00147">ParticleListAction_service.h:147</a></div></div>
<div class="ttc" id="classsim_1_1GeneratedParticleInfo_html"><div class="ttname"><a href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a></div><div class="ttdoc">Contains information about a generated particle. </div><div class="ttdef"><b>Definition:</b> <a href="GeneratedParticleInfo_8h_source.html#l00039">GeneratedParticleInfo.h:39</a></div></div>
<div class="ttc" id="IntegerRanges__test_8cc_html_abbc7e5f346bfa932ca51b4b07ccef76d"><div class="ttname"><a href="IntegerRanges__test_8cc.html#abbc7e5f346bfa932ca51b4b07ccef76d">count</a></div><div class="ttdeci">std::size_t count(Cont const &amp;cont)</div><div class="ttdef"><b>Definition:</b> <a href="IntegerRanges__test_8cc_source.html#l00029">IntegerRanges_test.cc:29</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">larg4::ParticleListActionService::fMCLists</a></div><div class="ttdeci">std::vector&lt; art::Handle&lt; std::vector&lt; simb::MCTruth &gt; &gt; &gt; const * fMCLists</div><div class="ttdoc">MCTruthCollection input lists. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00171">ParticleListAction_service.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae0f5919a0ac6b27c60192b1c7ca66923"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int larg4::ParticleListActionService::GetParentage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trackid</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00216">216</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">int</span> parentid = <a class="code" href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// search the fParentIDMap recursively until we have the parent id</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// of the first EM particle that led to this one</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">auto</span> itr = <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>.find(trackid);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">while</span> (itr != <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>.end()) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="comment">// set the parentid to the current parent ID, when the loop ends</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">// this id will be the first EM particle</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      parentid = (*itr).second;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      itr = <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>.find(parentid);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> parentid;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="ttc" id="namespacesim_html_a48dadad6801cca82aa98f10fda7b4754"><div class="ttname"><a href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a></div><div class="ttdeci">static const int NoParticleId</div><div class="ttdef"><b>Definition:</b> <a href="sim_8h_source.html#l00028">sim.h:28</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af358a6f10565846a8a208ac4c0b5e7c1"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">larg4::ParticleListActionService::fParentIDMap</a></div><div class="ttdeci">std::map&lt; int, int &gt; fParentIDMap</div><div class="ttdoc">key is current track ID, value is parent ID </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00156">ParticleListAction_service.h:156</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a10d9f01c5c0375d8022e2a69996a378f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simb::GeneratedParticleIndex_t larg4::ParticleListActionService::GetPrimaryTruthIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trackId</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the index of primary truth (<code>sim::NoGeneratorIndex</code> if none). </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00661">661</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> it = <a class="code" href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">fPrimaryTruthMap</a>.find(trackId);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">return</span> it == <a class="code" href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">fPrimaryTruthMap</a>.end() ? simb::NoGeneratedParticleIndex : it-&gt;second;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af3687a0b04c384c04f23ee87bff8fb76"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">larg4::ParticleListActionService::fPrimaryTruthMap</a></div><div class="ttdeci">std::map&lt; int, simb::GeneratedParticleIndex_t &gt; fPrimaryTruthMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary information in MC truth. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00174">ParticleListAction_service.h:174</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac75d715a5c34f5abb39d33feac3d271f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;std::vector&lt;simb::MCParticle&gt; &gt; larg4::ParticleListActionService::ParticleCollection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00085">85</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> std::move(<a class="code" href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">partCol_</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ab7cf914b7ec32a8091ad73a01b5448c5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ab7cf914b7ec32a8091ad73a01b5448c5">larg4::ParticleListActionService::partCol_</a></div><div class="ttdeci">std::unique_ptr&lt; std::vector&lt; simb::MCParticle &gt; &gt; partCol_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00188">ParticleListAction_service.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1206a15eb083e2a1f6c45464beb5b697"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::postUserTrackingAction </td>
          <td>(</td>
          <td class="paramtype">const G4Track *&#160;</td>
          <td class="paramname"><em>aTrack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00446">446</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#aa79797c8ff0a1001a7fead509db9438c">hasParticle</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (aTrack) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;SetWeight(aTrack-&gt;GetWeight());</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">// Get the post-step information from the G4Step.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keyword">const</span> G4StepPoint* postStepPoint = aTrack-&gt;GetStep()-&gt;GetPostStepPoint();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (!postStepPoint-&gt;GetProcessDefinedStep()) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// Now we get to do some awkward cleanup because the</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// fparticleList was augmented during the</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// preUserTrackingAction.  We cannot call &#39;Archive&#39; because</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// that only sets the mapped type of the entry to</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// nullptr...which is really bad whenever we iterate through</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// entries in the endOfEventAction and dereference the mapped</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">// type.  We have to entirely erase the entry.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keyword">auto</span> key_to_erase = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.key(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.erase(key_to_erase);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// after the particle is archived, it is deleted</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">clear</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      G4String process = postStepPoint-&gt;GetProcessDefinedStep()-&gt;GetProcessName();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;SetEndProcess(process);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="comment">// -- D.R. Store the final point only for particles that have not had intermediate trajectory</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="comment">//    points saved. This avoids double counting the final trajectory point for particles from</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment">//    generators with storable trajectory points.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">keepFullTrajectory</a>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keyword">const</span> G4ThreeVector position = postStepPoint-&gt;GetPosition();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        G4double time = postStepPoint-&gt;GetGlobalTime();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">// Remember that LArSoft uses cm, ns, GeV.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        TLorentzVector fourPos(position.x() / CLHEP::cm,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                               position.y() / CLHEP::cm,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                               position.z() / CLHEP::cm,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                               time / CLHEP::ns);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keyword">const</span> G4ThreeVector momentum = postStepPoint-&gt;GetMomentum();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keyword">const</span> G4double energy = postStepPoint-&gt;GetTotalEnergy();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        TLorentzVector fourMom(momentum.x() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                               momentum.y() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                               momentum.z() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                               energy / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// Add another point in the trajectory.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">AddPointToCurrentParticle</a>(fourPos, fourMom, std::string(process));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">// -- particle has a full trajectory, apply SparsifyTrajectory method if enabled</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classlarg4_1_1ParticleListActionService.html#a26dbe53104392b54165aef6c9669b01f">fSparsifyTrajectories</a>) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;SparsifyTrajectory(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a5f76e481562c1a737add36169a82234f">fSparsifyMargin</a>, <a class="code" href="classlarg4_1_1ParticleListActionService.html#ab9aefc0425517fdcf23898803ce35ebc">fKeepSecondToLast</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// store truth record pointer, only if it is available</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a5150ce131c78b9bdf807bde4bac33b64">isPrimary</a>()) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">fPrimaryTruthMap</a>[<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;TrackId()] = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#ae20779765ce1c4e98affd9f6c5a57e4f">truthInfoIndex</a>();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div>
<div class="ttc" id="TriggerEfficiencyPlots__module_8cc_html_a9b9a9849202763819111e555ade76102"><div class="ttname"><a href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">GeV</a></div><div class="ttdeci">util::quantities::gigaelectronvolt GeV</div><div class="ttdef"><b>Definition:</b> <a href="TriggerEfficiencyPlots__module_8cc_source.html#l00090">TriggerEfficiencyPlots_module.cc:90</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a17d73395d8ef48a32d16d857ebb5e4a7"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">larg4::ParticleListActionService::ParticleInfo_t::particle</a></div><div class="ttdeci">simb::MCParticle * particle</div><div class="ttdoc">simple structure representing particle </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00098">ParticleListAction_service.h:98</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ab9aefc0425517fdcf23898803ce35ebc"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ab9aefc0425517fdcf23898803ce35ebc">larg4::ParticleListActionService::fKeepSecondToLast</a></div><div class="ttdeci">bool fKeepSecondToLast</div><div class="ttdoc">tell whether or not to force keeping the second to last point </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00168">ParticleListAction_service.h:168</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a4f6b2aa57c2e7c31e22599e6006422fe"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">larg4::ParticleListActionService::ParticleInfo_t::keepFullTrajectory</a></div><div class="ttdeci">bool keepFullTrajectory</div><div class="ttdoc">if there was decision to keep </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00099">ParticleListAction_service.h:99</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a5f76e481562c1a737add36169a82234f"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a5f76e481562c1a737add36169a82234f">larg4::ParticleListActionService::fSparsifyMargin</a></div><div class="ttdeci">double fSparsifyMargin</div><div class="ttdoc">set the sparsification margin </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00166">ParticleListAction_service.h:166</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ad573d861f6b2a1a720ffbc4108d08679"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">larg4::ParticleListActionService::AddPointToCurrentParticle</a></div><div class="ttdeci">void AddPointToCurrentParticle(TLorentzVector const &amp;pos, TLorentzVector const &amp;mom, std::string const &amp;process)</div><div class="ttdoc">Adds a trajectory point to the current particle, and runs the filter. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8cxx_source.html#l00691">ParticleListAction_service.cxx:691</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a26dbe53104392b54165aef6c9669b01f"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a26dbe53104392b54165aef6c9669b01f">larg4::ParticleListActionService::fSparsifyTrajectories</a></div><div class="ttdeci">bool fSparsifyTrajectories</div><div class="ttdoc">help reduce the number of trajectory points. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00165">ParticleListAction_service.h:165</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a5150ce131c78b9bdf807bde4bac33b64"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a5150ce131c78b9bdf807bde4bac33b64">larg4::ParticleListActionService::ParticleInfo_t::isPrimary</a></div><div class="ttdeci">bool isPrimary() const </div><div class="ttdoc">Returns whether there is a particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00122">ParticleListAction_service.h:122</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_ae20779765ce1c4e98affd9f6c5a57e4f"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#ae20779765ce1c4e98affd9f6c5a57e4f">larg4::ParticleListActionService::ParticleInfo_t::truthInfoIndex</a></div><div class="ttdeci">simb::GeneratedParticleIndex_t truthInfoIndex() const </div><div class="ttdoc">Returns the index of the particle in the generator truth record. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00129">ParticleListAction_service.h:129</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a380ea2dfe5275d9f81ef17f654789a55"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">larg4::ParticleListActionService::ParticleInfo_t::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Resets the information (does not release memory it does not own) </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00106">ParticleListAction_service.h:106</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a01872428875cace5d1d3e2752f041faa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">larg4::ParticleListActionService::fParticleList</a></div><div class="ttdeci">sim::ParticleList fParticleList</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00147">ParticleListAction_service.h:147</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_aa79797c8ff0a1001a7fead509db9438c"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#aa79797c8ff0a1001a7fead509db9438c">larg4::ParticleListActionService::ParticleInfo_t::hasParticle</a></div><div class="ttdeci">bool hasParticle() const </div><div class="ttdoc">Returns whether there is a particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00115">ParticleListAction_service.h:115</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af3687a0b04c384c04f23ee87bff8fb76"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af3687a0b04c384c04f23ee87bff8fb76">larg4::ParticleListActionService::fPrimaryTruthMap</a></div><div class="ttdeci">std::map&lt; int, simb::GeneratedParticleIndex_t &gt; fPrimaryTruthMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary information in MC truth. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00174">ParticleListAction_service.h:174</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1c04e140e82ead36cb3812ca38148a75"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">larg4::ParticleListActionService::fCurrentParticle</a></div><div class="ttdeci">ParticleInfo_t fCurrentParticle</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00145">ParticleListAction_service.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57b3626009c7ceda55731bc5df671a17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::preUserTrackingAction </td>
          <td>(</td>
          <td class="paramtype">const G4Track *&#160;</td>
          <td class="paramname"><em>track</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00237">237</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// Particle type.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    G4ParticleDefinition* particleDefinition = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetDefinition();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    G4int pdgCode = particleDefinition-&gt;GetPDGEncoding();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Get Geant4&#39;s ID number for this track.  This will be the same</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// ID number that we&#39;ll use in the ParticleList.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// It is offset by the number of tracks accumulated from the previous Geant4</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// runs (if any)</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">const</span> trackID = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetTrackID() + <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> = trackID;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// And the particle&#39;s parent (same offset as above):</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">int</span> parentID = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetParentID() + <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    std::string <a class="code" href="triggersim__eastmodule__icarus_8fcl.html#af2add7ab297ee1d26dfa1669347fcda6">process_name</a> = <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    std::string mct_primary_process = <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">bool</span> isFromMCTProcessPrimary = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Is there an MCTruth object associated with this G4Track?  We</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// have to go up a &quot;chain&quot; of information to find out:</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">const</span> G4DynamicParticle* dynamicParticle = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetDynamicParticle();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">const</span> G4PrimaryParticle* primaryParticle = dynamicParticle-&gt;GetPrimaryParticle();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    simb::GeneratedParticleIndex_t primaryIndex = simb::NoGeneratedParticleIndex;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">size_t</span> primarymctIndex = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (primaryParticle != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keyword">const</span> G4VUserPrimaryParticleInformation* gppi = primaryParticle-&gt;GetUserInformation();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keyword">const</span> g4b::PrimaryParticleInformation* ppi =</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>g4b::PrimaryParticleInformation*<span class="keyword">&gt;</span>(gppi);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">if</span> (ppi != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        primaryIndex = ppi-&gt;MCParticleIndex();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        primarymctIndex = ppi-&gt;MCTruthIndex();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        mct_primary_process = ppi-&gt;GetMCParticle()-&gt;Process();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// If we&#39;ve made it this far, a PrimaryParticleInformation</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// object exists and we are using a primary particle, set the</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// process name accordingly</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// -- D.R. : if process == &quot;primary&quot; exactly (this will most likely be the case), mark it as</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">//    a primary with keepable trajectory for itself and its descendants.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// -- elsif it simply starts with &quot;primary&quot;, accept it but mark it as non-keep</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">// -- else force it to be primary because we have determined that it is a primary particle</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">//    This was the original behavior of the code i.e. process was _set_ to &quot;primary&quot;</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">//    regardless of what the process name was in the generator MCTruth object.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">// -- NOTE: This enforces a convention for process names assigned in the gen stage.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (mct_primary_process.compare(<span class="stringliteral">&quot;primary&quot;</span>) == 0) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          process_name = <span class="stringliteral">&quot;primary&quot;</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          isFromMCTProcessPrimary = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mct_primary_process.find(<span class="stringliteral">&quot;primary&quot;</span>) == 0) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          process_name = mct_primary_process;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          isFromMCTProcessPrimary = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          mf::LogDebug(<span class="stringliteral">&quot;PrimaryParticle&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;MCTruth primary process name contains \&quot;primary\&quot; &quot;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                          &lt;&lt; <span class="stringliteral">&quot; but is not solely \&quot;primary\&quot; : &quot;</span> &lt;&lt; process_name</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                          &lt;&lt; <span class="stringliteral">&quot;.\nWill not store full set of trajectory points.&quot;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">else</span> { <span class="comment">// -- override it</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          process_name = <span class="stringliteral">&quot;primary&quot;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;          isFromMCTProcessPrimary = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          mf::LogWarning(<span class="stringliteral">&quot;PrimaryParticle&quot;</span>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;MCTruth primary process does not beging with string&quot;</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; literal \&quot;primary\&quot; : &quot;</span> &lt;&lt; process_name &lt;&lt; <span class="stringliteral">&quot;\nOVERRIDING it to \&quot;primary\&quot;&quot;</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// -- The process_name check is simply to allow an additional way to reduce memory usage,</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">//    namely, by creating MCTruth input particles with multiple process labels (e.g. &quot;primary&quot;</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="comment">//    and &quot;primaryBackground&quot;) that can be used to veto storage of trajectory points.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// primary particles should have parentID = 0, even if there</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// are multiple MCTruths for this event</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        parentID = 0;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      } <span class="comment">// end else no primary particle information</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }   <span class="comment">// Is there a G4PrimaryParticle?</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// If this is not a primary particle...</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// check if this particle was made in an undesirable process. For example:</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">// if one is not interested in EM shower particles, don&#39;t put it in the particle</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">// list as one wouldn&#39;t care about secondaries, tertiaries, etc. For these showers</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// figure out what process is making this track - skip it if it is</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// one of pair production, compton scattering, photoelectric effect</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">// bremstrahlung, annihilation, or ionization</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      process_name = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetCreatorProcess()-&gt;GetProcessName();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#ad4ad667694602c583a440241924bafd6">fKeepEMShowerDaughters</a>) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordtype">bool</span> notstore = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> : <a class="code" href="classlarg4_1_1ParticleListActionService.html#a16b68e141cbd076ce6a038775f292961">fNotStoredPhysics</a>) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keywordflow">if</span> (process_name.find(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>) != std::string::npos) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            notstore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            mf::LogDebug(<span class="stringliteral">&quot;NotStoredPhysics&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;Found process : &quot;</span> &lt;&lt; <a class="code" href="triggersim__eastmodule__icarus_8fcl.html#af2add7ab297ee1d26dfa1669347fcda6">process_name</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordtype">int</span> old = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keyword">auto</span> search = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>.find(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">if</span> (search != <a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>.end()) { old = search-&gt;second; }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <a class="code" href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">fNotStoredCounterUMap</a>.insert_or_assign(<a class="code" href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, (old + 1));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">if</span> (notstore) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="comment">// figure out the ultimate parentage of this particle</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          <span class="comment">// first add this track id and its parent to the fParentIDMap</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>[trackID] = parentID;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> = -1 * this-&gt;<a class="code" href="classlarg4_1_1ParticleListActionService.html#ae0f5919a0ac6b27c60192b1c7ca66923">GetParentage</a>(trackID);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          <span class="comment">// check that fCurrentTrackID is in the particle list - it is possible</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;          <span class="comment">// that this particle&#39;s parent is a particle that did not get tracked.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;          <span class="comment">// An example is a parent that was made due to muMinusCaptureAtRest</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          <span class="comment">// and the daughter was made by the phot process. The parent likely</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          <span class="comment">// isn&#39;t saved in the particle list because it is below the energy cut</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          <span class="comment">// which will put a bogus track id value into the sim::IDE object for</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <span class="comment">// the sim::SimChannel if we don&#39;t check it.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.KnownParticle(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a>)) <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> = <a class="code" href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <span class="comment">// clear current particle as we are not stepping this particle and</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          <span class="comment">// adding trajectory points to it</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">clear</a>();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        } <span class="comment">// end if process matches an undesired process</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      }   <span class="comment">// end if keeping EM shower daughters</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="comment">// Check the energy of the particle.  If it falls below the energy</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="comment">// cut, don&#39;t add it to our list.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      G4double energy = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetKineticEnergy();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">if</span> (energy &lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a221fda7268947395f3789b83f8b1cc61">fenergyCut</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">clear</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">// do add the particle to the parent id map though</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// and set the current track id to be it&#39;s ultimate parent</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>[trackID] = parentID;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> = -1 * this-&gt;<a class="code" href="classlarg4_1_1ParticleListActionService.html#ae0f5919a0ac6b27c60192b1c7ca66923">GetParentage</a>(trackID);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// check to see if the parent particle has been stored in the particle navigator</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// if not, then see if it is possible to walk up the fParentIDMap to find the</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="comment">// ultimate parent of this particle.  Use that ID as the parent ID for this</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">// particle</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.KnownParticle(parentID)) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">// do add the particle to the parent id map</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">// just in case it makes a daughter that we have to track as well</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">fParentIDMap</a>[trackID] = parentID;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordtype">int</span> pid = this-&gt;<a class="code" href="classlarg4_1_1ParticleListActionService.html#ae0f5919a0ac6b27c60192b1c7ca66923">GetParentage</a>(parentID);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// if we still can&#39;t find the parent in the particle navigator,</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// we have to give up</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.KnownParticle(pid)) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          <a class="code" href="namespacedetsim.html#ac17a92de25bbd84bdd320811fff947c6">MF_LOG_WARNING</a>(<span class="stringliteral">&quot;ParticleListActionService&quot;</span>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;can&#39;t find parent id: &quot;</span> &lt;&lt; parentID &lt;&lt; <span class="stringliteral">&quot; in the particle list, or fParentIDMap.&quot;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; Make &quot;</span> &lt;&lt; parentID &lt;&lt; <span class="stringliteral">&quot; the mother ID for&quot;</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; track ID &quot;</span> &lt;&lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">fCurrentTrackID</a> &lt;&lt; <span class="stringliteral">&quot; in the hope that it will aid debugging.&quot;</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          parentID = pid;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="comment">// Once the parentID is secured, inherit the MCTruth Index</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">// which should have been set already</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> it = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a>.find(parentID); it != <a class="code" href="namespaceicarus_1_1ns_1_1util.html#ad9f95380d00f1d88d8f89fb910938752">cend</a>(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a>)) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        primarymctIndex = it-&gt;second;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">throw</span> art::Exception(art::errors::LogicError)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Could not locate MCT Index for parent trackID of &quot;</span> &lt;&lt; parentID;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">// Inherit whether the parent is from a primary with MCTruth process_name == &quot;primary&quot;</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      isFromMCTProcessPrimary = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">fMCTPrimProcessKeepMap</a>[parentID];</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    } <span class="comment">// end if not a primary particle</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// This is probably the PDG mass, but just in case:</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="namespacelib_1_1dedx.html#af9508f78ba8143119daa95dbd8220f91">mass</a> = dynamicParticle-&gt;GetMass() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Create the sim::Particle object.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">clear</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a> =</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keyword">new</span> simb::MCParticle{trackID, pdgCode, <a class="code" href="triggersim__eastmodule__icarus_8fcl.html#af2add7ab297ee1d26dfa1669347fcda6">process_name</a>, parentID, mass};</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a052169ca2f962c35402a009e6caa4580">truthIndex</a> = primaryIndex;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">fMCTIndexMap</a>[trackID] = primarymctIndex;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">fMCTPrimProcessKeepMap</a>[trackID] = isFromMCTProcessPrimary;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// -- determine whether full set of trajectorie points should be stored or only the start and end points</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">keepFullTrajectory</a> =</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">fstoreTrajectories</a>) ?</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keyword">false</span> : <span class="comment">/*don&#39;t want trajectory points at all, bail*/</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        (!(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">fMCTIndexToGeneratorMap</a>[primarymctIndex].<a class="code" href="detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a>)) ?</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keyword">false</span> : <span class="comment">/*particle is not from a storable generator*/</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a6ca7cf76669c521dda351de097b4db46">fkeepOnlyPrimaryFullTraj</a>) ?</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keyword">true</span> : <span class="comment">/*want all primaries tracked for a storable generator*/</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            (isFromMCTProcessPrimary) ?</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keyword">true</span> :       <span class="comment">/*only descendants from primaries with MCTruth process == &quot;primary&quot;*/</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;              <span class="keyword">false</span>; <span class="comment">/*not from MCTruth process &quot;primary&quot;*/</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Polarization.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keyword">const</span> G4ThreeVector&amp; polarization = <a class="code" href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a>-&gt;GetPolarization();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;SetPolarization(</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      TVector3{polarization.x(), polarization.y(), polarization.z()});</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// Save the particle in the ParticleList.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.Add(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div>
<div class="ttc" id="TriggerEfficiencyPlots__module_8cc_html_a9b9a9849202763819111e555ade76102"><div class="ttname"><a href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">GeV</a></div><div class="ttdeci">util::quantities::gigaelectronvolt GeV</div><div class="ttdef"><b>Definition:</b> <a href="TriggerEfficiencyPlots__module_8cc_source.html#l00090">TriggerEfficiencyPlots_module.cc:90</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a17d73395d8ef48a32d16d857ebb5e4a7"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">larg4::ParticleListActionService::ParticleInfo_t::particle</a></div><div class="ttdeci">simb::MCParticle * particle</div><div class="ttdoc">simple structure representing particle </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00098">ParticleListAction_service.h:98</a></div></div>
<div class="ttc" id="detectorproperties__icarus_8fcl_html_acfd440223f806c44323dbd1053b99123"><div class="ttname"><a href="detectorproperties__icarus_8fcl.html#acfd440223f806c44323dbd1053b99123">second</a></div><div class="ttdeci">second</div><div class="ttdef"><b>Definition:</b> <a href="detectorproperties__icarus_8fcl_source.html#l00008">detectorproperties_icarus.fcl:8</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ad4ad667694602c583a440241924bafd6"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ad4ad667694602c583a440241924bafd6">larg4::ParticleListActionService::fKeepEMShowerDaughters</a></div><div class="ttdeci">bool fKeepEMShowerDaughters</div><div class="ttdoc">whether to keep EM shower secondaries, tertiaries, etc </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00161">ParticleListAction_service.h:161</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a4f6b2aa57c2e7c31e22599e6006422fe"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">larg4::ParticleListActionService::ParticleInfo_t::keepFullTrajectory</a></div><div class="ttdeci">bool keepFullTrajectory</div><div class="ttdoc">if there was decision to keep </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00099">ParticleListAction_service.h:99</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ae0f5919a0ac6b27c60192b1c7ca66923"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ae0f5919a0ac6b27c60192b1c7ca66923">larg4::ParticleListActionService::GetParentage</a></div><div class="ttdeci">int GetParentage(int trackid) const </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8cxx_source.html#l00216">ParticleListAction_service.cxx:216</a></div></div>
<div class="ttc" id="standard__reco_8fcl_html_a8e7c4631bab825a68b0a82d8223c2ec2"><div class="ttname"><a href="standard__reco_8fcl.html#a8e7c4631bab825a68b0a82d8223c2ec2">track</a></div><div class="ttdeci">process_name use argoneut_mc_hitfinder track</div><div class="ttdef"><b>Definition:</b> <a href="standard__reco_8fcl_source.html#l00036">standard_reco.fcl:36</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a9d1e115646fccbf82d9d254971e5d4fa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a9d1e115646fccbf82d9d254971e5d4fa">larg4::ParticleListActionService::fCurrentTrackID</a></div><div class="ttdeci">int fCurrentTrackID</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00157">ParticleListAction_service.h:157</a></div></div>
<div class="ttc" id="namespaceicarus_1_1ns_1_1util_html_ad9f95380d00f1d88d8f89fb910938752"><div class="ttname"><a href="namespaceicarus_1_1ns_1_1util.html#ad9f95380d00f1d88d8f89fb910938752">icarus::ns::util::cend</a></div><div class="ttdeci">auto cend(FixedBins&lt; T, C &gt; const &amp;) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="FixedBins_8h_source.html#l00579">FixedBins.h:579</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aa82eadd5f395a1029e1beee05f8d43e5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">larg4::ParticleListActionService::fTrackIDOffset</a></div><div class="ttdeci">int fTrackIDOffset</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00159">ParticleListAction_service.h:159</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a478f26624fc0fbf431a348402db7d44c"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a478f26624fc0fbf431a348402db7d44c">larg4::ParticleListActionService::fMCTIndexMap</a></div><div class="ttdeci">std::map&lt; int, size_t &gt; fMCTIndexMap</div><div class="ttdoc">Map: particle track ID -&amp;gt; index of primary parent in std::vector&amp;lt;simb::MCTruth&amp;gt; object. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00177">ParticleListAction_service.h:177</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a221fda7268947395f3789b83f8b1cc61"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a221fda7268947395f3789b83f8b1cc61">larg4::ParticleListActionService::fenergyCut</a></div><div class="ttdeci">G4double fenergyCut</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00143">ParticleListAction_service.h:143</a></div></div>
<div class="ttc" id="namespacesim_html_a48dadad6801cca82aa98f10fda7b4754"><div class="ttname"><a href="namespacesim.html#a48dadad6801cca82aa98f10fda7b4754">sim::NoParticleId</a></div><div class="ttdeci">static const int NoParticleId</div><div class="ttdef"><b>Definition:</b> <a href="sim_8h_source.html#l00028">sim.h:28</a></div></div>
<div class="ttc" id="namespacedetsim_html_ac17a92de25bbd84bdd320811fff947c6"><div class="ttname"><a href="namespacedetsim.html#ac17a92de25bbd84bdd320811fff947c6">detsim::MF_LOG_WARNING</a></div><div class="ttdeci">MF_LOG_WARNING(&quot;SimWire&quot;)&lt;&lt; &quot;SimWire is an example module that works for the &quot;&lt;&lt; &quot;MicroBooNE detector. Each experiment should implement &quot;&lt;&lt; &quot;its own version of this module to simulate electronics &quot;&lt;&lt; &quot;response.&quot;</div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a813e1823e4b0cb16c4c4c56f416440a1"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a813e1823e4b0cb16c4c4c56f416440a1">larg4::ParticleListActionService::fMCTIndexToGeneratorMap</a></div><div class="ttdeci">std::map&lt; size_t, std::pair&lt; std::string, G4bool &gt; &gt; fMCTIndexToGeneratorMap</div><div class="ttdoc">Map: MCTruthIndex -&amp;gt; generator, input label of generator and keepGenerator decision. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00183">ParticleListAction_service.h:183</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a7c90f2943319e795818543e5595feaa9"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a7c90f2943319e795818543e5595feaa9">larg4::ParticleListActionService::fNotStoredCounterUMap</a></div><div class="ttdeci">std::unordered_map&lt; std::string, int &gt; fNotStoredCounterUMap</div><div class="ttdoc">Map: not stored process and counter. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00186">ParticleListAction_service.h:186</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a16b68e141cbd076ce6a038775f292961"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a16b68e141cbd076ce6a038775f292961">larg4::ParticleListActionService::fNotStoredPhysics</a></div><div class="ttdeci">std::vector&lt; std::string &gt; fNotStoredPhysics</div><div class="ttdoc">Physics processes that will not be stored. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00162">ParticleListAction_service.h:162</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_af358a6f10565846a8a208ac4c0b5e7c1"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#af358a6f10565846a8a208ac4c0b5e7c1">larg4::ParticleListActionService::fParentIDMap</a></div><div class="ttdeci">std::map&lt; int, int &gt; fParentIDMap</div><div class="ttdoc">key is current track ID, value is parent ID </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00156">ParticleListAction_service.h:156</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a380ea2dfe5275d9f81ef17f654789a55"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a380ea2dfe5275d9f81ef17f654789a55">larg4::ParticleListActionService::ParticleInfo_t::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Resets the information (does not release memory it does not own) </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00106">ParticleListAction_service.h:106</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a014523f52862136fec5351ad90862887"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a014523f52862136fec5351ad90862887">larg4::ParticleListActionService::fMCTPrimProcessKeepMap</a></div><div class="ttdeci">std::map&lt; int, bool &gt; fMCTPrimProcessKeepMap</div><div class="ttdoc">Map: particle trakc ID -&amp;gt; boolean decision to keep or not full trajectory points. ...</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00180">ParticleListAction_service.h:180</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a052169ca2f962c35402a009e6caa4580"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a052169ca2f962c35402a009e6caa4580">larg4::ParticleListActionService::ParticleInfo_t::truthIndex</a></div><div class="ttdeci">simb::GeneratedParticleIndex_t truthIndex</div><div class="ttdoc">Index of the particle in the original generator truth record. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00102">ParticleListAction_service.h:102</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a01872428875cace5d1d3e2752f041faa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">larg4::ParticleListActionService::fParticleList</a></div><div class="ttdeci">sim::ParticleList fParticleList</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00147">ParticleListAction_service.h:147</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_adc38037c6226f980663d2396ee12ef7b"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#adc38037c6226f980663d2396ee12ef7b">larg4::ParticleListActionService::fstoreTrajectories</a></div><div class="ttdeci">G4bool fstoreTrajectories</div><div class="ttdoc">Whether to store particle trajectories with each particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00149">ParticleListAction_service.h:149</a></div></div>
<div class="ttc" id="namespacelib_1_1dedx_html_af9508f78ba8143119daa95dbd8220f91"><div class="ttname"><a href="namespacelib_1_1dedx.html#af9508f78ba8143119daa95dbd8220f91">lib.dedx.mass</a></div><div class="ttdeci">float mass</div><div class="ttdef"><b>Definition:</b> <a href="dedx_8py_source.html#l00047">dedx.py:47</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a6ca7cf76669c521dda351de097b4db46"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a6ca7cf76669c521dda351de097b4db46">larg4::ParticleListActionService::fkeepOnlyPrimaryFullTraj</a></div><div class="ttdeci">bool fkeepOnlyPrimaryFullTraj</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00163">ParticleListAction_service.h:163</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1c04e140e82ead36cb3812ca38148a75"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">larg4::ParticleListActionService::fCurrentParticle</a></div><div class="ttdeci">ParticleInfo_t fCurrentParticle</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00145">ParticleListAction_service.h:145</a></div></div>
<div class="ttc" id="triggersim__eastmodule__icarus_8fcl_html_af2add7ab297ee1d26dfa1669347fcda6"><div class="ttname"><a href="triggersim__eastmodule__icarus_8fcl.html#af2add7ab297ee1d26dfa1669347fcda6">process_name</a></div><div class="ttdeci">BEGIN_PROLOG sequence::SlidingWindowTriggerPatternsOppositeWindows END_PROLOG process_name</div><div class="ttdef"><b>Definition:</b> <a href="triggersim__eastmodule__icarus_8fcl_source.html#l00134">triggersim_eastmodule_icarus.fcl:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acaeb15b28b8f28ed785ffecf28d0768e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::setInputCollections </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; art::Handle&lt; std::vector&lt; simb::MCTruth &gt;&gt;&gt; const &amp;&#160;</td>
          <td class="paramname"><em>mclists</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00071">71</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">fMCLists</a> = &amp;mclists;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1b20a66fa0dbcaee4a1fd16e0b4bf3a4">larg4::ParticleListActionService::fMCLists</a></div><div class="ttdeci">std::vector&lt; art::Handle&lt; std::vector&lt; simb::MCTruth &gt; &gt; &gt; const * fMCLists</div><div class="ttdoc">MCTruthCollection input lists. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00171">ParticleListAction_service.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf816001f5fdbfc97a9b964f9791c309"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::setPtrInfo </td>
          <td>(</td>
          <td class="paramtype">art::ProductID&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">art::EDProductGetter const *&#160;</td>
          <td class="paramname"><em>productGetter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00077">77</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#a26565b300dde7b137cbe6766121ad059">pid_</a> = pid;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#afb003e652a5d582737430824ba649153">productGetter_</a> = productGetter;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a26565b300dde7b137cbe6766121ad059"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a26565b300dde7b137cbe6766121ad059">larg4::ParticleListActionService::pid_</a></div><div class="ttdeci">art::ProductID pid_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00191">ParticleListAction_service.h:191</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_afb003e652a5d582737430824ba649153"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#afb003e652a5d582737430824ba649153">larg4::ParticleListActionService::productGetter_</a></div><div class="ttdeci">art::EDProductGetter const * productGetter_</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00192">ParticleListAction_service.h:192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a735e182e6ef0822f33cbc5fa30730840"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void larg4::ParticleListActionService::userSteppingAction </td>
          <td>(</td>
          <td class="paramtype">const G4Step *&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00514">514</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// N.B. G4 guarantees that following are non-null:</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">//  - step</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">//  - step-&gt;GetPostStepPoint()</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#aa79797c8ff0a1001a7fead509db9438c">hasParticle</a>() || !step-&gt;GetPostStepPoint()-&gt;GetProcessDefinedStep()) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// Temporary fix for problem where  DeltaTime on the first step</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// of optical photon propagation is calculated incorrectly. -wforeman</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="ParticleListAction_8cxx.html#a1f1ee98f0c212517e324923358844c70">globalTime</a> = step-&gt;GetTrack()-&gt;GetGlobalTime();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="ParticleListAction_8cxx.html#a4e7cc631a8f78cf0b7691e6515b57455">velocity_G4</a> = step-&gt;GetTrack()-&gt;GetVelocity();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="ParticleListAction_8cxx.html#a21d62e62b376ea39923a05be7565364d">velocity_step</a> = step-&gt;GetStepLength() / step-&gt;GetDeltaTime();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> ((step-&gt;GetTrack()-&gt;GetDefinition()-&gt;GetPDGEncoding() == 0) &amp;&amp;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        fabs(velocity_G4 - velocity_step) &gt; 0.0001) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="comment">// Subtract the faulty step time from the global time,</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="comment">// and add the correct step time based on G4 velocity.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      step-&gt;GetPostStepPoint()-&gt;SetGlobalTime(globalTime - step-&gt;GetDeltaTime() +</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                              step-&gt;GetStepLength() / <a class="code" href="ParticleListAction_8cxx.html#a4e7cc631a8f78cf0b7691e6515b57455">velocity_G4</a>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// For the most part, we just want to add the post-step</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// information to the particle&#39;s trajectory.  There&#39;s one</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// exception: In PreTrackingAction, the correct time information</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// is not available.  So add the correct vertex information here.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">particle</a>-&gt;NumberTrajectoryPoints() == 0) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="comment">// Get the pre/along-step information from the G4Step.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keyword">const</span> G4StepPoint* preStepPoint = step-&gt;GetPreStepPoint();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keyword">const</span> G4ThreeVector position = preStepPoint-&gt;GetPosition();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      G4double time = preStepPoint-&gt;GetGlobalTime();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="comment">// Remember that LArSoft uses cm, ns, GeV.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      TLorentzVector fourPos(position.x() / CLHEP::cm,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                             position.y() / CLHEP::cm,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                             position.z() / CLHEP::cm,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                             time / CLHEP::ns);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keyword">const</span> G4ThreeVector momentum = preStepPoint-&gt;GetMomentum();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keyword">const</span> G4double energy = preStepPoint-&gt;GetTotalEnergy();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      TLorentzVector fourMom(momentum.x() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                             momentum.y() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                             momentum.z() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                             energy / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">// Add the first point in the trajectory.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">AddPointToCurrentParticle</a>(fourPos, fourMom, <span class="stringliteral">&quot;Start&quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    } <span class="comment">// end if this is the first step</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// At this point, the particle is being transported through the</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// simulation. This method is being called for every voxel that</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// the track passes through, but we don&#39;t want to update the</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// trajectory information if we&#39;re just updating voxels. To check</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// for this, look at the process name for the step, and compare it</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// against the voxelization process name (set in PhysicsList.cxx).</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    G4String process = step-&gt;GetPostStepPoint()-&gt;GetProcessDefinedStep()-&gt;GetProcessName();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    G4bool ignoreProcess = process.contains(<span class="stringliteral">&quot;LArVoxel&quot;</span>) || process.contains(<span class="stringliteral">&quot;OpDetReadout&quot;</span>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">    mf::LogDebug(&quot;ParticleListActionService::SteppingAction&quot;)</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">    &lt;&lt; &quot;: DEBUG - process=&#39;&quot;</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">    &lt;&lt; process &lt;&lt; &quot;&#39;&quot;</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">    &lt;&lt; &quot; ignoreProcess=&quot; &lt;&lt; ignoreProcess</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">    &lt;&lt; &quot; fstoreTrajectories=&quot;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">    &lt;&lt; fstoreTrajectories;</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// We store the initial creation point of the particle</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// and its final position (ie where it has no more energy, or at least &lt; 1 eV) no matter</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// what, but whether we store the rest of the trajectory depends</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// on the process, and on a user switch.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// -- D.R. Store additional trajectory points only for desired generators and processes</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (!ignoreProcess &amp;&amp; <a class="code" href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">fCurrentParticle</a>.<a class="code" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">keepFullTrajectory</a>) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="comment">// Get the post-step information from the G4Step.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keyword">const</span> G4StepPoint* postStepPoint = step-&gt;GetPostStepPoint();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keyword">const</span> G4ThreeVector position = postStepPoint-&gt;GetPosition();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      G4double time = postStepPoint-&gt;GetGlobalTime();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="comment">// Remember that LArSoft uses cm, ns, GeV.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      TLorentzVector fourPos(position.x() / CLHEP::cm,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                             position.y() / CLHEP::cm,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                             position.z() / CLHEP::cm,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                             time / CLHEP::ns);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keyword">const</span> G4ThreeVector momentum = postStepPoint-&gt;GetMomentum();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keyword">const</span> G4double energy = postStepPoint-&gt;GetTotalEnergy();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      TLorentzVector fourMom(momentum.x() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                             momentum.y() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                             momentum.z() / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                             energy / <a class="code" href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">CLHEP::GeV</a>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">// Add another point in the trajectory.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">AddPointToCurrentParticle</a>(fourPos, fourMom, std::string(process));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div>
<div class="ttc" id="TriggerEfficiencyPlots__module_8cc_html_a9b9a9849202763819111e555ade76102"><div class="ttname"><a href="TriggerEfficiencyPlots__module_8cc.html#a9b9a9849202763819111e555ade76102">GeV</a></div><div class="ttdeci">util::quantities::gigaelectronvolt GeV</div><div class="ttdef"><b>Definition:</b> <a href="TriggerEfficiencyPlots__module_8cc_source.html#l00090">TriggerEfficiencyPlots_module.cc:90</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a17d73395d8ef48a32d16d857ebb5e4a7"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a17d73395d8ef48a32d16d857ebb5e4a7">larg4::ParticleListActionService::ParticleInfo_t::particle</a></div><div class="ttdeci">simb::MCParticle * particle</div><div class="ttdoc">simple structure representing particle </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00098">ParticleListAction_service.h:98</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_a4f6b2aa57c2e7c31e22599e6006422fe"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#a4f6b2aa57c2e7c31e22599e6006422fe">larg4::ParticleListActionService::ParticleInfo_t::keepFullTrajectory</a></div><div class="ttdeci">bool keepFullTrajectory</div><div class="ttdoc">if there was decision to keep </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00099">ParticleListAction_service.h:99</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_ad573d861f6b2a1a720ffbc4108d08679"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#ad573d861f6b2a1a720ffbc4108d08679">larg4::ParticleListActionService::AddPointToCurrentParticle</a></div><div class="ttdeci">void AddPointToCurrentParticle(TLorentzVector const &amp;pos, TLorentzVector const &amp;mom, std::string const &amp;process)</div><div class="ttdoc">Adds a trajectory point to the current particle, and runs the filter. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8cxx_source.html#l00691">ParticleListAction_service.cxx:691</a></div></div>
<div class="ttc" id="ParticleListAction_8cxx_html_a21d62e62b376ea39923a05be7565364d"><div class="ttname"><a href="ParticleListAction_8cxx.html#a21d62e62b376ea39923a05be7565364d">velocity_step</a></div><div class="ttdeci">double velocity_step</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction_8cxx_source.html#l00036">ParticleListAction.cxx:36</a></div></div>
<div class="ttc" id="ParticleListAction_8cxx_html_a4e7cc631a8f78cf0b7691e6515b57455"><div class="ttname"><a href="ParticleListAction_8cxx.html#a4e7cc631a8f78cf0b7691e6515b57455">velocity_G4</a></div><div class="ttdeci">double velocity_G4</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction_8cxx_source.html#l00036">ParticleListAction.cxx:36</a></div></div>
<div class="ttc" id="ParticleListAction_8cxx_html_a1f1ee98f0c212517e324923358844c70"><div class="ttname"><a href="ParticleListAction_8cxx.html#a1f1ee98f0c212517e324923358844c70">globalTime</a></div><div class="ttdeci">double globalTime</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction_8cxx_source.html#l00036">ParticleListAction.cxx:36</a></div></div>
<div class="ttc" id="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t_html_aa79797c8ff0a1001a7fead509db9438c"><div class="ttname"><a href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html#aa79797c8ff0a1001a7fead509db9438c">larg4::ParticleListActionService::ParticleInfo_t::hasParticle</a></div><div class="ttdeci">bool hasParticle() const </div><div class="ttdoc">Returns whether there is a particle. </div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00115">ParticleListAction_service.h:115</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a1c04e140e82ead36cb3812ca38148a75"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a1c04e140e82ead36cb3812ca38148a75">larg4::ParticleListActionService::fCurrentParticle</a></div><div class="ttdeci">ParticleInfo_t fCurrentParticle</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00145">ParticleListAction_service.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa88e795de2dd234ff145ebd4cb83ade5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sim::ParticleList &amp;&amp; larg4::ParticleListActionService::YieldList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8cxx_source.html#l00670">670</a> of file <a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// check if the ParticleNavigator has entries, and if</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// so grab the highest track id value from it to</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// add to the fTrackIDOffset</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordtype">int</span> highestID = 0;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> pn = <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.begin(); pn != <a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.end(); pn++)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">if</span> ((*pn).first &gt; highestID) highestID = (*pn).first;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">//Only change the fTrackIDOffset if there is in fact a particle to add to the event</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>.size()) != 0) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a> = highestID + 1;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      mf::LogDebug(<span class="stringliteral">&quot;YieldList:fTrackIDOffset&quot;</span>)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;highestID = &quot;</span> &lt;&lt; highestID &lt;&lt; <span class="stringliteral">&quot;\nfTrackIDOffset= &quot;</span> &lt;&lt; <a class="code" href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">fTrackIDOffset</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> std::move(<a class="code" href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">fParticleList</a>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  } <span class="comment">// ParticleList&amp;&amp; ParticleListActionService::YieldList()</span></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_aa82eadd5f395a1029e1beee05f8d43e5"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#aa82eadd5f395a1029e1beee05f8d43e5">larg4::ParticleListActionService::fTrackIDOffset</a></div><div class="ttdeci">int fTrackIDOffset</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00159">ParticleListAction_service.h:159</a></div></div>
<div class="ttc" id="classlarg4_1_1ParticleListActionService_html_a01872428875cace5d1d3e2752f041faa"><div class="ttname"><a href="classlarg4_1_1ParticleListActionService.html#a01872428875cace5d1d3e2752f041faa">larg4::ParticleListActionService::fParticleList</a></div><div class="ttdeci">sim::ParticleList fParticleList</div><div class="ttdef"><b>Definition:</b> <a href="ParticleListAction__service_8h_source.html#l00147">ParticleListAction_service.h:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1c04e140e82ead36cb3812ca38148a75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlarg4_1_1ParticleListActionService_1_1ParticleInfo__t.html">ParticleInfo_t</a> larg4::ParticleListActionService::fCurrentParticle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>information about the particle currently being simulated for a single particle. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00145">145</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9d1e115646fccbf82d9d254971e5d4fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int larg4::ParticleListActionService::fCurrentTrackID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>track ID of the current particle, set to eve ID for EM shower particles </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00157">157</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a221fda7268947395f3789b83f8b1cc61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G4double larg4::ParticleListActionService::fenergyCut</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The minimum energy for a particle to be included in the list. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00143">143</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad4ad667694602c583a440241924bafd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> larg4::ParticleListActionService::fKeepEMShowerDaughters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>whether to keep EM shower secondaries, tertiaries, etc </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00161">161</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb64558ef3d0c7602ace45b9b37d2efc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; larg4::ParticleListActionService::fkeepGenTrajectories</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of generators for which fstoreTrajectories applies. if not provided and storeTrajectories is true, then all trajectories for all generators will be stored. If storeTrajectories is set to false, this list is ignored and all additional trajectory points are not stored. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00151">151</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ca7cf76669c521dda351de097b4db46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> larg4::ParticleListActionService::fkeepOnlyPrimaryFullTraj</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether to store trajectories only for primaries and their descendants with MCTruth process = "primary" </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00163">163</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab9aefc0425517fdcf23898803ce35ebc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> larg4::ParticleListActionService::fKeepSecondToLast</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>tell whether or not to force keeping the second to last point </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00168">168</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a79ba8a05b5dedd662bb5d6d1c7174a8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> larg4::ParticleListActionService::fKeepTransportation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>tell whether or not to keep the transportation process </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00167">167</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1b20a66fa0dbcaee4a1fd16e0b4bf3a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;art::Handle&lt;std::vector&lt;simb::MCTruth&gt; &gt; &gt; const* larg4::ParticleListActionService::fMCLists</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MCTruthCollection input lists. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00171">171</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a478f26624fc0fbf431a348402db7d44c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, size_t&gt; larg4::ParticleListActionService::fMCTIndexMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map: particle track ID -&gt; index of primary parent in std::vector&lt;simb::MCTruth&gt; object. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00177">177</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a813e1823e4b0cb16c4c4c56f416440a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;size_t, std::pair&lt;std::string, G4bool&gt; &gt; larg4::ParticleListActionService::fMCTIndexToGeneratorMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map: MCTruthIndex -&gt; generator, input label of generator and keepGenerator decision. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00183">183</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a014523f52862136fec5351ad90862887"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, <a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a>&gt; larg4::ParticleListActionService::fMCTPrimProcessKeepMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map: particle trakc ID -&gt; boolean decision to keep or not full trajectory points. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00180">180</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c90f2943319e795818543e5595feaa9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, int&gt; larg4::ParticleListActionService::fNotStoredCounterUMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map: not stored process and counter. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00186">186</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a16b68e141cbd076ce6a038775f292961"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; larg4::ParticleListActionService::fNotStoredPhysics</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Physics processes that will not be stored. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00162">162</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="af358a6f10565846a8a208ac4c0b5e7c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, int&gt; larg4::ParticleListActionService::fParentIDMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>key is current track ID, value is parent ID </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00156">156</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a01872428875cace5d1d3e2752f041faa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sim::ParticleList larg4::ParticleListActionService::fParticleList</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The accumulated particle information for all particles in the event. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00147">147</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="af3687a0b04c384c04f23ee87bff8fb76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, simb::GeneratedParticleIndex_t&gt; larg4::ParticleListActionService::fPrimaryTruthMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map: particle track ID -&gt; index of primary information in MC truth. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00174">174</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5f76e481562c1a737add36169a82234f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double larg4::ParticleListActionService::fSparsifyMargin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the sparsification margin </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00166">166</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26dbe53104392b54165aef6c9669b01f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelarg4.html#a42b3ada02e272fe2fa2b641ba06ab7d4">bool</a> larg4::ParticleListActionService::fSparsifyTrajectories</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>help reduce the number of trajectory points. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00165">165</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc38037c6226f980663d2396ee12ef7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G4bool larg4::ParticleListActionService::fstoreTrajectories</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether to store particle trajectories with each particle. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00149">149</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa82eadd5f395a1029e1beee05f8d43e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int larg4::ParticleListActionService::fTrackIDOffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>offset added to track ids when running over multiple MCTruth objects. </p>

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00159">159</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab7cf914b7ec32a8091ad73a01b5448c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;std::vector&lt;simb::MCParticle&gt; &gt; larg4::ParticleListActionService::partCol_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00188">188</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26565b300dde7b137cbe6766121ad059"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">art::ProductID larg4::ParticleListActionService::pid_ {art::ProductID::invalid()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00191">191</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="afb003e652a5d582737430824ba649153"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">art::EDProductGetter const* larg4::ParticleListActionService::productGetter_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00192">192</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<a class="anchor" id="aabc969aa88c21210804e3390dd164fa0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;art::Assns&lt;simb::MCTruth, simb::MCParticle, <a class="el" href="classsim_1_1GeneratedParticleInfo.html">sim::GeneratedParticleInfo</a>&gt; &gt; larg4::ParticleListActionService::tpassn_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ParticleListAction__service_8h_source.html#l00190">190</a> of file <a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>larg4/larg4/pluginActions/<a class="el" href="ParticleListAction__service_8h_source.html">ParticleListAction_service.h</a></li>
<li>larg4/larg4/pluginActions/<a class="el" href="ParticleListAction__service_8cxx_source.html">ParticleListAction_service.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
