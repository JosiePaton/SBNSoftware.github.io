<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PlaneGeo.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b73b02d482d1c4a3db20c3d9ad52d395.html">srcs</a></li><li class="navelem"><a class="el" href="../../dir_0d059e244e4aff9e806074c98175a747.html">larcorealg</a></li><li class="navelem"><a class="el" href="../../dir_de29c411390e7639bef4bdd96f973c55.html">larcorealg</a></li><li class="navelem"><a class="el" href="../../dir_14b36a4f6e6fb0e5b4852b5ac05ead74.html">Geometry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PlaneGeo.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/dd0/PlaneGeo_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span><span class="comment">/// \file larcorealg/Geometry/PlaneGeo.cxx</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span><span class="comment">/// \author  brebel@fnal.gov</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span><span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// class header</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d80/PlaneGeo_8h.html">larcorealg/Geometry/PlaneGeo.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// LArSoft includes</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d7c/Exceptions_8h.html">larcorealg/Geometry/Exceptions.h</a>&quot;</span> <span class="comment">// geo::InvalidWireError</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/de5/WireGeo_8h.html">larcorealg/Geometry/WireGeo.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d6c/geo__vectors__utils_8h.html">larcorealg/Geometry/geo_vectors_utils.h</a>&quot;</span> <span class="comment">// geo::vect::convertTo()</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dbc/RealComparisons_8h.html">larcorealg/CoreUtils/RealComparisons.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d09/PhysicalConstants_8h.html">larcoreobj/SimpleTypesAndConstants/PhysicalConstants.h</a>&quot;</span> <span class="comment">// util::pi()</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Framework includes</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;messagefacility/MessageLogger/MessageLogger.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;cetlib/pow.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;cetlib_except/exception.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// ROOT includes</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;TMath.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;TVector3.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;TGeoManager.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;TGeoNode.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;TGeoBBox.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;TGeoMatrix.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;TClass.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// C/C++ standard library</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span> <span class="comment">// std::ostringstream</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span> <span class="comment">// std::less&lt;&gt;, std::greater&lt;&gt;, std::transform()</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span> <span class="comment">// std::back_inserter()</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;type_traits&gt;</span> <span class="comment">// std::is_same&lt;&gt;, std::decay_t&lt;&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  /// Returns the offset to apply to value to move it inside [ -limit, +limit ].</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  T symmetricCapDelta(T <a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>, T limit) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">return</span> (value &lt; -limit)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      ? -limit - value</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      : (value &gt; +limit)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        ? +limit - value</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        : 0.0</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      ;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  } <span class="comment">// symmetricCapDelta()</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  /// Returns a value shifted to fall into [ -limit; +limit ] interval.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  T symmetricCap(T value, T limit) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> value + symmetricCapDelta(value, limit);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  } <span class="comment">// symmetricCap()</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;} <span class="comment">// local namespace</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">namespace </span>geo{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">namespace </span>details {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">//......................................................................</span><span class="comment"></span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     * @brief Class computing the active area of the plane.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">     * The active area is defined in the width/depth space which include</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">     * approximatively all wires.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">     * This algorithm requires the frame reference and the wire pitch to be</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">     * already defined.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">     * That area is tuned so that all its points are closer than half a wire</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">     * pitch from a wire.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html">   85</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html">ActiveAreaCalculator</a> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4219fe2ca7c62436639e983f8d24f2fd">ActiveAreaCalculator</a></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4219fe2ca7c62436639e983f8d24f2fd">   88</a></span>&#160;        (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html">geo::PlaneGeo</a> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a3c23841e02aa5082569a1abd1fee5504">plane</a>, <span class="keywordtype">double</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">wMargin</a>, <span class="keywordtype">double</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">dMargin</a>)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        : <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a3c23841e02aa5082569a1abd1fee5504">plane</a>(plane)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        , <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">wMargin</a>(wMargin)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        , <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">dMargin</a>(dMargin)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad337434a7a111c8303d352c8f2c2ef15">   94</a></span>&#160;      <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad337434a7a111c8303d352c8f2c2ef15">ActiveAreaCalculator</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html">geo::PlaneGeo</a> <span class="keyword">const</span>&amp; plane, <span class="keywordtype">double</span> margin = 0.0)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        : <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html">ActiveAreaCalculator</a>(plane, margin, margin)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a15fc7dae533805b86aa518d7d42b29ac">   98</a></span>&#160;      <span class="keyword">operator</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9030047e3a65bdac6408581aeae649c4">geo::PlaneGeo::Rect</a>()</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        { <span class="keywordflow">return</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a54c29d3a7cd846502e47f15694a5caa9">recomputeArea</a>(); }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keyword">using</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acfd296af7b0510e55d946e6954da7126">Projection_t</a> = ROOT::Math::PositionVector2D</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acfd296af7b0510e55d946e6954da7126">  103</a></span>&#160;        &lt;ROOT::Math::Cartesian2D&lt;double&gt;, <a class="code" href="../../de/d83/structgeo_1_1PlaneGeo_1_1WidthDepthReferenceTag.html">geo::PlaneGeo::WidthDepthReferenceTag</a>&gt;;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">  104</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a> = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa6eac7d5ba549b3b2b1d888f98d0a021">geo::PlaneGeo::WidthDepthDisplacement_t</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      static_assert(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        !<a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">std::is_same&lt;Projection_t, geo::PlaneGeo::WidthDepthProjection_t&gt;::value</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="stringliteral">&quot;Necessary maintenance: remove the now optional conversions&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">  111</a></span>&#160;      <span class="keyword">static</span> constexpr std::size_t <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a> = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">  112</a></span>&#160;      <span class="keyword">static</span> constexpr std::size_t <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>   = 1;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">  113</a></span>&#160;      <span class="keyword">static</span> constexpr std::size_t <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>  = 2;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">  114</a></span>&#160;      <span class="keyword">static</span> constexpr std::size_t <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>    = 3;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a3c23841e02aa5082569a1abd1fee5504">  116</a></span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html">PlaneGeo</a> <span class="keyword">const</span>&amp; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a3c23841e02aa5082569a1abd1fee5504">plane</a>; <span class="comment">///&lt; Plane to work on.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">  117</a></span>&#160;<span class="comment"></span>      <span class="keywordtype">double</span> <span class="keyword">const</span> wMargin = 0.0; <span class="comment">///&lt; Margin subtracted from each side of width.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">  118</a></span>&#160;<span class="comment"></span>      <span class="keywordtype">double</span> <span class="keyword">const</span> dMargin = 0.0; <span class="comment">///&lt; Margin subtracted from each side of depth.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">  119</a></span>&#160;<span class="comment"></span>      <a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html">geo::PlaneGeo::Rect</a> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>; <span class="comment">///&lt; Result.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span><span class="comment"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">      /// Cache: wire end projections.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">  122</a></span>&#160;<span class="comment"></span>      <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acfd296af7b0510e55d946e6954da7126">Projection_t</a> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[4];</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#abf71e6563b2ba88bfde429d6fc241a70">  124</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#abf71e6563b2ba88bfde429d6fc241a70">initializeWireEnds</a>()</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          <span class="comment">// Collect the projections of the relevant points.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <span class="comment">// Sorted so that start points have width not larger than end points.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <span class="comment">// PointWidthDepthProjection() erroneously returns a vector rather</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          <span class="comment">// than a point, so a conversion is required</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;          <span class="keyword">auto</span> makeProjection</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            = [](<span class="keyword">auto</span> v){ <span class="keywordflow">return</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acfd296af7b0510e55d946e6954da7126">Projection_t</a>(v.X(), v.Y()); };</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>] = makeProjection</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            (plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a1fe2dceeec7c5c0b14c6c9593482e438">GetStart</a>()));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>] = makeProjection</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            (plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a23ad5f4a59ea0abdb4b3161378754b2a">GetEnd</a>()));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>() &gt; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>())</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            std::swap(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>], <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>]);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>] = makeProjection</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            (plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab4c5c3eea283dbc8462846a50868a240">LastWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a1fe2dceeec7c5c0b14c6c9593482e438">GetStart</a>()));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>] = makeProjection</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            (plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab4c5c3eea283dbc8462846a50868a240">LastWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a23ad5f4a59ea0abdb4b3161378754b2a">GetEnd</a>()));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>() &gt; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>())</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            std::swap(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>], <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>]);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        } <span class="comment">// initializeWireEnds()</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a881c0c9e4ecc863b6da6cbf9b83c635f">  150</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a881c0c9e4ecc863b6da6cbf9b83c635f">includeAllWireEnds</a>()</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;          <span class="comment">// Find the basic area containing all the coordinates.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="comment">// include all the coordinates of the first and last wire</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; aWireEnd: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#aee0348c987b66d2284bf795cc838948b">extendToInclude</a>(aWireEnd.X());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#aee0348c987b66d2284bf795cc838948b">extendToInclude</a>(aWireEnd.Y());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        } <span class="comment">// includeAllWireEnds()</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#adfd4ff58e32d7fe19ded00e82f9bc5a5">  164</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#adfd4ff58e32d7fe19ded00e82f9bc5a5">adjustCorners</a>()</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          <span class="comment">// Modify the corners so that none is father than half a pitch from all</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <span class="comment">// wires.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <span class="comment">// directions in wire/depth plane</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a> <span class="keyword">const</span> widthDir = { 1.0, 0.0 };</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a> <span class="keyword">const</span> depthDir = { 0.0, 1.0 };</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a> wireCoordDir = plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae289aa3250c5622e39bdbea3b222b7af">VectorWidthDepthProjection</a></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            (plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa136661c166fee6b9f9888423ac2824d">GetIncreasingWireDirection</a>());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> hp = plane.<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">WirePitch</a>() / 2.0; <span class="comment">// half pitch</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="comment">// The plan: identify if wires are across or corner, and then:</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <span class="comment">// - across:</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="comment">//   - identify which sides</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="comment">//   - set the farther end of the wire from the side to be p/2 from</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="comment">//     its corner</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          <span class="comment">// - corner:</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          <span class="comment">//   - identify which corners</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="comment">//   - move the corners to p/2 from the wires</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          <span class="comment">// are the wires crossing side to side, as opposed to cutting corners?</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          <span class="comment">// these are the angles of the original wire coordinate direction</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> cosAngleWidth = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(wireCoordDir, widthDir);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <span class="keywordtype">double</span> <span class="keyword">const</span> cosAngleDepth = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(wireCoordDir, depthDir);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <span class="comment">// if the wire coordinate direction is on first or third quadrant:</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keywordtype">bool</span> <span class="keyword">const</span> bPositiveAngle</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            = <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad9bd46c0482ac759fd226ed50a4c68be">none_or_both</a>((wireCoordDir.X() &gt;= 0), (wireCoordDir.Y() &gt;= 0));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="comment">// now we readjust the wire coordinate direction to always point</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;          <span class="comment">// toward positive width; this breaks the relation between</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          <span class="comment">// wireCoordDir and which is the first/last wire</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          <span class="keywordflow">if</span> (cosAngleWidth &lt; 0) wireCoordDir = -wireCoordDir;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          <span class="comment">// let&#39;s study the first wire (ends are sorted by width)</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          assert(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>() &gt;= <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <span class="keywordtype">bool</span> <span class="keyword">const</span> bAlongWidth <span class="comment">// horizontal</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            =  <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">equal</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            &amp;&amp; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">equal</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="keywordtype">bool</span> <span class="keyword">const</span> bAlongDepth = !bAlongWidth &amp;&amp; <span class="comment">// vertical</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;               <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">equal</a>(std::max(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>].Y(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>].Y()), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            &amp;&amp; <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">equal</a>(std::min(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>].Y(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>].Y()), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          assert(!(bAlongWidth &amp;&amp; bAlongDepth));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <span class="keywordflow">if</span> (bAlongWidth) { <span class="comment">// horizontal</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="comment">// +---------+</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">// |   ___,--|  upper width bound</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="comment">// |--&#39;      |</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="comment">// find which is the wire with higher width:</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// the last wire is highest if the wire coordinate direction (which</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="comment">// is defined by what is first and what is last) is parallel to the</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="comment">// width direction</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            std::size_t <span class="keyword">const</span> iUpperWire</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              = (cosAngleDepth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">// largest distance from upper depth bound of the two ends of wire</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> maxUpperDistance = <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;              - std::min</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire].Y(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire ^ 0x1].Y())</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;              ;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="comment">// set the upper side so that the maximum distance is p/2</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">// (it may be actually less if the wire is not perfectly horizontal)</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> += (hp - maxUpperDistance);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="comment">// |--.___   |</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="comment">// |      `--|  deal with the lower bound now</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="comment">// +---------+</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            std::size_t <span class="keyword">const</span> iLowerWire</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;              = (cosAngleDepth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="comment">// largest distance from lower depth bound of the two ends of wire</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> maxLowerDistance</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;              = std::max</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire].Y(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire ^ 0x1].Y())</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;              - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;              ;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="comment">// set the upper side so that the minimum distance is p/2</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> -= (hp - maxLowerDistance);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          } <span class="comment">// horizontal wires</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bAlongDepth) { <span class="comment">// vertical</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="comment">// --,---+</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="comment">//   |   |</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="comment">//    \  |</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment">//    |  |  upper depth bound</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="comment">//     \ |</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="comment">//     | |</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="comment">// ------+</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">// find which is the wire with higher depth:</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment">// the last wire is highest if the wire coordinate direction (which</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="comment">// is defined by what is first and what is last) is parallel to the</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">// depth direction</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            std::size_t <span class="keyword">const</span> iUpperWire</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="comment">// largest distance from upper depth bound of the two ends of wire</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> maxUpperDistance = <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;              - std::min</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire ^ 0x1].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>())</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;              ;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// set the upper side so that the minimum distance is p/2</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> += (hp - maxUpperDistance);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="comment">// +-,----</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">// | |</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">// |  \     .</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="comment">// |  |     deal with the lower bound now</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">// |   \    .</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="comment">// |   |</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="comment">// +------</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            std::size_t <span class="keyword">const</span> iLowerWire</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="comment">// largest distance from lower width bound of the two ends of wire</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> maxLowerDistance</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              = std::max</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                (<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>(), <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire ^ 0x1].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>())</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;              - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;              ;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">// set the upper side so that the minimum distance is p/2</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> -= (hp - maxLowerDistance);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          } <span class="comment">// vertical wires</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bPositiveAngle) { <span class="comment">// wires are not going across: corners!</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="comment">// corners at (lower width, lower depth), (upper width, upper depth)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="comment">// -._------+</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="comment">//    `-._  |  upper width corner (upper depth)</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="comment">//        `-|</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="comment">// start of the wire on the upper corner</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// (width coordinate is lower for start than for end)</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            std::size_t <span class="keyword">const</span> iUpperWire</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> upperDistance = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;              <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire].X(), 0.0),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;              wireCoordDir</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;              );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="comment">// make the upper distance become p/2</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> upperDelta = (hp - upperDistance) * wireCoordDir;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> += upperDelta.X();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> += upperDelta.Y();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="comment">// |-._</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="comment">// |   `-._    lower width corner (lower depth)</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="comment">// +-------`-</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="comment">// end of the wire on the lower corner</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// (width coordinate is lower than the end)</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            std::size_t <span class="keyword">const</span> iLowerWire</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> lowerDistance = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;              <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>() - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a>, 0.0),</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;              wireCoordDir</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;              );</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="comment">// make the lower distance become p/2 (note direction of wire coord)</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> lowerDelta = (hp - lowerDistance) * wireCoordDir;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> -= lowerDelta.X();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> -= lowerDelta.Y();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          <span class="keywordflow">else</span> { <span class="comment">// !bPositiveAngle</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment">// corners at (lower width, upper depth), (upper width, lower depth)</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">//       _,-|</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="comment">//   _,-&#39;   |  upper width corner (lower depth)</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">// -&#39;-------+</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="comment">// start of the wire on the upper corner</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="comment">// (width coordinate is lower than the end)</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            std::size_t <span class="keyword">const</span> iUpperWire</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">kLastWireStart</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">kFirstWireStart</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> upperDistance = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;              <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iUpperWire].X(), 0.0),</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;              wireCoordDir</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;              );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="comment">// make the upper distance become p/2</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> upperDelta = (hp - upperDistance) * wireCoordDir;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> += upperDelta.X();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> += upperDelta.Y();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="comment">// +------_,-</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="comment">// |  _,-&#39;     lower width corner (upper depth)</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">// |-&#39;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">// end of the wire on the lower corner</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">// (width coordinate is lower than the end)</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            std::size_t <span class="keyword">const</span> iLowerWire</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;              = (cosAngleWidth &gt; 0)? <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">kFirstWireEnd</a>: <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">kLastWireEnd</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordtype">double</span> <span class="keyword">const</span> lowerDistance = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;              <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">Vector_t</a>(<a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">wireEnds</a>[iLowerWire].<a class="code" href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a>() - <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a>, 0.0),</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;              wireCoordDir</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;              );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="comment">// make the lower distance become p/2 (note direction of wire coord)</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> lowerDelta = (hp - lowerDistance) * wireCoordDir;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> -= lowerDelta.X();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> -= lowerDelta.Y();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          } <span class="comment">// if ...</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        } <span class="comment">// adjustCorners()</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a230edfb65c9d8df9df27f373de9189a9">  377</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a230edfb65c9d8df9df27f373de9189a9">applyMargin</a>()</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          <span class="keywordflow">if</span> (wMargin != 0.0) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> += <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">wMargin</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> -= <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">wMargin</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          <span class="keywordflow">if</span> (dMargin != 0.0) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lower</a> += <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">dMargin</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">upper</a> -= <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">dMargin</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        } <span class="comment">// applyMargin()</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a54c29d3a7cd846502e47f15694a5caa9">  390</a></span>&#160;      <a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html">geo::PlaneGeo::Rect</a> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a54c29d3a7cd846502e47f15694a5caa9">recomputeArea</a>()</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a> = {};</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          <span class="comment">// 0. collect the projections of the relevant point</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#abf71e6563b2ba88bfde429d6fc241a70">initializeWireEnds</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <span class="comment">// 1. find the basic area containing all the coordinates</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a881c0c9e4ecc863b6da6cbf9b83c635f">includeAllWireEnds</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <span class="comment">// 2. adjust area so that no corner is father than half a wire pitch</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#adfd4ff58e32d7fe19ded00e82f9bc5a5">adjustCorners</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <span class="comment">// 3. apply an absolute margin</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a230edfb65c9d8df9df27f373de9189a9">applyMargin</a>();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">activeArea</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        } <span class="comment">// computeArea()</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">      /// Returns true if a and b are both true or both false (exclusive nor).</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad9bd46c0482ac759fd226ed50a4c68be">  418</a></span>&#160;<span class="comment"></span>      <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad9bd46c0482ac759fd226ed50a4c68be">none_or_both</a>(<span class="keywordtype">bool</span> <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a>, <span class="keywordtype">bool</span> b) { <span class="keywordflow">return</span> a == b; }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">      /// Returns whether the two numbers are the same, lest a tolerance.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span>      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">  422</a></span>&#160;      <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">equal</a>(T <a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a>, T b, T <a class="code" href="../../da/da0/SurfXYZTest_8cc.html#a352dc2abeda5f913ed16b48bbdcde948">tol</a> = T(1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-5))</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        { <span class="keywordflow">return</span> <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(a - b) &lt;= <a class="code" href="../../da/da0/SurfXYZTest_8cc.html#a352dc2abeda5f913ed16b48bbdcde948">tol</a>; }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }; <span class="comment">// struct ActiveAreaCalculator</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  } <span class="comment">// namespace details</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">//----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">//---  geo::PlaneGeo</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">//---</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a15df9a2fb050b471394185817aaf2111">  435</a></span>&#160;  <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a15df9a2fb050b471394185817aaf2111">PlaneGeo::PlaneGeo</a>(</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    TGeoNode <span class="keyword">const</span>&amp; node,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="../../d6/d23/namespacegeo.html#a9680b6099f733e98dcf7c5329c6318b0">geo::TransformationMatrix</a>&amp;&amp; trans,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3dbc4fe81af2c28d5ba31ab3d13b7d1e">WireCollection_t</a>&amp;&amp; wires</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    )</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    : fTrans(<a class="code" href="../../da/dc9/namespacepmtana.html#a9860e62c78db1dd9c7d635a2832b883a">std</a>::move(trans))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    , fVolume(node.GetVolume())</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    , fView(geo::<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae329b0f520125896d02940bec370fca7">kUnknown</a>)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    , fOrientation(geo::<a class="code" href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7ea3278689303684830961f26ab4ae9d7b5">kVertical</a>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    , fWire(<a class="code" href="../../da/dc9/namespacepmtana.html#a9860e62c78db1dd9c7d635a2832b883a">std</a>::move(wires))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    , fWirePitch(0.)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    , fSinPhiZ(0.)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    , fCosPhiZ(0.)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    , fDecompWire()</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    , fDecompFrame()</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    , fCenter()</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;PlaneGeo&quot;</span>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Plane geometry node &quot;</span> &lt;&lt; node.IsA()-&gt;GetName()</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; node.GetName() &lt;&lt; <span class="stringliteral">&quot;, #&quot;</span> &lt;&lt; node.GetNumber()</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;] has no volume!\n&quot;</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// view is now set at TPC level with SetView</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adef3913de58c9fbde68efc48d0ce4826">DetectGeometryDirections</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a72bb4952786b206c9db6193cc629617d">UpdateWirePitchSlow</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  } <span class="comment">// PlaneGeo::PlaneGeo()</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a665d435fa9833ec622daee7531c26680">  469</a></span>&#160;  <a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html">geo::BoxBoundedGeo</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a665d435fa9833ec622daee7531c26680">PlaneGeo::BoundingBox</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// The algorithm is not very refined...</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    TGeoBBox <span class="keyword">const</span>* pShape = <span class="keyword">dynamic_cast&lt;</span>TGeoBBox <a class="code" href="../../d7/d8e/namespaceSortModuleTimes.html#a805854df4323f914a9a09f4e266b4794">const</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;GetShape());</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (!pShape) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;PlaneGeo&quot;</span>)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;BoundingBox(): volume &quot;</span> &lt;&lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;IsA()-&gt;GetName()</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;[&#39;&quot;</span> &lt;&lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot;&#39;] has a shape which is a &quot;</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        &lt;&lt; pShape-&gt;IsA()-&gt;GetName()</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, not a TGeoBBox!&quot;</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html">geo::BoxBoundedGeo</a> box;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> points = 0;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> dx: { -(pShape-&gt;GetDX()), +(pShape-&gt;GetDX()) }) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">double</span> dy: { -(pShape-&gt;GetDY()), +(pShape-&gt;GetDY()) }) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">double</span> dz: { -(pShape-&gt;GetDZ()), +(pShape-&gt;GetDZ()) }) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a> = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1a7e1830a03a7b806fb486a06dee9f86">toWorldCoords</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#afe8bd1eceb5b7c295dee30b0e80ecd80">LocalPoint_t</a>{ dx, dy, dz });</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;          <span class="keywordflow">if</span> (points++ == 0)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            box.<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#af746b45acd77561ff4c9b5fe2ed758bc">SetBoundaries</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>, <a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            box.<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#adab794eed303c92172c8e2e6e7a51876">ExtendToInclude</a>(<a class="code" href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        } <span class="comment">// for z</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      } <span class="comment">// for y</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    } <span class="comment">// for x</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span> box;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  } <span class="comment">// PlaneGeo::BoundingBox()</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">  506</a></span>&#160;  <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html">geo::WireGeo</a> <span class="keyword">const</span>&amp; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">PlaneGeo::Wire</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwire)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html">geo::WireGeo</a> <span class="keyword">const</span>* pWire = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a88b32f36c89f842496633672c848c8e9">WirePtr</a>(iwire);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!pWire) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;WireOutOfRange&quot;</span>)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Request for non-existant wire &quot;</span> &lt;&lt; iwire &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> *pWire;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  } <span class="comment">// PlaneGeo::Wire(int)</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// sort the WireGeo objects</span></div>
<div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a596ffb7f954d956791f6b3f0bd6b2946">  518</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a596ffb7f954d956791f6b3f0bd6b2946">PlaneGeo::SortWires</a>(<a class="code" href="../../d5/df5/classgeo_1_1GeoObjectSorter.html">geo::GeoObjectSorter</a> <span class="keyword">const</span>&amp; sorter )</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    sorter.<a class="code" href="../../d5/df5/classgeo_1_1GeoObjectSorter.html#a26400886523abd10a1c214572682f4ab">SortWires</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a194e03f145090c263964158661ed5c12">  525</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a194e03f145090c263964158661ed5c12">PlaneGeo::WireIDincreasesWithZ</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/de2/structlar_1_1util_1_1RealComparisons.html">lar::util::RealComparisons</a>(1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-3).<a class="code" href="../../d9/de2/structlar_1_1util_1_1RealComparisons.html#a8e03cbf3571f37bd00e35ed8f5abdbc1">nonNegative</a></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa136661c166fee6b9f9888423ac2824d">GetIncreasingWireDirection</a>().Z());</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  } <span class="comment">// PlaneGeo::WireIDincreasesWithZ()</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8fd535b73d93307073607c96d1facc26">  532</a></span>&#160;  <a class="code" href="../../db/da7/classlar_1_1util_1_1simple__geo_1_1Volume.html">lar::util::simple_geo::Volume&lt;&gt;</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8fd535b73d93307073607c96d1facc26">PlaneGeo::Coverage</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// add both coordinates of first and last wire</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    std::array&lt;double, 3&gt; <a class="code" href="../../d3/d5d/namespacelib_1_1dedx.html#a62b15446ae03a5857d5e03fa30b03fd4">A</a>, B;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a1fe2dceeec7c5c0b14c6c9593482e438">GetStart</a>(A.data());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab4c5c3eea283dbc8462846a50868a240">LastWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a23ad5f4a59ea0abdb4b3161378754b2a">GetEnd</a>(B.data());</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> { A.data(), B.data() };</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  } <span class="comment">// PlaneGeo::Coverage()</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  std::string <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a89cb5420c23ecbfbd54d2917a5b03b18">PlaneGeo::PlaneInfo</a></div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a89cb5420c23ecbfbd54d2917a5b03b18">  546</a></span>&#160;    (std::string indent <span class="comment">/* = &quot;&quot; */</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verbosity <span class="comment">/* = 1 */</span>) <span class="keyword">const</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    std::ostringstream sstr;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#abeb00fea35a1d0fd24d5b71de6e56686">PrintPlaneInfo</a>(sstr, indent, verbosity);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span> sstr.str();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  } <span class="comment">// PlaneGeo::PlaneInfo()</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">PlaneGeo::WidthDepthProjection_t</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">PlaneGeo::DeltaFromPlane</a></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">  556</a></span>&#160;    (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">WidthDepthProjection_t</a> <span class="keyword">const</span>&amp; proj, <span class="keywordtype">double</span> wMargin, <span class="keywordtype">double</span> dMargin) <span class="keyword">const</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">return</span> {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      symmetricCapDelta(proj.X(), <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a2b6f18e87dcf573ddd742fb1e7f4a482">HalfWidth</a>() - wMargin),</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      symmetricCapDelta(proj.Y(), <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a0ca4fe9b19c12e054a24523672ab6a00">HalfDepth</a>() - dMargin)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    };</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  } <span class="comment">// PlaneGeo::DeltaFromPlane()</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">PlaneGeo::WidthDepthProjection_t</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3dc9ce96d4fba94401dd2d437cff064f">PlaneGeo::DeltaFromActivePlane</a></div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3dc9ce96d4fba94401dd2d437cff064f">  569</a></span>&#160;    (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">WidthDepthProjection_t</a> <span class="keyword">const</span>&amp; proj, <span class="keywordtype">double</span> wMargin, <span class="keywordtype">double</span> dMargin) <span class="keyword">const</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a654d9d93edfa42a9a8974321876046ab">fActiveArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">width</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a0d5b1c87634b471d798092acbd3f79dc">delta</a>(proj.X(), wMargin),</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a654d9d93edfa42a9a8974321876046ab">fActiveArea</a>.<a class="code" href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">depth</a>.<a class="code" href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a0d5b1c87634b471d798092acbd3f79dc">delta</a>(proj.Y(), dMargin)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      };</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  } <span class="comment">// PlaneGeo::DeltaFromActivePlane()</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab19ca3ac8c74c98c30612f56fb4e3ebb">  581</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab19ca3ac8c74c98c30612f56fb4e3ebb">PlaneGeo::isProjectionOnPlane</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <span class="keyword">const</span>&amp; point)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> deltaProj</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">DeltaFromPlane</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(point));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> (deltaProj.X() == 0.) &amp;&amp; (deltaProj.Y() == 0.);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  } <span class="comment">// PlaneGeo::isProjectionOnPlane()</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">PlaneGeo::WidthDepthProjection_t</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4bdd71b1377e68e2ac607e91c15679ad">PlaneGeo::MoveProjectionToPlane</a></div>
<div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4bdd71b1377e68e2ac607e91c15679ad">  593</a></span>&#160;    (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">WidthDepthProjection_t</a> <span class="keyword">const</span>&amp; proj) <span class="keyword">const</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// We have a more complicate implementation to avoid rounding errors.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// In this way, the result is really guaranteed to be exactly on the border.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> delta = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">DeltaFromPlane</a>(proj);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      (delta.X() == 0.0)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        ? proj.X()</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        : ((delta.X() &gt; 0)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          ? -<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a2b6f18e87dcf573ddd742fb1e7f4a482">HalfWidth</a>() <span class="comment">// delta positive -&gt; proj on negative side</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          : <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a2b6f18e87dcf573ddd742fb1e7f4a482">HalfWidth</a>()</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        ),</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      (delta.Y() == 0.0)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        ? proj.Y()</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        : ((delta.Y() &gt; 0)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;          ? -<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a0ca4fe9b19c12e054a24523672ab6a00">HalfDepth</a>() <span class="comment">// delta positive -&gt; proj on negative side</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          : <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a0ca4fe9b19c12e054a24523672ab6a00">HalfDepth</a>()</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        )</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      };</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  } <span class="comment">// PlaneGeo::MoveProjectionToPlane()</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a37a44e5f19c0ed95d2c3bb6dba5389c0">  619</a></span>&#160;  TVector3 <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a192ab7cb48516d2b9e82072def7431de">PlaneGeo::MovePointOverPlane</a>(TVector3 <span class="keyword">const</span>&amp; point)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// This implementation is subject to rounding errors, since the result of</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// the addition might jitter above or below the border.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> deltaProj</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">DeltaFromPlane</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(point));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> point + deltaProj.X() * <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a07e3bb39c18911d0f71e45f1c0c0fe0f">WidthDir</a>() + deltaProj.Y() * <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6751f12e587b8d5c75edb63d751d10d6">DepthDir</a>();</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  } <span class="comment">// PlaneGeo::MovePointOverPlane()</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a192ab7cb48516d2b9e82072def7431de">  633</a></span>&#160;  <a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a192ab7cb48516d2b9e82072def7431de">PlaneGeo::MovePointOverPlane</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <span class="keyword">const</span>&amp; point)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// This implementation is subject to rounding errors, since the result of</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// the addition might jitter above or below the border.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> deltaProj</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">DeltaFromPlane</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">PointWidthDepthProjection</a>(point));</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">return</span> point + deltaProj.X() * WidthDir&lt;geo::Vector_t&gt;() + deltaProj.Y() * DepthDir&lt;geo::Vector_t&gt;();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  } <span class="comment">// PlaneGeo::MovePointOverPlane()</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0f2906b4332d3eedc05c2191879a1ae4">  649</a></span>&#160;  <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0f2906b4332d3eedc05c2191879a1ae4">PlaneGeo::NearestWireID</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <span class="keyword">const</span>&amp; pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">// 1) compute the wire coordinate of the point</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// 2) get the closest wire number</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// 3) check if the wire does exist</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// 4) build and return the wire ID</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// this line merges parts (1) and (2); add 0.5 to have the correct rounding:</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordtype">int</span> nearestWireNo = int(0.5 + <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0423d5a844fac3310f2c34e5cd24646e">WireCoordinate</a>(pos));</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// if we are outside of the wireplane range, throw an exception</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> ((nearestWireNo &lt; 0) || ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) nearestWireNo &gt;= <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>())) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keyword">auto</span> wireNo = nearestWireNo; <span class="comment">// save for the output</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">if</span> (nearestWireNo &lt; 0 ) wireNo = 0;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">else</span>                    wireNo = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>() - 1;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="../../d6/d6c/classgeo_1_1InvalidWireError.html">InvalidWireError</a>(<span class="stringliteral">&quot;Geometry&quot;</span>, <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">ID</a>(), nearestWireNo, wireNo)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Can&#39;t find nearest wire for position &quot;</span> &lt;&lt; pos</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; in plane &quot;</span> &lt;&lt; std::string(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">ID</a>()) &lt;&lt; <span class="stringliteral">&quot; approx wire number # &quot;</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        &lt;&lt; wireNo &lt;&lt; <span class="stringliteral">&quot; (capped from &quot;</span> &lt;&lt; nearestWireNo &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    } <span class="comment">// if invalid</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">return</span> { <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">ID</a>(), (<a class="code" href="../../de/db1/structgeo_1_1WireID.html#a51daaae3404ddba50f4585a9820e751f">geo::WireID::WireID_t</a>) nearestWireNo };</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  } <span class="comment">// PlaneGeo::NearestWireID()</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a458c213d5df09417c9def8037bb3349c">  681</a></span>&#160;  <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html">geo::WireGeo</a> <span class="keyword">const</span>&amp; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a458c213d5df09417c9def8037bb3349c">PlaneGeo::NearestWire</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a> <span class="keyword">const</span>&amp; point)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Note that this code is ready for when NearestWireID() will be changed</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// to return an invalid ID instead of throwing.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// As things are now, `NearestWireID()` will never return an invalid ID,</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// but it will throw an exception similar to this one.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> <span class="keyword">const</span> wireID = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0f2906b4332d3eedc05c2191879a1ae4">NearestWireID</a>(point);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (wireID) <span class="keywordflow">return</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(wireID); <span class="comment">// we have that wire, so we return it</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// wire ID is invalid, meaning it&#39;s out of range. Throw an exception!</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a> <span class="keyword">const</span> closestID = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2bed15dc08200166fc9299406dd3ef42">ClosestWireID</a>(wireID);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../d6/d6c/classgeo_1_1InvalidWireError.html">InvalidWireError</a>(<span class="stringliteral">&quot;Geometry&quot;</span>, <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">ID</a>(), closestID.<a class="code" href="../../de/db1/structgeo_1_1WireID.html#ac303d2971eb9697f3a65821bb92bb934">Wire</a>, wireID.<a class="code" href="../../de/db1/structgeo_1_1WireID.html#ac303d2971eb9697f3a65821bb92bb934">Wire</a>)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Can&#39;t find nearest wire for position &quot;</span> &lt;&lt; point</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; in plane &quot;</span> &lt;&lt; std::string(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">ID</a>()) &lt;&lt; <span class="stringliteral">&quot; approx wire number # &quot;</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      &lt;&lt; closestID.<a class="code" href="../../de/db1/structgeo_1_1WireID.html#ac303d2971eb9697f3a65821bb92bb934">Wire</a> &lt;&lt; <span class="stringliteral">&quot; (capped from &quot;</span> &lt;&lt; wireID.<a class="code" href="../../de/db1/structgeo_1_1WireID.html#ac303d2971eb9697f3a65821bb92bb934">Wire</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  } <span class="comment">// PlaneGeo::NearestWire()</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6f9d364c5e6bc1180ca4b8656a866c07">PlaneGeo::InterWireProjectedDistance</a></div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6f9d364c5e6bc1180ca4b8656a866c07">  705</a></span>&#160;    (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a54262556246be9d7cd55b501d860d9c1">WireCoordProjection_t</a> <span class="keyword">const</span>&amp; projDir) <span class="keyword">const</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    assert(<a class="code" href="../../da/df2/structlar_1_1util_1_1Vector2DComparison.html">lar::util::Vector2DComparison</a>{1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-6}.nonZero(projDir));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">return</span> std::sqrt(cet::square(projDir.X() / projDir.Y()) + 1.0) * <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  } <span class="comment">// PlaneGeo::InterWireProjectedDistance()</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2500e66d8a1a7aa4b40703ed049fa863">  713</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2500e66d8a1a7aa4b40703ed049fa863">PlaneGeo::InterWireDistance</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a> <span class="keyword">const</span>&amp; <a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// the secondary component of the wire decomposition basis is wire coord.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a> = dir.R();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    assert(r &gt;= 1.<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-6);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">double</span> <span class="keyword">const</span> absWireCoordProj</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      = <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">fDecompWire</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#af191a3c92f91a862740cd94c7aba344a">VectorSecondaryComponent</a>(dir));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> r / absWireCoordProj * <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  } <span class="comment">// PlaneGeo::InterWireDistance()</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4aee7822c8ac09d443815098f48fe285">  726</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4aee7822c8ac09d443815098f48fe285">PlaneGeo::ThetaZ</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a0607dce1b981e52fc158ad5cbfd343d0">ThetaZ</a>(); }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13a34889858a0180ce66022e83f72a7d">PlaneGeo::UpdateAfterSorting</a></div>
<div class="line"><a name="l00731"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13a34889858a0180ce66022e83f72a7d">  731</a></span>&#160;    (<a class="code" href="../../d4/d41/structgeo_1_1PlaneID.html">geo::PlaneID</a> planeid, <a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html">geo::BoxBoundedGeo</a> <span class="keyword">const</span>&amp; TPCbox)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// the order here matters</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// reset our ID</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a84f3aab039e6e431cb0a72f65fa1a8ca">fID</a> = planeid;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a58e3ccddfead71290d9b11e6164e1813">UpdatePlaneNormal</a>(TPCbox);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ac80ef1a183aac39348187a5a3ee0cda0">UpdateWidthDepthDir</a>();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a380fe77fd096cdfaf786366a0fc3eedc">UpdateIncreasingWireDir</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// update wires</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../de/db1/structgeo_1_1WireID.html#a51daaae3404ddba50f4585a9820e751f">geo::WireID::WireID_t</a> wireNo = 0;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; wire: <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      wire.UpdateAfterSorting(<a class="code" href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a84f3aab039e6e431cb0a72f65fa1a8ca">fID</a>, wireNo), <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#acb0d27c2e89f51ddc7de6a55ef21b629">shouldFlipWire</a>(wire));</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      ++wireNo;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    } <span class="comment">// for wires</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a97593665eaf5b33ccf183e141bb4ac1c">UpdateDecompWireOrigin</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a943d466031dd4f0070a01d01f0c42806">UpdateWireDir</a>();</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13dae2b9cd9df33c5ec40bc4287f006d">UpdateWirePlaneCenter</a>();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#af8c087ca3af45b1d12b7071905f592f1">UpdateOrientation</a>();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a7cd7dfa0e674fe637c9ff1e3dbb4dbc2">UpdateWirePitch</a>();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adb59fc87061d466d1e6c5bad10d99b60">UpdateActiveArea</a>();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae18edcd350eaeebc2e81e4b8617c36f3">UpdatePhiZ</a>();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a454783cc528d02b43cd239fd102126d3">UpdateView</a>();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  } <span class="comment">// PlaneGeo::UpdateAfterSorting()</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a06001188a786e194be6cd97bc5efc8a3">  763</a></span>&#160;  std::string <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a06001188a786e194be6cd97bc5efc8a3">PlaneGeo::ViewName</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a> view) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">switch</span> (view) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;U&quot;</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;V&quot;</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Z&quot;</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a85071fd2271c89f98fa3d4fb2086f9eb">geo::kY</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Y&quot;</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a207f188eac7c200d49bbf9abdb547015">geo::kX</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;X&quot;</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a62e6ba50af3526eba733c9dec8746bea">geo::k3D</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;3D&quot;</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae329b0f520125896d02940bec370fca7">geo::kUnknown</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;?&quot;</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;UNSUPPORTED (&quot;</span> + <a class="code" href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">std::to_string</a>((<span class="keywordtype">int</span>) view) + <span class="stringliteral">&quot;)&gt;&quot;</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    } <span class="comment">// switch</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  } <span class="comment">// PlaneGeo::ViewName()</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a59081c22e8e7df633b43a3b7f24e51c1">  778</a></span>&#160;  std::string <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a59081c22e8e7df633b43a3b7f24e51c1">PlaneGeo::OrientationName</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a64418a3b0fa44f9ce32e0e269cc96524">geo::Orient_t</a> orientation) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">switch</span> (orientation) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7eaf7e5e120c91f8fae9de103aefe12b0ca">geo::kHorizontal</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;horizontal&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7ea3278689303684830961f26ab4ae9d7b5">geo::kVertical</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;vertical&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">default</span>:               <span class="keywordflow">return</span> <span class="stringliteral">&quot;unexpected&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    } <span class="comment">// switch</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  } <span class="comment">// PlaneGeo::OrientationName()</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adef3913de58c9fbde68efc48d0ce4826">  788</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adef3913de58c9fbde68efc48d0ce4826">PlaneGeo::DetectGeometryDirections</a>() {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">// We need to identify which are the &quot;long&quot; directions of the plane.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// We assume it is a box, and the shortest side is excluded.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// The first direction (&quot;width&quot;) is given by preference to z.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// If z is the direction of the normal to the plane... oh well.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// Let&#39;s say privilege to the one which comes from local z, then y.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// That means: undefined.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// Requirements:</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">//  - ROOT geometry information (shapes and transformations)</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">//  - the shape must be a box (an error is PRINTED if not)</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">//  - center of the wire plane (not just the center of the plane box)</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// how do they look like in the world?</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    TGeoBBox <span class="keyword">const</span>* pShape = <span class="keyword">dynamic_cast&lt;</span>TGeoBBox <a class="code" href="../../d7/d8e/namespaceSortModuleTimes.html#a805854df4323f914a9a09f4e266b4794">const</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;GetShape());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span> (!pShape) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      mf::LogError(<span class="stringliteral">&quot;BoxInfo&quot;</span>)</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Volume &quot;</span> &lt;&lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;IsA()-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot;[&#39;&quot;</span> &lt;&lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">fVolume</a>-&gt;GetName()</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;&#39;] has a shape which is a &quot;</span> &lt;&lt; pShape-&gt;IsA()-&gt;GetName()</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, not a TGeoBBox! Dimensions won&#39;t be available.&quot;</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="comment">// set it invalid</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a87cd02a74143bc76c382dfcd0b64c160">SetOrigin</a>(<a class="code" href="../../d6/d23/namespacegeo.html#a6155d04d62c8bb11135137324ab26b5c">geo::origin</a>());</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a6d9f6fa403c7956ea82862b009acb8b3">SetMainDir</a>({ 0., 0., 0. });</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#ab71afe8f46d42bb547f341f281bd8683">SetSecondaryDir</a>({ 0., 0., 0. });</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a> = { 0.0, 0.0 };</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    std::array&lt;geo::Vector_t, 3U&gt; sides;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordtype">size_t</span> iSmallest = 3;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordtype">size_t</span> iSide = 0;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      TVector3 <a class="code" href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dir</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      sides[iSide] = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1a7e1830a03a7b806fb486a06dee9f86">toWorldCoords</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1f4d76e196e8ea8253c63f17a517a6bf">LocalVector_t</a>{ pShape-&gt;GetDX(), 0.0, 0.0 });</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      iSmallest = iSide;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      ++iSide;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      sides[iSide] = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1a7e1830a03a7b806fb486a06dee9f86">toWorldCoords</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1f4d76e196e8ea8253c63f17a517a6bf">LocalVector_t</a>{ 0.0, pShape-&gt;GetDY(), 0.0 });</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">if</span> (sides[iSide].Mag2() &lt; sides[iSmallest].Mag2()) iSmallest = iSide;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      ++iSide;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      sides[iSide] = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1a7e1830a03a7b806fb486a06dee9f86">toWorldCoords</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1f4d76e196e8ea8253c63f17a517a6bf">LocalVector_t</a>{ 0.0, 0.0, pShape-&gt;GetDZ() });</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">if</span> (sides[iSide].Mag2() &lt; sides[iSmallest].Mag2()) iSmallest = iSide;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      ++iSide;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="comment">// which are the largest ones?</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordtype">size_t</span> kept[2];</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordtype">size_t</span> iKept = 0;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 3; ++i) <span class="keywordflow">if</span> (i != iSmallest) kept[iKept++] = i;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// which is which?</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">// Pick width as the most z-like.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordtype">size_t</span> <span class="keyword">const</span> iiWidth =</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(sides[kept[0]].Unit().Z()) &gt; <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(sides[kept[1]].Unit().Z())</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      ? 0: 1;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordtype">size_t</span> <span class="keyword">const</span> iWidth = kept[iiWidth];</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordtype">size_t</span> <span class="keyword">const</span> iDepth = kept[1 - iiWidth]; <span class="comment">// the other</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a6d9f6fa403c7956ea82862b009acb8b3">SetMainDir</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(sides[iWidth].Unit(), 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4));</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#ab71afe8f46d42bb547f341f281bd8683">SetSecondaryDir</a></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      (<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(sides[iDepth].Unit(), 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4));</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#aa1f2873191f4bd5e7c0a2d23705678a4">halfWidth</a> = sides[iWidth].R();</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">fFrameSize</a>.<a class="code" href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a7dfdd77e00b46648b6e836f4b292e939">halfDepth</a> = sides[iDepth].R();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  } <span class="comment">// PlaneGeo::DetectGeometryDirections()</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6cc36d83dc47205592760a15d827a40f">  871</a></span>&#160;  <a class="code" href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6cc36d83dc47205592760a15d827a40f">PlaneGeo::GetNormalAxis</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NWires = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (NWires &lt; 2) <span class="keywordflow">return</span> {}; <span class="comment">// why are we even here?</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// 1) get the direction of the middle wire</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> WireDir = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(NWires / 2).<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a3e7aa14d29e74b735f79b176ffd6a1f8">Direction</a>&lt;<a class="code" href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a>&gt;();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">// 2) get the direction between the middle wire and the next one</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> ToNextWire = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(NWires / 2 + 1).<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a967f3f96296bf6953f8405ac4e5e7427">GetCenter</a>&lt;<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a>&gt;()</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      - <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(NWires / 2).<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a967f3f96296bf6953f8405ac4e5e7427">GetCenter</a>&lt;<a class="code" href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a>&gt;();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment">// 3) get the direction perpendicular to the plane</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="comment">// 4) round it</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// 5) return its norm</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(WireDir.Cross(ToNextWire).Unit(), 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  } <span class="comment">// PlaneGeo::GetNormalAxis()</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#af8c087ca3af45b1d12b7071905f592f1">  891</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#af8c087ca3af45b1d12b7071905f592f1">PlaneGeo::UpdateOrientation</a>() {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// this algorithm needs to know about the axis;</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="comment">// the normal is expected to be already updated.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="comment">// sanity check</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>.size() &lt; 2) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="comment">// this likely means construction is not complete yet</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;NoWireInPlane&quot;</span>)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;PlaneGeo::UpdateOrientation(): only &quot;</span> &lt;&lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>.size()</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; wires!\n&quot;</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    } <span class="comment">// if</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keyword">auto</span> normal = GetNormalDirection&lt;geo::Vector_t&gt;();</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(normal.X()) - 1.) &lt; 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-3)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a506485ae99027d516487bab91cf32bbb">fOrientation</a> = <a class="code" href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7ea3278689303684830961f26ab4ae9d7b5">kVertical</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(normal.Y()) - 1.) &lt; 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-3)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a506485ae99027d516487bab91cf32bbb">fOrientation</a> = <a class="code" href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7eaf7e5e120c91f8fae9de103aefe12b0ca">kHorizontal</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="comment">// at this point, the only problem is the lack of a label for this</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="comment">// orientation; probably introducing a geo::kOtherOrientation would</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="comment">// suffice</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keywordflow">throw</span> cet::exception(<span class="stringliteral">&quot;Geometry&quot;</span>)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;Plane with unsupported orientation (normal: &quot;</span> &lt;&lt; normal &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  } <span class="comment">// PlaneGeo::UpdateOrientation()</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a7cd7dfa0e674fe637c9ff1e3dbb4dbc2">  923</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a7cd7dfa0e674fe637c9ff1e3dbb4dbc2">PlaneGeo::UpdateWirePitch</a>() {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment">// pick long wires around the center of the detector,</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="comment">// so that their coordinates are defined with better precision</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    assert(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>() &gt; 1);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> iWire = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>() / 2;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a> = <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a38b8593bbb47f94a5c51a1ffe8e6ceb7">geo::WireGeo::WirePitch</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(iWire - 1), <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(iWire));</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  } <span class="comment">// PlaneGeo::UpdateWirePitch()</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae18edcd350eaeebc2e81e4b8617c36f3">  935</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae18edcd350eaeebc2e81e4b8617c36f3">PlaneGeo::UpdatePhiZ</a>() {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    TVector3 <span class="keyword">const</span>&amp; wire_coord_dir = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa136661c166fee6b9f9888423ac2824d">GetIncreasingWireDirection</a>();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">    TVector3 const&amp; normal = GetNormalDirection();</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">    TVector3 z(0., 0., 1.);</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">    // being defined in absolute terms as angle respect to z axis,</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">    // we take the z component as cosine, and all the rest as sine</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">    fCosPhiZ = wire_coord_dir.Dot(z);</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">    fSinPhiZ = wire_coord_dir.Cross(z).Dot(normal);</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6eb0d414654d615025ae8b865792f6e3">fCosPhiZ</a> = wire_coord_dir.Z();</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a47ed15a0268542535de43b2f97209dd5">fSinPhiZ</a> = wire_coord_dir.Y();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  } <span class="comment">// PlaneGeo::UpdatePhiZ()</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a454783cc528d02b43cd239fd102126d3">  950</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a454783cc528d02b43cd239fd102126d3">PlaneGeo::UpdateView</a>()</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">     * This algorithm assigns views according to the angle the wire axis cuts</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">     * with y axis (&quot;thetaY&quot;), but from the point of view of the center of the</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">     * TPC.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">     * A special case is when the drift axis is on y axis.</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">     * In the normal case, the discrimination happens on the the arctangent of</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">     * the point { (y,w), (y x n,w) }, where w is the wire direction, y is the</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">     * coordinate axis and n the normal to the wire plane. This definition gives</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">     * the same value regardless of the direction of w on its axis.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">     * If thetaY is 0, wires are parallel to the y axis:</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">     * the view is assigned as kX or kZ depending on whether the plane normal is</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">     * closer to the z axis or the x axis, respectively (the normal describes</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">     * a direction _not_ measured by the wires).</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">     * If thetaY is a right angle, the wires are orthogonal to y axis and view</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">     * kY view is assigned.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">     * If thetaY is smaller than 0, the view is called &quot;U&quot;.</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">     * If thetaY is larger than 0, the view is called &quot;V&quot;.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">     * The special case where the drift axis is on y axis is treated separately.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">     * In that case, the role of y axis is replaced by the z axis and the</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">     * discriminating figure is equivalent to the usual ThetaZ().</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">     * If thetaZ is 0, the wires are measuring x and kX view is chosen.</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">     * If thetaZ is a right angle, the wires are measuring z and kZ view is</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">     * chosen.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">     * If thetaZ is smaller than 0, the view is called &quot;U&quot;.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">     * If thetaZ is larger than 0, the view is called &quot;V&quot;.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; normalDir = GetNormalDirection&lt;geo::Vector_t&gt;();</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; wireDir = GetWireDirection&lt;geo::Vector_t&gt;();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// normal direction has been rounded, so exact comparison can work</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(normalDir.Y()) != 1.0) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="comment">// normal case: drift direction is not along y (vertical)</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="comment">// yw is pretty much GetWireDirection().Y()...</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="comment">// thetaY is related to atan2(ynw, yw)</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordtype">double</span> <span class="keyword">const</span> yw = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(wireDir, <a class="code" href="../../d6/d23/namespacegeo.html#a597b6b76a97c09a343702694a7f522ae">geo::Yaxis</a>());</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordtype">double</span> <span class="keyword">const</span> ynw = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#aa6cf9a86a7588889945caf43aa64009c">geo::vect::mixedProduct</a></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        (<a class="code" href="../../d6/d23/namespacegeo.html#a597b6b76a97c09a343702694a7f522ae">geo::Yaxis</a>(), normalDir, wireDir);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(yw) &lt; 1.0<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4) { <span class="comment">// wires orthogonal to y axis</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordtype">double</span> <span class="keyword">const</span> closeToX</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;          = <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(normalDir, <a class="code" href="../../d6/d23/namespacegeo.html#a62b751f7b8cee6917a9f3f83566adc0a">geo::Xaxis</a>()));</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordtype">double</span> <span class="keyword">const</span> closeToZ</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;          = <a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(normalDir, <a class="code" href="../../d6/d23/namespacegeo.html#ac4f051a787837f636e1e370e3d041a03">geo::Zaxis</a>()));</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>((closeToZ &gt; closeToX)? <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a207f188eac7c200d49bbf9abdb547015">geo::kX</a>: <a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a85071fd2271c89f98fa3d4fb2086f9eb">geo::kY</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(ynw) &lt; 1.0<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4) { <span class="comment">// wires parallel to y axis</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ynw * yw) &lt; 0) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>); <span class="comment">// different sign =&gt; thetaY &gt; 0</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ynw * yw) &gt; 0) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>); <span class="comment">// same sign =&gt; thetaY &lt; 0</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">else</span> assert(<span class="keyword">false</span>); <span class="comment">// logic error?!</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// if drift is vertical</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="comment">// special case: drift direction is along y (vertical)</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="comment">// zw is pretty much GetWireDirection().Z()...</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordtype">double</span> <span class="keyword">const</span> zw = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a>(wireDir, <a class="code" href="../../d6/d23/namespacegeo.html#ac4f051a787837f636e1e370e3d041a03">geo::Zaxis</a>());</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="comment">// while GetNormalDirection() axis is on y, its direction is not fixed:</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keywordtype">double</span> <span class="keyword">const</span> znw = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#aa6cf9a86a7588889945caf43aa64009c">geo::vect::mixedProduct</a></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        (<a class="code" href="../../d6/d23/namespacegeo.html#ac4f051a787837f636e1e370e3d041a03">geo::Zaxis</a>(), normalDir, wireDir);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="comment">// thetaZ is std::atan(znw/zw)</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(zw) &lt; 1.0<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4) { <span class="comment">// orthogonal to z, orthogonal to y...</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="comment">// this is equivalent to thetaZ = +/- pi/2</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">std::abs</a>(znw) &lt; 1.0<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4) { <span class="comment">// parallel to z, orthogonal to y...</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="comment">// this is equivalent to thetaZ = 0</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a207f188eac7c200d49bbf9abdb547015">geo::kX</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((znw * zw) &lt; 0) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a>); <span class="comment">// different sign =&gt; thetaZ &gt; 0</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((znw * zw) &gt; 0) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">SetView</a>(<a class="code" href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a>); <span class="comment">// same sign =&gt; thetaZ &lt; 0</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">else</span> assert(<span class="keyword">false</span>); <span class="comment">// logic error?!</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    } <span class="comment">// if drift direction... else</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  } <span class="comment">// UpdateView()</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a58e3ccddfead71290d9b11e6164e1813"> 1046</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a58e3ccddfead71290d9b11e6164e1813">PlaneGeo::UpdatePlaneNormal</a>(<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html">geo::BoxBoundedGeo</a> <span class="keyword">const</span>&amp; TPCbox) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">// direction normal to the wire plane, points toward the center of TPC</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// start from the axis</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">fNormal</a> = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6cc36d83dc47205592760a15d827a40f">GetNormalAxis</a>();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">// now evaluate where we are pointing</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> towardCenter</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      = geo::vect::convertTo&lt;TVector3&gt;(TPCbox.<a class="code" href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#a62a94f7c3f6b039f05ac6487f0acfe4e">Center</a>()) - <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#af683afdbe506af5f6ecf08cd6a859df9">GetBoxCenter</a>();</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// if they are pointing in opposite directions, flip the normal</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">fNormal</a>.Dot(towardCenter) &lt; 0) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">fNormal</a> = -<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">fNormal</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a44ef340fefe04a288ecfb28ac910c451">geo::vect::round01</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">fNormal</a>, 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-3);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  } <span class="comment">// PlaneGeo::UpdatePlaneNormal()</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ac80ef1a183aac39348187a5a3ee0cda0"> 1067</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ac80ef1a183aac39348187a5a3ee0cda0">PlaneGeo::UpdateWidthDepthDir</a>() {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// fix the positiveness of the width/depth/normal frame</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// The basis is already set and orthonormal, with only the width</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// and depth directions arbitrary.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="comment">// We choose the direction of the secondary axis (&quot;depth&quot;)</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// so that the frame normal is oriented in the general direction of the</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">// plane normal (the latter is computed independently).</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a07e3bb39c18911d0f71e45f1c0c0fe0f">WidthDir</a>().Cross(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6751f12e587b8d5c75edb63d751d10d6">DepthDir</a>()).Dot(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9747db83dd7c5dc6fe68da661b04ffc8">GetNormalDirection</a>()) &lt; 0.0) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#ab71afe8f46d42bb547f341f281bd8683">SetSecondaryDir</a></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        (<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(-<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a77f2e348de5e046fd3b7b3ff3fef6526">SecondaryDir</a>(), 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4));</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  } <span class="comment">// PlaneGeo::UpdateWidthDepthDir()</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a380fe77fd096cdfaf786366a0fc3eedc"> 1087</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a380fe77fd096cdfaf786366a0fc3eedc">PlaneGeo::UpdateIncreasingWireDir</a>() {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// Direction measured by the wires, pointing toward increasing wire number;</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// requires:</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// - the normal to the plane to be correct</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// - wires to be sorted</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// 1) get the direction of the middle wire</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keyword">auto</span> refWireNo = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>() / 2;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (refWireNo == <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">Nwires</a>() - 1) --refWireNo;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; refWire = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(refWireNo);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; WireDir = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a085a053450c3f501b4ad682a2a511cab">geo::vect::toVector</a>(refWire.Direction()); <span class="comment">// we only rely on the axis</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// 2) get the axis perpendicular to it on the wire plane</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="comment">//    (arbitrary direction)</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keyword">auto</span> wireCoordDir = GetNormalDirection&lt;geo::Vector_t&gt;().Cross(WireDir).Unit();</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="comment">// 3) where is the next wire?</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keyword">auto</span> toNextWire</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      = <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a085a053450c3f501b4ad682a2a511cab">geo::vect::toVector</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">Wire</a>(refWireNo + 1).<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a18b8035717a1111dc0bb899910c0aac0">GetCenter</a>() - refWire.GetCenter());</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">// 4) if wireCoordDir is pointing away from the next wire, flip it</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span> (wireCoordDir.Dot(toNextWire) &lt; 0) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      wireCoordDir = -wireCoordDir;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">fDecompWire</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#ab71afe8f46d42bb547f341f281bd8683">SetSecondaryDir</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(wireCoordDir, 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4));</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  } <span class="comment">// PlaneGeo::UpdateIncreasingWireDir()</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a943d466031dd4f0070a01d01f0c42806"> 1121</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a943d466031dd4f0070a01d01f0c42806">PlaneGeo::UpdateWireDir</a>() {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">fDecompWire</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a6d9f6fa403c7956ea82862b009acb8b3">SetMainDir</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a085a053450c3f501b4ad682a2a511cab">geo::vect::toVector</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().Direction()), 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4));</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// check that the resulting normal matches the plane one</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    assert(<a class="code" href="../../d9/d3d/namespacelar_1_1util.html#a9c7a66b3fecfd5e9fc64e30f3c54effb">lar::util::makeVector3DComparison</a>(1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-5)</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      .<a class="code" href="../../d2/d4a/GeoObjectSorterSBND_8cxx.html#a1591fe891371002ed473166e626dc2a3">equal</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">fDecompWire</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#ad210771d356a466d0f765114eae7e9b4">NormalDir</a>(), GetNormalDirection&lt;geo::Vector_t&gt;()));</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  } <span class="comment">// PlaneGeo::UpdateWireDir()</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a72bb4952786b206c9db6193cc629617d"> 1135</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a72bb4952786b206c9db6193cc629617d">PlaneGeo::UpdateWirePitchSlow</a>() {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="comment">// Compare one wire (the first one, for convenience) with all other wires;</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// the wire pitch is the smallest distance we find.</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">// This algorithm assumes wire pitch is constant, but it does not assume</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">// wire ordering (which UpdateWirePitch() does).</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keyword">auto</span> firstWire = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>.cbegin(), wire = firstWire, wend = <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">fWire</a>.cend();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a> = <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a38b8593bbb47f94a5c51a1ffe8e6ceb7">geo::WireGeo::WirePitch</a>(*firstWire, *(++wire));</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">while</span> (++wire != wend) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <span class="keyword">auto</span> wirePitch = <a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a38b8593bbb47f94a5c51a1ffe8e6ceb7">geo::WireGeo::WirePitch</a>(*firstWire, *wire);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <span class="keywordflow">if</span> (wirePitch &lt; 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-4) <span class="keywordflow">continue</span>; <span class="comment">// it&#39;s 0!</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (wirePitch &lt; <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a>) <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">fWirePitch</a> = wirePitch;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    } <span class="comment">// while</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  } <span class="comment">// PlaneGeo::UpdateWirePitchSlow()</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a97593665eaf5b33ccf183e141bb4ac1c"> 1157</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a97593665eaf5b33ccf183e141bb4ac1c">PlaneGeo::UpdateDecompWireOrigin</a>() {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// update the origin of the reference frame (the middle of the first wire)</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">fDecompWire</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a87cd02a74143bc76c382dfcd0b64c160">SetOrigin</a>(<a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#aabcc53a6fd142c7cb43c9aca166a7881">geo::vect::toPoint</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">FirstWire</a>().<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a18b8035717a1111dc0bb899910c0aac0">GetCenter</a>()));</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  } <span class="comment">// PlaneGeo::UpdateDecompWireOrigin()</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adb59fc87061d466d1e6c5bad10d99b60"> 1167</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#adb59fc87061d466d1e6c5bad10d99b60">PlaneGeo::UpdateActiveArea</a>() {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// The active area is defined in the width/depth space which include</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// approximatively all wires.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">// See `ActiveAreaCalculator` for details of the algorithm.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// we scratch 1 um from each side to avoid rounding errors later</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a654d9d93edfa42a9a8974321876046ab">fActiveArea</a> = <a class="code" href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html">details::ActiveAreaCalculator</a>(*<span class="keyword">this</span>, 0.0001);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  } <span class="comment">// PlaneGeo::UpdateActiveArea()</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13dae2b9cd9df33c5ec40bc4287f006d"> 1183</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13dae2b9cd9df33c5ec40bc4287f006d">PlaneGeo::UpdateWirePlaneCenter</a>() {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// The center of the wire plane is defined as the center of the plane box,</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// translated to the plane the wires lie on.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// This assumes that the thickness direction of the box is aligned with</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// the drift direction, so that the translated point is still in the middle</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// of width and depth dimensions.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">// It is possible to remove that assumption by translating the center of the</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="comment">// box along the thickness direction enough to bring it to the wire plane.</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// The math is just a bit less straightforward, so we don&#39;t bother yet.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// Requirements:</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">//  * the wire decomposition frame must be set up (at least its origin and</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">//    normal direction)</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">fCenter</a> = GetBoxCenter&lt;geo::Point_t&gt;();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa54c0f7dfa8911933f0757a9573c7c77">DriftPoint</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">fCenter</a>, <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad9c2a53089ff865b269146df5290f974">DistanceFromPlane</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">fCenter</a>));</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="../../d0/d8e/namespacegeo_1_1vect.html#a65513fdbc4bc7ad99efeb9f4b1b928dc">geo::vect::round0</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">fCenter</a>, 1<a class="code" href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a>-7); <span class="comment">// round dimensions less than 1 nm to 0</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">fDecompFrame</a>.<a class="code" href="../../dc/d13/classgeo_1_1Decomposer.html#a87cd02a74143bc76c382dfcd0b64c160">SetOrigin</a>(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">fCenter</a>); <span class="comment">// equivalent to GetCenter() now</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  } <span class="comment">// PlaneGeo::UpdateWirePlaneCenter()</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"><a class="line" href="../../d4/d67/classgeo_1_1PlaneGeo.html#acb0d27c2e89f51ddc7de6a55ef21b629"> 1212</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#acb0d27c2e89f51ddc7de6a55ef21b629">PlaneGeo::shouldFlipWire</a>(<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html">geo::WireGeo</a> <span class="keyword">const</span>&amp; wire)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="comment">// The correct orientation is so that:</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// (direction) x (wire coordinate direction) . (plane normal)</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// is positive; it it&#39;s negative, then we should flip the wire.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="comment">// Note that the increasing wire direction comes from the wire frame, while</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// the normal direction is computed independently by geometry.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// The resulting normal in the wire frame is expected to be the same as the</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// plane normal from GetNormalDirection(); if this is not the case, flipping</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// the wire direction should restore it.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordflow">return</span> wire.<a class="code" href="../../de/dce/classgeo_1_1WireGeo.html#a3e7aa14d29e74b735f79b176ffd6a1f8">Direction</a>()</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      .Cross(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa136661c166fee6b9f9888423ac2824d">GetIncreasingWireDirection</a>())</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      .Dot(<a class="code" href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9747db83dd7c5dc6fe68da661b04ffc8">GetNormalDirection</a>())</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      &lt; +0.5; <span class="comment">// should be in fact exactly +1</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  } <span class="comment">// PlaneGeo::shouldFlipWire()</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">//......................................................................</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;} <span class="comment">// namespace geo</span><span class="comment"></span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////</span></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a59081c22e8e7df633b43a3b7f24e51c1"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a59081c22e8e7df633b43a3b7f24e51c1">geo::PlaneGeo::OrientationName</a></div><div class="ttdeci">static std::string OrientationName(geo::Orient_t orientation)</div><div class="ttdoc">Returns the name of the specified orientation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00778">PlaneGeo.cxx:778</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a88b32f36c89f842496633672c848c8e9"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a88b32f36c89f842496633672c848c8e9">geo::PlaneGeo::WirePtr</a></div><div class="ttdeci">geo::WirePtr WirePtr(unsigned int iwire) const </div><div class="ttdoc">Returns the wire number iwire from this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00324">PlaneGeo.h:324</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_a44ef340fefe04a288ecfb28ac910c451"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#a44ef340fefe04a288ecfb28ac910c451">geo::vect::round01</a></div><div class="ttdeci">void round01(Vector &amp;v, Scalar tol)</div><div class="ttdoc">Returns a vector with all components rounded if close to 0, -1 or +1. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01177">geo_vectors_utils.h:1177</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a1fe2dceeec7c5c0b14c6c9593482e438"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a1fe2dceeec7c5c0b14c6c9593482e438">geo::WireGeo::GetStart</a></div><div class="ttdeci">void GetStart(double *xyz) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00157">WireGeo.h:157</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html">geo::WireGeo</a></div><div class="ttdoc">Geometry description of a TPC wireThe wire is a single straight segment on a wire plane...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00065">WireGeo.h:65</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_abf71e6563b2ba88bfde429d6fc241a70"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#abf71e6563b2ba88bfde429d6fc241a70">geo::details::ActiveAreaCalculator::initializeWireEnds</a></div><div class="ttdeci">void initializeWireEnds()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00124">PlaneGeo.cxx:124</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneGeo_1_1RectSpecs_html_a2b6f18e87dcf573ddd742fb1e7f4a482"><div class="ttname"><a href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a2b6f18e87dcf573ddd742fb1e7f4a482">geo::PlaneGeo::RectSpecs::HalfWidth</a></div><div class="ttdeci">double HalfWidth() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01472">PlaneGeo.h:1472</a></div></div>
<div class="ttc" id="namespacegeo_html_a22d2a7c73b2795146b92cd54ded9e817"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a22d2a7c73b2795146b92cd54ded9e817">geo::Vector_t</a></div><div class="ttdeci">ROOT::Math::DisplacementVector3D&lt; ROOT::Math::Cartesian3D&lt; double &gt;, ROOT::Math::GlobalCoordinateSystemTag &gt; Vector_t</div><div class="ttdoc">Type for representation of momenta in 3D space. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00164">geo_vectors.h:164</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_af191a3c92f91a862740cd94c7aba344a"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#af191a3c92f91a862740cd94c7aba344a">geo::Decomposer::VectorSecondaryComponent</a></div><div class="ttdeci">auto VectorSecondaryComponent(Vector_t const &amp;v) const </div><div class="ttdoc">Returns the secondary component of a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00531">Decomposer.h:531</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a3a3f25375f82230daf783e9dc4b39814"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3a3f25375f82230daf783e9dc4b39814">geo::PlaneGeo::SetView</a></div><div class="ttdeci">void SetView(geo::View_t view)</div><div class="ttdoc">Set the signal view (for TPCGeo). </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01398">PlaneGeo.h:1398</a></div></div>
<div class="ttc" id="namespacepmtana_html_a9860e62c78db1dd9c7d635a2832b883a"><div class="ttname"><a href="../../da/dc9/namespacepmtana.html#a9860e62c78db1dd9c7d635a2832b883a">pmtana::std</a></div><div class="ttdeci">double std(const std::vector&lt; short &gt; &amp;wf, const double ped_mean, size_t start, size_t nsample)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de4/UtilFunc_8cxx_source.html#l00042">UtilFunc.cxx:42</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ae289aa3250c5622e39bdbea3b222b7af"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae289aa3250c5622e39bdbea3b222b7af">geo::PlaneGeo::VectorWidthDepthProjection</a></div><div class="ttdeci">WidthDepthProjection_t VectorWidthDepthProjection(geo::Vector_t const &amp;v) const </div><div class="ttdoc">Returns the projection of the specified vector on the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01127">PlaneGeo.h:1127</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a67e8100f3904bcd12cfd96e4cf48af9c"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a67e8100f3904bcd12cfd96e4cf48af9c">geo::PlaneGeo::fCenter</a></div><div class="ttdeci">geo::Point_t fCenter</div><div class="ttdoc">Center of the plane, lying on the wire plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01500">PlaneGeo.h:1500</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_a6a834f7c51903b6d2bdfdd664f064992"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#a6a834f7c51903b6d2bdfdd664f064992">geo::vect::dot</a></div><div class="ttdeci">constexpr auto dot(Vector const &amp;a, Vector const &amp;b)</div><div class="ttdoc">Return cross product of two vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01194">geo_vectors_utils.h:1194</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a06001188a786e194be6cd97bc5efc8a3"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a06001188a786e194be6cd97bc5efc8a3">geo::PlaneGeo::ViewName</a></div><div class="ttdeci">static std::string ViewName(geo::View_t view)</div><div class="ttdoc">Returns the name of the specified view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00763">PlaneGeo.cxx:763</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a89cb5420c23ecbfbd54d2917a5b03b18"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a89cb5420c23ecbfbd54d2917a5b03b18">geo::PlaneGeo::PlaneInfo</a></div><div class="ttdeci">std::string PlaneInfo(std::string indent=&quot;&quot;, unsigned int verbosity=1) const </div><div class="ttdoc">Returns a string with plane information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00546">PlaneGeo.cxx:546</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a380fe77fd096cdfaf786366a0fc3eedc"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a380fe77fd096cdfaf786366a0fc3eedc">geo::PlaneGeo::UpdateIncreasingWireDir</a></div><div class="ttdeci">void UpdateIncreasingWireDir()</div><div class="ttdoc">Updates the cached direction to increasing wires. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01087">PlaneGeo.cxx:1087</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a33ea8993c2337450a1e1f5cfa4000837"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a33ea8993c2337450a1e1f5cfa4000837">geo::PlaneGeo::fWirePitch</a></div><div class="ttdeci">double fWirePitch</div><div class="ttdoc">Pitch of wires in this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01483">PlaneGeo.h:1483</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_ab71afe8f46d42bb547f341f281bd8683"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#ab71afe8f46d42bb547f341f281bd8683">geo::Decomposer::SetSecondaryDir</a></div><div class="ttdeci">void SetSecondaryDir(Vector_t const &amp;dir)</div><div class="ttdoc">Change the secondary direction of the projection base. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00447">Decomposer.h:447</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a3dbc4fe81af2c28d5ba31ab3d13b7d1e"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3dbc4fe81af2c28d5ba31ab3d13b7d1e">geo::PlaneGeo::WireCollection_t</a></div><div class="ttdeci">std::vector&lt; geo::WireGeo &gt; WireCollection_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00089">PlaneGeo.h:89</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a7cd7dfa0e674fe637c9ff1e3dbb4dbc2"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a7cd7dfa0e674fe637c9ff1e3dbb4dbc2">geo::PlaneGeo::UpdateWirePitch</a></div><div class="ttdeci">void UpdateWirePitch()</div><div class="ttdoc">Updates the stored wire pitch. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00923">PlaneGeo.cxx:923</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ac80ef1a183aac39348187a5a3ee0cda0"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ac80ef1a183aac39348187a5a3ee0cda0">geo::PlaneGeo::UpdateWidthDepthDir</a></div><div class="ttdeci">void UpdateWidthDepthDir()</div><div class="ttdoc">Updates the cached depth and width direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01067">PlaneGeo.cxx:1067</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_acb2d2ead12471a496e97731c241900ba"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acb2d2ead12471a496e97731c241900ba">geo::details::ActiveAreaCalculator::dMargin</a></div><div class="ttdeci">double const dMargin</div><div class="ttdoc">Margin subtracted from each side of depth. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00118">PlaneGeo.cxx:118</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_ad9bd46c0482ac759fd226ed50a4c68be"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad9bd46c0482ac759fd226ed50a4c68be">geo::details::ActiveAreaCalculator::none_or_both</a></div><div class="ttdeci">static bool none_or_both(bool a, bool b)</div><div class="ttdoc">Returns true if a and b are both true or both false (exclusive nor). </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00418">PlaneGeo.cxx:418</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a9030047e3a65bdac6408581aeae649c4"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9030047e3a65bdac6408581aeae649c4">geo::PlaneGeo::Rect</a></div><div class="ttdeci">lar::util::simple_geo::Rectangle&lt; double &gt; Rect</div><div class="ttdoc">Type for description of rectangles. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00169">PlaneGeo.h:169</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_ad210771d356a466d0f765114eae7e9b4"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#ad210771d356a466d0f765114eae7e9b4">geo::Decomposer::NormalDir</a></div><div class="ttdeci">Vector_t const &amp; NormalDir() const </div><div class="ttdoc">Returns the plane normal axis direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00469">Decomposer.h:469</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a52fd8fb79c65318b52d60acb58c9a0d3"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a52fd8fb79c65318b52d60acb58c9a0d3">geo::PlaneGeo::Wire</a></div><div class="ttdeci">WireGeo const &amp; Wire(unsigned int iwire) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00506">PlaneGeo.cxx:506</a></div></div>
<div class="ttc" id="namespacegeo_html_a6baec40eaf3ff161f7eb1a5f0779794f"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a6baec40eaf3ff161f7eb1a5f0779794f">geo::View_t</a></div><div class="ttdeci">enum geo::_plane_proj View_t</div><div class="ttdoc">Enumerate the possible plane projections. </div></div>
<div class="ttc" id="classgeo_1_1GeoObjectSorter_html_a26400886523abd10a1c214572682f4ab"><div class="ttname"><a href="../../d5/df5/classgeo_1_1GeoObjectSorter.html#a26400886523abd10a1c214572682f4ab">geo::GeoObjectSorter::SortWires</a></div><div class="ttdeci">virtual void SortWires(std::vector&lt; geo::WireGeo &gt; &amp;wgeo) const =0</div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486aea23122caaaed75b787c745a188871f6">geo::kV</a></div><div class="ttdoc">Planes which measure V. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00130">geo_types.h:130</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_aa6cf9a86a7588889945caf43aa64009c"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#aa6cf9a86a7588889945caf43aa64009c">geo::vect::mixedProduct</a></div><div class="ttdeci">auto mixedProduct(Vector const &amp;a, Vector const &amp;b, Vector const &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01207">geo_vectors_utils.h:1207</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae329b0f520125896d02940bec370fca7"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae329b0f520125896d02940bec370fca7">geo::kUnknown</a></div><div class="ttdoc">Unknown view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00136">geo_types.h:136</a></div></div>
<div class="ttc" id="SurfXYZTest_8cc_html_a352dc2abeda5f913ed16b48bbdcde948"><div class="ttname"><a href="../../da/da0/SurfXYZTest_8cc.html#a352dc2abeda5f913ed16b48bbdcde948">tol</a></div><div class="ttdeci">auto const tol</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da0/SurfXYZTest_8cc_source.html#l00016">SurfXYZTest.cc:16</a></div></div>
<div class="ttc" id="namespacegeo_html_a64418a3b0fa44f9ce32e0e269cc96524"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a64418a3b0fa44f9ce32e0e269cc96524">geo::Orient_t</a></div><div class="ttdeci">enum geo::_plane_orient Orient_t</div></div>
<div class="ttc" id="structlar_1_1util_1_1RealComparisons_html"><div class="ttname"><a href="../../d9/de2/structlar_1_1util_1_1RealComparisons.html">lar::util::RealComparisons</a></div><div class="ttdoc">Provides simple real number checks. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/RealComparisons_8h_source.html#l00066">RealComparisons.h:66</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_af8c087ca3af45b1d12b7071905f592f1"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#af8c087ca3af45b1d12b7071905f592f1">geo::PlaneGeo::UpdateOrientation</a></div><div class="ttdeci">void UpdateOrientation()</div><div class="ttdoc">Updates plane orientation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00891">PlaneGeo.cxx:891</a></div></div>
<div class="ttc" id="selectors_8fcl_html_a24c8335057af14a9b508d5ac18999ce5"><div class="ttname"><a href="../../d9/dd2/selectors_8fcl.html#a24c8335057af14a9b508d5ac18999ce5">p</a></div><div class="ttdeci">pdgs p</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd2/selectors_8fcl_source.html#l00022">selectors.fcl:22</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a84f3aab039e6e431cb0a72f65fa1a8ca"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a84f3aab039e6e431cb0a72f65fa1a8ca">geo::PlaneGeo::fID</a></div><div class="ttdeci">geo::PlaneID fID</div><div class="ttdoc">ID of this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01502">PlaneGeo.h:1502</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a207f188eac7c200d49bbf9abdb547015"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a207f188eac7c200d49bbf9abdb547015">geo::kX</a></div><div class="ttdoc">Planes which measure X direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00134">geo_types.h:134</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneID_html"><div class="ttname"><a href="../../d4/d41/structgeo_1_1PlaneID.html">geo::PlaneID</a></div><div class="ttdoc">The data type to uniquely identify a Plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00472">geo_types.h:472</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Range_html_aee0348c987b66d2284bf795cc838948b"><div class="ttname"><a href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#aee0348c987b66d2284bf795cc838948b">lar::util::simple_geo::Range::extendToInclude</a></div><div class="ttdeci">void extendToInclude(Data_t)</div><div class="ttdoc">Extends the range to include the specified point. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00456">SimpleGeo.h:456</a></div></div>
<div class="ttc" id="classlar_1_1util_1_1simple__geo_1_1Volume_html"><div class="ttname"><a href="../../db/da7/classlar_1_1util_1_1simple__geo_1_1Volume.html">lar::util::simple_geo::Volume</a></div><div class="ttdoc">Volume delimited by two points. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00261">SimpleGeo.h:261</a></div></div>
<div class="ttc" id="namespacegeo_html_a597b6b76a97c09a343702694a7f522ae"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a597b6b76a97c09a343702694a7f522ae">geo::Yaxis</a></div><div class="ttdeci">constexpr Vector Yaxis()</div><div class="ttdoc">Returns a y axis vector of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00219">geo_vectors.h:219</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a4763c0f9df977754c6399835d368c69e"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4763c0f9df977754c6399835d368c69e">geo::details::ActiveAreaCalculator::Vector_t</a></div><div class="ttdeci">geo::PlaneGeo::WidthDepthDisplacement_t Vector_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00104">PlaneGeo.cxx:104</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_aabcc53a6fd142c7cb43c9aca166a7881"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#aabcc53a6fd142c7cb43c9aca166a7881">geo::vect::toPoint</a></div><div class="ttdeci">::geo::Point_t toPoint(Point const &amp;p)</div><div class="ttdoc">Convert the specified point into a geo::Point_t. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01485">geo_vectors_utils.h:1485</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_af683afdbe506af5f6ecf08cd6a859df9"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#af683afdbe506af5f6ecf08cd6a859df9">geo::PlaneGeo::GetBoxCenter</a></div><div class="ttdeci">Point GetBoxCenter() const </div><div class="ttdoc">Returns the centre of the box representing the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00498">PlaneGeo.h:498</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ab19ca3ac8c74c98c30612f56fb4e3ebb"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab19ca3ac8c74c98c30612f56fb4e3ebb">geo::PlaneGeo::isProjectionOnPlane</a></div><div class="ttdeci">bool isProjectionOnPlane(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns if the projection of specified point is within the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00581">PlaneGeo.cxx:581</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_a085a053450c3f501b4ad682a2a511cab"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#a085a053450c3f501b4ad682a2a511cab">geo::vect::toVector</a></div><div class="ttdeci">::geo::Vector_t toVector(Vector const &amp;v)</div><div class="ttdoc">Convert the specified vector into a geo::Vector_t. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01490">geo_vectors_utils.h:1490</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_ab392d423f796f180a0f0b3bd12c0097d"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ab392d423f796f180a0f0b3bd12c0097d">geo::details::ActiveAreaCalculator::kLastWireStart</a></div><div class="ttdeci">static constexpr std::size_t kLastWireStart</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00113">PlaneGeo.cxx:113</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a21dff1895ff04d2a5f41676d412b8626"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a21dff1895ff04d2a5f41676d412b8626">geo::PlaneGeo::PointWidthDepthProjection</a></div><div class="ttdeci">WidthDepthProjection_t PointWidthDepthProjection(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns the projection of the specified point on the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01107">PlaneGeo.h:1107</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a4e021fd3084ecbecdaaef64541228215"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4e021fd3084ecbecdaaef64541228215">geo::details::ActiveAreaCalculator::kFirstWireStart</a></div><div class="ttdeci">static constexpr std::size_t kFirstWireStart</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00111">PlaneGeo.cxx:111</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a29e198ce46b2c8fc4a31422f42f77c64">geo::kZ</a></div><div class="ttdoc">Planes which measure Z direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00132">geo_types.h:132</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a458c213d5df09417c9def8037bb3349c"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a458c213d5df09417c9def8037bb3349c">geo::PlaneGeo::NearestWire</a></div><div class="ttdeci">geo::WireGeo const &amp; NearestWire(geo::Point_t const &amp;pos) const </div><div class="ttdoc">Returns the wire closest to the specified position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00681">PlaneGeo.cxx:681</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html_ac303d2971eb9697f3a65821bb92bb934"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html#ac303d2971eb9697f3a65821bb92bb934">geo::WireID::Wire</a></div><div class="ttdeci">WireID_t Wire</div><div class="ttdoc">Index of the wire within its plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00580">geo_types.h:580</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html">geo::WireID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00560">geo_types.h:560</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_acb0d27c2e89f51ddc7de6a55ef21b629"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#acb0d27c2e89f51ddc7de6a55ef21b629">geo::PlaneGeo::shouldFlipWire</a></div><div class="ttdeci">bool shouldFlipWire(geo::WireGeo const &amp;wire) const </div><div class="ttdoc">Whether the specified wire should have start and end swapped. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01212">PlaneGeo.cxx:1212</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a9747db83dd7c5dc6fe68da661b04ffc8"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9747db83dd7c5dc6fe68da661b04ffc8">geo::PlaneGeo::GetNormalDirection</a></div><div class="ttdeci">Vector GetNormalDirection() const </div><div class="ttdoc">Returns the direction normal to the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00442">PlaneGeo.h:442</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_a65513fdbc4bc7ad99efeb9f4b1b928dc"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#a65513fdbc4bc7ad99efeb9f4b1b928dc">geo::vect::round0</a></div><div class="ttdeci">void round0(Vector &amp;v, Scalar tol)</div><div class="ttdoc">Returns a vector with all components rounded if close to 0. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01165">geo_vectors_utils.h:1165</a></div></div>
<div class="ttc" id="find__global__symbol_8sh_html_ae2fcd9af85e9525dadab1ac2cb45a22d"><div class="ttname"><a href="../../d5/df9/find__global__symbol_8sh.html#ae2fcd9af85e9525dadab1ac2cb45a22d">X</a></div><div class="ttdeci">then echo echo For and will not be changed by echo further linking echo echo B echo The symbol is in the uninitialized data multiple common symbols may appear with the echo same name If the symbol is defined the common echo symbols are treated as undefined references For more echo details on common see the discussion of warn common echo in *Note Linker see the discussion of warn common echo in *Note Linker such as a global int variable echo as opposed to a large global array echo echo I echo The symbol is an indirect reference to another symbol This echo is a GNU extension to the a out object file format which is echo rarely used echo echo N echo The symbol is a debugging symbol echo echo R echo The symbol is in a read only data section echo echo S echo The symbol is in an uninitialized data section for small echo objects echo echo T echo The symbol is in the the normal defined echo symbol is used with no error When a weak undefined symbol echo is linked and the symbol is not the value of the echo weak symbol becomes zero with no error echo echo W echo The symbol is a weak symbol that has not been specifically echo tagged as a weak object symbol When a weak defined symbol echo is linked with a normal defined the normal defined echo symbol is used with no error When a weak undefined symbol echo is linked and the symbol is not the value of the echo weak symbol becomes zero with no error echo echo echo The symbol is a stabs symbol in an a out object file In echo this the next values printed are the stabs other echo the stabs desc and the stab type Stabs symbols are echo used to hold debugging information For more echo see *Note or object file format specific echo echo For Mac OS X</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df9/find__global__symbol_8sh_source.html#l00107">find_global_symbol.sh:107</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneGeo_1_1RectSpecs_html_a7dfdd77e00b46648b6e836f4b292e939"><div class="ttname"><a href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a7dfdd77e00b46648b6e836f4b292e939">geo::PlaneGeo::RectSpecs::halfDepth</a></div><div class="ttdeci">double halfDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01470">PlaneGeo.h:1470</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a38b8593bbb47f94a5c51a1ffe8e6ceb7"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a38b8593bbb47f94a5c51a1ffe8e6ceb7">geo::WireGeo::WirePitch</a></div><div class="ttdeci">static double WirePitch(geo::WireGeo const &amp;w1, geo::WireGeo const &amp;w2)</div><div class="ttdoc">Returns the pitch (distance on y/z plane) between two wires, in cm. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00476">WireGeo.h:476</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a3c23841e02aa5082569a1abd1fee5504"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a3c23841e02aa5082569a1abd1fee5504">geo::details::ActiveAreaCalculator::plane</a></div><div class="ttdeci">PlaneGeo const &amp; plane</div><div class="ttdoc">Plane to work on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00116">PlaneGeo.cxx:116</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a4bdd71b1377e68e2ac607e91c15679ad"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4bdd71b1377e68e2ac607e91c15679ad">geo::PlaneGeo::MoveProjectionToPlane</a></div><div class="ttdeci">WidthDepthProjection_t MoveProjectionToPlane(WidthDepthProjection_t const &amp;proj) const </div><div class="ttdoc">Returns the projection, moved onto the plane if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00593">PlaneGeo.cxx:593</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_aa136661c166fee6b9f9888423ac2824d"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa136661c166fee6b9f9888423ac2824d">geo::PlaneGeo::GetIncreasingWireDirection</a></div><div class="ttdeci">Vector GetIncreasingWireDirection() const </div><div class="ttdoc">Returns the direction of increasing wires. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00457">PlaneGeo.h:457</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a0607dce1b981e52fc158ad5cbfd343d0"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a0607dce1b981e52fc158ad5cbfd343d0">geo::WireGeo::ThetaZ</a></div><div class="ttdeci">double ThetaZ() const </div><div class="ttdoc">Returns angle of wire with respect to z axis in the Y-Z plane in radians. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00250">WireGeo.h:250</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a665d435fa9833ec622daee7531c26680"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a665d435fa9833ec622daee7531c26680">geo::PlaneGeo::BoundingBox</a></div><div class="ttdeci">geo::BoxBoundedGeo BoundingBox() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00469">PlaneGeo.cxx:469</a></div></div>
<div class="ttc" id="RealComparisons_8h_html"><div class="ttname"><a href="../../d5/dbc/RealComparisons_8h.html">RealComparisons.h</a></div><div class="ttdoc">Class for approximate comparisons. </div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a85071fd2271c89f98fa3d4fb2086f9eb"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a85071fd2271c89f98fa3d4fb2086f9eb">geo::kY</a></div><div class="ttdoc">Planes which measure Y direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00133">geo_types.h:133</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_adef3913de58c9fbde68efc48d0ce4826"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#adef3913de58c9fbde68efc48d0ce4826">geo::PlaneGeo::DetectGeometryDirections</a></div><div class="ttdeci">void DetectGeometryDirections()</div><div class="ttdoc">Sets the geometry directions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00788">PlaneGeo.cxx:788</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_aa3fbaa4e4c974737c6d739185a74e03c"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#aa3fbaa4e4c974737c6d739185a74e03c">geo::details::ActiveAreaCalculator::wireEnds</a></div><div class="ttdeci">Projection_t wireEnds[4]</div><div class="ttdoc">Cache: wire end projections. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00122">PlaneGeo.cxx:122</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a6f9d364c5e6bc1180ca4b8656a866c07"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6f9d364c5e6bc1180ca4b8656a866c07">geo::PlaneGeo::InterWireProjectedDistance</a></div><div class="ttdeci">double InterWireProjectedDistance(WireCoordProjection_t const &amp;projDir) const </div><div class="ttdoc">Returns the distance between wires along the specified direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00705">PlaneGeo.cxx:705</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_aa54c0f7dfa8911933f0757a9573c7c77"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa54c0f7dfa8911933f0757a9573c7c77">geo::PlaneGeo::DriftPoint</a></div><div class="ttdeci">void DriftPoint(geo::Point_t &amp;position, double distance) const </div><div class="ttdoc">Shifts the position of an electron drifted by a distance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00643">PlaneGeo.h:643</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a913bb22107486bf6c33eb3a5dabf8dc5"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a913bb22107486bf6c33eb3a5dabf8dc5">geo::PlaneGeo::fNormal</a></div><div class="ttdeci">geo::Vector_t fNormal</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01487">PlaneGeo.h:1487</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a654d9d93edfa42a9a8974321876046ab"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a654d9d93edfa42a9a8974321876046ab">geo::PlaneGeo::fActiveArea</a></div><div class="ttdeci">Rect fActiveArea</div><div class="ttdoc">Area covered by wires in frame base. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01498">PlaneGeo.h:1498</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a54c29d3a7cd846502e47f15694a5caa9"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a54c29d3a7cd846502e47f15694a5caa9">geo::details::ActiveAreaCalculator::recomputeArea</a></div><div class="ttdeci">geo::PlaneGeo::Rect recomputeArea()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00390">PlaneGeo.cxx:390</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486a62e6ba50af3526eba733c9dec8746bea"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486a62e6ba50af3526eba733c9dec8746bea">geo::k3D</a></div><div class="ttdoc">3-dimensional objects, potentially hits, clusters, prongs, etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00135">geo_types.h:135</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a4aee7822c8ac09d443815098f48fe285"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a4aee7822c8ac09d443815098f48fe285">geo::PlaneGeo::ThetaZ</a></div><div class="ttdeci">double ThetaZ() const </div><div class="ttdoc">Angle of the wires from positive z axis; . </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00726">PlaneGeo.cxx:726</a></div></div>
<div class="ttc" id="decode__signalprocess__icarus_8fcl_html_a2a105cb669129f9c63eb7a4c15bf2d9b"><div class="ttname"><a href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a></div><div class="ttdeci">process_name gaushit a</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8f/decode__signalprocess__icarus_8fcl_source.html#l00037">decode_signalprocess_icarus.fcl:37</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a58e3ccddfead71290d9b11e6164e1813"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a58e3ccddfead71290d9b11e6164e1813">geo::PlaneGeo::UpdatePlaneNormal</a></div><div class="ttdeci">void UpdatePlaneNormal(geo::BoxBoundedGeo const &amp;TPCbox)</div><div class="ttdoc">Updates the cached normal to plane versor; needs the TPC box coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01046">PlaneGeo.cxx:1046</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a085d1df0fcf1f79b28312318aa27714b"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a085d1df0fcf1f79b28312318aa27714b">geo::PlaneGeo::fVolume</a></div><div class="ttdeci">TGeoVolume const * fVolume</div><div class="ttdoc">Plane volume description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01479">PlaneGeo.h:1479</a></div></div>
<div class="ttc" id="sparse__vector__test_8cc_html_a39f16bf854ba527dee7eba5bbbd93f3f"><div class="ttname"><a href="../../dd/d59/sparse__vector__test_8cc.html#a39f16bf854ba527dee7eba5bbbd93f3f">abs</a></div><div class="ttdeci">T abs(T value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d59/sparse__vector__test_8cc_source.html#l00030">sparse_vector_test.cc:30</a></div></div>
<div class="ttc" id="namespacegeo_html_aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aca2efd2e6b858cf0a9c12384c3b2f486ae2842cacc3d7d281d01b4316380b8d5b">geo::kU</a></div><div class="ttdoc">Planes which measure U. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00129">geo_types.h:129</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a066c372521b61e61bc86146ea4a9fc66"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a066c372521b61e61bc86146ea4a9fc66">geo::PlaneGeo::WidthDepthProjection_t</a></div><div class="ttdeci">ROOT::Math::DisplacementVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt;, WidthDepthReferenceTag &gt; WidthDepthProjection_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00151">PlaneGeo.h:151</a></div></div>
<div class="ttc" id="namespacegeo_html_aa466678f5f635eee4a8179671f3aae7eaf7e5e120c91f8fae9de103aefe12b0ca"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7eaf7e5e120c91f8fae9de103aefe12b0ca">geo::kHorizontal</a></div><div class="ttdoc">Planes that are in the horizontal plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00140">geo_types.h:140</a></div></div>
<div class="ttc" id="Exceptions_8h_html"><div class="ttname"><a href="../../df/d7c/Exceptions_8h.html">Exceptions.h</a></div><div class="ttdoc">Collection of exceptions for Geometry system. </div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a8fd535b73d93307073607c96d1facc26"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8fd535b73d93307073607c96d1facc26">geo::PlaneGeo::Coverage</a></div><div class="ttdeci">lar::util::simple_geo::Volume Coverage() const </div><div class="ttdoc">Returns a volume including all the wires in the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00532">PlaneGeo.cxx:532</a></div></div>
<div class="ttc" id="namespacelar_1_1util_html_a9c7a66b3fecfd5e9fc64e30f3c54effb"><div class="ttname"><a href="../../d9/d3d/namespacelar_1_1util.html#a9c7a66b3fecfd5e9fc64e30f3c54effb">lar::util::makeVector3DComparison</a></div><div class="ttdeci">auto makeVector3DComparison(RealType threshold)</div><div class="ttdoc">Creates a Vector3DComparison from a RealComparisons object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/RealComparisons_8h_source.html#l00252">RealComparisons.h:252</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a0f2906b4332d3eedc05c2191879a1ae4"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0f2906b4332d3eedc05c2191879a1ae4">geo::PlaneGeo::NearestWireID</a></div><div class="ttdeci">geo::WireID NearestWireID(geo::Point_t const &amp;pos) const </div><div class="ttdoc">Returns the ID of wire closest to the specified position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00649">PlaneGeo.cxx:649</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a2d67a76434a114159bdf5910d83a49c7"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2d67a76434a114159bdf5910d83a49c7">geo::PlaneGeo::fDecompFrame</a></div><div class="ttdeci">WidthDepthDecomposer_t fDecompFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01495">PlaneGeo.h:1495</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ae18edcd350eaeebc2e81e4b8617c36f3"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae18edcd350eaeebc2e81e4b8617c36f3">geo::PlaneGeo::UpdatePhiZ</a></div><div class="ttdeci">void UpdatePhiZ()</div><div class="ttdoc">Updates the stored . </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00935">PlaneGeo.cxx:935</a></div></div>
<div class="ttc" id="namespacegeo_html_aa466678f5f635eee4a8179671f3aae7ea3278689303684830961f26ab4ae9d7b5"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#aa466678f5f635eee4a8179671f3aae7ea3278689303684830961f26ab4ae9d7b5">geo::kVertical</a></div><div class="ttdoc">Planes that are in the vertical plane (e.g. ArgoNeuT). </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00141">geo_types.h:141</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a1a7e1830a03a7b806fb486a06dee9f86"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1a7e1830a03a7b806fb486a06dee9f86">geo::PlaneGeo::toWorldCoords</a></div><div class="ttdeci">geo::Point_t toWorldCoords(LocalPoint_t const &amp;local) const </div><div class="ttdoc">Transform point from local plane frame to world frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01351">PlaneGeo.h:1351</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a54262556246be9d7cd55b501d860d9c1"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a54262556246be9d7cd55b501d860d9c1">geo::PlaneGeo::WireCoordProjection_t</a></div><div class="ttdeci">ROOT::Math::DisplacementVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt;, WireCoordinateReferenceTag &gt; WireCoordProjection_t</div><div class="ttdoc">Type for projections in the wire base representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00130">PlaneGeo.h:130</a></div></div>
<div class="ttc" id="classgeo_1_1GeoObjectSorter_html"><div class="ttname"><a href="../../d5/df5/classgeo_1_1GeoObjectSorter.html">geo::GeoObjectSorter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dba/GeoObjectSorter_8h_source.html#l00025">GeoObjectSorter.h:25</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ad72e5cf08a33a9ed5a72aff9dba30ab2"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad72e5cf08a33a9ed5a72aff9dba30ab2">geo::PlaneGeo::fWire</a></div><div class="ttdeci">WireCollection_t fWire</div><div class="ttdoc">List of wires in this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01482">PlaneGeo.h:1482</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a192ab7cb48516d2b9e82072def7431de"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a192ab7cb48516d2b9e82072def7431de">geo::PlaneGeo::MovePointOverPlane</a></div><div class="ttdeci">geo::Point_t MovePointOverPlane(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns the point, moved so that its projection is over the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00633">PlaneGeo.cxx:633</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a18b8035717a1111dc0bb899910c0aac0"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a18b8035717a1111dc0bb899910c0aac0">geo::PlaneGeo::GetCenter</a></div><div class="ttdeci">Point GetCenter() const </div><div class="ttdoc">Returns the centre of the wire plane in world coordinates [cm]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00479">PlaneGeo.h:479</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a47ed15a0268542535de43b2f97209dd5"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a47ed15a0268542535de43b2f97209dd5">geo::PlaneGeo::fSinPhiZ</a></div><div class="ttdeci">double fSinPhiZ</div><div class="ttdoc">Sine of . </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01484">PlaneGeo.h:1484</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html">geo::PlaneGeo</a></div><div class="ttdoc">Geometry information for a single wire plane.The plane is represented in the geometry by a solid whic...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00082">PlaneGeo.h:82</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a2500e66d8a1a7aa4b40703ed049fa863"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2500e66d8a1a7aa4b40703ed049fa863">geo::PlaneGeo::InterWireDistance</a></div><div class="ttdeci">double InterWireDistance(geo::Vector_t const &amp;dir) const </div><div class="ttdoc">Returns the distance between wires along the specified direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00713">PlaneGeo.cxx:713</a></div></div>
<div class="ttc" id="geo__vectors__utils_8h_html"><div class="ttname"><a href="../../d5/d6c/geo__vectors__utils_8h.html">geo_vectors_utils.h</a></div><div class="ttdoc">Utilities to extend the interface of geometry vectors. </div></div>
<div class="ttc" id="namespaceSortModuleTimes_html_a805854df4323f914a9a09f4e266b4794"><div class="ttname"><a href="../../d7/d8e/namespaceSortModuleTimes.html#a805854df4323f914a9a09f4e266b4794">SortModuleTimes.const</a></div><div class="ttdeci">string const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df3/SortModuleTimes_8py_source.html#l00871">SortModuleTimes.py:871</a></div></div>
<div class="ttc" id="namespacegeo_html_a62b751f7b8cee6917a9f3f83566adc0a"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a62b751f7b8cee6917a9f3f83566adc0a">geo::Xaxis</a></div><div class="ttdeci">constexpr Vector Xaxis()</div><div class="ttdoc">Returns a x axis vector of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00215">geo_vectors.h:215</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1Vector2DComparison_html"><div class="ttname"><a href="../../da/df2/structlar_1_1util_1_1Vector2DComparison.html">lar::util::Vector2DComparison</a></div><div class="ttdoc">Class comparing 2D vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/RealComparisons_8h_source.html#l00142">RealComparisons.h:142</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Rectangle_html_a3b3e87af84052f0d3c6bd7c2a4ea12bf"><div class="ttname"><a href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a3b3e87af84052f0d3c6bd7c2a4ea12bf">lar::util::simple_geo::Rectangle::width</a></div><div class="ttdeci">Range_t width</div><div class="ttdoc">Range along width direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00393">SimpleGeo.h:393</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a72bb4952786b206c9db6193cc629617d"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a72bb4952786b206c9db6193cc629617d">geo::PlaneGeo::UpdateWirePitchSlow</a></div><div class="ttdeci">void UpdateWirePitchSlow()</div><div class="ttdoc">Updates the stored wire pitch with a slower, more robust algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01135">PlaneGeo.cxx:1135</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ae68c38c25fefcd4c3becef4215724c96"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ae68c38c25fefcd4c3becef4215724c96">geo::PlaneGeo::FirstWire</a></div><div class="ttdeci">const WireGeo &amp; FirstWire() const </div><div class="ttdoc">Return the first wire in the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00344">PlaneGeo.h:344</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a49efeca627c1aed88df698b91ea661ca"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a49efeca627c1aed88df698b91ea661ca">geo::PlaneGeo::fFrameSize</a></div><div class="ttdeci">RectSpecs fFrameSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01496">PlaneGeo.h:1496</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a13a34889858a0180ce66022e83f72a7d"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13a34889858a0180ce66022e83f72a7d">geo::PlaneGeo::UpdateAfterSorting</a></div><div class="ttdeci">void UpdateAfterSorting(geo::PlaneID planeid, geo::BoxBoundedGeo const &amp;TPCbox)</div><div class="ttdoc">Performs all needed updates after the TPC has sorted the planes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00731">PlaneGeo.cxx:731</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_aa6eac7d5ba549b3b2b1d888f98d0a021"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#aa6eac7d5ba549b3b2b1d888f98d0a021">geo::PlaneGeo::WidthDepthDisplacement_t</a></div><div class="ttdeci">ROOT::Math::DisplacementVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt;, WidthDepthReferenceTag &gt; WidthDepthDisplacement_t</div><div class="ttdoc">Type for vector projections in the plane frame base representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00155">PlaneGeo.h:155</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_afd6719274c012edd97d6a793b9ca7675"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#afd6719274c012edd97d6a793b9ca7675">geo::details::ActiveAreaCalculator::kLastWireEnd</a></div><div class="ttdeci">static constexpr std::size_t kLastWireEnd</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00114">PlaneGeo.cxx:114</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a454783cc528d02b43cd239fd102126d3"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a454783cc528d02b43cd239fd102126d3">geo::PlaneGeo::UpdateView</a></div><div class="ttdeci">void UpdateView()</div><div class="ttdoc">Updates the stored view. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00950">PlaneGeo.cxx:950</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a3e7aa14d29e74b735f79b176ffd6a1f8"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a3e7aa14d29e74b735f79b176ffd6a1f8">geo::WireGeo::Direction</a></div><div class="ttdeci">Vector Direction() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00587">WireGeo.h:587</a></div></div>
<div class="ttc" id="namespacegeo_1_1vect_html_abd20e6b7f675f2b0fb016b46bfec43b7"><div class="ttname"><a href="../../d0/d8e/namespacegeo_1_1vect.html#abd20e6b7f675f2b0fb016b46bfec43b7">geo::vect::rounded01</a></div><div class="ttdeci">Vector rounded01(Vector const &amp;v, Scalar tol)</div><div class="ttdoc">Returns a vector with all components rounded if close to 0, -1 or +1. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d6c/geo__vectors__utils_8h_source.html#l01169">geo_vectors_utils.h:1169</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneGeo_1_1RectSpecs_html_a0ca4fe9b19c12e054a24523672ab6a00"><div class="ttname"><a href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#a0ca4fe9b19c12e054a24523672ab6a00">geo::PlaneGeo::RectSpecs::HalfDepth</a></div><div class="ttdeci">double HalfDepth() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01473">PlaneGeo.h:1473</a></div></div>
<div class="ttc" id="namespacedropbox_html_a407b5b895ba9265893768748aaa73825"><div class="ttname"><a href="../../de/d9a/namespacedropbox.html#a407b5b895ba9265893768748aaa73825">dropbox.dir</a></div><div class="ttdeci">tuple dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d81/dropbox_8py_source.html#l00028">dropbox.py:28</a></div></div>
<div class="ttc" id="WireGeo_8h_html"><div class="ttname"><a href="../../da/de5/WireGeo_8h.html">WireGeo.h</a></div><div class="ttdoc">Encapsulate the geometry of a wire. </div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a6751f12e587b8d5c75edb63d751d10d6"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6751f12e587b8d5c75edb63d751d10d6">geo::PlaneGeo::DepthDir</a></div><div class="ttdeci">Vector DepthDir() const </div><div class="ttdoc">Return the direction of plane depth. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00236">PlaneGeo.h:236</a></div></div>
<div class="ttc" id="namespacegeo_html_ac4f051a787837f636e1e370e3d041a03"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#ac4f051a787837f636e1e370e3d041a03">geo::Zaxis</a></div><div class="ttdeci">constexpr Vector Zaxis()</div><div class="ttdoc">Returns a z axis vector of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00223">geo_vectors.h:223</a></div></div>
<div class="ttc" id="GeoObjectSorterSBND_8cxx_html_a1591fe891371002ed473166e626dc2a3"><div class="ttname"><a href="../../d2/d4a/GeoObjectSorterSBND_8cxx.html#a1591fe891371002ed473166e626dc2a3">equal</a></div><div class="ttdeci">bool equal(double a, double b)</div><div class="ttdoc">Comparison tolerance, in centimeters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4a/GeoObjectSorterSBND_8cxx_source.html#l00033">GeoObjectSorterSBND.cxx:33</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Rectangle_html_a30f44df4b2ead5830f455dc6013a4f1f"><div class="ttname"><a href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html#a30f44df4b2ead5830f455dc6013a4f1f">lar::util::simple_geo::Rectangle::depth</a></div><div class="ttdeci">Range_t depth</div><div class="ttdoc">Range along depth direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00394">SimpleGeo.h:394</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneGeo_1_1WidthDepthReferenceTag_html"><div class="ttname"><a href="../../de/d83/structgeo_1_1PlaneGeo_1_1WidthDepthReferenceTag.html">geo::PlaneGeo::WidthDepthReferenceTag</a></div><div class="ttdoc">Tag for plane frame base vectors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00146">PlaneGeo.h:146</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_ad337434a7a111c8303d352c8f2c2ef15"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ad337434a7a111c8303d352c8f2c2ef15">geo::details::ActiveAreaCalculator::ActiveAreaCalculator</a></div><div class="ttdeci">ActiveAreaCalculator(geo::PlaneGeo const &amp;plane, double margin=0.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00094">PlaneGeo.cxx:94</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_a87cd02a74143bc76c382dfcd0b64c160"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#a87cd02a74143bc76c382dfcd0b64c160">geo::Decomposer::SetOrigin</a></div><div class="ttdeci">void SetOrigin(Point_t const &amp;point)</div><div class="ttdoc">Change the 3D point of the reference frame origin. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00441">Decomposer.h:441</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_a77f2e348de5e046fd3b7b3ff3fef6526"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#a77f2e348de5e046fd3b7b3ff3fef6526">geo::Decomposer::SecondaryDir</a></div><div class="ttdeci">Vector_t const &amp; SecondaryDir() const </div><div class="ttdoc">Returns the plane secondary axis direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00466">Decomposer.h:466</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a8650bb742ed2f65dcdcc6c6ebb59e7f1"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a8650bb742ed2f65dcdcc6c6ebb59e7f1">geo::PlaneGeo::DeltaFromPlane</a></div><div class="ttdeci">WidthDepthProjection_t DeltaFromPlane(WidthDepthProjection_t const &amp;proj, double wMargin, double dMargin) const </div><div class="ttdoc">Returns a projection vector that, added to the argument, gives a projection inside (or at the border ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00556">PlaneGeo.cxx:556</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Range_html_a0d5b1c87634b471d798092acbd3f79dc"><div class="ttname"><a href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a0d5b1c87634b471d798092acbd3f79dc">lar::util::simple_geo::Range::delta</a></div><div class="ttdeci">Data_t delta(Data_t v, Data_t margin=0.0) const </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00443">SimpleGeo.h:443</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a3dc9ce96d4fba94401dd2d437cff064f"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a3dc9ce96d4fba94401dd2d437cff064f">geo::PlaneGeo::DeltaFromActivePlane</a></div><div class="ttdeci">WidthDepthProjection_t DeltaFromActivePlane(WidthDepthProjection_t const &amp;proj, double wMargin, double dMargin) const </div><div class="ttdoc">Returns a projection vector that, added to the argument, gives a projection inside (or at the border ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00569">PlaneGeo.cxx:569</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html">geo::BoxBoundedGeo</a></div><div class="ttdoc">A base class aware of world box coordinatesAn object describing a simple shape can inherit from this ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00033">BoxBoundedGeo.h:33</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a6cc36d83dc47205592760a15d827a40f"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6cc36d83dc47205592760a15d827a40f">geo::PlaneGeo::GetNormalAxis</a></div><div class="ttdeci">geo::Vector_t GetNormalAxis() const </div><div class="ttdoc">Returns a direction normal to the plane (pointing is not defined). </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00871">PlaneGeo.cxx:871</a></div></div>
<div class="ttc" id="PlaneGeo_8h_html"><div class="ttname"><a href="../../d8/d80/PlaneGeo_8h.html">PlaneGeo.h</a></div><div class="ttdoc">Encapsulate the construction of a single detector plane. </div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abeb00fea35a1d0fd24d5b71de6e56686"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abeb00fea35a1d0fd24d5b71de6e56686">geo::PlaneGeo::PrintPlaneInfo</a></div><div class="ttdeci">void PrintPlaneInfo(Stream &amp;&amp;out, std::string indent=&quot;&quot;, unsigned int verbosity=1) const </div><div class="ttdoc">Prints information about this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01539">PlaneGeo.h:1539</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ad9c2a53089ff865b269146df5290f974"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ad9c2a53089ff865b269146df5290f974">geo::PlaneGeo::DistanceFromPlane</a></div><div class="ttdeci">double DistanceFromPlane(geo::Point_t const &amp;point) const </div><div class="ttdoc">Returns the distance of the specified point from the wire plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00621">PlaneGeo.h:621</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_af746b45acd77561ff4c9b5fe2ed758bc"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#af746b45acd77561ff4c9b5fe2ed758bc">geo::BoxBoundedGeo::SetBoundaries</a></div><div class="ttdeci">void SetBoundaries(Coord_t x_min, Coord_t x_max, Coord_t y_min, Coord_t y_max, Coord_t z_min, Coord_t z_max)</div><div class="ttdoc">Sets the boundaries in world coordinates as specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00389">BoxBoundedGeo.h:389</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a23ad5f4a59ea0abdb4b3161378754b2a"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a23ad5f4a59ea0abdb4b3161378754b2a">geo::WireGeo::GetEnd</a></div><div class="ttdeci">void GetEnd(double *xyz) const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/WireGeo_8h_source.html#l00163">WireGeo.h:163</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1RealComparisons_html_a8e03cbf3571f37bd00e35ed8f5abdbc1"><div class="ttname"><a href="../../d9/de2/structlar_1_1util_1_1RealComparisons.html#a8e03cbf3571f37bd00e35ed8f5abdbc1">lar::util::RealComparisons::nonNegative</a></div><div class="ttdeci">constexpr bool nonNegative(Value_t value) const </div><div class="ttdoc">Returns whether value is larger than or equal() to zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dbc/RealComparisons_8h_source.html#l00097">RealComparisons.h:97</a></div></div>
<div class="ttc" id="namespaceicarus_1_1trigger_html_a7718dbf2e5e4aa346e7fbabaa451457f"><div class="ttname"><a href="../../dd/df6/namespaceicarus_1_1trigger.html#a7718dbf2e5e4aa346e7fbabaa451457f">icarus::trigger::to_string</a></div><div class="ttdeci">std::string to_string(WindowPattern const &amp;pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d48/WindowPattern_8h_source.html#l00102">WindowPattern.h:102</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Rectangle_html"><div class="ttname"><a href="../../d7/de4/structlar_1_1util_1_1simple__geo_1_1Rectangle.html">lar::util::simple_geo::Rectangle&lt; double &gt;</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a9c059f407b135ec46f78688545f9d095"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a9c059f407b135ec46f78688545f9d095">geo::PlaneGeo::ID</a></div><div class="ttdeci">geo::PlaneID const &amp; ID() const </div><div class="ttdoc">Returns the identifier of this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00203">PlaneGeo.h:203</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a7826cdc1c03d259f08a43ccdc133bc37"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a7826cdc1c03d259f08a43ccdc133bc37">geo::details::ActiveAreaCalculator::wMargin</a></div><div class="ttdeci">double const wMargin</div><div class="ttdoc">Margin subtracted from each side of width. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00117">PlaneGeo.cxx:117</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a4219fe2ca7c62436639e983f8d24f2fd"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a4219fe2ca7c62436639e983f8d24f2fd">geo::details::ActiveAreaCalculator::ActiveAreaCalculator</a></div><div class="ttdeci">ActiveAreaCalculator(geo::PlaneGeo const &amp;plane, double wMargin, double dMargin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00088">PlaneGeo.cxx:88</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a0aeb7d438b1337c138277335a4e666a1"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0aeb7d438b1337c138277335a4e666a1">geo::PlaneGeo::Nwires</a></div><div class="ttdeci">unsigned int Nwires() const </div><div class="ttdoc">Number of wires in this plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00269">PlaneGeo.h:269</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a2bed15dc08200166fc9299406dd3ef42"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a2bed15dc08200166fc9299406dd3ef42">geo::PlaneGeo::ClosestWireID</a></div><div class="ttdeci">geo::WireID ClosestWireID(geo::WireID::WireID_t wireNo) const </div><div class="ttdoc">Returns the closest valid wire ID to the specified wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01520">PlaneGeo.h:1520</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a194e03f145090c263964158661ed5c12"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a194e03f145090c263964158661ed5c12">geo::PlaneGeo::WireIDincreasesWithZ</a></div><div class="ttdeci">bool WireIDincreasesWithZ() const </div><div class="ttdoc">Returns whether the higher z wires have higher wire ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00525">PlaneGeo.cxx:525</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_adab794eed303c92172c8e2e6e7a51876"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#adab794eed303c92172c8e2e6e7a51876">geo::BoxBoundedGeo::ExtendToInclude</a></div><div class="ttdeci">void ExtendToInclude(Coord_t x, Coord_t y, Coord_t z)</div><div class="ttdoc">Extends the current box to also include the specified point. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00414">BoxBoundedGeo.h:414</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a6eb0d414654d615025ae8b865792f6e3"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a6eb0d414654d615025ae8b865792f6e3">geo::PlaneGeo::fCosPhiZ</a></div><div class="ttdeci">double fCosPhiZ</div><div class="ttdoc">Cosine of . </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01485">PlaneGeo.h:1485</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Range_html_a8c61cffa58294102fc25812b23567a76"><div class="ttname"><a href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#a8c61cffa58294102fc25812b23567a76">lar::util::simple_geo::Range::upper</a></div><div class="ttdeci">Data_t upper</div><div class="ttdoc">Ending coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00327">SimpleGeo.h:327</a></div></div>
<div class="ttc" id="updateVersionList_8sh_html_a067a8c1534d6da9b2c501a6cf4ef89bd"><div class="ttname"><a href="../../d4/dca/updateVersionList_8sh.html#a067a8c1534d6da9b2c501a6cf4ef89bd">e</a></div><div class="ttdeci">do i e</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dca/updateVersionList_8sh_source.html#l00068">updateVersionList.sh:68</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a07e3bb39c18911d0f71e45f1c0c0fe0f"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a07e3bb39c18911d0f71e45f1c0c0fe0f">geo::PlaneGeo::WidthDir</a></div><div class="ttdeci">Vector WidthDir() const </div><div class="ttdoc">Return the direction of plane width. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00221">PlaneGeo.h:221</a></div></div>
<div class="ttc" id="classgeo_1_1InvalidWireError_html"><div class="ttname"><a href="../../d6/d6c/classgeo_1_1InvalidWireError.html">geo::InvalidWireError</a></div><div class="ttdoc">Exception thrown on invalid wire number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7c/Exceptions_8h_source.html#l00042">Exceptions.h:42</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_ae62b7757527c6c401d66b1cc453a368c"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#ae62b7757527c6c401d66b1cc453a368c">geo::details::ActiveAreaCalculator::kFirstWireEnd</a></div><div class="ttdeci">static constexpr std::size_t kFirstWireEnd</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00112">PlaneGeo.cxx:112</a></div></div>
<div class="ttc" id="structgeo_1_1WireID_html_a51daaae3404ddba50f4585a9820e751f"><div class="ttname"><a href="../../de/db1/structgeo_1_1WireID.html#a51daaae3404ddba50f4585a9820e751f">geo::WireID::WireID_t</a></div><div class="ttdeci">unsigned int WireID_t</div><div class="ttdoc">Type for the ID number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d48/geo__types_8h_source.html#l00561">geo_types.h:561</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_adfd4ff58e32d7fe19ded00e82f9bc5a5"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#adfd4ff58e32d7fe19ded00e82f9bc5a5">geo::details::ActiveAreaCalculator::adjustCorners</a></div><div class="ttdeci">void adjustCorners()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00164">PlaneGeo.cxx:164</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a13dae2b9cd9df33c5ec40bc4287f006d"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a13dae2b9cd9df33c5ec40bc4287f006d">geo::PlaneGeo::UpdateWirePlaneCenter</a></div><div class="ttdeci">void UpdateWirePlaneCenter()</div><div class="ttdoc">Updates the stored wire plane center. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01183">PlaneGeo.cxx:1183</a></div></div>
<div class="ttc" id="pmtsimulation__icarus_8fcl_html_a9fc569190f32b40862f18ac3c03a8e49"><div class="ttname"><a href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a></div><div class="ttdeci">temporary value</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d36/pmtsimulation__icarus_8fcl_source.html#l00158">pmtsimulation_icarus.fcl:158</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a44b84270ade2573b0eccc313e2ae3b59"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a44b84270ade2573b0eccc313e2ae3b59">geo::PlaneGeo::fDecompWire</a></div><div class="ttdeci">WireDecomposer_t fDecompWire</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01491">PlaneGeo.h:1491</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a94f69d8b7931f913c43051d15c00956c"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a94f69d8b7931f913c43051d15c00956c">geo::details::ActiveAreaCalculator::equal</a></div><div class="ttdeci">static bool equal(T a, T b, T tol=T(1e-5))</div><div class="ttdoc">Returns whether the two numbers are the same, lest a tolerance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00422">PlaneGeo.cxx:422</a></div></div>
<div class="ttc" id="classgeo_1_1WireGeo_html_a967f3f96296bf6953f8405ac4e5e7427"><div class="ttname"><a href="../../de/dce/classgeo_1_1WireGeo.html#a967f3f96296bf6953f8405ac4e5e7427">geo::WireGeo::GetCenter</a></div><div class="ttdeci">void GetCenter(double *xyz, double localz=0.0) const </div><div class="ttdoc">Fills the world coordinate of a point on the wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d05/WireGeo_8cxx_source.html#l00073">WireGeo.cxx:73</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a0423d5a844fac3310f2c34e5cd24646e"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a0423d5a844fac3310f2c34e5cd24646e">geo::PlaneGeo::WireCoordinate</a></div><div class="ttdeci">double WireCoordinate(Point const &amp;point) const </div><div class="ttdoc">Returns the coordinate of the point on the plane, in wire units. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00882">PlaneGeo.h:882</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a97593665eaf5b33ccf183e141bb4ac1c"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a97593665eaf5b33ccf183e141bb4ac1c">geo::PlaneGeo::UpdateDecompWireOrigin</a></div><div class="ttdeci">void UpdateDecompWireOrigin()</div><div class="ttdoc">Updates the position of the wire coordinate decomposition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01157">PlaneGeo.cxx:1157</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html">geo::details::ActiveAreaCalculator</a></div><div class="ttdoc">Class computing the active area of the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00085">PlaneGeo.cxx:85</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_adb59fc87061d466d1e6c5bad10d99b60"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#adb59fc87061d466d1e6c5bad10d99b60">geo::PlaneGeo::UpdateActiveArea</a></div><div class="ttdeci">void UpdateActiveArea()</div><div class="ttdoc">Updates the internally used active area. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01167">PlaneGeo.cxx:1167</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a881c0c9e4ecc863b6da6cbf9b83c635f"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a881c0c9e4ecc863b6da6cbf9b83c635f">geo::details::ActiveAreaCalculator::includeAllWireEnds</a></div><div class="ttdeci">void includeAllWireEnds()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00150">PlaneGeo.cxx:150</a></div></div>
<div class="ttc" id="PhysicalConstants_8h_html"><div class="ttname"><a href="../../dd/d09/PhysicalConstants_8h.html">PhysicalConstants.h</a></div><div class="ttdoc">Collection of Physical constants used in LArSoft. </div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a1f4d76e196e8ea8253c63f17a517a6bf"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a1f4d76e196e8ea8253c63f17a517a6bf">geo::PlaneGeo::LocalVector_t</a></div><div class="ttdeci">geo::Vector3DBase_t&lt; PlaneGeoCoordinatesTag &gt; LocalVector_t</div><div class="ttdoc">Type of displacement vectors in the local GDML wire plane frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00118">PlaneGeo.h:118</a></div></div>
<div class="ttc" id="namespacelib_1_1dedx_html_a62b15446ae03a5857d5e03fa30b03fd4"><div class="ttname"><a href="../../d3/d5d/namespacelib_1_1dedx.html#a62b15446ae03a5857d5e03fa30b03fd4">lib.dedx.A</a></div><div class="ttdeci">float A</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df9/dedx_8py_source.html#l00137">dedx.py:137</a></div></div>
<div class="ttc" id="structlar_1_1util_1_1simple__geo_1_1Range_html_af214ce547d0b3439f840f3489b78b4d5"><div class="ttname"><a href="../../d1/df7/structlar_1_1util_1_1simple__geo_1_1Range.html#af214ce547d0b3439f840f3489b78b4d5">lar::util::simple_geo::Range::lower</a></div><div class="ttdeci">Data_t lower</div><div class="ttdoc">Starting coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d79/SimpleGeo_8h_source.html#l00326">SimpleGeo.h:326</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_ab4c5c3eea283dbc8462846a50868a240"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#ab4c5c3eea283dbc8462846a50868a240">geo::PlaneGeo::LastWire</a></div><div class="ttdeci">const WireGeo &amp; LastWire() const </div><div class="ttdoc">Return the last wire in the plane. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00350">PlaneGeo.h:350</a></div></div>
<div class="ttc" id="namespacegeo_html_a5a6f22c2aa9d0ccf6ca08bf2773a0541"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a5a6f22c2aa9d0ccf6ca08bf2773a0541">geo::Point_t</a></div><div class="ttdeci">ROOT::Math::PositionVector3D&lt; ROOT::Math::Cartesian3D&lt; double &gt;, ROOT::Math::GlobalCoordinateSystemTag &gt; Point_t</div><div class="ttdoc">Type for representation of position in physical 3D space. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00184">geo_vectors.h:184</a></div></div>
<div class="ttc" id="structgeo_1_1PlaneGeo_1_1RectSpecs_html_aa1f2873191f4bd5e7c0a2d23705678a4"><div class="ttname"><a href="../../db/d90/structgeo_1_1PlaneGeo_1_1RectSpecs.html#aa1f2873191f4bd5e7c0a2d23705678a4">geo::PlaneGeo::RectSpecs::halfWidth</a></div><div class="ttdeci">double halfWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01469">PlaneGeo.h:1469</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a596ffb7f954d956791f6b3f0bd6b2946"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a596ffb7f954d956791f6b3f0bd6b2946">geo::PlaneGeo::SortWires</a></div><div class="ttdeci">void SortWires(geo::GeoObjectSorter const &amp;sorter)</div><div class="ttdoc">Apply sorting to WireGeo objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00518">PlaneGeo.cxx:518</a></div></div>
<div class="ttc" id="condor__lar__pubs_8sh_html_aace24c54f354f24f1dec3b4fd3a15d10"><div class="ttname"><a href="../../da/dc6/condor__lar__pubs_8sh.html#aace24c54f354f24f1dec3b4fd3a15d10">r</a></div><div class="ttdeci">esac echo uname r</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/condor__lar__pubs_8sh_source.html#l00698">condor_lar_pubs.sh:698</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a506485ae99027d516487bab91cf32bbb"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a506485ae99027d516487bab91cf32bbb">geo::PlaneGeo::fOrientation</a></div><div class="ttdeci">Orient_t fOrientation</div><div class="ttdoc">Is the plane vertical or horizontal? </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l01481">PlaneGeo.h:1481</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_acfd296af7b0510e55d946e6954da7126"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#acfd296af7b0510e55d946e6954da7126">geo::details::ActiveAreaCalculator::Projection_t</a></div><div class="ttdeci">ROOT::Math::PositionVector2D&lt; ROOT::Math::Cartesian2D&lt; double &gt;, geo::PlaneGeo::WidthDepthReferenceTag &gt; Projection_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00103">PlaneGeo.cxx:103</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a943d466031dd4f0070a01d01f0c42806"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a943d466031dd4f0070a01d01f0c42806">geo::PlaneGeo::UpdateWireDir</a></div><div class="ttdeci">void UpdateWireDir()</div><div class="ttdoc">Updates the cached direction to wire. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l01121">PlaneGeo.cxx:1121</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_afe8bd1eceb5b7c295dee30b0e80ecd80"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#afe8bd1eceb5b7c295dee30b0e80ecd80">geo::PlaneGeo::LocalPoint_t</a></div><div class="ttdeci">geo::Point3DBase_t&lt; PlaneGeoCoordinatesTag &gt; LocalPoint_t</div><div class="ttdoc">Type of points in the local GDML wire plane frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00115">PlaneGeo.h:115</a></div></div>
<div class="ttc" id="namespacegeo_html_a9680b6099f733e98dcf7c5329c6318b0"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a9680b6099f733e98dcf7c5329c6318b0">geo::TransformationMatrix</a></div><div class="ttdeci">ROOT::Math::Transform3D TransformationMatrix</div><div class="ttdoc">Type of transformation matrix used in geometry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d47/TransformationMatrix_8h_source.html#l00030">TransformationMatrix.h:30</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a230edfb65c9d8df9df27f373de9189a9"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a230edfb65c9d8df9df27f373de9189a9">geo::details::ActiveAreaCalculator::applyMargin</a></div><div class="ttdeci">void applyMargin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00377">PlaneGeo.cxx:377</a></div></div>
<div class="ttc" id="namespacegeo_html_a6155d04d62c8bb11135137324ab26b5c"><div class="ttname"><a href="../../d6/d23/namespacegeo.html#a6155d04d62c8bb11135137324ab26b5c">geo::origin</a></div><div class="ttdeci">constexpr Point origin()</div><div class="ttdoc">Returns a origin position with a point of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7d/geo__vectors_8h_source.html#l00227">geo_vectors.h:227</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_abbb4a8a4b112ec8e24cc970a40e8b592"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#abbb4a8a4b112ec8e24cc970a40e8b592">geo::PlaneGeo::WirePitch</a></div><div class="ttdeci">double WirePitch() const </div><div class="ttdoc">Return the wire pitch (in centimeters). It is assumed constant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d80/PlaneGeo_8h_source.html#l00411">PlaneGeo.h:411</a></div></div>
<div class="ttc" id="structgeo_1_1details_1_1ActiveAreaCalculator_html_a2887c9c86f843d69dc981e054ba751a3"><div class="ttname"><a href="../../dd/d9d/structgeo_1_1details_1_1ActiveAreaCalculator.html#a2887c9c86f843d69dc981e054ba751a3">geo::details::ActiveAreaCalculator::activeArea</a></div><div class="ttdeci">geo::PlaneGeo::Rect activeArea</div><div class="ttdoc">Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00119">PlaneGeo.cxx:119</a></div></div>
<div class="ttc" id="classgeo_1_1PlaneGeo_html_a15df9a2fb050b471394185817aaf2111"><div class="ttname"><a href="../../d4/d67/classgeo_1_1PlaneGeo.html#a15df9a2fb050b471394185817aaf2111">geo::PlaneGeo::PlaneGeo</a></div><div class="ttdeci">PlaneGeo(TGeoNode const &amp;node, geo::TransformationMatrix &amp;&amp;trans, WireCollection_t &amp;&amp;wires)</div><div class="ttdoc">Construct a representation of a single plane of the detector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd0/PlaneGeo_8cxx_source.html#l00435">PlaneGeo.cxx:435</a></div></div>
<div class="ttc" id="classgeo_1_1Decomposer_html_a6d9f6fa403c7956ea82862b009acb8b3"><div class="ttname"><a href="../../dc/d13/classgeo_1_1Decomposer.html#a6d9f6fa403c7956ea82862b009acb8b3">geo::Decomposer::SetMainDir</a></div><div class="ttdeci">void SetMainDir(Vector_t const &amp;dir)</div><div class="ttdoc">Change the main direction of the projection base. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc6/Decomposer_8h_source.html#l00444">Decomposer.h:444</a></div></div>
<div class="ttc" id="classgeo_1_1BoxBoundedGeo_html_a62a94f7c3f6b039f05ac6487f0acfe4e"><div class="ttname"><a href="../../db/d54/classgeo_1_1BoxBoundedGeo.html#a62a94f7c3f6b039f05ac6487f0acfe4e">geo::BoxBoundedGeo::Center</a></div><div class="ttdeci">geo::Point_t Center() const </div><div class="ttdoc">Returns the center point of the box. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d92/BoxBoundedGeo_8h_source.html#l00139">BoxBoundedGeo.h:139</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
