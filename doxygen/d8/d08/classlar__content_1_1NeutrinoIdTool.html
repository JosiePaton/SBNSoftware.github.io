<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>lar_content::NeutrinoIdTool&lt; T &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../db/de7/namespacelar__content.html">lar_content</a></li><li class="navelem"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">NeutrinoIdTool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d8/d05/classlar__content_1_1NeutrinoIdTool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lar_content::NeutrinoIdTool&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html" title="NeutrinoIdTool class. ">NeutrinoIdTool</a> class.  
 <a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lar_content::NeutrinoIdTool&lt; T &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d8/d08/classlar__content_1_1NeutrinoIdTool.png" usemap="#lar_content::NeutrinoIdTool&lt; T &gt;_map" alt=""/>
  <map id="lar_content::NeutrinoIdTool&lt; T &gt;_map" name="lar_content::NeutrinoIdTool&lt; T &gt;_map">
<area href="../../d5/d36/classlar__content_1_1SliceIdBaseTool.html" title="SliceIdBaseTool class. " alt="lar_content::SliceIdBaseTool" shape="rect" coords="0,56,194,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dde/classlar__content_1_1NeutrinoIdTool_1_1SliceFeatures.html">SliceFeatures</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slice features class.  <a href="../../d8/dde/classlar__content_1_1NeutrinoIdTool_1_1SliceFeatures.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a731715e837b61e417025e7c1e75d61b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a731715e837b61e417025e7c1e75d61b8">NeutrinoIdTool</a> ()</td></tr>
<tr class="memdesc:a731715e837b61e417025e7c1e75d61b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a731715e837b61e417025e7c1e75d61b8">More...</a><br/></td></tr>
<tr class="separator:a731715e837b61e417025e7c1e75d61b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2e9353284706dc119f1585cddf14ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aaa2e9353284706dc119f1585cddf14ee">SelectOutputPfos</a> (const pandora::Algorithm *const pAlgorithm, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;nuSliceHypotheses, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;crSliceHypotheses, pandora::PfoList &amp;selectedPfos)</td></tr>
<tr class="memdesc:aaa2e9353284706dc119f1585cddf14ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select which reconstruction hypotheses to use; neutrino outcomes or cosmic-ray muon outcomes for each slice.  <a href="#aaa2e9353284706dc119f1585cddf14ee">More...</a><br/></td></tr>
<tr class="separator:aaa2e9353284706dc119f1585cddf14ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a2c042bdb0a07381264c57c6d83b1a86b"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; unsigned <br class="typebreak"/>
int, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a></td></tr>
<tr class="separator:a2c042bdb0a07381264c57c6d83b1a86b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f69f726246a77f0067f13f54af03fe"><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d8/dde/classlar__content_1_1NeutrinoIdTool_1_1SliceFeatures.html">SliceFeatures</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a></td></tr>
<tr class="separator:ad0f69f726246a77f0067f13f54af03fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a14c195409b1d2006396bb49fbb0e0d2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a14c195409b1d2006396bb49fbb0e0d2a">GetSliceFeatures</a> (const <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">NeutrinoIdTool</a> *const pTool, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;nuSliceHypotheses, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;crSliceHypotheses, <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a> &amp;sliceFeaturesVector) const </td></tr>
<tr class="memdesc:a14c195409b1d2006396bb49fbb0e0d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the features of each slice.  <a href="#a14c195409b1d2006396bb49fbb0e0d2a">More...</a><br/></td></tr>
<tr class="separator:a14c195409b1d2006396bb49fbb0e0d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebc7823fb1115ee7c591ab4ccb898786"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aebc7823fb1115ee7c591ab4ccb898786">GetBestMCSliceIndex</a> (const pandora::Algorithm *const pAlgorithm, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;nuSliceHypotheses, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;crSliceHypotheses, unsigned int &amp;bestSliceIndex) const </td></tr>
<tr class="memdesc:aebc7823fb1115ee7c591ab4ccb898786"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the slice with the most neutrino induced hits using Monte-Carlo information.  <a href="#aebc7823fb1115ee7c591ab4ccb898786">More...</a><br/></td></tr>
<tr class="separator:aebc7823fb1115ee7c591ab4ccb898786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30910f199b295d3feb952c16f425bbcd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a30910f199b295d3feb952c16f425bbcd">PassesQualityCuts</a> (const pandora::Algorithm *const pAlgorithm, const float purity, const float completeness) const </td></tr>
<tr class="memdesc:a30910f199b295d3feb952c16f425bbcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the event passes the selection cuts for training and has the required NUANCE code.  <a href="#a30910f199b295d3feb952c16f425bbcd">More...</a><br/></td></tr>
<tr class="separator:a30910f199b295d3feb952c16f425bbcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7069c4348cfa50dfebc26eba742cf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2e7069c4348cfa50dfebc26eba742cf1">Collect2DHits</a> (const pandora::PfoList &amp;pfos, pandora::CaloHitList &amp;reconstructedCaloHitList, const pandora::CaloHitSet &amp;reconstructableCaloHitSet) const </td></tr>
<tr class="memdesc:a2e7069c4348cfa50dfebc26eba742cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect all 2D hits in a supplied list of Pfos and push them on to an existing hit list, check so not to double count.  <a href="#a2e7069c4348cfa50dfebc26eba742cf1">More...</a><br/></td></tr>
<tr class="separator:a2e7069c4348cfa50dfebc26eba742cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2381b9880bb3bed6daa58b65c0ea611f"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2381b9880bb3bed6daa58b65c0ea611f">CountNeutrinoInducedHits</a> (const pandora::CaloHitList &amp;caloHitList) const </td></tr>
<tr class="memdesc:a2381b9880bb3bed6daa58b65c0ea611f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the number of neutrino induced hits in a given list using MC information.  <a href="#a2381b9880bb3bed6daa58b65c0ea611f">More...</a><br/></td></tr>
<tr class="separator:a2381b9880bb3bed6daa58b65c0ea611f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a778f8000ed023db54971b7f395c8ad1a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a778f8000ed023db54971b7f395c8ad1a">GetNuanceCode</a> (const pandora::Algorithm *const pAlgorithm) const </td></tr>
<tr class="memdesc:a778f8000ed023db54971b7f395c8ad1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the current MCParticle list to get the nuance code of the neutrino in the event.  <a href="#a778f8000ed023db54971b7f395c8ad1a">More...</a><br/></td></tr>
<tr class="separator:a778f8000ed023db54971b7f395c8ad1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38656736f1c943f5dfdb97ccf89cfc18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a38656736f1c943f5dfdb97ccf89cfc18">SelectAllPfos</a> (const pandora::Algorithm *const pAlgorithm, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;hypotheses, pandora::PfoList &amp;selectedPfos) const </td></tr>
<tr class="memdesc:a38656736f1c943f5dfdb97ccf89cfc18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select all pfos under the same hypothesis.  <a href="#a38656736f1c943f5dfdb97ccf89cfc18">More...</a><br/></td></tr>
<tr class="separator:a38656736f1c943f5dfdb97ccf89cfc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bbd557d6b43d8e663600c1e9fbd12ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a3bbd557d6b43d8e663600c1e9fbd12ed">SelectPfosByProbability</a> (const pandora::Algorithm *const pAlgorithm, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;nuSliceHypotheses, const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;crSliceHypotheses, const <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a> &amp;sliceFeaturesVector, pandora::PfoList &amp;selectedPfos) const </td></tr>
<tr class="memdesc:a3bbd557d6b43d8e663600c1e9fbd12ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select pfos based on the probability that their slice contains a neutrino interaction.  <a href="#a3bbd557d6b43d8e663600c1e9fbd12ed">More...</a><br/></td></tr>
<tr class="separator:a3bbd557d6b43d8e663600c1e9fbd12ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e9b221993d970710ab902792cb5a1d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">SelectPfos</a> (const pandora::PfoList &amp;pfos, pandora::PfoList &amp;selectedPfos) const </td></tr>
<tr class="memdesc:a6e9b221993d970710ab902792cb5a1d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given pfos to the selected Pfo list.  <a href="#a6e9b221993d970710ab902792cb5a1d4">More...</a><br/></td></tr>
<tr class="separator:a6e9b221993d970710ab902792cb5a1d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6364324d5ad9caed1810ae97e30e79"><td class="memItemLeft" align="right" valign="top">pandora::StatusCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a6364324d5ad9caed1810ae97e30e79">ReadSettings</a> (const pandora::TiXmlHandle xmlHandle)</td></tr>
<tr class="separator:a8a6364324d5ad9caed1810ae97e30e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a35e399a6ed46d693e06fd8dda3a4cdb6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a></td></tr>
<tr class="memdesc:a35e399a6ed46d693e06fd8dda3a4cdb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should use training mode. If true, training examples will be written to the output file.  <a href="#a35e399a6ed46d693e06fd8dda3a4cdb6">More...</a><br/></td></tr>
<tr class="separator:a35e399a6ed46d693e06fd8dda3a4cdb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af59dfc78eb0396a0734a609f0ce8cd3e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#af59dfc78eb0396a0734a609f0ce8cd3e">m_trainingOutputFile</a></td></tr>
<tr class="memdesc:af59dfc78eb0396a0734a609f0ce8cd3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output file name for training examples.  <a href="#af59dfc78eb0396a0734a609f0ce8cd3e">More...</a><br/></td></tr>
<tr class="separator:af59dfc78eb0396a0734a609f0ce8cd3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a420a67ec821476a58247908391f3477e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">m_selectNuanceCode</a></td></tr>
<tr class="memdesc:a420a67ec821476a58247908391f3477e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should select training events by nuance code.  <a href="#a420a67ec821476a58247908391f3477e">More...</a><br/></td></tr>
<tr class="separator:a420a67ec821476a58247908391f3477e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c86ae24fa0fc96faf0aa63adb9f1d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">m_nuance</a></td></tr>
<tr class="memdesc:aa8c86ae24fa0fc96faf0aa63adb9f1d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nuance code to select for training.  <a href="#aa8c86ae24fa0fc96faf0aa63adb9f1d6">More...</a><br/></td></tr>
<tr class="separator:aa8c86ae24fa0fc96faf0aa63adb9f1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5545f6b3e0e0d208b3dd6dce28a184d8"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">m_minPurity</a></td></tr>
<tr class="memdesc:a5545f6b3e0e0d208b3dd6dce28a184d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum purity of the best slice to use event for training.  <a href="#a5545f6b3e0e0d208b3dd6dce28a184d8">More...</a><br/></td></tr>
<tr class="separator:a5545f6b3e0e0d208b3dd6dce28a184d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb73316acbb4ac8548a0221285061db"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">m_minCompleteness</a></td></tr>
<tr class="memdesc:accb73316acbb4ac8548a0221285061db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum completeness of the best slice to use event for training.  <a href="#accb73316acbb4ac8548a0221285061db">More...</a><br/></td></tr>
<tr class="separator:accb73316acbb4ac8548a0221285061db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934b1fd1fdd7f4cc80878d7f0c42703e"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">m_minProbability</a></td></tr>
<tr class="memdesc:a934b1fd1fdd7f4cc80878d7f0c42703e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum probability required to classify a slice as the neutrino.  <a href="#a934b1fd1fdd7f4cc80878d7f0c42703e">More...</a><br/></td></tr>
<tr class="separator:a934b1fd1fdd7f4cc80878d7f0c42703e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1ca1abb66008ea2f005f5b586bf1d14"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">m_maxNeutrinos</a></td></tr>
<tr class="memdesc:ac1ca1abb66008ea2f005f5b586bf1d14"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of neutrinos to select in any one event.  <a href="#ac1ca1abb66008ea2f005f5b586bf1d14">More...</a><br/></td></tr>
<tr class="separator:ac1ca1abb66008ea2f005f5b586bf1d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1131e8c75f8627382b1d02009957c48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">m_persistFeatures</a></td></tr>
<tr class="memdesc:aa1131e8c75f8627382b1d02009957c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, the mva features will be persisted in the metadata.  <a href="#aa1131e8c75f8627382b1d02009957c48">More...</a><br/></td></tr>
<tr class="separator:aa1131e8c75f8627382b1d02009957c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a669977b566c1ee2d6691a9d1e8d3aa"><td class="memItemLeft" align="right" valign="top">T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a669977b566c1ee2d6691a9d1e8d3aa">m_mva</a></td></tr>
<tr class="memdesc:a8a669977b566c1ee2d6691a9d1e8d3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mva.  <a href="#a8a669977b566c1ee2d6691a9d1e8d3aa">More...</a><br/></td></tr>
<tr class="separator:a8a669977b566c1ee2d6691a9d1e8d3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869d982b8dc5d0fb5b85bae760318b5f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">m_filePathEnvironmentVariable</a></td></tr>
<tr class="memdesc:a869d982b8dc5d0fb5b85bae760318b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The environment variable providing a list of paths to mva files.  <a href="#a869d982b8dc5d0fb5b85bae760318b5f">More...</a><br/></td></tr>
<tr class="separator:a869d982b8dc5d0fb5b85bae760318b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br/>
class lar_content::NeutrinoIdTool&lt; T &gt;</h3>

<p><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html" title="NeutrinoIdTool class. ">NeutrinoIdTool</a> class. </p>
<p>Compares the neutrino and cosmic hypotheses of all of the slices in the event. Uses an MVA to calculate the probability of each slice containing a neutrino interaction. The N slices with the highest probabilities are identified as a neutrino (if sufficiently probable) all other slices are deemed cosmogenic.</p>
<p>If training mode is switched on, then the tool will write MVA training exmples to the specified output file. The events selected for training must pass (user configurable) slicing quality cuts. Users may also select events based on their interaction type (nuance code). </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00032">32</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ad0f69f726246a77f0067f13f54af03fe"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../d8/dde/classlar__content_1_1NeutrinoIdTool_1_1SliceFeatures.html">SliceFeatures</a>&gt; <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::<a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00162">162</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2c042bdb0a07381264c57c6d83b1a86b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;unsigned int, float&gt; <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::<a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00161">161</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a731715e837b61e417025e7c1e75d61b8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::<a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">NeutrinoIdTool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00029">29</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                  :</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">m_selectNuanceCode</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">m_nuance</a>(-std::numeric_limits&lt;int&gt;::max()),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">m_minPurity</a>(0.9f),</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">m_minCompleteness</a>(0.9f),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">m_minProbability</a>(0.0f),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">m_maxNeutrinos</a>(1),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">m_persistFeatures</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">m_filePathEnvironmentVariable</a>(<span class="stringliteral">&quot;FW_SEARCH_PATH&quot;</span>)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a934b1fd1fdd7f4cc80878d7f0c42703e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">lar_content::NeutrinoIdTool::m_minProbability</a></div><div class="ttdeci">float m_minProbability</div><div class="ttdoc">Minimum probability required to classify a slice as the neutrino. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00267">NeutrinoIdTool.h:267</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_accb73316acbb4ac8548a0221285061db"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">lar_content::NeutrinoIdTool::m_minCompleteness</a></div><div class="ttdeci">float m_minCompleteness</div><div class="ttdoc">Minimum completeness of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00264">NeutrinoIdTool.h:264</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a869d982b8dc5d0fb5b85bae760318b5f"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">lar_content::NeutrinoIdTool::m_filePathEnvironmentVariable</a></div><div class="ttdeci">std::string m_filePathEnvironmentVariable</div><div class="ttdoc">The environment variable providing a list of paths to mva files. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00273">NeutrinoIdTool.h:273</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a420a67ec821476a58247908391f3477e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">lar_content::NeutrinoIdTool::m_selectNuanceCode</a></div><div class="ttdeci">bool m_selectNuanceCode</div><div class="ttdoc">Should select training events by nuance code. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00261">NeutrinoIdTool.h:261</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_ac1ca1abb66008ea2f005f5b586bf1d14"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">lar_content::NeutrinoIdTool::m_maxNeutrinos</a></div><div class="ttdeci">unsigned int m_maxNeutrinos</div><div class="ttdoc">The maximum number of neutrinos to select in any one event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00268">NeutrinoIdTool.h:268</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa8c86ae24fa0fc96faf0aa63adb9f1d6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">lar_content::NeutrinoIdTool::m_nuance</a></div><div class="ttdeci">int m_nuance</div><div class="ttdoc">Nuance code to select for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00262">NeutrinoIdTool.h:262</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a35e399a6ed46d693e06fd8dda3a4cdb6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">lar_content::NeutrinoIdTool::m_useTrainingMode</a></div><div class="ttdeci">bool m_useTrainingMode</div><div class="ttdoc">Should use training mode. If true, training examples will be written to the output file...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00259">NeutrinoIdTool.h:259</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a5545f6b3e0e0d208b3dd6dce28a184d8"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">lar_content::NeutrinoIdTool::m_minPurity</a></div><div class="ttdeci">float m_minPurity</div><div class="ttdoc">Minimum purity of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00263">NeutrinoIdTool.h:263</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa1131e8c75f8627382b1d02009957c48"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">lar_content::NeutrinoIdTool::m_persistFeatures</a></div><div class="ttdeci">bool m_persistFeatures</div><div class="ttdoc">If true, the mva features will be persisted in the metadata. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00270">NeutrinoIdTool.h:270</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2e7069c4348cfa50dfebc26eba742cf1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::Collect2DHits </td>
          <td>(</td>
          <td class="paramtype">const pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>pfos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::CaloHitList &amp;&#160;</td>
          <td class="paramname"><em>reconstructedCaloHitList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pandora::CaloHitSet &amp;&#160;</td>
          <td class="paramname"><em>reconstructableCaloHitSet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Collect all 2D hits in a supplied list of Pfos and push them on to an existing hit list, check so not to double count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pfos</td><td>input list of pfos </td></tr>
    <tr><td class="paramname">reconstructedCaloHitList</td><td>output list of all 2d hits in the input pfos </td></tr>
    <tr><td class="paramname">reconstructableCaloHitSet</td><td>set of reconstructable calo hits </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00165">165</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    CaloHitList collectedHits;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d3/d10/classlar__content_1_1LArPfoHelper.html#a475708707d11c6a57c3e9213d2f777fe">LArPfoHelper::GetCaloHits</a>(pfos, TPC_VIEW_U, collectedHits);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../d3/d10/classlar__content_1_1LArPfoHelper.html#a475708707d11c6a57c3e9213d2f777fe">LArPfoHelper::GetCaloHits</a>(pfos, TPC_VIEW_V, collectedHits);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../d3/d10/classlar__content_1_1LArPfoHelper.html#a475708707d11c6a57c3e9213d2f777fe">LArPfoHelper::GetCaloHits</a>(pfos, TPC_VIEW_W, collectedHits);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : collectedHits)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pParentHit = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>CaloHit *<span class="keyword">&gt;</span>(pCaloHit-&gt;GetParentAddress());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (!reconstructableCaloHitSet.count(pParentHit))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// Ensure no hits have been double counted</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (std::find(reconstructedCaloHitList.begin(), reconstructedCaloHitList.end(), pParentHit) == reconstructedCaloHitList.end())</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            reconstructedCaloHitList.push_back(pParentHit);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArPfoHelper_html_a475708707d11c6a57c3e9213d2f777fe"><div class="ttname"><a href="../../d3/d10/classlar__content_1_1LArPfoHelper.html#a475708707d11c6a57c3e9213d2f777fe">lar_content::LArPfoHelper::GetCaloHits</a></div><div class="ttdeci">static void GetCaloHits(const pandora::PfoList &amp;pfoList, const pandora::HitType &amp;hitType, pandora::CaloHitList &amp;caloHitList)</div><div class="ttdoc">Get a list of calo hits of a particular hit type from a list of pfos. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2381b9880bb3bed6daa58b65c0ea611f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::CountNeutrinoInducedHits </td>
          <td>(</td>
          <td class="paramtype">const pandora::CaloHitList &amp;&#160;</td>
          <td class="paramname"><em>caloHitList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count the number of neutrino induced hits in a given list using MC information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caloHitSet</td><td>input list of calo hits</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of neutrino induced hits in the input list </dd></dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00187">187</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nNuHits(0);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> CaloHit *<span class="keyword">const</span> pCaloHit : caloHitList)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a1f66058246ca58340ca7f0dc68340660">LArMCParticleHelper::IsNeutrino</a>(<a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a5314cda1ff5cae45c84e1195bd3424b3">LArMCParticleHelper::GetParentMCParticle</a>(MCParticleHelper::GetMainMCParticle(pCaloHit))))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                nNuHits++;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">catch</span> (<span class="keyword">const</span> StatusCodeException &amp;)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> nNuHits;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a5314cda1ff5cae45c84e1195bd3424b3"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a5314cda1ff5cae45c84e1195bd3424b3">lar_content::LArMCParticleHelper::GetParentMCParticle</a></div><div class="ttdeci">static const pandora::MCParticle * GetParentMCParticle(const pandora::MCParticle *const pMCParticle)</div><div class="ttdoc">Get the parent mc particle. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l00232">LArMCParticleHelper.cc:232</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a1f66058246ca58340ca7f0dc68340660"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a1f66058246ca58340ca7f0dc68340660">lar_content::LArMCParticleHelper::IsNeutrino</a></div><div class="ttdeci">static bool IsNeutrino(const pandora::MCParticle *const pMCParticle)</div><div class="ttdoc">Whether a mc particle is a neutrino or antineutrino. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l00131">LArMCParticleHelper.cc:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aebc7823fb1115ee7c591ab4ccb898786"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::GetBestMCSliceIndex </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>nuSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>crSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;&#160;</td>
          <td class="paramname"><em>bestSliceIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the slice with the most neutrino induced hits using Monte-Carlo information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the master algorithm </td></tr>
    <tr><td class="paramname">nuSliceHypotheses</td><td>the input neutrino slice hypotheses </td></tr>
    <tr><td class="paramname">crSliceHypotheses</td><td>the input cosmic slice hypotheses </td></tr>
    <tr><td class="paramname">bestSliceIndex</td><td>the index of the slice with the most neutrino hits</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>does the best slice pass the quality cuts for training? </dd></dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00097">97</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nHitsInBestSlice(0), nNuHitsInBestSlice(0);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Get all hits in all slices to find true number of mc hits</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">const</span> CaloHitList *pAllReconstructedCaloHitList(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::GetCurrentList(*pAlgorithm, pAllReconstructedCaloHitList));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> MCParticleList *pMCParticleList(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::GetCurrentList(*pAlgorithm, pMCParticleList));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// Obtain map: [mc particle -&gt; primary mc particle]</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a9142c948a9766b9af61e09becf93cf92">LArMCParticleHelper::MCRelationMap</a> mcToPrimaryMCMap;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a93fee88a5ffdce30da66b6babc7ed78e">LArMCParticleHelper::GetMCPrimaryMap</a>(pMCParticleList, mcToPrimaryMCMap);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Remove non-reconstructable hits, e.g. those downstream of a neutron</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    CaloHitList reconstructableCaloHitList;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    LArMCParticleHelper::PrimaryParameters parameters;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a7917077e78aec683a9779d8f5bac1997">LArMCParticleHelper::SelectCaloHits</a>(pAllReconstructedCaloHitList, mcToPrimaryMCMap, reconstructableCaloHitList,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        parameters.m_selectInputHits, parameters.m_maxPhotonPropagation);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> nuNHitsTotal(this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2381b9880bb3bed6daa58b65c0ea611f">CountNeutrinoInducedHits</a>(reconstructableCaloHitList));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">const</span> CaloHitSet reconstructableCaloHitSet(reconstructableCaloHitList.begin(), reconstructableCaloHitList.end());</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sliceIndex = 0, nSlices = nuSliceHypotheses.size(); sliceIndex &lt; nSlices; ++sliceIndex)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        CaloHitList reconstructedCaloHitList;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2e7069c4348cfa50dfebc26eba742cf1">Collect2DHits</a>(crSliceHypotheses.at(sliceIndex), reconstructedCaloHitList, reconstructableCaloHitSet);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> ParticleFlowObject *<span class="keyword">const</span> pNeutrino : nuSliceHypotheses.at(sliceIndex))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">const</span> PfoList &amp;nuFinalStates(pNeutrino-&gt;GetDaughterPfoList());</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2e7069c4348cfa50dfebc26eba742cf1">Collect2DHits</a>(nuFinalStates, reconstructedCaloHitList, reconstructableCaloHitSet);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nNuHits(this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2381b9880bb3bed6daa58b65c0ea611f">CountNeutrinoInducedHits</a>(reconstructedCaloHitList));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (nNuHits &gt; nNuHitsInBestSlice)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            nNuHitsInBestSlice = nNuHits;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            nHitsInBestSlice = reconstructedCaloHitList.size();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            bestSliceIndex = sliceIndex;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// ATTN for events with no neutrino induced hits, default neutrino purity and completeness to zero</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> purity(nHitsInBestSlice &gt; 0 ? static_cast&lt;float&gt;(nNuHitsInBestSlice) / static_cast&lt;float&gt;(nHitsInBestSlice) : 0.f);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completeness(nuNHitsTotal &gt; 0 ? static_cast&lt;float&gt;(nNuHitsInBestSlice) / static_cast&lt;float&gt;(nuNHitsTotal) : 0.f);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a30910f199b295d3feb952c16f425bbcd">PassesQualityCuts</a>(pAlgorithm, purity, completeness);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a30910f199b295d3feb952c16f425bbcd"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a30910f199b295d3feb952c16f425bbcd">lar_content::NeutrinoIdTool::PassesQualityCuts</a></div><div class="ttdeci">bool PassesQualityCuts(const pandora::Algorithm *const pAlgorithm, const float purity, const float completeness) const </div><div class="ttdoc">Determine if the event passes the selection cuts for training and has the required NUANCE code...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00152">NeutrinoIdTool.cc:152</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a93fee88a5ffdce30da66b6babc7ed78e"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a93fee88a5ffdce30da66b6babc7ed78e">lar_content::LArMCParticleHelper::GetMCPrimaryMap</a></div><div class="ttdeci">static void GetMCPrimaryMap(const pandora::MCParticleList *const pMCParticleList, MCRelationMap &amp;mcPrimaryMap)</div><div class="ttdoc">Get mapping from individual mc particles (in a provided list) and their primary parent mc particles...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l00418">LArMCParticleHelper.cc:418</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a2e7069c4348cfa50dfebc26eba742cf1"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2e7069c4348cfa50dfebc26eba742cf1">lar_content::NeutrinoIdTool::Collect2DHits</a></div><div class="ttdeci">void Collect2DHits(const pandora::PfoList &amp;pfos, pandora::CaloHitList &amp;reconstructedCaloHitList, const pandora::CaloHitSet &amp;reconstructableCaloHitSet) const </div><div class="ttdoc">Collect all 2D hits in a supplied list of Pfos and push them on to an existing hit list...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00165">NeutrinoIdTool.cc:165</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a2381b9880bb3bed6daa58b65c0ea611f"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2381b9880bb3bed6daa58b65c0ea611f">lar_content::NeutrinoIdTool::CountNeutrinoInducedHits</a></div><div class="ttdeci">unsigned int CountNeutrinoInducedHits(const pandora::CaloHitList &amp;caloHitList) const </div><div class="ttdoc">Count the number of neutrino induced hits in a given list using MC information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00187">NeutrinoIdTool.cc:187</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a9142c948a9766b9af61e09becf93cf92"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a9142c948a9766b9af61e09becf93cf92">lar_content::LArMCParticleHelper::MCRelationMap</a></div><div class="ttdeci">std::unordered_map&lt; const pandora::MCParticle *, const pandora::MCParticle * &gt; MCRelationMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7f/LArMCParticleHelper_8h_source.html#l00027">LArMCParticleHelper.h:27</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a7917077e78aec683a9779d8f5bac1997"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a7917077e78aec683a9779d8f5bac1997">lar_content::LArMCParticleHelper::SelectCaloHits</a></div><div class="ttdeci">static void SelectCaloHits(const pandora::CaloHitList *const pCaloHitList, const MCRelationMap &amp;mcToTargetMCMap, pandora::CaloHitList &amp;selectedCaloHitList, const bool selectInputHits, const float maxPhotonPropagation)</div><div class="ttdoc">Select a subset of calo hits representing those that represent &amp;quot;reconstructable&amp;quot; regions of the event...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l01116">LArMCParticleHelper.cc:1116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a778f8000ed023db54971b7f395c8ad1a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::GetNuanceCode </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use the current MCParticle list to get the nuance code of the neutrino in the event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the master algorithm</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the nuance code of the event </dd></dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00208">208</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">const</span> MCParticleList *pMCParticleList = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::GetCurrentList(*pAlgorithm, pMCParticleList));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../d1/d8f/namespacelar__pandora.html#a8c0ecd9a771b4322f87c38a73fae59dd">MCParticleVector</a> trueNeutrinos;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#adb3d8ae6a4a3eeaa50fa03e1e1511f45">LArMCParticleHelper::GetTrueNeutrinos</a>(pMCParticleList, trueNeutrinos);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (trueNeutrinos.size() != 1)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;NeutrinoIdTool::GetNuanceCode - Error: number of true neutrinos in event must be exactly one&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_OUT_OF_RANGE);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a510280cbf79391b0afadde623a5dbabd">LArMCParticleHelper::GetNuanceCode</a>(trueNeutrinos.front());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_a510280cbf79391b0afadde623a5dbabd"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#a510280cbf79391b0afadde623a5dbabd">lar_content::LArMCParticleHelper::GetNuanceCode</a></div><div class="ttdeci">static unsigned int GetNuanceCode(const pandora::MCParticle *const pMCParticle)</div><div class="ttdoc">Get the nuance code of an MCParticle. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l00119">LArMCParticleHelper.cc:119</a></div></div>
<div class="ttc" id="namespacelar__pandora_html_a8c0ecd9a771b4322f87c38a73fae59dd"><div class="ttname"><a href="../../d1/d8f/namespacelar__pandora.html#a8c0ecd9a771b4322f87c38a73fae59dd">lar_pandora::MCParticleVector</a></div><div class="ttdeci">std::vector&lt; art::Ptr&lt; simb::MCParticle &gt; &gt; MCParticleVector</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d35/LArPandoraHelper_8h_source.html#l00067">LArPandoraHelper.h:67</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMCParticleHelper_html_adb3d8ae6a4a3eeaa50fa03e1e1511f45"><div class="ttname"><a href="../../da/df6/classlar__content_1_1LArMCParticleHelper.html#adb3d8ae6a4a3eeaa50fa03e1e1511f45">lar_content::LArMCParticleHelper::GetTrueNeutrinos</a></div><div class="ttdeci">static void GetTrueNeutrinos(const pandora::MCParticleList *const pMCParticleList, pandora::MCParticleVector &amp;trueNeutrinos)</div><div class="ttdoc">Get neutrino MC particles from an input MC particle list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/LArMCParticleHelper_8cc_source.html#l00206">LArMCParticleHelper.cc:206</a></div></div>
<div class="ttc" id="messageservice_8fcl_html_a6699b4dbd72f548e48d81c88697d35a6"><div class="ttname"><a href="../../d8/df5/messageservice_8fcl.html#a6699b4dbd72f548e48d81c88697d35a6">cout</a></div><div class="ttdeci">BEGIN_PROLOG could also be cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df5/messageservice_8fcl_source.html#l00010">messageservice.fcl:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a14c195409b1d2006396bb49fbb0e0d2a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::GetSliceFeatures </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">NeutrinoIdTool</a>&lt; T &gt; *const&#160;</td>
          <td class="paramname"><em>pTool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>nuSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>crSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a> &amp;&#160;</td>
          <td class="paramname"><em>sliceFeaturesVector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the features of each slice. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pTool</td><td>the address of the this NeutrinoId tool </td></tr>
    <tr><td class="paramname">nuSliceHypotheses</td><td>the input neutrino slice hypotheses </td></tr>
    <tr><td class="paramname">crSliceHypotheses</td><td>the input cosmic slice hypotheses </td></tr>
    <tr><td class="paramname">sliceFeaturesVector</td><td>vector to hold the slice features </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00087">87</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sliceIndex = 0, nSlices = nuSliceHypotheses.size(); sliceIndex &lt; nSlices; ++sliceIndex)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        sliceFeaturesVector.push_back(SliceFeatures(nuSliceHypotheses.at(sliceIndex), crSliceHypotheses.at(sliceIndex), pTool));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a30910f199b295d3feb952c16f425bbcd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::PassesQualityCuts </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>purity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>completeness</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if the event passes the selection cuts for training and has the required NUANCE code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the master algorithm </td></tr>
    <tr><td class="paramname">purity</td><td>purity of best slice </td></tr>
    <tr><td class="paramname">completeness</td><td>completeness of best slice</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>does the evenr pass the quality cuts on purity and completeness and has the required NUANCE code </dd></dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00152">152</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (purity &lt; <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">m_minPurity</a> || completeness &lt; <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">m_minCompleteness</a>)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">m_selectNuanceCode</a> &amp;&amp; (this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a778f8000ed023db54971b7f395c8ad1a">GetNuanceCode</a>(pAlgorithm) != <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">m_nuance</a>))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a778f8000ed023db54971b7f395c8ad1a"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a778f8000ed023db54971b7f395c8ad1a">lar_content::NeutrinoIdTool::GetNuanceCode</a></div><div class="ttdeci">int GetNuanceCode(const pandora::Algorithm *const pAlgorithm) const </div><div class="ttdoc">Use the current MCParticle list to get the nuance code of the neutrino in the event. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00208">NeutrinoIdTool.cc:208</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_accb73316acbb4ac8548a0221285061db"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">lar_content::NeutrinoIdTool::m_minCompleteness</a></div><div class="ttdeci">float m_minCompleteness</div><div class="ttdoc">Minimum completeness of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00264">NeutrinoIdTool.h:264</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a420a67ec821476a58247908391f3477e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">lar_content::NeutrinoIdTool::m_selectNuanceCode</a></div><div class="ttdeci">bool m_selectNuanceCode</div><div class="ttdoc">Should select training events by nuance code. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00261">NeutrinoIdTool.h:261</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa8c86ae24fa0fc96faf0aa63adb9f1d6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">lar_content::NeutrinoIdTool::m_nuance</a></div><div class="ttdeci">int m_nuance</div><div class="ttdoc">Nuance code to select for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00262">NeutrinoIdTool.h:262</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a5545f6b3e0e0d208b3dd6dce28a184d8"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">lar_content::NeutrinoIdTool::m_minPurity</a></div><div class="ttdeci">float m_minPurity</div><div class="ttdoc">Minimum purity of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00263">NeutrinoIdTool.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a6364324d5ad9caed1810ae97e30e79"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::ReadSettings </td>
          <td>(</td>
          <td class="paramtype">const pandora::TiXmlHandle&#160;</td>
          <td class="paramname"><em>xmlHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00593">593</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;{</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;UseTrainingMode&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a>));</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        PANDORA_RETURN_RESULT_IF(STATUS_CODE_SUCCESS, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;TrainingOutputFileName&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#af59dfc78eb0396a0734a609f0ce8cd3e">m_trainingOutputFile</a>));</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinimumPurity&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">m_minPurity</a>));</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinimumCompleteness&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">m_minCompleteness</a>));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;SelectNuanceCode&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">m_selectNuanceCode</a>));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">m_selectNuanceCode</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        PANDORA_RETURN_RESULT_IF(STATUS_CODE_SUCCESS, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;NuanceCode&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">m_nuance</a>));</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MinimumNeutrinoProbability&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">m_minProbability</a>));</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MaximumNeutrinos&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">m_maxNeutrinos</a>));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;PersistFeatures&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">m_persistFeatures</a>));</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    PANDORA_RETURN_RESULT_IF_AND_IF(STATUS_CODE_SUCCESS, STATUS_CODE_NOT_FOUND, !=,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;FilePathEnvironmentVariable&quot;</span>, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">m_filePathEnvironmentVariable</a>));</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a>)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        std::string mvaName;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        PANDORA_RETURN_RESULT_IF(STATUS_CODE_SUCCESS, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MvaName&quot;</span>, mvaName));</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        std::string mvaFileName;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        PANDORA_RETURN_RESULT_IF(STATUS_CODE_SUCCESS, !=, XmlHelper::ReadValue(xmlHandle, <span class="stringliteral">&quot;MvaFileName&quot;</span>, mvaFileName));</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keyword">const</span> std::string fullMvaFileName(<a class="code" href="../../da/da6/classlar__content_1_1LArFileHelper.html#ad593bc6f196e2e056bf6cbc15fec590f">LArFileHelper::FindFileInPath</a>(mvaFileName, <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">m_filePathEnvironmentVariable</a>));</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a669977b566c1ee2d6691a9d1e8d3aa">m_mva</a>.Initialize(fullMvaFileName, mvaName);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a8a669977b566c1ee2d6691a9d1e8d3aa"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a669977b566c1ee2d6691a9d1e8d3aa">lar_content::NeutrinoIdTool::m_mva</a></div><div class="ttdeci">T m_mva</div><div class="ttdoc">The mva. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00272">NeutrinoIdTool.h:272</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a934b1fd1fdd7f4cc80878d7f0c42703e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">lar_content::NeutrinoIdTool::m_minProbability</a></div><div class="ttdeci">float m_minProbability</div><div class="ttdoc">Minimum probability required to classify a slice as the neutrino. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00267">NeutrinoIdTool.h:267</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_accb73316acbb4ac8548a0221285061db"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#accb73316acbb4ac8548a0221285061db">lar_content::NeutrinoIdTool::m_minCompleteness</a></div><div class="ttdeci">float m_minCompleteness</div><div class="ttdoc">Minimum completeness of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00264">NeutrinoIdTool.h:264</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a869d982b8dc5d0fb5b85bae760318b5f"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a869d982b8dc5d0fb5b85bae760318b5f">lar_content::NeutrinoIdTool::m_filePathEnvironmentVariable</a></div><div class="ttdeci">std::string m_filePathEnvironmentVariable</div><div class="ttdoc">The environment variable providing a list of paths to mva files. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00273">NeutrinoIdTool.h:273</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a420a67ec821476a58247908391f3477e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a420a67ec821476a58247908391f3477e">lar_content::NeutrinoIdTool::m_selectNuanceCode</a></div><div class="ttdeci">bool m_selectNuanceCode</div><div class="ttdoc">Should select training events by nuance code. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00261">NeutrinoIdTool.h:261</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_ac1ca1abb66008ea2f005f5b586bf1d14"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">lar_content::NeutrinoIdTool::m_maxNeutrinos</a></div><div class="ttdeci">unsigned int m_maxNeutrinos</div><div class="ttdoc">The maximum number of neutrinos to select in any one event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00268">NeutrinoIdTool.h:268</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa8c86ae24fa0fc96faf0aa63adb9f1d6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa8c86ae24fa0fc96faf0aa63adb9f1d6">lar_content::NeutrinoIdTool::m_nuance</a></div><div class="ttdeci">int m_nuance</div><div class="ttdoc">Nuance code to select for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00262">NeutrinoIdTool.h:262</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a35e399a6ed46d693e06fd8dda3a4cdb6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">lar_content::NeutrinoIdTool::m_useTrainingMode</a></div><div class="ttdeci">bool m_useTrainingMode</div><div class="ttdoc">Should use training mode. If true, training examples will be written to the output file...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00259">NeutrinoIdTool.h:259</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a5545f6b3e0e0d208b3dd6dce28a184d8"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a5545f6b3e0e0d208b3dd6dce28a184d8">lar_content::NeutrinoIdTool::m_minPurity</a></div><div class="ttdeci">float m_minPurity</div><div class="ttdoc">Minimum purity of the best slice to use event for training. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00263">NeutrinoIdTool.h:263</a></div></div>
<div class="ttc" id="classlar__content_1_1LArFileHelper_html_ad593bc6f196e2e056bf6cbc15fec590f"><div class="ttname"><a href="../../da/da6/classlar__content_1_1LArFileHelper.html#ad593bc6f196e2e056bf6cbc15fec590f">lar_content::LArFileHelper::FindFileInPath</a></div><div class="ttdeci">static std::string FindFileInPath(const std::string &amp;unqualifiedFileName, const std::string &amp;environmentVariable, const std::string &amp;delimiter=&quot;:&quot;)</div><div class="ttdoc">Find the fully-qualified file name by searching through a list of delimiter-separated paths in a name...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df1/LArFileHelper_8cc_source.html#l00021">LArFileHelper.cc:21</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa1131e8c75f8627382b1d02009957c48"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">lar_content::NeutrinoIdTool::m_persistFeatures</a></div><div class="ttdeci">bool m_persistFeatures</div><div class="ttdoc">If true, the mva features will be persisted in the metadata. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00270">NeutrinoIdTool.h:270</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_af59dfc78eb0396a0734a609f0ce8cd3e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#af59dfc78eb0396a0734a609f0ce8cd3e">lar_content::NeutrinoIdTool::m_trainingOutputFile</a></div><div class="ttdeci">std::string m_trainingOutputFile</div><div class="ttdoc">Output file name for training examples. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00260">NeutrinoIdTool.h:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a38656736f1c943f5dfdb97ccf89cfc18"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::SelectAllPfos </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>hypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>selectedPfos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select all pfos under the same hypothesis. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the master algorithm </td></tr>
    <tr><td class="paramname">hypotheses</td><td>the lists of slices under a certain hypothesis </td></tr>
    <tr><td class="paramname">selectedPfos</td><td>the list of pfos to populate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00228">228</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> PfoList &amp;pfos : hypotheses)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> ParticleFlowObject *<span class="keyword">const</span> pPfo : pfos)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            object_creation::ParticleFlowObject::Metadata metadata;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            metadata.m_propertiesToAdd[<span class="stringliteral">&quot;NuScore&quot;</span>] = -1.f;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::ParticleFlowObject::AlterMetadata(*pAlgorithm, pPfo, metadata));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">SelectPfos</a>(pfos, selectedPfos);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a6e9b221993d970710ab902792cb5a1d4"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">lar_content::NeutrinoIdTool::SelectPfos</a></div><div class="ttdeci">void SelectPfos(const pandora::PfoList &amp;pfos, pandora::PfoList &amp;selectedPfos) const </div><div class="ttdoc">Add the given pfos to the selected Pfo list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00320">NeutrinoIdTool.cc:320</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa2e9353284706dc119f1585cddf14ee"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::SelectOutputPfos </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>nuSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>crSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>selectedPfos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select which reconstruction hypotheses to use; neutrino outcomes or cosmic-ray muon outcomes for each slice. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>the address of the master instance, used to access MCParticles when in training mode </td></tr>
    <tr><td class="paramname">nuSliceHypotheses</td><td>the parent pfos representing the neutrino outcome for each slice </td></tr>
    <tr><td class="paramname">crSliceHypotheses</td><td>the parent pfos representing the cosmic-ray muon outcome for each slice </td></tr>
    <tr><td class="paramname">sliceNuPfos</td><td>to receive the list of selected pfos </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d5/d36/classlar__content_1_1SliceIdBaseTool.html#a4f4d09e543885c33146020df2b676858">lar_content::SliceIdBaseTool</a>.</p>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00045">45</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (nuSliceHypotheses.size() != crSliceHypotheses.size())</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">throw</span> StatusCodeException(STATUS_CODE_INVALID_PARAMETER);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSlices(nuSliceHypotheses.size());</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (nSlices == 0)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a> sliceFeaturesVector;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a14c195409b1d2006396bb49fbb0e0d2a">GetSliceFeatures</a>(<span class="keyword">this</span>, nuSliceHypotheses, crSliceHypotheses, sliceFeaturesVector);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">m_useTrainingMode</a>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="comment">// ATTN in training mode, just return everything as a cosmic-ray</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a38656736f1c943f5dfdb97ccf89cfc18">SelectAllPfos</a>(pAlgorithm, crSliceHypotheses, selectedPfos);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bestSliceIndex(std::numeric_limits&lt;unsigned int&gt;::max());</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aebc7823fb1115ee7c591ab4ccb898786">GetBestMCSliceIndex</a>(pAlgorithm, nuSliceHypotheses, crSliceHypotheses, bestSliceIndex))</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sliceIndex = 0; sliceIndex &lt; nSlices; ++sliceIndex)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keyword">const</span> SliceFeatures &amp;features(sliceFeaturesVector.at(sliceIndex));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keywordflow">if</span> (!features.IsFeatureVectorAvailable())</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <a class="code" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a33cd1e27565c8646ce7ac82d9ed92a25">LArMvaHelper::MvaFeatureVector</a> featureVector;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            features.GetFeatureVector(featureVector);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <a class="code" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a7c3a7e99390370be2c02088f9e094439">LArMvaHelper::ProduceTrainingExample</a>(<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#af59dfc78eb0396a0734a609f0ce8cd3e">m_trainingOutputFile</a>, sliceIndex == bestSliceIndex, featureVector);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a3bbd557d6b43d8e663600c1e9fbd12ed">SelectPfosByProbability</a>(pAlgorithm, nuSliceHypotheses, crSliceHypotheses, sliceFeaturesVector, selectedPfos);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1LArMvaHelper_html_a33cd1e27565c8646ce7ac82d9ed92a25"><div class="ttname"><a href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a33cd1e27565c8646ce7ac82d9ed92a25">lar_content::LArMvaHelper::MvaFeatureVector</a></div><div class="ttdeci">MvaTypes::MvaFeatureVector MvaFeatureVector</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/LArMvaHelper_8h_source.html#l00058">LArMvaHelper.h:58</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aebc7823fb1115ee7c591ab4ccb898786"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aebc7823fb1115ee7c591ab4ccb898786">lar_content::NeutrinoIdTool::GetBestMCSliceIndex</a></div><div class="ttdeci">bool GetBestMCSliceIndex(const pandora::Algorithm *const pAlgorithm, const SliceHypotheses &amp;nuSliceHypotheses, const SliceHypotheses &amp;crSliceHypotheses, unsigned int &amp;bestSliceIndex) const </div><div class="ttdoc">Get the slice with the most neutrino induced hits using Monte-Carlo information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00097">NeutrinoIdTool.cc:97</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a38656736f1c943f5dfdb97ccf89cfc18"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a38656736f1c943f5dfdb97ccf89cfc18">lar_content::NeutrinoIdTool::SelectAllPfos</a></div><div class="ttdeci">void SelectAllPfos(const pandora::Algorithm *const pAlgorithm, const SliceHypotheses &amp;hypotheses, pandora::PfoList &amp;selectedPfos) const </div><div class="ttdoc">Select all pfos under the same hypothesis. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00228">NeutrinoIdTool.cc:228</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMvaHelper_html_a7c3a7e99390370be2c02088f9e094439"><div class="ttname"><a href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a7c3a7e99390370be2c02088f9e094439">lar_content::LArMvaHelper::ProduceTrainingExample</a></div><div class="ttdeci">static pandora::StatusCode ProduceTrainingExample(const std::string &amp;trainingOutputFile, const bool result, TLISTS &amp;&amp;...featureLists)</div><div class="ttdoc">Produce a training example with the given features and result. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/LArMvaHelper_8h_source.html#l00198">LArMvaHelper.h:198</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a14c195409b1d2006396bb49fbb0e0d2a"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a14c195409b1d2006396bb49fbb0e0d2a">lar_content::NeutrinoIdTool::GetSliceFeatures</a></div><div class="ttdeci">void GetSliceFeatures(const NeutrinoIdTool *const pTool, const SliceHypotheses &amp;nuSliceHypotheses, const SliceHypotheses &amp;crSliceHypotheses, SliceFeaturesVector &amp;sliceFeaturesVector) const </div><div class="ttdoc">Get the features of each slice. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00087">NeutrinoIdTool.cc:87</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a35e399a6ed46d693e06fd8dda3a4cdb6"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a35e399a6ed46d693e06fd8dda3a4cdb6">lar_content::NeutrinoIdTool::m_useTrainingMode</a></div><div class="ttdeci">bool m_useTrainingMode</div><div class="ttdoc">Should use training mode. If true, training examples will be written to the output file...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00259">NeutrinoIdTool.h:259</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a3bbd557d6b43d8e663600c1e9fbd12ed"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a3bbd557d6b43d8e663600c1e9fbd12ed">lar_content::NeutrinoIdTool::SelectPfosByProbability</a></div><div class="ttdeci">void SelectPfosByProbability(const pandora::Algorithm *const pAlgorithm, const SliceHypotheses &amp;nuSliceHypotheses, const SliceHypotheses &amp;crSliceHypotheses, const SliceFeaturesVector &amp;sliceFeaturesVector, pandora::PfoList &amp;selectedPfos) const </div><div class="ttdoc">Select pfos based on the probability that their slice contains a neutrino interaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00246">NeutrinoIdTool.cc:246</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_ad0f69f726246a77f0067f13f54af03fe"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">lar_content::NeutrinoIdTool::SliceFeaturesVector</a></div><div class="ttdeci">std::vector&lt; SliceFeatures &gt; SliceFeaturesVector</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00162">NeutrinoIdTool.h:162</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_af59dfc78eb0396a0734a609f0ce8cd3e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#af59dfc78eb0396a0734a609f0ce8cd3e">lar_content::NeutrinoIdTool::m_trainingOutputFile</a></div><div class="ttdeci">std::string m_trainingOutputFile</div><div class="ttdoc">Output file name for training examples. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00260">NeutrinoIdTool.h:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e9b221993d970710ab902792cb5a1d4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::SelectPfos </td>
          <td>(</td>
          <td class="paramtype">const pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>pfos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>selectedPfos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the given pfos to the selected Pfo list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pfos</td><td>the pfos to select </td></tr>
    <tr><td class="paramname">selectedPfos</td><td>the list of pfos to populate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00320">320</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    selectedPfos.insert(selectedPfos.end(), pfos.begin(), pfos.end());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3bbd557d6b43d8e663600c1e9fbd12ed"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::SelectPfosByProbability </td>
          <td>(</td>
          <td class="paramtype">const pandora::Algorithm *const&#160;</td>
          <td class="paramname"><em>pAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>nuSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/de7/namespacelar__content.html#a613f1a6b0a0f403a30b8f608a5535eb0">SliceHypotheses</a> &amp;&#160;</td>
          <td class="paramname"><em>crSliceHypotheses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ad0f69f726246a77f0067f13f54af03fe">SliceFeaturesVector</a> &amp;&#160;</td>
          <td class="paramname"><em>sliceFeaturesVector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pandora::PfoList &amp;&#160;</td>
          <td class="paramname"><em>selectedPfos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select pfos based on the probability that their slice contains a neutrino interaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pAlgorithm</td><td>address of the master algorithm </td></tr>
    <tr><td class="paramname">nuSliceHypotheses</td><td>the input neutrino slice hypotheses </td></tr>
    <tr><td class="paramname">crSliceHypotheses</td><td>the input cosmic slice hypotheses </td></tr>
    <tr><td class="paramname">sliceFeaturesVector</td><td>vector holding the slice features </td></tr>
    <tr><td class="paramname">selectedPfos</td><td>the list of pfos to populate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00246">246</a> of file <a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Calculate the probability of each slice that passes the minimum probability cut</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    std::vector&lt;UintFloatPair&gt; sliceIndexProbabilityPairs;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sliceIndex = 0, nSlices = nuSliceHypotheses.size(); sliceIndex &lt; nSlices; ++sliceIndex)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> nuProbability(sliceFeaturesVector.at(sliceIndex).GetNeutrinoProbability(<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a669977b566c1ee2d6691a9d1e8d3aa">m_mva</a>));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> ParticleFlowObject *<span class="keyword">const</span> pPfo : crSliceHypotheses.at(sliceIndex))</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            object_creation::ParticleFlowObject::Metadata metadata;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            metadata.m_propertiesToAdd[<span class="stringliteral">&quot;NuScore&quot;</span>] = nuProbability;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">m_persistFeatures</a>)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <a class="code" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a285b21dd1b00513c6f2bfe2e3224e77a">LArMvaHelper::MvaFeatureMap</a> featureMap;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                sliceFeaturesVector.at(sliceIndex).GetFeatureMap(featureMap);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;[<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>, <a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>] : featureMap)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    metadata.m_propertiesToAdd[<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>] = <a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::ParticleFlowObject::AlterMetadata(*pAlgorithm, pPfo, metadata));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> ParticleFlowObject *<span class="keyword">const</span> pPfo : nuSliceHypotheses.at(sliceIndex))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            object_creation::ParticleFlowObject::Metadata metadata;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            metadata.m_propertiesToAdd[<span class="stringliteral">&quot;NuScore&quot;</span>] = nuProbability;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">m_persistFeatures</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <a class="code" href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a285b21dd1b00513c6f2bfe2e3224e77a">LArMvaHelper::MvaFeatureMap</a> featureMap;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                sliceFeaturesVector.at(sliceIndex).GetFeatureMap(featureMap);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;[<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>, <a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>] : featureMap)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    metadata.m_propertiesToAdd[<a class="code" href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a>] = <a class="code" href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            PANDORA_THROW_RESULT_IF(STATUS_CODE_SUCCESS, !=, PandoraContentApi::ParticleFlowObject::AlterMetadata(*pAlgorithm, pPfo, metadata));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (nuProbability &lt; <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">m_minProbability</a>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">SelectPfos</a>(crSliceHypotheses.at(sliceIndex), selectedPfos);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        sliceIndexProbabilityPairs.push_back(<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a>(sliceIndex, nuProbability));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// Sort the slices by probability</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    std::sort(sliceIndexProbabilityPairs.begin(), sliceIndexProbabilityPairs.end(),</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        [](<span class="keyword">const</span> <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a> &amp;<a class="code" href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a>, <span class="keyword">const</span> <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a> &amp;b) { <span class="keywordflow">return</span> (a.second &gt; b.second); });</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// Select the first m_maxNeutrinos as neutrinos, and the rest as cosmic</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nNuSlices(0);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">UintFloatPair</a> &amp;slice : sliceIndexProbabilityPairs)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (nNuSlices &lt; <a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">m_maxNeutrinos</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">SelectPfos</a>(nuSliceHypotheses.at(slice.first), selectedPfos);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            nNuSlices++;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        this-&gt;<a class="code" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">SelectPfos</a>(crSliceHypotheses.at(slice.first), selectedPfos);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a8a669977b566c1ee2d6691a9d1e8d3aa"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a8a669977b566c1ee2d6691a9d1e8d3aa">lar_content::NeutrinoIdTool::m_mva</a></div><div class="ttdeci">T m_mva</div><div class="ttdoc">The mva. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00272">NeutrinoIdTool.h:272</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a934b1fd1fdd7f4cc80878d7f0c42703e"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a934b1fd1fdd7f4cc80878d7f0c42703e">lar_content::NeutrinoIdTool::m_minProbability</a></div><div class="ttdeci">float m_minProbability</div><div class="ttdoc">Minimum probability required to classify a slice as the neutrino. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00267">NeutrinoIdTool.h:267</a></div></div>
<div class="ttc" id="classlar__content_1_1LArMvaHelper_html_a285b21dd1b00513c6f2bfe2e3224e77a"><div class="ttname"><a href="../../d1/d13/classlar__content_1_1LArMvaHelper.html#a285b21dd1b00513c6f2bfe2e3224e77a">lar_content::LArMvaHelper::MvaFeatureMap</a></div><div class="ttdeci">std::map&lt; std::string, double &gt; MvaFeatureMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da1/LArMvaHelper_8h_source.html#l00059">LArMvaHelper.h:59</a></div></div>
<div class="ttc" id="decode__signalprocess__icarus_8fcl_html_a2a105cb669129f9c63eb7a4c15bf2d9b"><div class="ttname"><a href="../../d0/d8f/decode__signalprocess__icarus_8fcl.html#a2a105cb669129f9c63eb7a4c15bf2d9b">a</a></div><div class="ttdeci">process_name gaushit a</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8f/decode__signalprocess__icarus_8fcl_source.html#l00037">decode_signalprocess_icarus.fcl:37</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_ac1ca1abb66008ea2f005f5b586bf1d14"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#ac1ca1abb66008ea2f005f5b586bf1d14">lar_content::NeutrinoIdTool::m_maxNeutrinos</a></div><div class="ttdeci">unsigned int m_maxNeutrinos</div><div class="ttdoc">The maximum number of neutrinos to select in any one event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00268">NeutrinoIdTool.h:268</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a2c042bdb0a07381264c57c6d83b1a86b"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a2c042bdb0a07381264c57c6d83b1a86b">lar_content::NeutrinoIdTool::UintFloatPair</a></div><div class="ttdeci">std::pair&lt; unsigned int, float &gt; UintFloatPair</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00161">NeutrinoIdTool.h:161</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_a6e9b221993d970710ab902792cb5a1d4"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#a6e9b221993d970710ab902792cb5a1d4">lar_content::NeutrinoIdTool::SelectPfos</a></div><div class="ttdeci">void SelectPfos(const pandora::PfoList &amp;pfos, pandora::PfoList &amp;selectedPfos) const </div><div class="ttdoc">Add the given pfos to the selected Pfo list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da8/NeutrinoIdTool_8cc_source.html#l00320">NeutrinoIdTool.cc:320</a></div></div>
<div class="ttc" id="classlar__content_1_1NeutrinoIdTool_html_aa1131e8c75f8627382b1d02009957c48"><div class="ttname"><a href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html#aa1131e8c75f8627382b1d02009957c48">lar_content::NeutrinoIdTool::m_persistFeatures</a></div><div class="ttdeci">bool m_persistFeatures</div><div class="ttdoc">If true, the mva features will be persisted in the metadata. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dae/NeutrinoIdTool_8h_source.html#l00270">NeutrinoIdTool.h:270</a></div></div>
<div class="ttc" id="sbndpoms__genfclwithrunnumber__maker_8sh_html_a19dd16849ed641adb2aff777fdc4bd8b"><div class="ttname"><a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh.html#a19dd16849ed641adb2aff777fdc4bd8b">name</a></div><div class="ttdeci">then echo fcl name</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d30/sbndpoms__genfclwithrunnumber__maker_8sh_source.html#l00220">sbndpoms_genfclwithrunnumber_maker.sh:220</a></div></div>
<div class="ttc" id="pmtsimulation__icarus_8fcl_html_a9fc569190f32b40862f18ac3c03a8e49"><div class="ttname"><a href="../../da/d36/pmtsimulation__icarus_8fcl.html#a9fc569190f32b40862f18ac3c03a8e49">value</a></div><div class="ttdeci">temporary value</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d36/pmtsimulation__icarus_8fcl_source.html#l00158">pmtsimulation_icarus.fcl:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a869d982b8dc5d0fb5b85bae760318b5f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_filePathEnvironmentVariable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The environment variable providing a list of paths to mva files. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00273">273</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac1ca1abb66008ea2f005f5b586bf1d14"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_maxNeutrinos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum number of neutrinos to select in any one event. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00268">268</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="accb73316acbb4ac8548a0221285061db"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_minCompleteness</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum completeness of the best slice to use event for training. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00264">264</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a934b1fd1fdd7f4cc80878d7f0c42703e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_minProbability</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum probability required to classify a slice as the neutrino. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00267">267</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5545f6b3e0e0d208b3dd6dce28a184d8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_minPurity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum purity of the best slice to use event for training. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00263">263</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8a669977b566c1ee2d6691a9d1e8d3aa"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_mva</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The mva. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00272">272</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa8c86ae24fa0fc96faf0aa63adb9f1d6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_nuance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Nuance code to select for training. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00262">262</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa1131e8c75f8627382b1d02009957c48"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_persistFeatures</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, the mva features will be persisted in the metadata. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00270">270</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a420a67ec821476a58247908391f3477e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_selectNuanceCode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should select training events by nuance code. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00261">261</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="af59dfc78eb0396a0734a609f0ce8cd3e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_trainingOutputFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Output file name for training examples. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00260">260</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a35e399a6ed46d693e06fd8dda3a4cdb6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d8/d08/classlar__content_1_1NeutrinoIdTool.html">lar_content::NeutrinoIdTool</a>&lt; T &gt;::m_useTrainingMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should use training mode. If true, training examples will be written to the output file. </p>

<p>Definition at line <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html#l00259">259</a> of file <a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../db/dae/NeutrinoIdTool_8h_source.html">NeutrinoIdTool.h</a></li>
<li><a class="el" href="../../dd/da8/NeutrinoIdTool_8cc_source.html">NeutrinoIdTool.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
